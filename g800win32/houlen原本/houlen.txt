
 ORG 100H

;--------初期化----------

 XOR A
 LD (790DH),A
 LD HL,PLV
 LD DE,LV
 LD BC,34
 LDIR
 LD DE,FLAG
 LD HL,GRD2
 LD C,64
 LDIR
 LD DE,AUTOME
 LD HL,GRD2
 LD C,120
 LDIR

 XOR A
 LD (BF),A
 LD HL,0
 ADD HL,SP
 LD (STACKP+1),HL

;--------OPENING---------

 CALL GROR
 CALL GRO
 LD A,5
 LD DE,GROE1+66
LOOP1:
 LD HL,KAMI
 LD BC,8
 LDIR
 LD HL,136
 ADD HL,DE
 PUSH HL
 POP DE
 DEC A
 JR NZ,LOOP1
 LD DE,GROE6+54
 LD C,36
 LD HL,SHIN
 LDIR
 CALL GRO
 LD A,7
 CALL FLASHN
 LD B,5
 CALL GRD
 LD B,16
 LD DE,0004H
 LD HL,TITL
 CALL 0BFF1H
 LD B,5
 LD DE,020AH
 LD HL,TIT1
 CALL 0BFF1H
 LD B,7
 LD DE,030AH
 LD HL,TIT2
 CALL 0BFF1H
 LD HL,AD1;ONEND
 LD (0F0H),HL
 LD DE,0208H;CURSｲﾁ
 LD (0F2H),DE
 LD BC,0203H
 LD (0F4H),BC;CURSｹﾞﾝｶｲ
 CALL CURP
AD1:CALL 48381
 PUSH AF
 CALL CURD
 POP AF
 PUSH AF
 CALL CURS
 CALL CUR1
 POP AF
 XOR 28H
 JR Z,STR
 JP ONEND
STR:LD DE,(0F2H)
 LD A,D
 XOR 2
 JP Z,OPN

;--------DATA LOAD----------

LOAD:
 LD A,1
 LD (URDL),A
 LD A,(SAVE)
 CP 31
 JP NC,START
 OR A
 JP Z,START
 LD HL,SAVE
 LD DE,LV
 LD BC,33
 LDIR
 LD HL,FSAVE
 LD DE,FLAG
 LD C,64
 LDIR
 LD HL,MSAVE
 LD DE,AUTOME
 LD C,120
 LDIR

;---------START-----------

START:CALL GRPUT1

;-------MAP LOAD--------

MPL:LD A,(FL)
 DEC A
 LD HL,MPD1
 LD DE,64
 CALL XSAN
MPBL:LD (0F0H),HL
 LD DE,SMP+1
 LD A,8
MPBLL:;LOOP
 LD BC,8
 LDIR
 INC DE
 INC DE
 DEC A
 JR NZ,MPBLL
 LD HL,SMP+1
 LD DE,SMP+9
 LD BC,8
LOOP6:PUSH BC
 PUSH DE;+9
 PUSH HL;+1
 PUSH DE;+9
 PUSH HL;+1
 LDI
 POP DE
 DEC DE
 POP HL
 DEC HL
 LDI
 POP HL
 LD DE,10
 ADD HL,DE
 PUSH HL
 POP BC
 POP HL
 LD DE,10
 ADD HL,DE
 EX DE,HL
 PUSH BC
 POP HL
 POP BC
 DEC C
 JR NZ,LOOP6
 LD HL,SMP+9
 LD DE,SMP+89
 LD BC,10
 PUSH BC
 LDDR
 LD HL,SMP+79
 LD DE,SMP-1
 POP BC
 LDDR
MPLB:LD HL,SMP+1
 LD A,(X)
 LD E,A
 LD D,0
 ADD HL,DE
 LD A,(Y)
 INC A
 LD B,A
 DJNZ LOOP7
 JR LOOP7+6
LOOP7:LD DE,10
 ADD HL,DE
 DJNZ LOOP7

;-----MAPMにﾏｯﾌﾟを配置------

 LD A,(URDL)
 CP 2
 JP Z,MR
 JP C,MU
 CP 4
 JP Z,ML
;MD:
 INC HL
 LD DE,MAPM+3
 LD BC,0302H
MDL:LD A,(HL)
 LD (DE),A
 DEC HL
 INC DE
 DJNZ MDL
 PUSH BC
 LD BC,13
 ADD HL,BC
 LD DE,MAPM
 POP BC
 LD B,3
 DEC C
 JR NZ,MDL
 CALL HK
 JR MPP
MU:
 DEC HL
 LD DE,MAPM+3
 LD BC,3
 LDIR
 LD BC,13
 OR A
 SBC HL,BC
 LD DE,MAPM
 LD BC,3
 LDIR
 JR MPP
MR:
 LD BC,10
 OR A
 SBC HL,BC
 LD B,3
 LD DE,MAPM+3
MRL:
 LDI
 DEC DE
 DEC DE
 DEC DE
 DEC DE
 LDI
 INC DE
 INC DE
 INC DE
 PUSH BC
 LD BC,8
 ADD HL,BC
 POP BC
 DJNZ MRL
 CALL HK
 JR MPP
ML:
 LD BC,10
 OR A
 SBC HL,BC
 LD B,3
 LD DE,MAPM+5
MLL:LDD
 DEC DE
 DEC DE
 LDD
 INC DE
 INC DE
 INC DE
 PUSH BC
 LD BC,12
 ADD HL,BC
 POP BC
 DJNZ MLL
 CALL HK

;--------MAP 表示---------

MPP:;MAPL
 LD HL,MPKIOK
 PUSH HL
 LD DE,0110H
 LD B,8
 LD HL,MESW1
 CALL 0BFF1H
 LD DE,0208H
 LD B,6
 LD HL,MESW1+8
 CALL 0BFF1H
 LD DE,0308H
 LD B,7
 LD HL,MESW1+14
 CALL 0BFF1H
 LD DE,0408H
 LD B,6
 LD HL,MESW1+21
 CALL 0BFF1H
MAPL:		;
 XOR A
 LD (0FCH),A
 LD A,(MAPM)
 LD HL,KB1
 BIT 0,A
 CALL NZ,MG1
;DOOR
 LD HL,DOA1
 BIT 4,A
 CALL NZ,MG1
;MAPR		;
 LD A,(MAPM+2)
 LD HL,KB1
 BIT 0,A
 CALL NZ,MG1+10
;DOOR
 LD HL,DOA1
 BIT 4,A
 CALL NZ,MG1+10
;MAPS		;
 LD A,(MAPM+1)
 LD HL,KB1
 BIT 0,A
 CALL NZ,MG1+5
 BIT 1,A
 CALL NZ,MG8
 BIT 3,A
 CALL NZ,MG7
DOOR:
 LD HL,DOA1
 BIT 4,A
 CALL NZ,MG1+5
 LD HL,DOA2R
 BIT 5,A
 CALL NZ,MG8+3
 LD HL,DOA2L
 BIT 7,A
 CALL NZ,MG7+3
MAPVL:
 LD A,(MAPM+3)
 BIT 0,A
 CALL NZ,MG4
;DOOR
 LD HL,DOA3+12
 BIT 4,A
 CALL NZ,MG4+3
MAPVR:
 LD A,(MAPM+5)
 BIT 0,A
 CALL NZ,MG6
;DOOR
 LD HL,DOA3
 BIT 4,A
 CALL NZ,MG6+3
MAPV:
 LD A,(MAPM+4)
 BIT 0,A
 CALL NZ,KBSET
 CALL NZ,MG5
 BIT 1,A
 CALL NZ,MG10
 BIT 3,A
 CALL NZ,MG9
;DOOR
 BIT 4,A
 CALL NZ,KBOFF
 LD HL,DOA3
 CALL NZ,MG5+3
 LD HL,DOA4R
 BIT 5,A
 CALL NZ,MG10+3
 LD HL,DOA4L
 BIT 7,A
 CALL NZ,MG9+3
 RET

;------迷宮ｸﾞﾗﾌｨｯｸ表示-----

MG1:LD DE,0202H
 JR M1
 LD DE,0203H;MG2:
 JR M1
 LD DE,0204H;MG3:
M1:LD B,6
 EX AF,AF'
 CALL 0BFD0H
 EX AF,AF'
 RET
MG4:LD HL,KB3L1
 LD DE,0101H
 LD B,3
M2:
 EX AF,AF'
 PUSH DE;LOOP
 PUSH BC
 LD B,6
 CALL 0BFD0H
 LD BC,13
 ADD HL,BC
 POP BC
 POP DE 
 INC D
 DJNZ M2+1
 EX AF,AF'
 RET
MG5:
 LD HL,KB3R1
 LD DE,0102H
 LD B,3
 EX AF,AF'
 PUSH BC;LOOP
 LD B,18
 LD E,2
 CALL 0BFD0H
 INC HL
 INC D
 POP BC
 DJNZ MG5+9
 EX AF,AF'
 RET
MG6:LD HL,KB3R1
 LD DE,0105H
 LD B,3
 JR M2
MG7:LD HL,KB2L1
 LD DE,0102H
 LD B,3
 JR M3
MG8:LD HL,KB2R1
 LD B,3
 LD DE,0104H
 JR M3
MG9:LD HL,KB4L1
 LD B,4
 LD DE,0101H
 JR M3
MG10:LD HL,KB4R1
 LD B,4
 LD DE,0105H
 JR M3
M3:
 EX AF,AF'
 PUSH DE	;LOOP
 PUSH BC
 LD B,6
 CALL 0BFD0H
 POP BC
 POP DE 
 INC D
 INC HL
 DJNZ M3+1
 EX AF,AF'
 RET

;---------ﾏｯﾌﾟ記憶----------

MPKIOK:
 LD A,(FL)
 DEC A
 LD HL,AUTOME
 LD DE,8
 CALL XSAN
 LD A,(Y)
 LD DE,1
 CALL XSAN
 LD DE,IVSBIG
 PUSH DE
 LD A,(X)
 OR A
 JR Z,MPON0
 DEC A
 JR Z,MPON1
 DEC A
 JR Z,MPON2
 DEC A
 JR Z,MPON3
 DEC A
 JR Z,MPON4
 DEC A
 JR Z,MPON5
 DEC A
 JR Z,MPON6
MPON7:
 SET 0,(HL)
 RET
MPON6:
 SET 1,(HL)
 RET
MPON5:
 SET 2,(HL)
 RET
MPON4:
 SET 3,(HL)
 RET
MPON3:
 SET 4,(HL)
 RET
MPON2:
 SET 5,(HL)
 RET
MPON1:
 SET 6,(HL)
 RET
MPON0:
 SET 7,(HL)
 RET

;---------壁ぶつかる------

KBA:
 LD DE,0202H
 LD B,3
 LD HL,KBSET-3
 CALL 0BFF1H
 CALL BEPDRC
 CALL TIM30
 JP MRET
 DB "ｲﾃ!"

;-------壁認識----------

KBSET:
 EX AF,AF'
 LD A,0FFH
 LD (0F0H),A
 EX AF,AF'
 RET

;-------壁無し認識------

KBOFF:
 EX AF,AF'
 XOR A
 LD (0F0H),A
 DEC A
 LD (0FCH),A
 EX AF,AF'
 RET

;---------ドク------------

DOKD:
 LD A,1
 CALL FLASHN
 LD A,(HP)
 SUB 2
 POP HL
 JP Z,AOVER
 JP C,AOVER
 PUSH HL
 LD (HP),A
 RET

;--------ｲﾍﾞﾝﾄｻｰﾁ---------

IVSBIG:
 LD HL,IVENT
 LD B,0FFH
 LD A,(FL)
 DEC A
 JR Z,INSST
 LD D,A
 LD A,0FFH
INS:
 CPIR
 DEC D
 JR NZ,INS

;--------SARCH----------

INSST:
 LD A,(HL)
 AND 11110000B
 RRCA
 RRCA
 RRCA
 RRCA
 LD E,A
 LD A,(X)
 XOR E
 JR NZ,INSEDF
 LD A,(HL)
 AND 00001111B
 LD E,A
 LD A,(Y)
 XOR E
 JR NZ,INSEDF
 INC HL
 LD A,(HL);IV NO.ﾀﾞｲﾆｭｳ
 DEC A
 INC HL
 PUSH HL
 LD L,A
 LD H,0
 ADD HL,HL
 LD DE,STABLE
 ADD HL,DE
 LD E,(HL)
 INC HL
 LD D,(HL)
 EX DE,HL
 JP (HL)
RETSAC:
 POP HL
 LD A,0FFH
 CPI
 JP Z,BTIN
 DEC HL
 JR INSST
INSEDF:
 INC HL
 INC HL
 LD A,0FFH
 CPI
 JP Z,BTIN	;MALP
 DEC HL
 JR INSST
STABLE:
 DW IV1,IV2,IV3,IV4,IV5,IV6,IV7,IV8
 DW IV9,IVA,IVB,IVC,IVD,IVE,IVF
 DW IV10,IV11,IV12,IV13,IV14,IV15,IV16,IV17
 DW IV18,IV19,IV1A,IV1B,IV1C,IV1D,IV1E,IV1F
 DW IV20,IV21,IV22,IV23,IV24,IV25,IV26,IV27
 DW IV28,IV29,IV2A,IV2B,IV2C,IV2D,IV2E,IV2F
 DW IV30,IV31,IV32,IV33,IV34,IV35,IV36,IV37
 DW IV38,IV39,IV3A,IV3B,IV3C,IV3D,IV3E,IV3F
 DW IV40,IV41,IV42,IV43,IV44,IV45,IV46,IV47
 DW IV48,IV49,IV4A,IV4B,IV4C,IV4D,IV4E,IV4F
 DW IV50,IV51,IV52,IV53,IV54,IV55,IV56,IV57
 DW IV58,IV59,IV5A,IV5B,IV5C,IV5D,IV5E,IV5F
 DW IV60,IV61,IV62,IV63,IV64,IV65;,IV66,IV67
; DW IV68,IV69,IV6A,IV6B,IV6C,IV6D,IV6E,IV6F
; DW IV70,IV71,IV72,IV73,IV74,IV75,IV76,IV77
; DW IV78,IV79,IV7A,IV7B,IV7C,IV7D,IV7E,IV7F
; DW IV80,IV81,IV82,IV83,IV84,IV85,IV86,IV87
; DW IV88,IV89,IV8A,IV8B,IV8C,IV8D,IV8E,IV8F
; DW IV90,IV91,IV92,IV93,IV94,IV95,IV96,IV97
; DW IV98,IV99,IV9A,IV9B,IV9C,IV9D,IV9E,IV9F
; DW IVA0,IVA1,IVA2,IVA3,IVA4,IVA5,IVA6,IVA7
; DW IVA8,IVA9,IVAA,IVAB,IVAC,IVAD,IVAE,IVAF
; DW IVB0,IVB1,IVB2,IVB3,IVB4,IVB5,IVB6,IVB7
; DW IVB8,IVB9,IVBA,IVBB,IVBC,IVBD,IVBE,IVBF
; DW IVC0,IVC1,IVC2,IVC3,IVC4,IVC5,IVC6,IVC7
; DW IVC8,IVC9,IVCA,IVCB,IVCC,IVCD,IVCE,IVCF
; DW IVD0,IVD1,IVD2,IVD3,IVD4,IVD5,IVD6,IVD7
; DW IVD8,IVD9,IVDA,IVDB,IVDC,IVDD,IVDE,IVDF
; DW IVE0,IVE1,IVE2,IVE3,IVE4,IVE5,IVE6,IVE7
; DW IVE8,IVE9,IVEA,IVEB,IVEC,IVED,IVEE,IVEF
; DW IVF0,IVF1,IVF2,IVF3,IVF4,IVF5,IVF6,IVF7
; DW IVF8,IVF9,IVFA,IVFB,IVFC,IVFD,IVFE,IVFF

;------ﾊﾞﾄﾙ割り込み------
BTINM:
 DB "ｵｺｳﾉｺｳ","ｶｶﾞｷﾚﾀ"
BTIN:
 ld A,(flag+3bh)
 rla
 jr c,MALP	;d
 LD A,(0D8H)	;d
 CP 54H		;d
 Jr Z,MALP	;d
 LD A,(0F8H)
 CP 54H
 JR Z,BTS
 LD A,(FLAG+28H)
 OR A
 JR Z,BTINL
 DEC A
 LD (FLAG+28H),A
 JR NZ,BTS
 LD HL,BTINM
 LD C,12
 CALL MSO2
BTINL:
 CALL RAND
 CP 29
 JP C,BATTLE
BTS:
 XOR A
 LD (0F8H),A

;--------行動選択---------

MALP:
 CALL 48381
 LD DE,MESWD
 LD BC,6
 LD HL,GRD2
 LDIR		;INSPﾖｳ
STACKP:
 LD SP,0
 LD (MALPL2-1),A
 LD A,(ST)
 OR A
 CALL NZ,DOKD
 LD HL,STF
 XOR A
 LD (HL),A
 INC HL
 LD (HL),A
 LD A,0
MALPL2:
 CP 17H		;M:MANU
 JR Z,MANU
 CP 31H		;I:INSP
 JP Z,INSP
 CP 0BH		;D:DATA
 JP Z,DATA
 CP 05H		;R:READ
 JP Z,READ
 EX AF,AF'
 LD A,128
 LD HL,BLKWI1-1
 AND (HL)
 LD (HL),A
 EX AF,AF'
 CP 1FH
 JP Z,MDOWN
 CP 20H
 JP Z,MUP
 CP 21H
 JP Z,MLEFT
 CP 22H
 JP Z,MRIGHT
 CP 51H;ON
 RET Z
 LD A,54H
 LD (0F8H),A
 JP MRET	; JR MALP

;---------Mボタン---------

MANU:
 LD HL,DATMS1+24
 LD C,24
 CALL MSOP
MANMIN:
 CALL CURSOL
MANMIS:
 LD A,(0F3H)
 CP 1
 CALL Z,MANITM
 CP 2
 JP Z,MANSTS
 CP 3
 JP Z,MANMAG
 JP MRET;JR MRET
BUYSEL:
 LD A,54H
 JR MANITM+1
MANITM:;Cx=ｲﾍﾞﾝﾄｱｲﾃﾑ 8x=ｸｽﾘ 4x=ﾖﾛｲ 2x=ﾀﾃ 1x=ｹﾝ	;BTITEM兼用
 XOR A
 LD (0F7H),A
 LD DE,2C03H
 LD (0F2H),DE
 XOR A
 LD (0F6H),A
 LD DE,3403H
 LD B,11
 LD HL,ITEM
LOOP8:
 PUSH HL
 PUSH BC
 LD A,(HL);LOOP
 RLA
 JR C,ITEPRI
 RLA
 JR C,ARMPRI
 RLA
 JR C,SHIPRI
 RLA
 JR C,SWOPRI
NOTPRI:
 LD HL,GRD2
 JR ARMPRI+3
ITRETP:
 POP BC
 POP HL
 INC HL
 DJNZ LOOP8
ITEMPE:
 CALL GRO
 JP ITEMUS
ARMPRI:
 LD HL,ICOM+16
 LD B,8
 PUSH DE
 CALL GRP
 POP DE
 LD A,E
 LD E,12
 ADD A,E
 LD E,A
 LD A,(0F6H)
 INC A
 LD (0F6H),A
 CP 4
 JR NZ,ITRETP
 LD E,3
 LD A,D
 LD D,18
 ADD A,D
 LD D,A
 XOR A
 LD (0F6H),A
 JR ITRETP
SHIPRI:
 LD HL,ICOM+8
 JR ARMPRI+3
SWOPRI:
 LD HL,ICOM
 JR ARMPRI+3
DRAPRI:
 LD HL,ICOM+24
 JR ARMPRI+3
ITEPRI:
 RLA
 JR NC,DRAPRI
 LD HL,ICOM+32
 JR ARMPRI+3
ITEMUS:
 LD HL,ICOM+40
 LD B,11
 LD DE,5727H
 CALL GRP
 XOR A
 CALL CURS2
 XOR A
 JR ITK
ITLP1:
 CALL 48381
 CALL BEPMSC
 PUSH AF
 CALL CURD2
 POP AF
 PUSH AF
 CALL CURS2
 POP AF
ITK:
 PUSH AF
 LD E,0
 LD BC,(0F2H)
 LD A,C
 CP 3
 JR Z,ITKE
 INC E
 CP 15
 JR Z,ITKE
 INC E
 CP 27
 JR Z,ITKE
 INC E
ITKE:
 LD A,B
 CP 2CH
 JR Z,ITKE2
 INC E
 INC E
 INC E
 INC E
 CP 3EH
 JR Z,ITKE2
 INC E
 INC E
 INC E
 INC E
ITKE2:
 LD HL,ITEM
 LD D,0
 ADD HL,DE
 POP AF
 CP 28H
 JP Z,ITMUSE	;HL OK
 LD A,(HL)
 PUSH AF
 RLA
 JR C,ITMESP
 RLA
 JR C,ARMESP
 RLA
 JR C,SHMESP
 RLA
 JR C,SWMESP
 POP AF
 CALL MSD
 JP ITLP1
ITMESP:
 RLA
 JR C,IVMESP
 LD HL,ITLIST
ITP2:
 POP AF
 AND 0FH
 DEC A
 LD DE,8
 CALL XSAN
 LD C,8
 CALL MSOP
 JP ITLP1
IVMESP:
 LD HL,IVITLS
 JR ITP2
ARMESP:
 LD HL,ARMOR
 JR ITP2
SHMESP:
 LD HL,SHIELD
 JR ITP2
SWMESP:
 LD HL,SWORD
 JR ITP2
ITMUSE:
 PUSH HL
 POP BC
 LD A,(0F7H)
 CP 54H
 RET Z		;戻り値BC,HLでｼｮｯﾌﾟへﾘﾀｰﾝ
 LD A,(HL)
 PUSH AF
 RLA
 JR C,ITUSE
 RLA
 JR C,ARUSE
 RLA
 JR C,SHUSE
 RLA
 JR C,SWUSE
 POP AF
 CP 0FH
 JP NZ,ITLP1
 CALL GRPUT1
 LD A,54H
 LD (0F8H),A
 XOR A
 RET
ITUSE:
 RLA
 JR C,IVUSE
 LD HL,ITACT
 JR ITEML1
IVUSE:
 LD HL,IVACT
 JR ITEML1
ARUSE:
 LD HL,ARACT
 JR ITEML1
SHUSE:
 LD HL,SHACT
 JR ITEML1
SWUSE:
 LD HL,SWACT
ITEML1:
 POP AF
 DEC A
 AND 0FH
 RLCA
 LD D,0
 LD E,A
 ADD HL,DE
 LD E,(HL)
 INC HL
 LD D,(HL)
 EX DE,HL
 JP (HL)
ITACT:
 DW IT1,IT2,IT3,IT4,IT5,IT6
IVACT:
 DW TV1,TV2,TV3,TV4,TV5,TV6,TV7,TV8,TV9,TVA,TVB,TVC,TVD,TVE,TVF
ARACT:
 DW AR1,AR2,AR3,AR4,AR5,AR6
SHACT:
 DW SH1,SH2,SH3,SH4,SH5,SH6
SWACT:
 DW SW1,SW2,SW3,SW4,SW5,SW6		;BC=格納アドレス
IT1:;ｷｽﾞｸﾞｽﾘ
 LD E,80
 JR IT2+2
IT2:;ｺﾅｸﾞｽﾘ
 LD E,255
 XOR A
 LD (BC),A
 LD A,(HP)
 ADD A,E
 JR C,IT2L1
 LD DE,(MHP)
 CP E
 JR C,IT2L1+3
IT2L1:
 LD A,(MHP)
 LD (HP),A
 LD HL,HPUPMS
 LD C,12
 CALL MSO
 JP ITMEND
IT3:
 XOR A
 LD (ST),A
 PUSH BC
 LD HL,HPMPUM
 LD C,12
 CALL MSO
 LD HL,MHP
 LD A,(HL)
 DEC HL
 LD (HL),A
 INC HL
 INC HL
 INC HL
MPUP:
 LD A,(HL)
 DEC HL
 LD (HL),A
 POP BC
 XOR A
 LD (BC),A
 JP ITMEND
IT4:
 PUSH BC
 LD HL,MPUPMS
 LD C,12
 CALL MSO
 LD HL,MMP
 JR MPUP
IT5:
 XOR A
 LD (ST),A
 LD (BC),A
 LD HL,STUPMS
 LD C,12
 CALL MSO
 JP ITMEND
IT6:
 XOR A
 LD (BC),A
 LD A,127
 LD (FLAG+28H),A
 LD HL,IT6M
 LD C,12
 CALL MSO
 JP ITMEND
IT6M:
 DB "ﾏﾓﾉｶﾞ ","ｲﾅｸﾅｯﾀ"
TV1:
 LD A,(FL)
 CP 3
 JR NZ,TVEND
 LD HL,(X)
 LD A,L
 CP 6		;
 JR NZ,TVEND
 LD A,H
 CP 1		;
 JR NZ,TVEND
 PUSH BC
 LD HL,TV1M
 LD C,24
 CALL MSO2
 LD A,80H
 LD (FLAG+2),A
 XOR A
 POP BC
 LD (BC),A
 JP ITMEND
TVEND:
 LD HL,YAMEYO
 LD C,24
 NOP
 CALL MSO2
 CALL GRPUT1
 SCF
 RET
TV1M:
 DB "ﾀﾏﾊ   ","ｽｯﾄﾊｲﾘ","ﾄｵｸﾃﾞ ","ｵﾄｶﾞｼﾀ" 
TV2:						;ﾁｶﾗﾉｵｰﾌﾞ
 LD HL,RIDNG		;EX1
 LD DE,TV2MS		;EX2
 LD A,06		;EX3	MS LOOP
 EXX
 LD BC,040BH		;B=FL C=FLAG
 LD DE,0501H		;D=X E=Y
TV2LJ:
 EXX
 LD (TV2EX1+1),HL
 LD (TV2EX2+1),DE
 LD (TV2EX3+2),A
 LD HL,GOTP+2
 LD (HL),C
 INC HL
 LD (HL),B
 EXX
 CALL I2345C
 CALL GRPUT2
TV2EX1:
 LD HL,0000		;ライディーンの画像
 CALL OPNG2
TV2EX2:
 LD HL,0000;TV2MS
TV2EX3:
 LD BC,00FFH;07FFH
 CALL MSOBR
 LD A,0AH
 CALL FLASHN
 LD HL,TV2MS2
 LD C,6
 CALL MSOBP
GOTP:			;LV 2 UP
 XOR A
 LD (0000H),A
 LD HL,I345M3
 LD C,24
 CALL MSOB
 LD HL,EXPCT
 LD A,(LV)
 LD DE,2
 CALL XSAN
 LD E,(HL)
 INC HL
 LD D,(HL)
 EX DE,HL
 LD (EXP),HL
 CALL EXPC
 CALL GRPUT1
 RET
TV2MS:
 DB "ﾖｸｿﾞﾜﾚ","ﾉﾌｳｲﾝｦ","ﾄｲﾃｸﾚﾀ",0F9H
 DB "ﾜﾀｼﾊ  ","ﾁｶﾗﾉｶﾐ","ｱｼｭﾗｽ ",0F9H
 DB "ﾅﾆﾓﾉｶｶ","ﾞｺﾉｸﾆﾉ","ｶﾐｶﾞﾐｦ","ﾌｳｲﾝｼ､",0F9H
 DB "ｾｶｲﾉ  ","ﾁｮｳﾜｦ ","ﾐﾀﾞｼﾀ ",0F9H
 DB "ｹﾞﾝｲﾝﾊ","ｾﾝﾈﾝﾏｴ","ﾆｱﾙ   ",0F9H
 DB "ｿﾚｦｼｯﾀ","ﾄｷ､ﾔﾂｦ","ﾀｵｾﾙﾀﾞ","ﾛｳ    ",0F9H
TV3MS:
 DB "ｱﾚｽﾖ､ ","ｱﾘｶﾞﾄｳ",0F9H
 DB "ﾜﾀｼﾊ  ","ｺｺﾛﾉｶﾐ","ﾏﾃｨﾅ  ",0F9H
 DB "ｶﾚﾉｼｮｳ","ﾀｲﾊﾜﾀｼ","ﾀﾁﾆﾓ  ","ﾜｶﾗﾅｲ ",0F9H
 DB "ｱﾚｽ､ｶﾂ","ﾃﾉﾕｳｼｬ","ﾆｱｳﾉﾀﾞ",0F9H
 DB "ﾄﾞｳﾔﾗ ","ｶﾚﾊｷﾐﾆ",0F9H
 DB "ﾀｲｾﾂﾅ ","ｺﾄｦﾊﾅｼ","ﾀｲﾗｼｲ ",0F9H
 DB "ﾁﾅﾐﾆｺﾉ","ｼﾝﾃﾞﾝﾊ","15ｶｲｱﾙ","ｶﾞﾝﾊﾞﾚ",0F9H
TV5MS:
 DB "ﾌｳｲﾝｦ ","ﾄｲﾃｸﾚﾃ","ｱﾘｶﾞﾄｳ",0F9H
 DB "ﾜﾀｼﾊ  ","ｲﾉﾁﾉｶﾐ","ｱﾅﾝ   ",0F9H
 DB "ﾅﾆﾓﾉｶﾉ","ﾂﾖｲｲｼｶ","ﾞﾊﾀﾗｲﾃ",0F9H
 DB "ﾌﾀﾀﾋﾞ ","ｾﾝｴﾝﾏｴ","ﾉﾃﾞｷｺﾞ","ﾄｶﾞ､  ",0F9H
 DB "ｸﾘｶｴｻﾚ","ﾖｳﾄｼﾃ ","ｲﾏｽ   ",0F9H
 DB "ｿﾉﾄｷﾉ ","ｷｵｸﾓ ､",0F9H
 DB "ｿﾉﾓﾉﾆ ","ﾌｳｲﾝｻﾚ","ﾀﾖｳﾃﾞｽ",0F9H
 DB "ｺﾉｼﾝﾃﾞ","ﾝﾉﾄﾞｺｶ","ﾆｺﾉｸﾆﾉ",0F9H
 DB "ﾚｷｼｦｼﾙ","ｼﾀﾎﾝｶﾞ","ｱﾙﾊｽﾞ ",0F9H
 DB "ｽﾍﾞﾃﾃﾆ","ｼﾀﾄｷ､ﾅ","ｿﾞﾊﾄｹﾙ","ﾃﾞｼｮｳ ",0F9H
TV2MS2:
 DB "ｶﾐ    "
I345M3:
 DB "ﾉﾌｳｲﾝ ","ｶﾞﾄｹﾃ､","ｱﾚｽﾊ  ","ﾂﾖｸﾅｯﾀ",0F9H
TV3:						;ｺｺﾛﾉｵｰﾌﾞ
 LD HL,KOKORG		;EX1
 LD DE,TV3MS		;EX2
 LD A,07		;EX3	MS LOOP
 EXX
 LD BC,0A21H		;B=FL C=FLAG
 LD DE,0100H		;D=X E=Y
 JP TV2LJ
TV4:;ﾋｶﾘﾉﾀﾏ
 ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
TV5:						;ｲﾉﾁﾉｵｰﾌﾞ
 LD HL,HARTG		;EX1
 LD DE,TV5MS		;EX2
 LD A,0AH		;EX3	MS LOOP
 EXX
 LD BC,0612H		;B=FL C=FLAG
 LD DE,0605H		;D=X E=Y
 JP TV2LJ
TV5L:
 LD HL,I2345M
 LD C,18
 JP TVEND+5
I2345C:
 POP IX
 LD A,(FL)
 LD HL,(X)
 CP B
 JR NZ,TV5L
 LD A,L		;X
 CP D
 JR NZ,TV5L
 LD A,H		;Y
 CP E
 JR NZ,TV5L
 PUSH IX
 LD HL,FLAG
 LD B,0
 ADD HL,BC
 SET 7,(HL)
 LD A,7
 CALL FLASH
 LD HL,I345M2
 LD BC,02FFH
 CALL MSOBR
 RET
I2345M:
 DB "ﾀﾏﾊｱﾜｲ","ﾋｶﾘｦ  ","ﾊｯｼﾃｲﾙ"
I345M2:
 DB "ﾀﾏｶﾗ  ","ﾊｹﾞｼｲ ","ﾋｶﾘｶﾞ ","ﾌｷﾀﾞｼ､",0F9H
 DB "ｵｵｷﾅ  ","ｽｶﾞﾀｶﾞ","ｱﾗﾜﾚﾀ!",0F9H
TV6:;	ﾘﾀﾝｽﾄｰﾝ
 LD A,(BF)
 RLA
 JP C,MGEND
 LD A,(FLAG+0FH)	;INPUT
 OR A
 JR NZ,RETJMP
 LD A,(FL)
 LD (FLAG+0FH),A
 LD HL,(X)
 LD D,L
 LD E,H
 EX DE,HL
 LD (RETJMP+1),HL
 LD HL,TV6M1
 LD C,18
 JP TVEND+5
RETJMP:
 LD DE,0	;INPUT
 LD A,(FLAG+0FH)
 LD (FL),A
 XOR A
 LD (FLAG+0FH),A
 JP WARPSL
TV6M1:
 DB "ｲﾏﾉ   ","ﾊﾞｼｮｦ ","ｷｵｸｼﾀ!"
TV7:;	ｷﾞﾝﾉｶﾀﾏﾘ
 JP TVEND
TV8:;	ﾌｳｲﾝﾉｶｷﾞ
 JR TV7
TV9:;	ｱﾐｭﾚｯﾄ
 ld DE,flag+37h
 ld A,(FL)
 cp 15
 jr nz,TV7
 ld HL,(X)
 ld A,7
 cp L
 jr nz,TV7
 cp H
 jr z,TV9b
 xor A
 cp (HL)
 jr nz,TV7
 jr TV9a
TV9b:
 inc DE
TV9a
 ld A,80h
 ld (DE),A
 XOR A
 LD (BC),A
 ld A,3
 call flash
 ld HL,TV9m
 ld C,24
 call MSOB
 ld HL,flag+37h
 xor A
 cp (HL)
 jr z,TV9d
 inc HL
 cp (HL)
 jr z,TV9d
 dec HL
 dec HL
 ld (HL),80h
 call BEPBKC
 ld HL,IV18M+24
 ld C,18
 call MSOB
TV9d:
 CALL GRPUT1
 RET
TV9m:
 db "ｱﾐｭﾚｯﾄ","ﾊﾒｶﾞﾐｿ","ﾞｳﾉﾅｶﾆ","ｽｲｺﾏﾚﾀ"
TVA:;	ﾌｧﾙﾉｼｮ
 LD HL,FALBOK
BOOKL:
 LD B,4
 CALL MSOBR
 JP TVEND+9
TVB:;	ｳｨﾙﾉｼｮ
 LD HL,WILBOK
 JR BOOKL
TVC:;	ﾏﾎｳﾉﾗﾝﾌﾟ
 LD A,(DZF)
 RLA
 JR NC,TV7
 XOR A
 LD (BC),A
 LD A,5
 CALL FLASH
 LD HL,TVCM
 LD C,15
 CALL MSO2
 LD A,80H
 LD (FLAG+2AH),A
 JP TVEND+9
TVCM:
 DB "ｶﾍﾞﾆ  ","ﾗﾝﾌﾟｦ ","ｶｹﾀ"
TVD:;	ﾊｳﾚﾝﾉｼｮ
 LD HL,kngBOK
 JR BOOKL
TVE:;	ﾕｳｼｬﾉｼｮ
 LD HL,hirBOK
 JR BOOKL
TVF:;ｺﾝﾊﾟｽ
 Jp TV7
FALBOK:
 DB "ｾｲｼﾞｬｸ","ﾅﾋﾋﾞﾆ ","ﾄﾂｾﾞﾝ ",0F9H
 DB "ﾊｹﾞｼｲ ","ﾋｶﾘｶﾞ ","ｼﾝﾃﾞﾝﾆ","ﾌﾘｿｿｷﾞ",0F9H
 DB "ｿﾉﾅｶｶﾗ","ﾏﾓﾉｶﾞ ","ｱﾗﾜﾚﾀ ",0F9H
 DB "ﾊｳﾚﾝｺｸ","ﾊｷｮｳﾌﾆ","ﾂﾂﾏﾚﾀ ",0F9H
WILBOK:
 DB "ｵｳｻﾏﾊ ","ｼﾝﾃﾞﾝﾆ","ｾﾝｼｦ  ","ｵｸｯﾀｶﾞ",0F9H
 DB "ﾏｯﾀｸﾊ ","ｶﾞﾀﾀﾅｲ",0F9H
 DB "ﾏﾓﾉﾉﾑﾚ","ﾊｶｽﾞｦ ","ﾌﾔｼ､  ",0F9H
 DB "ｾｶｲｶﾞ ","ﾊﾒﾂﾉｷｷ","ﾆﾌﾝｼﾀ ",0F9H
kngbok:
 db "ﾜﾀｼﾊ  ","ﾏﾓﾉｦﾖﾝ","ﾃﾞｲﾙﾓﾉ","ｶﾞｲﾙﾄ ","ｻﾄｯﾀ  ",0f9h
 db "ｺﾉｸﾆﾉﾀ","ﾐﾉｼﾜｻﾞ","ﾃﾞｱﾙﾄﾓ","ﾊﾝﾒｲｼﾀ",0f9h
 db "ﾕｳｼｬﾆ ","ｾｲﾅﾙｹﾝ","ｦﾂｶﾜｾﾃ",0f9h
 db "ｸﾛﾏｸﾉ ","ﾄｳﾊﾞﾂｦ","ｲﾗｲｼﾀ ",0f9h
hirbok:
 db "ｱｻﾋｶﾞﾉ","ﾎﾞﾛｳｳﾄ","ｽﾙｺﾛ､ ",0f9h
 db "ﾖｳﾔｸﾃｷ","ｦｳﾂｺﾄ ","ｶﾞﾃﾞｷﾀ",0f9h
 db "ｼｶｼﾔﾂﾉ","ｼﾞｬｱｸﾅ","ﾀﾏｼｲｦ ","ｹｽｺﾄﾊﾃ","ﾞｷﾅｶｯﾀ",0f9h
 db "ｺﾉﾌｳｲﾝ","ﾊﾓｯﾃｾﾝ","ﾈﾝﾎﾄﾞ･","ﾑﾈﾝ!  ",0f9h

AR1:
 LD E,5
DFEX:
 LD HL,EA
 JR DFL1+3
DFL1:
 LD HL,ET
 LD A,(EDP)
 ADD A,E
 LD E,A		;E=上乗せしたやつ
 LD A,(HL)	;A=装備してるNO.
 DEC A
 PUSH HL
 LD HL,EQDP+6
 BIT 5,A
 CALL NZ,SHIEX
 AND 0FH
 ADD A,L
 JR NC,DFL2
 INC H
DFL2:
 LD L,A
 LD A,(HL)
 LD D,A
 LD A,E
 SUB D		;上乗せ-今の装備の分
 LD (EDP),A
 LD (NDP),A
 LD A,(BC)
 LD E,A
 POP HL
 LD A,(HL)
 LD (BC),A
 LD A,E
 LD (HL),A
 JR EQMS2
SHIEX:
 LD HL,EQDP
 RET
AR2:
 LD E,15
 JR DFEX
AR3:
 LD E,35
 JR DFEX
AR4:
 LD E,50
 JR DFEX
AR5:
 LD E,98
 JR DFEX
AR6:
 LD E,0
 JR DFEX
SH1:
 LD E,5
 JR DFL1
SH2:
 LD E,25
 JR DFL1
SH3:
 LD E,35
 JR DFL1
SH4:
 LD E,60
 JR DFL1
SH5:
 LD E,70
 JR DFL1
SH6:
 LD E,0
 JR DFL1
SW1:
 LD E,10
SWEX:
 LD A,(AP)
 ADD A,E
 LD (EAP),A
 LD (NAP),A
 LD A,(BC)
 LD E,A
 LD A,(ES)
 LD (BC),A
 LD A,E
 LD (ES),A
EQMS2:
 LD HL,EQMES
 LD C,6
 CALL MSO
 POP HL
 LD A,(0F7H)
 CP 45H
 JR Z,BATACB
 PUSH HL
 JP ITMEND
SW2:
 LD E,35
 JR SWEX
SW3:
 LD E,60
 JR SWEX
SW4:
 LD E,105
 JR SWEX
SW5:
 LD E,139
 JR SWEX
SW6:
 LD E,0
 JR SWEX
ITMEND:
 CALL GRPUT1
 LD A,2		;STATUS
 SCF		;BATTLE
 RET
BATACB:
 CALL BTACT1
 JP BATACK
EQDP:
 DB 5,25,35,60,70,0
 DB 5,15,35,50,98,0
HPUPMS:
 DB "ﾀｲﾘｮｸ ","ｶｲﾌｸ! "
HPMPUM:
 DB "ｾﾞﾝ   ","ｶｲﾌｸ!!"
MPUPMS:
 DB "ﾏﾘｮｸ  ","ｶｲﾌｸ! "
STUPMS:
 DB "ｽﾃｰﾀｽ ","ｶｲﾌｸ! "
EQMES:
 DB "ｿｳﾋﾞ! "

MANSTS:
 LD HL,STRETP
 PUSH HL
 OR A
BTCMST:
 PUSH AF
 CALL GRO
 POP AF
 JR C,MANST1
 CALL MPP+4
MANST1:
 LD HL,(HP)
 LD H,0
 CALL ASCN
 LD HL,NMEMRY+2
 LD DE,MANSTM+7
 PUSH HL
 LDI
 LDI
 LDI
 INC DE
 PUSH DE
 LD HL,(MHP)
 LD H,0
 CALL MANSTC
 POP DE
 LD HL,6
 ADD HL,DE
 EX DE,HL
 PUSH DE
 LD HL,(MP)
 LD H,0
 CALL MANSTC
 LD HL,(MMP)
 LD H,0
 CALL MANSTC
 POP DE
 POP HL
 LD HL,NMEMRY
 PUSH HL
 INC DE
 PUSH DE
 LD HL,(G)
 CALL MANSTC
 POP DE
 DEC DE
 LDI
 LDI
 INC DE
 INC DE
 PUSH DE
 LD HL,(EXP)
 CALL MANSTC
 POP DE
 DEC DE
 LDI
 LDI
 POP HL
 LD HL,(LV)
 LD H,0
 CALL ASCN
 LD DE,MANSTM+45
 LD HL,NMEMRY+2
 PUSH HL
 LDI
 LDI
 LDI
 INC DE
 INC DE
 INC DE
 PUSH DE
 LD HL,(EAP)
 LD H,0
 CALL MANSTC
 POP DE
 INC DE
 INC DE
 PUSH DE
 LD HL,(EDP)
 LD H,0
 CALL MANSTC
 POP HL
 POP HL
 LD HL,MANSTM+66
 LD A,(ST)
 LD DE,6
 CALL XSAN
 LD DE,MANSTM+60
 LD BC,6
 LDIR
 LD B,6
 LD D,0
 LD HL,MANSTM
STP1L:
 PUSH BC
 LD B,7
 LD E,8
 CALL 0BFF1H
 INC HL
 INC D
 POP BC
 DJNZ STP1L
 SCF
 RET
STRETP:
 LD HL,MANSTM+42
 LD C,24
 CALL MSOP
 CALL 48381
 CALL GRO2
 JP DATASV-8;JR MRET

MANSTM:
 DB "HP:    "
 DB "   /   "
 DB "MP:    "
 DB "   /   "
 DB "G:     "
 DB "E:     "
;+42
 DB "LV:   "
 DB "AP:   "
 DB "DP:   "
 DB "      "
;+70
 DB "ｾｲｼﾞｮｳ","ﾄﾞｸ   ","ﾔﾊﾞｲ! "
MANSTC:
 EXX
 POP DE
 EXX
 CALL ASCN
 POP DE
 POP HL
 PUSH HL
 LDI
 LDI
 LDI
 INC DE
 PUSH DE
 EXX
 PUSH DE
 EXX
 RET

; DB " ﾎﾞｳ ";DAM	LV 0	MP:3
; DB " ﾚｽﾀ ";HPUP	LV 5	MP:4
; DB " ﾊﾞﾙﾑ";DPUP	LV 10	MP:8
; DB " ﾀﾞｽﾀ";APUP ｲﾁｼﾞ	LV 15	MP:15
; DB " ﾚｽﾄｱ";HPUPP	LV 20	MP:10
; DB " LOST";KILL ZAKI	LV 25	MP:20
; DB " ｽﾙｰ ";FLDOWN	LV 30	MP:0
MANMGB:	;BATTLE CALL ｻﾚﾙ
 LD HL,BTMAGE
 PUSH HL
 JR MANML1
MANMAG:
 LD HL,DATASV-8
 PUSH HL
 LD HL,MAGAD
 PUSH HL
MANML1:
 CALL FREECL
 LD HL,MAGICL
 LD DE,FREE2
 LD A,(MG)
MAGRP1:
 RRA
 JR C,MAGP1
 LD HL,DATMS1+42
 LD DE,FREE2+42
 LD BC,6
 LDIR
 LD A,(MG)		;
 BIT 6,A		;
 JR Z,MAGLB1		;
 LD HL,MAGICL+30	;
 LD DE,FREE2+36		;
 LD BC,5		;
 LDIR			;
MAGLB1:			;
 XOR A
 LD (0FFH),A
 INC A
 LD (0F3H),A
 LD HL,FREE2
PAGECE:
 LD C,24
 CALL MSOP
 CALL CURP
MGCURS:
 CALL 48381;LOOP
 CALL BEPMSC
 CP 21H
 JR Z,MGPAGE
 CP 22H
 JR Z,MGPAGE
 CP 28H
 JR Z,MAGMIS
 PUSH AF
 CALL CURD
 POP AF
 CALL CURS
 CALL CUR2
 JR MGCURS
MAGP1:
 PUSH AF
 LD BC,5
 LDIR
 INC DE
 POP AF
 JR MAGRP1
MGPAGE:
 LD A,(0FFH)
 CPL
 AND 00000001B
 LD (0FFH),A
 JP PO,MGPA
 LD HL,FREE2
 JR PAGECE
MGPA:
 LD HL,FREE2+24
 JR PAGECE
MAGMIS:
 LD A,(0F3H)
 LD C,A
 LD A,(0FFH)
 OR A
 JR Z,MAGM1
 LD A,4
MAGM1:
 ADD A,C
 LD B,A
 LD C,A
 LD A,(MG)
MAGML1:
 RRA
 DJNZ MAGML1
 LD A,C
 RET C
 POP AF
 OR A	;BATTLE	NCﾃﾞﾅﾆﾓｼﾅｲ
 RET
BTMAGE;MANMGB:	;BATTLE
 CP 2
 JP C,BTBOH
 JP Z,BTREST
 CP 4
 JP C,BTBALM
 JP Z,BTDAST
 CP 6
 JP C,BTRSTE
 JP Z,BTLOST
 JP THRU
MAGAD:
 CP 2
 JP C,BOH
 JR Z,REST
 CP 4
 JR C,BALM
 JR Z,DAST
 CP 6
 JR C,RSTE
 JR Z,LOST
 JR THRU
LOST:;SATD
 LD HL,MAGICL+25
 CALL MGMC
MGEND:
 LD HL,YAMEYO
 LD C,24
 CALL MSOB
 SCF
 RET
BTRSTE:
; POP HL
 LD HL,BTCMST
 PUSH HL
 JR RSTE+5
RSTE:
 POP HL
 LD HL,MANSTS
 PUSH HL
 LD HL,MAGICL+20
 CALL MGMC
 LD A,10
 CALL MPCH
 RET C
 LD A,(MHP)
RESTL2:
 LD (HP),A
 LD HL,HPUPMS
 LD C,12
 CALL MSOB
; POP HL
; LD (0D0H),HL
; POP HL
; LD (0D2H),HL
 SCF
 RET	;JP MANSTS OR JP BTCMST
THRU:
 LD HL,MAGICL+30
 LD A,(FL)
MGTHRU:
 CALL MGMC
 DEC A
 JR Z,MGEND
 LD A,(BF)
 RLA
 JR C,MGEND;THRUL
 LD HL,MGIM1
 LD C,24
 CALL MSOB
 JP FLDNK
;THRUL:
; LD HL,YAMEYO
; LD C,24
; CALL MSOB
; JP TTURN	;JP C,
DAST:
 LD HL,MAGICL+15
 JR LOST+3
BALM:
 LD HL,MAGICL+10
 JR LOST+3
BTREST:
; POP HL
 LD HL,BTCMST
 PUSH HL
 JR REST+5
REST:
 POP HL
 LD HL,MANSTS
 PUSH HL
 LD HL,MAGICL+5
 CALL MGMC
 LD A,4
 CALL MPCH
 RET C
 LD A,(MHP)
 LD C,A
 LD A,(HP)
 ADD A,50
 JR C,RESTL2-3
 CP C
 JR C,RESTL
 LD A,C
RESTL:
 JR RESTL2
BOH:
 LD HL,MAGICL
 CALL MGMC
 LD HL,BOHM
 JP LOST+9
BOHM:
 DB "･･･ｺﾞﾎ","ｿｺﾗｼﾞｭ","ｳﾆﾎｺﾘｶ","ﾞﾏｯﾀ･･"
BTBOH:
 LD B,3
 LD C,14		;
 CALL RAND4
 ADD A,C
 LD HL,MAGICL
BTBOHL:
 POP DE
 PUSH BC
 CALL MGMC
 EX AF,AF'
 POP AF
 CALL MPCH
 JP C,TTURN
 EX AF,AF'
 JP THPDWN
BTBALM:
 LD HL,MAGICL+10
 CALL MGMC
 LD A,8		;
 EX AF,AF'
 CALL BTBDC
 LD A,(EDP)
 CALL BTBDC2
 JR NC,BTBLL1
 LD A,255
BTBLL1:
 LD (NDP),A
;JR BTBLDS
BTBLDS
 LD A,1
 LD (STF),A
 LD HL,BTLOST-11
 LD C,11
 CALL MSOBP
 CALL TIMBTL
 POP AF
 JP TTURN
BTDAST:
 LD HL,MAGICL+15
 CALL MGMC
 LD A,15		;
 EX AF,AF'
 CALL BTBDC
 LD A,(EAP)
 CALL BTBDC2
 JR NC,BTBLL2
 LD A,255
BTBLL2:
 LD (NAP),A
 JR BTBLDS
BTBDC:
 POP IX
 LD A,(STF)
 OR A
 JP NZ,MGEND
 EX AF,AF'
 CALL MPCH
 JP C,TTURN
 PUSH IX
 RET
BTBDC2:
 PUSH AF
 SRL A
 LD C,A
 POP AF
 ADD A,C
 RET
 DB "ｽﾃｰﾀｽ ","ｱｯﾌﾟ!"
BTLOST:
 LD B,20
 CALL RAND
 CP 8
 JR C,LOSTL1
 XOR A
 JR LOSTL1+2
LOSTL1:
 LD A,255
 LD HL,MAGICL+25
 JP BTBOHL
MGMC:
 PUSH AF
 LD DE,MGM+5
 LD BC,5
 LDIR
 LD HL,MGM
 LD C,18
 CALL MSOBP
 LD A,5
 CALL FLASH
 CALL TIMBTL
 POP AF
 RET

;----------MP CHECK------------

MPCH:;A=USE MP
 PUSH AF
 CALL TIM30
 POP AF
 LD B,A
 LD A,(MP)
 CP B
 CCF
 JR NC,MPCHC
 SUB B
 LD (MP),A
 RET
MPCHC:;CY を 信号にする
 LD HL,MPCHM
 LD C,11
 CALL MSOB
 SCF
 RET
MPCHM:
 DB "MPｶﾞ  ","ﾀﾘﾅｲ!"
MGM:
 DB "ｱﾚｽﾊ  ","      ","ｦﾄﾅｴﾀ!"
MGIM1:
 DB "ｶﾗﾀﾞｶﾞ","ﾕｶﾆ   ","ｼｽﾞﾝﾃﾞ","ﾕｸ･･･ "

;---------Iボタン---------

INSP:
 LD DE,MESWD
 LD HL,BLKWI1-6
 LD BC,5
 LDIR
INSPL:
 LD HL,BLKWI1-1
 INC (HL)
 LD A,16
 CP (HL)
 JR Z,BLKWI1
 LD A,128+16
 CP (HL)
 JR Z,BLKWI2
 JR DATASV-8;JR MRET
 DB "ﾅﾆﾓﾅｲ"
 DB 0
BLKWI1:
 LD (HL),0
 SET 7,(HL)
 LD A,0A6H
 LD C,3CH	;INC A
BLWTL:
 LD (FLASE1+1),A
 LD A,C
 LD (FLASE2),A
 LD A,1
 CALL FLASH
 JR DATASV-8
BLKWI2:
 LD (HL),0
 LD A,0A7H
 LD C,3DH	;DEC A
 JR BLWTL

;---------Dボタン---------

DATA:
 LD HL,DATMS1
 LD C,24
 CALL MSOP
DATMIN:
 CALL CURSOL
DATMIS:
 LD A,(0F3H)
 CP 2
 JR C,DATAMP
 JR Z,DATASV
 CP 3
 JP Z,LOAD
 LD A,54H
 LD (0F8H),A
 JP MRET
DATASV:
 LD BC,33
 LD HL,LV
 LD DE,SAVE
 LDIR
 LD C,64
 LD HL,FLAG
 LD DE,FSAVE
 LDIR
 LD C,120
 LD HL,AUTOME
 LD DE,MSAVE
 LDIR
 LD DE,0411H
 LD HL,DATASV+47
 LD B,6
 CALL 0BFF1H
 CALL 48381
 JR DATASV-8
 DB "ｾｰﾌﾞOK"
DATAMP:
 LD A,(FL)
 DEC A
 LD DE,8
 LD HL,AUTOME
 CALL XSAN
 LD DE,FREE
 LD (0E8H),DE
 LD BC,8
 LDIR
 LD A,(FL)
 DEC A
 LD HL,MPD1
 LD DE,64
 CALL XSAN
 LD BC,0808H
 LD DE,GRD2
LOOPM:
 PUSH BC
 PUSH HL
 PUSH DE
DATHL:
 LD HL,(0E8H)
 RL (HL)
 JP NC,LOOPL
 POP DE
 POP HL
 PUSH HL
 PUSH DE
 LD A,(HL)
 RRA
 JP C,MPS1
RETP:
 RRA
 JP C,MPS2
 RRA
 JP C,MPS3
 RRA
 JP C,MPS4
 RRA
 JP C,MPS1D
 RRA
 JP C,MPS2D
 RRA
 JP C,MPS3D
 RRA
 JP C,MPS4D
 JR LOOPN
LOOPL:
 POP DE
 PUSH DE
 LD B,3
 LD A,2AH
 LD (DE),A
 INC DE
 LD A,15H
 LD (DE),A
 INC DE
 DJNZ LOOPL+4
LOOPN:
 POP DE
 INC DE
 INC DE
 INC DE
 INC DE
 INC DE
 INC DE
 POP HL
 INC HL
 POP BC
 DJNZ LOOPM
 LD A,C
 PUSH AF
 PUSH HL
 LD HL,(0E8H)
 INC HL
 LD (0E8H),HL
 LD HL,GRD2
 LD B,48
 CP 8
 JP Z,MPIR1
 CP 7
 JP Z,MPIR2
 CP 6
 JP Z,MPIR3
 CP 5
 JP Z,MPIR4
 CP 4
 JP Z,MPIR5
 CP 3
 JP Z,MPIR6
 CP 2
 JP Z,MPIR7
 CP 1
 JP Z,MPIR8
IREND:
 LD HL,GRD2
 XOR A
 LD (HL),A
 LD DE,GRD2+1
 LD BC,143
 LDIR
 LD DE,GRD2
 POP HL
 POP AF
 LD C,A
 LD B,8
 DEC C
 JP NZ,LOOPM
 LD BC,2F02H	;
 LD A,(X)
 LD HL,0
 LD DE,0600H
 CALL XSAN
 ADD HL,BC
 PUSH HL
 POP BC
 LD HL,0
 LD DE,0006H
 LD A,(Y)
 CALL XSAN
 ADD HL,BC
 EX DE,HL
 LD HL,DATASB
 LD B,2
 CALL GRP
 CALL GRO
 CALL MAPL
 CALL MCLEAR
 LD A,(FL)
 LD H,0
 LD L,A
 CALL ASCN
 LD HL,NMEMRY+3
 LD DE,DATAMM+6
 LD BC,2
 LDIR
 LD HL,DATAMM
 LD C,12
 CALL MCLEAR
 CALL MSOBP
 LD A,(URDL)
 DEC A
 LD HL,DATASB+2
 LD DE,4
 PUSH DE
 CALL XSAN
 POP BC
 CALL MSOBP
 LD HL,DATASB+18
 LD C,5
 CALL MSOB
 LD A,54H
 LD (0F8H),A
 JP START
DATAMM:
 DB "ｼﾝﾃﾞﾝ ","  ｶｲ  "
DATASB:
 DB 01,02
 DB "ｷﾀ  ","ﾋｶﾞｼ","ﾐﾅﾐ ","ﾆｼ  "
 DB "ﾉﾎｳｺｳ"
MPS1:
 POP HL
 PUSH HL
 LD B,6
 SET 0,(HL)
 INC HL
 DJNZ MPS1+4
 JP RETP
MPS2:
 POP DE
 PUSH DE
 PUSH AF
 INC DE
 INC DE
 INC DE
 INC DE
 INC DE
 LD A,3FH
 LD (DE),A
 POP AF
 JP RETP+4
MPS3:
 POP HL
 PUSH HL
 LD B,6
 SET 5,(HL)
 INC HL
 DJNZ MPS3+4
 JP RETP+8
MPS4:
 POP DE
 PUSH DE
 PUSH AF
 LD A,3FH
 LD (DE),A
 POP AF
 JP RETP+12
MPS1D:
 POP HL
 PUSH HL
 INC HL
 INC HL
 SET 1,(HL)
 INC HL
 SET 1,(HL)
 JP RETP+16
MPS2D:
 POP HL
 PUSH HL
 INC HL
 INC HL
 INC HL
 INC HL
 SET 2,(HL)
 SET 3,(HL)
 JP RETP+20
MPS3D:
 POP HL
 PUSH HL
 INC HL
 INC HL
 SET 4,(HL)
 INC HL
 SET 4,(HL)
 JP RETP+24
MPS4D:
 POP HL
 PUSH HL
 INC HL
 SET 2,(HL)
 SET 3,(HL)
 JP RETP+28
MPIR1:
 LD DE,2D00H
 CALL GRP
 JP IREND
MPIR5:
 LD DE,2D18H
 JR MPIR1+3
MPIR6:
 LD DE,2D1EH
 JR MPIR1+3
MPIR7:
 LD DE,2D24H
 JR MPIR1+3
MPIR8:
 LD DE,2D2AH
 JR MPIR1+3
MPIR2:
 LD DE,2D06H
 JR MPIR1+3
MPIR3:
 LD DE,2D0CH
 JR MPIR1+3
MPIR4:
 LD DE,2D12H
 JR MPIR1+3

;----------Rボタン--------

;読む場所によってイベントが!ない
READ:
 LD A,(BOOKF)
 OR A
 JP Z,DATASV-8
 LD HL,READDT
 LD C,12
 CALL MSO
 CALL FREECL	;FREE2=WORK
 LD A,(BOOKF)
 LD HL,READDT+12
 LD DE,FREE2+1
 EXX
 LD B,4	;1
BOOKLD:
 EXX
 RRA	;0
 PUSH HL
 CALL NC,BOOKNL
 LD BC,4
 LDIR
 INC DE
 INC DE
 POP HL
 INC HL
 INC HL
 INC HL
 INC HL
 EXX	;1
 DJNZ BOOKLD
 LD HL,FREE2
 LD C,24
 CALL MSOP
REDMIN:
 CALL CURSOL
REDTMIS:
 LD A,(0F3H)
 LD B,A
 LD A,(BOOKF)
 LD C,0
REDL:
 INC C
 RRA
 DJNZ REDL
 JP NC,DATASV-8
 LD HL,MPL
 PUSH HL
 LD A,C
 CP 2
 JP C,TVA
 JP Z,TVB
 CP 3
 JP Z,TVD
 JP TVE
BOOKNL:
 LD HL,GRD2
 RET
READDT:
 DB "ﾄﾞﾉﾎﾝｦ","ﾖﾐﾏｽｶ?"
 DB "ﾌｧﾙ ","ｳｨﾙ ","ﾊｳﾚﾝ","ﾕｳｼｬ"

;-------方向キー-------

MDOWN:
 LD A,54H
 LD (0F8H),A
 CALL KBOFF
 call mdownpc
 JR MRET
mdownpc:
 LD A,(URDL)
 DEC A
 CALL Z,OVERH
 DEC A
 CALL Z,OVERH
 LD (URDL),A
 ret
MUP:
 LD A,(0F0H)
 CP 0FFH
 JP Z,KBA
 CALL BEPWKC
 LD A,(URDL)
 CP 2
 JR Z,MUPR
 JR C,MUPU
 CP 4
 JR Z,MUPL
;MUPD
 LD A,(Y)
 INC A
 CP 8
 CALL Z,OVER8
 LD (Y),A
 JR MRET
MUPU:
 LD A,(Y)
 DEC A
 CP 0FFH
 CALL Z,OVER0
 LD (Y),A
 JR MRET
MUPR:
 LD A,(X)
 INC A
 CP 8
 CALL Z,OVER8
 LD (X),A
 JR MRET
MUPL:
 LD A,(X)
 DEC A
 CP 0FFH
 CALL Z,OVER0
 LD (X),A
 JR MRET
MLEFT:
 LD A,54H
 LD (0F8H),A
 LD A,(URDL)
 DEC A
 CALL Z,OVERH
 LD (URDL),A
 JR MRET
MRIGHT:
 LD A,54H
 LD (0F8H),A
 LD A,(URDL)
 INC A
 CALL OVERH+3
 LD (URDL),A
MRET:
 CALL KBOFF
 CALL GRO
 JP MPLB

;--------方向ｾｯﾄ--------

HK:
 LD HL,MAPM
 LD B,6
 LD A,(URDL)
HKLOOP:CP 2;LOOP
 JR Z,HK2R
 CP 4
 JR Z,HK4L
;HK3D:
 LD A,2
 LD (0FDH),A
 LD (0FEH),A
 JR HKM
HK2R:
 LD A,1
 LD (0FDH),A
 LD A,3
 LD (0FEH),A
 JR HKM
HK4L:
 LD A,3
 LD (0FDH),A
 LD A,1
 LD (0FEH),A
HKM:
 PUSH BC
 LD A,(0FDH)
 LD B,A
 LD A,(HL)
 AND 00001111B
HKM1:SRL A
 CALL C,OBIT4
 DJNZ HKM1
 LD E,A
 LD A,(0FEH)
 LD B,A
 LD A,(HL)
 AND 11110000B
HKM2:SLA A
 CALL C,OBIT5
 DJNZ HKM2
 OR E
 LD (HL),A
 INC HL
 POP BC
 DJNZ HKM
 RET

;--------BIT ｾｯﾄ関係--------

OVER8:
 LD A,0
 RET
OVER0:LD A,7
 RET
OVERH:LD A,4
 RET
 CP 5;+3
 RET NZ
 LD A,1
 RET
OBIT4:
 ADD A,8
 RET
OBIT5:
 ADD A,10H
 RET

;-----------FLASH-----------

FLASH:
 CALL BEPMGC
FLASHN:
 LD B,A
 PUSH BC	;LOOP
FLASE1:
 LD A,0A7H
 PUSH AF
 OUT (40H),A
 CALL TIM30
 POP AF
FLASE2:
 DEC A
 OUT (40H),A
 CALL TIM30
 POP BC
 DJNZ FLASH+4
 RET

;---------ﾀｲﾏｰ　ﾃﾞｰﾀ---------

TIMBTL:
 LD A,50
 JR TIMER
TIM30:
 LD A,37
 JR TIMER
TIM255:
 LD A,255
TIMER:;A:ｼﾞｶﾝ
 LD BC,0
 INC BC;LOOP
 DB 0,0,0,0,0,0
 XOR B
 RET Z
 JR TIMER+3

;---------ｱｲﾃﾑ追加----------

ITEMAD:;A=ITEM NO.	HL=ITEM NAME AD.
 OR A
 PUSH AF
 LD DE,ITEMAM
 PUSH DE
 LD BC,8
 LDIR
 POP HL
ITMAL3:	;+1
 LD C,24
 CALL MSO2
 XOR A
 LD HL,ITEM
 LD BC,11
 CPIR
 JR NZ,ITEMNA
 DEC HL
 POP AF
 LD (HL),A
 RET
ITEMNA:
 LD HL,ITEMAM+24
 LD C,42
 CALL MSOB
 CALL MSOB
ITMAL2:
 CALL BUYSEL
 LD A,(HL)
 CP 0FH
 JR Z,ITMAKI
 RLA
 JR NC,ITEMAL
 RLA
 JR NC,ITEMAL
 CALL CURD2;GRPD
 JR ITMAL2
ITEMAL:
 XOR A
 LD (HL),A
 LD HL,ITEMAM
 JR ITMAL3
ITMAKI:
 POP AF
 SCF
 RET
ITEMAM:
 DB "      ","      ","ｦ     ","ﾃﾆｲﾚﾀ!"
 DB "ｼｶｼ   ","ﾓﾁﾓﾉｶﾞ","ｲｯﾊﾟｲ!",0F9H
 DB "ｺｳｶﾝｽﾙ","ﾄﾞｳｸﾞｦ","ｴﾗﾝﾃﾞ ","ｸﾀﾞｻｲ ",0F9H

;---------ｶｰｿﾙ関係-----------

CURS2:;DE=2C03H
 LD HL,CURS2E
 PUSH HL
 CP 1FH
 JR Z,DOWN2
 CP 20H
 JR Z,UP2
 CP 21H
 JR Z,LEFT2
 CP 22H
 JR Z,RIGHT2
 RET
DOWN2:
 LD A,(0F2H)
 LD E,12	;3+12*4
 ADD A,E
 CP 40	;ｵｵﾖｿ ｼﾞｬﾝﾌﾟｻｷ
 CALL NC,CURER2
 LD (0F2H),A
 RET
UP2:
 LD A,(0F2H)
 LD E,12	;3-12*4
 SUB E
 CP 40	;ｵｵﾖｿ ｼﾞｬﾝﾌﾟｻｷ
 CALL NC,CURER
 JR UP2-4
LEFT2:
 LD A,(0F3H)
 LD D,18
 SUB D
 CP 2CH
 CALL C,CURDR
 JR CURER-4
RIGHT2:
 LD A,(0F3H)
 LD D,18
 ADD A,D
 CP 51H
 CALL NC,CURDR2
 LD (0F3H),A
 RET
CURER:
 LD A,39
 RET
CURER2:
 LD A,3
 RET
CURDR:
 LD A,50H
 RET
CURDR2:
 LD A,2CH
 RET
CURS2E:
 LD DE,(0F2H)
 LD B,6
 LD HL,CURG
 CALL GRP
 CALL GRO
 RET
CURD2:
 LD DE,(0F2H)
 LD B,6
 LD HL,GRD2
 CALL GRPD
 RET
CURS:
 CP 1FH
 JR Z,DOWN
 CP 20H
 JR Z,UP
 CP 21H
 JR Z,LEFT
 CP 22H
 JR Z,RIGHT
 RET
UP:LD A,(0F3H)
 DEC A
 LD (0F3H),A
 RET
DOWN:LD A,(0F3H)
 INC A
 LD (0F3H),A
 RET
LEFT:LD A,(0F2H)
 DEC A
 LD (0F2H),A
 RET 
RIGHT:LD A,(0F2H)
 INC A
 LD (0F2H),A
 RET
CURP:LD DE,(0F2H)
 LD B,6
 LD HL,CURG
 CALL 0BFD0H
 RET
CURD:LD DE,(0F2H)
 LD B,6
 LD HL,GRD2
 CALL 0BFD0H
 RET
CUR1:
 LD DE,(0F2H)
 LD A,D
 CP 1
 CALL Z,PLUS
 CP 4
 CALL Z,PLUS+3
 LD E,8
 LD (0F2H),DE
 CALL CURP
 RET
PLUS:LD D,3
 RET
;MINUS
 LD D,2
 RET
CUR2:
 LD DE,(0F2H)
 LD A,D
 CP 0
 CALL Z,PLUS2
 CP 5
 CALL Z,PLUS2+3
 LD E,11H
 LD (0F2H),DE
 CALL CURP
 RET
PLUS2:LD D,4
 RET
;MINUS2
 LD D,1
 RET
CURSOL:
 LD HL,0111H
 LD (0F2H),HL
 CALL CURP
 CALL 48381;LOOP
 CALL BEPMSC
 CP 28H
 RET Z
 POP HL
 CP 51H
 JR Z,RETT
 PUSH HL
 PUSH AF
 CALL CURD
 POP AF
 CALL CURS
 CALL CUR2
 JR CURSOL+9
RETT:
 LD A,(BF)
 RLA
 RET NC
 POP AF
 XOR A
 LD (BF),A
 RET

;----------ﾒｯｾｰｼﾞ関係----------

MCLEAR:
 EXX
 LD HL,GRD2
 LD DE,MRAM
 LD BC,24
 LDIR
 EXX
 RET
MSD:
 LD HL,GRD2
 LD C,24
 CALL MSOP
 RET
MSOS:
 PUSH HL
 PUSH BC
 CALL MCLEAR
 POP BC
 POP HL
 LD B,0
 LD DE,MRAM
 LDIR
 RET
MSO:
 LD DE,MSORET
 PUSH DE
MSOP:
 CALL MSOS
 LD B,4
 LD HL,MRAM
 LD D,1
LOOP10:
 PUSH BC;LOOP
LP10EX:
 LD E,17
 LD B,6
 CALL 0BFF1H
 INC HL
 INC D
 POP BC
 DJNZ LOOP10
 RET
MSO2:
 LD DE,MSORET
 PUSH DE
MSO2P:
 CALL MSOS
 LD B,4
 LD HL,MRAM
 LD D,0
LOOP11:
 PUSH BC;LOOP
 INC D
 LD E,11H
 LD B,6
 LD A,(HL);LOOP
 LD (LOOP1L+1),A
 PUSH HL
 PUSH BC
 PUSH DE
 CALL 0BE62H
LOOP1L:
 LD A,0
 OR A
 JR Z,LOOP2L
 CP 20H
 JR Z,LOOP2L
 CALL BEPMSC
LOOP2L:
 LD A,17
 CALL TIMER
 POP DE
 POP BC
 POP HL
 INC E
 INC HL
 DJNZ LOOP11+6
 POP BC
 DJNZ LOOP11
 RET
MSORET:
 CALL 48381
 RET
MSOB:
 LD DE,MSORET
 PUSH DE
MSOBP:
MSOBL:
 XOR A
 LD B,6
 INC A	;MS LDIR COUNT
 DEC C	;LOOP COUNT
 JR Z,MSOBL2
 DJNZ MSOBL+3
MSOBL2:
 PUSH BC	;残り転送回数
 PUSH HL	;ﾃﾞｰﾀﾎﾟｲﾝﾀ
 LD HL,MRAM+6
 LD BC,18
 LD DE,MRAM
 LDIR
 POP HL
 LD C,A
 LD DE,MRAM+18
 LDIR
 PUSH HL
 LD B,3
 CALL LOOP10-5
 LD B,1
 LD HL,MRAM+18
 LD D,3
 CALL LOOP11
 POP HL
 POP BC
 LD A,(HL)	;
 INC HL		;
 CP 0F9H	;
 RET Z		;
 DEC HL
 INC C
 DEC C
 JR NZ,MSOBL
 RET
MSOBR:
 LD C,48
 PUSH BC
 CALL MSOB
 POP BC
 DJNZ MSOBR
 RET

;------数字HEXをｱｽｷｰに------

NMEMRY:
 DB 0,0,0,0,0
ASCN:;HL=数値(2byte)→DEのｱﾄﾞﾚｽ
 LD DE,NMEMRY
 LD BC,10000
 CALL WARIS
 LD BC,1000
 CALL WARIS
 LD BC,100
 CALL WARIS
 LD BC,10
 CALL WARIS
 LD A,L
 LD (DE),A
 LD B,5
 LD DE,NMEMRY
ASCL:
 LD A,(DE)
 CP 0
 JR Z,ASCL2
 JR ASC2
ASCL2:
 INC DE
 DJNZ ASCL
 LD B,1
 LD DE,NMEMRY+4
ASC2:
 LD A,(DE)
 LD C,30H
 ADD A,C
 LD (DE),A
 INC DE
 DJNZ ASC2
 RET
WARIS:
 XOR A
;WARI1:
 SBC HL,BC
 JR C,WARI2
 INC A
 JR WARIS+1
WARI2:
 ADD HL,BC
 LD (DE),A
 INC DE		;
 RET

;----------ｸﾞﾗﾌｨｯｸ関係---------

GRD:		;B
 LD D,B
 DEC D
 PUSH BC;LOOP
 LD E,0
 LD B,144
 LD HL,GRD2
 CALL 0BFD0H
 LD A,13
 CALL TIMER
 DEC D
 POP BC
 DJNZ GRD+2
 LD D,0
 RET
WGRO:;A=指定
 LD A,42
 LD (GROEX+1),A
 CALL GRO
 LD A,144
 LD (GROEX+1),A
 RET
WGRO2:;A=指定
 LD A,42
 LD (GRO2EX+1),A
 CALL GRO2
 LD A,144
 LD (GRO2EX+1),A
 RET
GRO:
 LD B,6
 LD HL,GROE1
 LD D,0
 PUSH BC;LOOP
 LD E,0
GROEX:
 LD B,144
 PUSH HL
 CALL 0BFD0H
 POP HL
 LD BC,144
 ADD HL,BC
 INC D
 POP BC
 DJNZ GRO+7
 RET
GRO2:
 LD B,6
 LD HL,GROE6
 LD D,5
 PUSH BC;LOOP
 LD E,0
GRO2EX:
 LD B,144
 PUSH HL
 CALL 0BFD0H
 POP HL
 LD BC,0FF70H;-144
 ADD HL,BC
 DEC D
 LD A,18
 CALL TIMER
 POP BC
 DJNZ GRO2+7
 RET
GRP:;自由に配置
 LD (FREE2+54),HL	;DATA
 LD (FREE2+56),BC	;範囲<54
 LD (FREE2+58),DE	;X Y
 LD A,E
 LD C,0
GRPLP1:
 CP 8
 JR C,GL1
 INC C
 SUB 8
 JR GRPLP1
GL1:
 LD (FREE2+62),A
 SUB 8
 NEG
 LD (FREE2+63),A
 LD HL,GROE1
 LD A,C
 LD (FREE2+64),A
 CP 0
 JR Z,GL2
 LD DE,144
 CALL XSAN
GL2:LD (FREE2+60),HL
 CALL GSTOCK
 LD A,(FREE2+62)
 LD HL,(FREE2+60)
 LD BC,(FREE2+56)
 LD DE,(FREE2+58)
 LD E,D
 LD D,0
 ADD HL,DE
 EX DE,HL
 LD HL,FREE2
 LD (0F0H),A
GRPLP3:
 PUSH AF
 CP 0
 JR Z,STLP1
GRPLP4:
 SLA (HL)
 DEC A
 JR NZ,GRPLP4
STLP1:
 LD A,(HL)
 LD C,A
 LD A,(DE)
STEX1:
 OR C
 LD (DE),A
 INC HL
 INC DE
 POP AF
 DJNZ GRPLP3
 LD A,(FREE2+64)
 CP 5
 RET Z
 CALL GSTOCK
 LD HL,(FREE2+60)
 LD DE,144
 ADD HL,DE
 LD (FREE2+60),HL
 LD BC,(FREE2+56)
 LD DE,(FREE2+58)
 LD E,D
 LD D,0
 ADD HL,DE
 EX DE,HL
 LD A,(FREE2+63)
 OR A
 JR Z,GEND
 LD HL,FREE2
GRPLP5:
 PUSH AF
 OR A
 JR Z,STLP2
GRPLP6:
 SRL (HL)
 DEC A
 JR NZ,GRPLP6
STLP2:
 LD A,(HL)
 LD C,A
 LD A,(DE)
STEX2:
 OR C
 LD (DE),A
 INC HL
 INC DE
 POP AF
 DJNZ GRPLP5
GEND:
 RET
GSTOCK:
 LD BC,(FREE2+56)
 LD HL,(FREE2+54)
 LD DE,FREE2
 LD C,B
 LD B,0
 LDIR
 RET
GRPD:
 LD A,0AFH
 LD (STEX1),A
 LD (STEX2),A
 CALL GRP
 LD A,0B1H
 LD (STEX1),A
 LD (STEX2),A
 RET
GROB:
 EXX
 LD HL,GROE1
 LD (HL),0FFH
 LD DE,GROE1+1
 LD BC,863
 LDIR
 CALL GRO
 EXX
 RET
GROR:LD HL,GRD2
 LD DE,GROE1
 LD BC,864
 LDIR
 RET

;-------ONEND--------------

ONEND:;HLﾊ､ﾓﾄﾞﾙｱﾄﾞﾚｽ
 CALL 0BE53H
 XOR 51H
 RET Z
 LD HL,(0F0H)
 JP (HL)

;-------RAND----------

RAND:;Aﾆｶｴｽ
 PUSH HL
 LD HL,0
 LD D,H
 LD E,L
 ADD HL,HL
 ADD HL,HL
 ADD HL,DE
 LD DE,5D47H
 ADD HL,DE
 LD (RAND+2),HL
 LD A,H
 POP HL
 RET
RAND4:
 CALL RAND
 AND 3
 RET

;-------BATTLE------------

BATTLE:
 XOR A
 LD HL,STF
 LD (HL),A
 INC HL
 LD (HL),A	;BF
 LD A,(EAP)
 LD (NAP),A
 LD A,(EDP)
 LD (NDP),A
 LD A,(FL)
 DEC A
 JR Z,BATTL1
 LD B,A
 XOR A
 INC A
 DJNZ BATTL1-3
BATTL1:
 LD B,A
 CALL RAND4
 ADD A,B
 LD (TNO),A
 LD HL,TNAME
 LD DE,6
 CALL XSAN
BATTL2:
 LD DE,TNNAME;ｲﾁｼﾞﾎｿﾞﾝ
 LD BC,6
 PUSH HL
 LDIR
 POP HL
 LD C,6
 LD DE,MRAM
 LDIR
 LD HL,BATTLM
 LD DE,MRAM+6
 LD BC,18
 LDIR
 CALL LOOP10-7
 CALL BEPBTC
 CALL 48381
BTLOAD:
 LD HL,TPDATA
 LD A,(TNO)
 LD DE,4
 CALL XSAN
BTLD1:
 LD DE,THP
 LD BC,4
 LDIR
BTMLP:
 CALL TGRO
 SCF
 CALL BTCMST
 LD HL,BATLCM
 LD C,24
 CALL MSOP
 CALL CURSOL
BTMIS:
 LD A,(0F3H)
 CP 2
 JP C,BATACK
 JP Z,BMAGIC
 CP 4
 JP C,BITEM
 JP Z,BESKP
BATACK:;ダメージ平均値＝(自分の攻撃力÷2) - (敵の守備力÷4)
 LD HL,ALSATC
 LD C,12
 CALL MSOBP
 LD A,(NAP)
 LD HL,(TDP)
 CALL DMSAN1
 JP THPDWN
BMAGIC:
 CALL MANMGB
 JR NC,BTMLP
 JP TTURN
BITEM:
 LD A,45H
 CALL MANITM+1
 JR NC,BTMLP
 CALL BTACT1
 JP TTURN
BESKP:
 LD A,(BF)
 RLA
 JR C,NTESKP
 LD A,(LV)
 OR A
 RRA
 LD B,A
 CALL RAND4
 LD HL,(TNO)
 ADD A,B
 CP L
 JR C,NTESKP
ESKP:
 LD A,54H
 LD (0F8H),A
 LD A,(BF)
 RLA
 RET C
 JP START
NTESKP:
 LD HL,ESKPM
 LD C,6
 CALL MSOBP
 CALL TIMBTL
 JP TTURN
ESKPM:
 DB "ｼｯﾊﾟｲ "
TTURN:
 CALL TIM30
 CALL TNAMEP
 LD HL,TAITBL
 LD A,(TAI)
 DEC A
TMAGCL:
 RLCA
 LD E,A
 LD D,0
 ADD HL,DE
 LD E,(HL)
 INC HL
 LD D,(HL)
 EX DE,HL
 PUSH HL
 CALL RAND4
 POP HL
 JP (HL)
TAITBL:
 DW AI1,AI2,AI3,AI4,AI5,AI6,AI7,AI8
 DW AI9,AIA,AIB,AIC,AID,AIE,AIF,ai10
AI1:;ｽｹﾙﾄﾝ,ﾀﾞｲｼﾞｬ,ﾉﾛｲﾉｹﾝ;攻撃
 LD HL,ALSATC+6
 LD C,6
 CALL MSOBP
 LD A,(TAP)
 LD HL,(NDP)
 CALL DMSAN1
 JP AHPDWN
AI2:;ｸﾞｰﾙ,ﾋﾄｸｲｸｻ	;吸血攻撃
 LD HL,AI2M
 LD C,12
 CALL MSOBP
 LD A,(TAP)
 LD HL,(NDP)
 CALL DMSAN1
 PUSH AF
 LD HL,(THP)
 ADD A,L
 jr nc,ai2l
 ld A,255
ai2l:
 LD (THP),A
 POP AF
 JP AHPDWN
AI2M:
 DB "ﾉｷｭｳｹﾂ","ｺｳｹﾞｷ!"
AI3:;ﾉｰﾄﾙ		;ﾎﾞｳ,ｺｳｹﾞｷ
 CP 2
 JR C,AI1
 JP TBOH		;ﾎﾙﾄﾞ,ｺｳｹﾞｷ
AI4:;ｲｱﾘｽ
 CP 2
 JR C,AI1
 JP THOLD
AI5:;ｳｨｻﾞﾄﾞ
 OR A
 JR Z,AI1
 JP TSTOME
AI6:;ﾄﾞﾗｺﾞﾝ
 CP 2
 JR C,AI1
 JP TFAIR
AI7:;ｾｯｺｳﾏﾙ
 OR A
 JR Z,AI1
 CP 2
 JP C,SEKIKA
 JP Z,DEIN
 JP AI1
AI8:;ﾒﾀﾙﾅｲﾄ
 CP 2
 JP NZ,TESKP
 JP AI1
 call rand4;aic
AI9:;ﾋﾞｼｮﾌﾟ
 OR A
 JP Z,DEIN
 JP TBIO
 call rand4;aic
AIA:;ﾏｼﾞﾝ
 CP 2
 JP C,TRENZK
 JP Z,AI2
 JP DEIN
AIB:;ｸﾛｷｼ,ﾊｲﾛｰﾄﾞ
 cp 2
 jp c,kaisin
 call rand4
 jp AI4
AIC:;ﾛﾚﾝｽ
 cp 2
 jp c,AI9-3
 jp z,kaisin
 jp TREST
AID:;red dragon
 cp 2
 jp c,utfire
 jp TRENZK
AIE:;spilit
 cp 2
 jp c,AI1
 cp 3
 jp z,utfire
 jp TBIO
AIF:;ruceful
 call rand4
 cp 2
 jp c,TRENZK
 jp kaisin
ai10:;last
 ld A,(flag+3ch)
 rla
 jp c,autohp

 ld A,(THP)
 cp 6fh
 jr nc,ai10l

 ld A,0ffh-25
 ld (TAP),A
 add A,25
 ld (TDP),A
 ld HL,ai10m
 ld B,3
 call msobr
 ld A,3
 call flash
 call shake
 ld A,80h
 ld (flag+3ch),A
ai10l:
 call rand4
 or A
 jr z,AIF
 cp 1
 jp z,utfire
 cp 2
 jp z,AI2
 jp flar

autohp:
 ld A,(THP)
 ld C,A
 ld A,10
 add A,C
 jp nc,ai10l2
 ld A,255
ai10l2:
 ld (thp),A
 jp ai10l
ai10m:
 db "ﾔﾙｼﾞｬｱ","ﾅｲｶ!  ",0f9h
 db "ｼｶｼﾜﾀｼ","ﾊﾀｵｻﾚﾙ","ﾜｹﾆﾊ  ","ｲｶﾅｲ  ",0f9h
 db "ﾎﾝｷﾃﾞ ","ｲｸｿﾞ!!","ｱﾚｽ!!!",0f9H

;-----------------ﾃｷﾉｺｳﾄﾞｳ-------------------

TBOH:
 LD HL,TMGLST
 CALL TMGMC
 LD C,10
 CALL RAND4
 ADD A,C
 JP AHPDWN
THOLD:
 LD HL,TMGLST+4
 CALL TMGMC
 LD A,(NDP)
 SUB 7
 JR NC,THOLDL
 XOR A
THOLDL:
 LD (NDP),A
 CALL SHAKE
 LD HL,THOLDM
 LD C,12
 CALL MSOB
 JP BTMLP 
THOLDM:
 DB "ｽﾃｰﾀｽ ","ﾀﾞｳﾝ! "
TSTOME:
 LD HL,TMGLST+8
 CALL TMGMC
 LD A,(ET)
 CP 24H
 JR NC,TSTOM2
 CALL RAND4
 OR A
 CALL Z,DOK
TSTOM2:
 LD C,21
 CALL RAND4
 ADD A,C
 JP AHPDWN
DOK:
; CALL RAND4
; OR A
; CALL Z,DOK
 LD A,1
 LD (ST),A
 CALL FLASH
 LD HL,DOKM
 LD C,12
 CALL MSOBP
 RET
DOKM:
 DB "ﾄﾞｸｦ  ","ｳｹﾀ!  "
TFAIR:
 LD HL,TFAIRM
 LD C,12
 CALL MSOBP
 CALL TMGMCL
 LD A,(EA)
 ld C,A
 CP 44H
 call NC,firedw
 ld A,C
 CALL RAND
 AND 00001111B
 ADD A,22
 JP AHPDWN
;TFAIR1:
; CALL RAND4
; ADD A,10
; JR DEIN1-3; JP AHPDWN
TFAIRM:
 DB "ﾊ ﾎﾉｵｦ","ﾊｲﾀ!  "
SEKIKA:
 LD HL,TMGLST+12
 CALL TMGMC
 LD A,(ET)
 CP 24H
 JR NC,SEKIKL
 LD HL,SEKIKM
 LD C,12
 CALL MSOBP
 LD A,255
SEKIKL:
 JP AHPDWN
SEKIKM:
 DB "ｱﾚｽﾊ  ","ｾｷｶｼﾀ "
DEIN:
 LD HL,TMGLST+16
 CALL TMGMC
 LD A,(EA)
 CP 45H
 JP NC,DEIN1
 CALL RAND
 AND 00011111B
 OR 00110000B
 JP AHPDWN
DEIN1:
 CALL RAND4
 ADD A,19
 JR DEIN1-3
TESKP:
 LD HL,TESKPM
 LD C,6
 CALL MSOB
 LD HL,GRD2
 CALL OPNG
 CALL BEPBKC
 CALL TIM30
 JP START
TESKPM:
 DB "ﾊﾆｹﾞﾀ!"
TBIO:
 LD HL,TMGLST+20
 CALL TMGMC
 CALL RAND
 AND 01011111B
 CP 43
 CALL C,DOK
 JP AHPDWN
TREST:
 LD HL,TMGLST+24
 CALL TMGMC
 LD HL,THP
 SET 7,(HL)
 SET 6,(HL)
 LD HL,HPUPMS
 LD C,12
 CALL MSOBP
 JP BTMLP
TRENZK:;ﾚﾝｿﾞｸｺｳｹﾞｷ
 LD HL,TRENZM
 LD C,12
 CALL MSOBP
 LD A,(TAP)
 LD HL,(NDP)
 CALL DMSAN1
 PUSH AF
 CALL RAND4
 LD B,A
 INC B
 POP AF
 LD C,A
 XOR A
TRENLP:
 PUSH BC
 PUSH AF
 CALL SHAKE
 CALL TIM30
 POP AF
 POP BC
 ADD A,C
 DJNZ TRENLP
 JP AHPDWN
TRENZM:
 DB "ﾉﾚﾝｿﾞｸ","ｺｳｹﾞｷ!"
kaisin:
 LD HL,tkaism
 LD C,12
 CALL MSOBP
 LD A,(TAP)
 LD HL,(NDP)
 CALL DMSAN1
 ld C,A
 rla
 add A,C	;*3
 JP AHPDWN
tkaism:
 db "ﾉｺｳｹﾞｷ","ｸﾘﾃｨｶﾙ"
utfire:
 ld HL,utfirm
 ld C,12
 call TMGMCL-3
 ld C,124
 call rand4
 add A,C
 ld C,A
 ld A,(ET)
 cp 24h
 call nc,firedw
 ld A,(EA)
 cp 44h
 call nc,firedw
 ld A,C
 jp AHPDWN
firedw:
 ld A,C
 sub 22
 ld C,A
 ret
utfirm:
 db "ﾉﾊｹﾞｼｲ","ﾎﾉｵ!!!"
flar:
 LD HL,TMGLST+28
 CALL TMGMC
 LD C,110
 CALL RAND
 and 00001111b
 add A,C
 JP AHPDWN
 



TMGMC:
 LD DE,TMGMCM+6
 LD BC,4
 LDIR
 LD HL,TMGMCM
 LD C,18
 CALL MSOBP
TMGMCL:
 LD A,3
 CALL FLASH
 CALL TIMBTL
 RET
TMGMCM:
 DB "ﾊ     ","      ","ｦﾂｶｯﾀ!"
TMGLST:
 DB "ﾎﾞｳ ","ﾎﾙﾄﾞ","ｽﾄｰﾑ","ﾌﾞﾚｸ","ﾃﾞｲﾝ","ﾊﾞｲｵ","ﾚｽﾄｱ","ﾌﾚｱ!"
    ;ｺｳｹﾞｷ,ｷｭｳｹﾂ,ﾎﾉｵ,ﾎﾝｷ!,ﾚﾝｿﾞｸｺｳｹﾞｷ

;-----------------BATTLE処理-------------------

TNAMEP:
 LD HL,TNNAME
 LD C,6
 CALL MSOBP
 RET
BATTLM:
 DB "ｶﾞ    ","ｱﾗﾜﾚﾀ!","      "
ALSATC:
 DB "ｱﾚｽ   ","ﾉｺｳｹﾞｷ"
 DB "ﾆ    ﾉ","ﾀﾞﾒｰｼﾞ"
BATLCM:
 DB " ｺｳｹﾞｷ"," ﾏﾎｳ  "," ｱｲﾃﾑ "," ﾄｳｿｳ "
 DB "ｦﾀｵｼﾀ!","ｱﾚｽﾊ  ","ﾁｶﾗﾂｷﾃ","ｼﾏｯﾀ･･"
TNAME:
 DB "ｽｹﾙﾄﾝ ","ｸﾞｰﾙ  ","ﾉﾛｲﾉｹﾝ","ﾋﾄｸｲｸｻ","ﾀﾞｲｼﾞｬ";2f
 DB "ﾉｰﾄﾙ  ","ｳｲｻﾞﾄﾞ","ｸﾞﾘﾌｫﾝ","ﾄﾞﾗｺﾞﾝ","ﾗﾌﾚｼｱﾝ";7f
 DB "ﾄﾛﾙ   ","ﾒﾀﾙﾅｲﾄ","ﾋﾞｼｮﾌﾟ","ﾏｼﾞﾝ  ","ﾚｯﾄﾞD ";12f
 db "ﾐﾗｰﾅｲﾄ","ｽﾋﾟﾘｯﾄ","ﾙｼﾌﾙ  ";15f
TPDATA:;THP,TAI,TAP,TDP
 DB 15,1,23,1	;ｽｹﾙﾄﾝ
 DB 20,2,25,5	;ｸﾞｰﾙ
 DB 15,1,26,1	;ﾉﾛｲﾉｹﾝ
 DB 30,2,28,10	;ﾋﾄｸｲｸｻ
 DB 35,1,44,12	;ﾀﾞｲｼﾞｬ2
 DB 50,3,55,11	;ﾉｰﾄﾙ3
 DB 58,5,65,26	;ｳｨｻﾞﾄﾞ4
 DB 75,1,80,35	;ｸﾞﾘﾌｫﾝ5
 DB 90,6,110,26	;ﾄﾞﾗｺﾞﾝ6
 DB 61,2,110,30	;ﾗﾌﾚｼｱﾝ7
 DB 150,1,160,30;ﾄﾛﾙ8
 DB 28,8,140,255;ﾒﾀﾅｲﾄ9
 DB 190,9,0,10	;ﾋﾞｼｮﾌﾟ10
 DB 150,0ah,155,130;ﾏｼﾞﾝ11
 DB 170,0dh,165,100;ﾚｯﾄﾞD12
 DB 180,0bh,180,100;ﾐﾗｰﾅｲﾄ13
 DB 80,0eh,225,255;ｽﾋﾟﾘｯﾄ14
 DB 255,0fh,180,127;ﾙｼﾌﾙ15

;-------------算術---------------

XSAN:
 OR A
 RET Z
XSANL:
 ADD HL,DE
 DEC A
 JR NZ,XSANL
 RET
WSAN:
 OR A
 RET Z
 LD BC,0
 LD D,0
 LD E,A
 OR A
WSAN1:
 SBC HL,DE
 JR C,WSANE
 INC BC
 JR WSAN1
WSANE:
 PUSH BC
 POP HL
 RET

;-------------ﾀﾞﾒｰｼﾞ算術---------------

DMSAN1:;A=AT L=DP
 SRL A
 SRL L
 SRL L
 PUSH AF
 PUSH HL
 CALL RAND4
 POP HL
 ADD A,L
 LD L,A
 POP AF
 SUB L
 JR NC,DMS1
 XOR A
DMS1:;返り値A
 RET
BKRIT:
 CALL RAND
 CP 28H
 LD A,B
 RET NC
 PUSH AF
 LD HL,BKRITM
 LD C,6
 CALL MSOBP
 POP AF
 POP HL	;ST
 POP HL	;DAMY AF
 RLA
 JR NC,THPDW2
 LD A,255
 JR THPDW2
BKRITM:
 DB "ｸﾘﾃｨｶﾙ"
THPDWN:;A=DMG
 PUSH HL
 PUSH AF
 LD B,A
 LD A,(ES)
 CP 15H
 CALL Z,BKRIT
 POP AF
THPDW2:
 POP HL
 LD L,A
 LD H,0
 LD C,A
 LD A,(THP)
 SUB C
 JR Z,TOVER
 JR C,TOVER
 LD (THP),A
 CALL BTASCN
 CALL BEPDMC
 CALL TSHAKE
 CALL TNAMEP
 LD HL,ALSATC+12
 LD C,12
 CALL MSOBP
 CALL TIM255
 JP TTURN
AHPDWN:;A=DMG
 LD L,A
 LD H,0
 LD C,A
 LD A,(HP)
 SUB C
 JR Z,AOVER
 JR C,AOVER
 LD (HP),A
 CALL BTASCN
 CALL BEPDMC
 CALL SHAKE
 LD A,110
 CALL TIMER
 LD HL,ALSATC
 LD C,6
 CALL MSOBP
 LD HL,ALSATC+12
 LD C,12
 CALL MSOBP
 LD A,230
 CALL TIMER
 JP BTMLP
TOVER:
 CALL BEPDMC
 CALL TSHAKE
 LD HL,GRD2
 CALL OPNG
 CALL TNAMEP
 LD HL,BATLCM+24
 LD C,6
 CALL MSOB
 JP EXPGET
AOVER:
 CALL BEPDMC
 CALL SHAKE
 LD A,220
 CALL TIMER
 LD A,0A7H
 OUT (40H),A
 LD A,220
 CALL TIMER
 LD HL,BATLCM+30
 LD C,18
 CALL MSOB
 LD A,(BF)
 RLA
 JP C,RETRET
 RET
RETRET:
 NOP
 POP AF
 RET

;----------------経験値-------------------

EXPGET:
 LD HL,EXGT
 LD A,(BF)
 RLA
 CALL C,EXPB
 LD A,(TNO)
 LD DE,4
 CALL XSAN
 LD C,(HL)
 INC HL
 LD B,(HL)
 INC HL
 LD E,(HL)
 INC HL
 LD D,(HL)
 LD HL,(G)
 ADD HL,DE
 JR NC,GGET
 LD HL,0FFFFH
GGET:
 LD (G),HL
 LD HL,(EXP)
 ADD HL,BC
 JR NC,EXGET
 LD HL,0FFFFH
EXGET:
 LD (EXP),HL
 CALL EXPC
 JP ESKP
EXPC:
 LD A,(LV)
 PUSH AF
 DEC A
 LD HL,EXPCT
 LD DE,2
 CALL XSAN
 POP BC
 LD A,30
 SUB B
 RET Z
 LD B,A
EXLOOP:
 PUSH BC
 LD E,(HL)
 INC HL
 LD D,(HL)
 INC HL
 PUSH HL
 LD HL,(EXP)
 OR A
 SBC HL,DE
 JR C,EXPEND
 CALL BEPMGC
 LD HL,EXUPM
 LD C,12
 CALL MSOB
 LD A,(LV)
 INC A
 LD (LV),A
 CP 5
 JR Z,MAGCIN
 CP 10
 JR Z,MAGCIN
 CP 15
 JR Z,MAGCIN
 CP 20
 JR Z,MAGCIN
 CP 25
 JR Z,MAGCIN
 CP 30
 JR Z,MAGCIN
EXMGRP:
 LD A,(AP)
 LD C,2
 ADD A,C
 LD (AP),A
 LD A,(EAP)
 ADD A,C
 LD (EAP),A
 LD A,(DP)
 ADD A,C
 LD (DP),A
 LD A,(EDP)
 ADD A,C
 LD (EDP),A
 LD A,(MHP)
 ADD A,8
 JR NC,EXUP1
 LD A,0FFH
EXUP1:
 LD (MHP),A
 LD A,(MMP)
 ADD A,7
 LD (MMP),A
 POP HL
 POP BC
 DJNZ EXLOOP
 RET
EXPEND:
 POP AF
 POP HL
 RET
MAGCIN:
 LD A,(MG)
 SCF
 RLA
 BIT 7,A
 CALL NZ,MGTUIN
 LD (MG),A
 CALL BEPMGC
 LD HL,EXUPM+12
 LD C,12
 CALL MSOB
 JR EXMGRP
MGTUIN:
 OR 01000000B
 AND 01111111B
 RET
EXPB:
 LD HL,EXGTB
 RET
EXPBRP:
EXUPM:
 DB "ﾚﾍﾞﾙｶﾞ","ｱｶﾞｯﾀ!"
 DB "ﾏﾎｳｦ  ","ｵﾎﾞｴﾀ!"
EXPCT:
 DW 5,25,60,110,190,300,525,730,955
 DW 1250,1610,2240,3880,5405,7610,9400,11800,14000,16780
 DW 19500,22500,25200,29500,33400,38000,43905,49000,55500,65535
EXGT:
 DW 3,5,4,8,5,11,6,14,8,35		;5
 DW 12,75,28,60,65,100,85,230,131,415	;10
 DW 170,300,1249,2105,255,508,342,426	;14
 dw 453,357,538,500,610,150		;17
 dw 610,150				;18

; DB "ｽｹﾙﾄﾝ ","ｸﾞｰﾙ  ","ﾉﾛｲﾉｹﾝ","ﾋﾄｸｲｸｻ","ﾀﾞｲｼﾞｬ";5
; DB "ﾉｰﾄﾙ  ","ｳｲｻﾞﾄﾞ","ｸﾞﾘﾌｫﾝ","ﾄﾞﾗｺﾞﾝ","ﾗﾌﾚｼｱﾝ";10
; DB "ﾄﾛﾙ   ","ﾒﾀﾙﾅｲﾄ","ﾋﾞｼｮﾌﾟ","ﾏｼﾞﾝ  ","ﾚｯﾄﾞD ";15
; db "ﾐﾗｰﾅｲﾄ","ｽﾋﾟﾘｯﾄ","ﾙｼﾌﾙ  "			 ;18

;--------------ﾊﾞﾄﾙOUTPORT----------------

BTASCN:
 CALL ASCN
 LD HL,NMEMRY+2
 LD BC,3
 LD DE,ALSATC+13
 LDIR
 RET
TGRO:
 LD A,(BF)
 RLA
 JR C,TGROB
 LD HL,TGR
 LD A,(TNO)
 LD DE,72
 CALL XSAN
OPNG2:
 LD DE,090BH
 LD A,3
TGROLP:
 PUSH HL
 PUSH DE
 LD B,24
 PUSH AF
 CALL GRP
 POP AF
 POP DE
 EX DE,HL
 LD BC,8
 ADD HL,BC
 EX DE,HL
 POP HL
 LD BC,24
 ADD HL,BC
 DEC A
 JR NZ,TGROLP
 CALL WGRO2
 RET
TGROB:
 LD HL,TGRB
 LD DE,120
 LD A,(TNO)
 CALL XSAN
 CALL OPNG
 RET
SHAKE:
 CALL BEPSKC
 PUSH HL
 PUSH BC
 LD B,5
 PUSH BC;LOOP
 CALL TIM30
 LD A,44H
 OUT (40H),A
 CALL TIM30
 LD A,40H
 OUT (40H),A
 POP BC
 DJNZ SHAKE+7
 POP BC
 POP HL
 RET
TSHAKE:
 PUSH HL
 PUSH BC
 LD B,3
 PUSH BC
 LD HL,GRD2
 CALL OPNG
 CALL TGRO
 POP BC
 DJNZ TSHAKE+4
 POP BC
 POP HL
 RET
BTACT1:
 CALL GRPUT2
 SCF
 CALL BTCMST
 CALL TGRO
 RET

;-----------BEEP---------------

BEPMGC:
 LD HL,BEEPMG
 JP BEEPS
BEPDMC:
 LD HL,BEEPDM
 JR BEEPS
BEPDRC:
 LD HL,BEEPDR
 JR BEEPS
BEPBTC:
 LD HL,BEEPBT
 JR BEEPS
BEPISC:
 LD HL,BEEPIS
 JR BEEPS
BEPMSC:
 LD HL,BEEPMS
 JR BEEPS
BEPSKC:
 LD HL,BEEPSK
 JR BEEPS
BEPWKC:
 LD HL,BEEPWK
 JR BEEPS
BEPBKC:
 LD HL,BEEPBK
 JR BEEPS
BEPFDC:
 LD HL,BEEPFD
 JR BEEPS
BEPFLC:
 LD HL,BEEPFL
 JR BEEPS
BEPZPC:
 LD HL,BEEPZP
 JR BEEPS
BEEPED:
 EX AF,AF'
 RET
BEEPS:
 EX AF,AF'
BEEP:;HL=DATA AD.	0=eof
 LD A,(HL)
 OR A
 JR Z,BEEPED
 LD B,A		;周波数
 INC HL
 LD A,(HL)
 LD C,A		;音符の長さ
BEEPL;
 LD E,0DH
 LD D,B
 DEC D
 JR Z,BEEPL1
 LD A,80H
 OUT (18H),A
BEEPL1:DEC D
;DB 0,0,0,0,0,0
 DB 0,0
 JR NZ,BEEPL1	;
 LD D,B
 XOR A
 OUT (18H),A
BEEPL2:DEC D
;DB 0,0,0,0,0,0,0
 DB 0,0,0,0,0,0,0,0,0,0,0
 JR NZ,BEEPL2
 DEC E
 JR NZ,BEEPL+2
 DEC C
 JR NZ,BEEPL
 INC HL
 JR BEEP
BEEPMG:
 DB 185,2,160,1,150,2,130,1,120,2,105,1,0
BEEPBT:
 DB 185,4,160,4,150,4,130,5,120,5,105,6,0
;DB 210,6,170,5,120,10,0
BEEPDR:
 DB 250,2,210,1,0
BEEPDM:
 DB 95,3,92,4,115,4,0
BEEPIS:
 DB 210,3,150,4,110,6,0
BEEPMS:
 DB 160,1,0
BEEPSK:
 DB 127,1,0
BEEPWK:
 DB 90,1,74,2,0
BEEPBK:
 DB 70,3,90,3,120,3,150,3,180,3,210,2,240,1,255,1,0
BEEPFD:
 DB 70,3,75,3,80,3,85,3,90,3,95,2,100,1,105,1,110,1,115,1,120,1,125,1,130,1,0
BEEPFL:
 DB 245,2,253,2,1,12,245,2,253,2,1,12,245,2,253,2,0
BEEPZP:
 DB 90,20,110,17,130,14,150,13,180,25,210,22,255,65,0

;-----------ﾌﾚｰﾑ---------------

GRPUT2:
 JR GRPUT1+4
GRPUT1:
 LD HL,GRPUTL
 PUSH HL
 CALL GROR
 LD DE,GROE1
 LD BC,42
 LD HL,MAPF1
 LDIR
 LD DE,GROE2
 LD C,6
 LD HL,MAPF2L
 LDIR
 LD DE,GROE2+36
 LD C,6
 LD HL,MAPF2R
 LDIR
 LD DE,GROE3
 LD A,3
LOOP2:
 LD BC,42
 LD HL,GROE2
 LDIR
 LD HL,102
 ADD HL,DE
 EX DE,HL
 DEC A
 JR NZ,LOOP2
 LD DE,GROE6
 LD C,42
 LD HL,MAPF3
 LDIR
 LD DE,GROE1+95
 LD C,46
 LD HL,MESF1
 LDIR
 LD DE,GROE6+95
 LD C,46
 LD HL,MESF3
 LDIR
 RET
GRPUTL:
 CALL GRO2
 RET

;----------OPENING---------------

OPN:
 CALL MCLEAR
 CALL GRPUT1
 LD A,3
OPML:
 PUSH AF
 LD HL,OPCM
 PUSH HL
 CP 2
 JR Z,OP2
 JR NC,OP1
OP3:
 LD HL,OPG3
 CALL OPNG
 LD HL,OPM3
 LD B,3
 JR OP1L
OP2:
 LD HL,OPG2
 CALL OPNG
 LD HL,OPM2
 LD B,8
 JR OP1L
OP1:
 LD HL,OPG1
 CALL OPNG
 LD HL,OPM1
 LD B,4
OP1L:
 PUSH BC
 PUSH HL
 LD C,24
 CALL MSOB	;MSO2
 CALL GRO
 POP HL
 LD DE,24
 ADD HL,DE
 POP BC
 DJNZ OP1L
 RET
OPCM:
 POP AF
 DEC A
 JP NZ,OPML
 JP START
OPNG:
 LD DE,GROE2+6
 LD A,4
 LD BC,30	;LOOP
 LDIR
 LD BC,114
 EX DE,HL
 ADD HL,BC
 EX DE,HL
 DEC A
 JR NZ,OPNG+5
 CALL WGRO2
 RET
OPG1:
 DB 00,10H,28H,28H,28H,10H,00,80H,0F8H,5CH,0F8H,00,00,10H,0FCH,28H,14H,1EH
 DB 00,00,00,0C8H,94H,08,00,10H,28H,28H,10H,00
 DB 2AH,0FEH,0A2H,66H,62H,0B6H,6AH,7FH,0A8H,3DH,2FH,0F4H,27H,2DH
 DB 0F5H,3FH,24H,0F8H,0B8H,0ECH,0FCH,7FH,0EFH,0FCH,0BCH,0ECH,0B4H,0F8H,40H,0C0H
 DB 0A9H,0BFH,0B3H,0DDH,0B3H,7FH,7FH,0D3H,7FH,71H,0DDH,71H,0B1H,59H,0BDH
 DB 75H,3FH,11H,0DBH,15H,3FH,51H,9FH,0C2H,3FH,97H,4EH,0F4H,4FH,0DEH
 DB 08,1EH,2EH,58H,0AFH,48H,4BH,4FH,81H,81H,1FH,75H,0CAH,0B7H,58H,0A0H,41H
 DB 98H,00,00,1CH,63H,8FH,30H,0A0H,6FH,68H,5CH,4CH,58H
OPG2:
 DB 80H,0F0H,0F0H,0F0H,0F8H,78H,7CH,70H,78H,78H,38H,3CH,0B4H,0B0H
 DB 0C0H,0E0H,0C0H,0C0H,0E6H,0F6H,76H,76H,77H,7FH,67H,27H,0FH,0FH,0FH,0DH
 DB 35H,7DH,0FDH,0FDH,0F0H,0F0H,32H,36H,06H,07H,0FH,1FH,1FH,1FH
 DB 1FH,1FH,1FH,7FH,7EH,7EH,7EH,3FH,3FH,3FH,3FH,3FH,3FH,3FH,06,06
 DB 00,00,00,00,00,0C0H,70H,0F8H,0EEH,0AEH,0BAH,0EAH,0BAH,0EAH,0BEH
 DB 0EEH,0BEH,0EAH,0BAH,0EAH,0BAH,0AEH,0EEH,0F8H,70H,0C0H,00,00,00,00
 DB 0A0H,20H,20H,0B8H,14H,07H,15H,06H,15H,86H,15H,06H,15H,16H,35H
 DB 36H,35H,16H,95H,86H,15H,06H,15H,06H,95H,07H,14H,38H,0A0H,20H
OPG3:
 DB 00,00,80H,80H,0C0H,40H,42H,46H,4AH,5AH,0E2H,82H,04,08,10H
 DB 0F8H,14H,0A2H,7DH,1BH,79H,0C0H,20H,0D0H,30H,90H,80H,80H,00,00
 DB 00,06,0C7H,21H,99H,0CDH,47H,0CCH,20H,18H,04,0E5H,63H,58H,70H
 DB 71H,62H,47H,58H,98H,38H,23H,0EEH,6FH,2BH,79H,0D4H,0B7H,20H,60H
 DB 00,00,0FH,02,01,00,00,3FH,18H,64H,9FH,15H,0AH,00H,60H,40H,0AH
 DB 15H,9DH,61H,1EH,0CH,3FH,00,00,00,00,00,01,01
 DB 00,40H,0E0H,50H,48H,28H,0A8H,68H,28H,0A8H,0A9H,6EH,7AH,0F5H,0ADH
 DB 0F5H,7AH,6EH,0A9H,0A8H,28H,68H,0A8H,28H,48H,50H,0E0H,40H,00,00



OPM1:
 DB "ｺｺﾊ   ","ｵｳｺﾞﾝﾉ","ｸﾆ    ","ﾊｳﾚﾝｺｸ"
 DB "ｺﾉﾏﾁﾉ ","ﾋﾄﾋﾞﾄﾊ","ﾏｼﾞﾒﾃﾞ","ﾔｻｼｸ､ "
 DB "ﾋﾄﾋﾞﾄｶ","ﾞﾀｶﾞｲﾆ","ｻｻｴｱｯﾃ","ｲｷﾃｲﾙ "
 DB "ﾄｺﾛｶﾞ ","ｺﾉﾏﾁﾉ ","ﾁｭｳｽｳﾉ","ｼﾝﾃﾞﾝﾆ"
OPM2:
 DB "ｼﾞｬｱｸﾅ","ﾋｶﾘｶﾞ ","ﾌﾘｿｿｷﾞ","ｿｼﾃ･･･"
 DB "ｼﾝﾃﾞﾝﾉ","ｶｸﾃﾞｱﾙ","ｵｰﾌﾞｶﾞ","ｳｼﾅﾜﾚﾀ"
 DB "ｿｼﾃﾏﾁﾆ","ﾏﾓﾉｶﾞ ","ｱﾗﾜﾚﾙﾖ","ｳﾆﾅｯﾀ "
 DB "ｿﾉﾄｷ､ ","ﾊｳﾚﾝﾉ ","ﾜｶｷｾﾝｼ","ｱﾚｽﾆ  "
 DB "ｶﾀﾘｶｹﾙ","ﾓﾉｶﾞｲﾀ","ｿﾉｺｴﾊ ","ｺｳｲｯﾀ:"
 DB "ﾜﾀｼﾉﾅﾊ","ｾﾝﾈﾝﾏｴ","ﾉﾕｳｼｬ ","ﾀﾞｲﾀﾛｽ"
 DB "ｱﾚｽﾖ､ ","ｼﾝﾃﾞﾝﾆ","ｺｲ､   ","ｿﾉﾄｷ､ "
 DB "ｺﾉｻｲﾔｸ","ﾉｼﾝｿｳｶ","ﾞｱｷﾗｶﾆ","ﾅﾙﾀﾞﾛｳ"
OPM3:
 DB ":ｱﾚｽﾉﾅ","ｶﾆ､ﾂﾖｲ","ﾀﾝｷｭｳ ","ｼﾝｶﾞﾜｷ"
 DB "ｿｼﾃﾐｼﾗ","ﾇﾃｷﾆｱｳ","ｶｸｺﾞｦ ","ｷﾒ､   "
 DB "ｼﾝﾃﾞﾝﾆ","ｱｼｦﾌﾐｲ","ﾚﾃｲｯﾀ･","･･････"

;------------VRAM ｽﾀｯｸ---------------
 DB 0,0,0,0	;ﾖﾋﾞ
GRD2:DB 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
 DB 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
 DB 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
 DB 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
 DB 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
 DB 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
 DB 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
 DB 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
GROE1:DB 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
 DB 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
 DB 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
 DB 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
 DB 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
 DB 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
 DB 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
 DB 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
GROE2:DB 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
 DB 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
 DB 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
 DB 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
 DB 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
 DB 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
 DB 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
 DB 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
GROE3:DB 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
 DB 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
 DB 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
 DB 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
 DB 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
 DB 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
 DB 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
 DB 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
GROE4:DB 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
 DB 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
 DB 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
 DB 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
 DB 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
 DB 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
 DB 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
 DB 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
GROE5:DB 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
 DB 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
 DB 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
 DB 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
 DB 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
 DB 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
 DB 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
 DB 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
GROE6:DB 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
 DB 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
 DB 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
 DB 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
 DB 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
 DB 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
 DB 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
 DB 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0

;-----------MRAM--------------

MRAM:
 DB 0,0,0,0,0,0,0,0,0,0,0,0
 DB 0,0,0,0,0,0,0,0,0,0,0,0

;-----------FREE--------------

FREE:
 DB 0,0,0,0,0,0,0,0,0,0,0
FREE2:
 DB 0,0,0,0,0,0,0,0,0,0,0,0
 DB 0,0,0,0,0,0,0,0,0,0,0,0
 DB 0,0,0,0,0,0,0,0,0,0,0,0
 DB 0,0,0,0,0,0,0,0,0,0,0,0
 DB 0,0,0,0,0,0,0,0,0,0,0,0
 DB 0,0,0,0,0,0
 DB 0,0,0,0,0,0
 DB 0,0,0,0,0,0,0,0,0,0,0,0
FREECL:
 LD IX,FREEHL
 LD (IX+1),HL
 LD (IX+4),DE
 LD (IX+7),BC
 LD HL,GRD2
 LD DE,FREE2
 LD BC,66
 LDIR
FREEHL:
 LD HL,0
 LD DE,0
 LD BC,0
 RET

;--------AUTO MAP EREA---------

AUTOME:
 DB 0,0,0,0,0,0,0,0	;BITﾃﾞﾌﾝﾀﾞﾄｺﾛｦﾋｮｳｼﾞ 1F
 DB 0,0,0,0,0,0,0,0	;2F
 DB 0,0,0,0,0,0,0,0
 DB 0,0,0,0,0,0,0,0
 DB 0,0,0,0,0,0,0,0
 DB 0,0,0,0,0,0,0,0
 DB 0,0,0,0,0,0,0,0
 DB 0,0,0,0,0,0,0,0
 DB 0,0,0,0,0,0,0,0
 DB 0,0,0,0,0,0,0,0
 DB 0,0,0,0,0,0,0,0
 DB 0,0,0,0,0,0,0,0
 DB 0,0,0,0,0,0,0,0
 DB 0,0,0,0,0,0,0,0
 DB 0,0,0,0,0,0,0,0

;------------TEXT DATA-------------
;-------タイトル--------

TITL:DB "    ﾊｳﾚﾝ ﾎﾞｳｹﾝｷ ";"ﾀﾞｲﾀﾛｽ ﾉ ｷﾞｬｸｼｭｳ";16
TIT1:DB "ﾊｼﾞﾒﾙ";"START";5
TIT2:DB "ﾂﾂﾞｷｶﾗ ";"CONTINE";7

;-------ﾏｯﾌﾟ表示用----

MESW1:
         DB " "
MESWD:DB     "       "
 DB "M:ﾒﾆｭｰ"
 DB "I:ｼﾗﾍﾞﾙ"
 DB "D:ﾃﾞｰﾀ"

;-------ﾏｯﾌﾟﾒﾆｭｰ用---

DATMS1:
 DB " ﾏｯﾌﾟ "
 DB " ｾｰﾌﾞ "
 DB " ﾛｰﾄﾞ "
 DB " ﾓﾄﾞﾙ "
 DB " ｱｲﾃﾑ "
 DB " ｽﾃｰﾀｽ"
 DB " ﾏﾎｳ  "
 DB " ﾓﾄﾞﾙ "

;-----装備ﾘｽﾄ-------

SWORD:
 DB "ﾄﾞｳﾉﾂﾙｷﾞ";ﾂﾙｷﾞ NO.11H
 DB "ｺｳﾃﾂﾉｹﾝ "      NO.12H
 DB "ﾌｧｲｱｿｰﾄﾞ"      NO.13H
 DB "ﾊｸｷﾞﾝﾉｹﾝ"      NO.14H
 DB "ｴｸｽｶﾘﾊﾞ-"      NO.15H
 DB "ｲﾋﾞﾙｿｰﾄﾞ"      NO.16H
SHIELD:
 DB "ｻﾋﾞﾀﾀﾃ  ";ﾀﾃ   NO.21H
 DB "ﾓｸｾｲﾉﾀﾃ "      NO.22H
 DB "ｱｲｽｼｰﾙﾄﾞ"      NO.23H
 DB "ﾊｸｷﾞﾝﾉﾀﾃ"      NO.24H
 DB "ｾｲﾒｲﾉﾀﾃ "      NO.25H
 DB "ｲﾋﾞﾙﾉﾀﾃ "      NO.26H
ARMOR:
 DB "ﾌｸ      ";ﾖﾛｲ  NO.41H
 DB "ｶﾜﾉﾖﾛｲ  "      NO.42H
 DB "ｻﾝﾀﾞｱｰﾏｰ"      NO.43H
 DB "ﾊｸｷﾞﾝﾖﾛｲ"      NO.44H
 DB "ｾﾞｳｽｱｰﾏｰ"      NO.45H
 DB "ｲﾋﾞﾙｱｰﾏｰ"      NO.46H

;------ｱｲﾃﾑﾘｽﾄ-------

ITLIST:
 DB "ｷｽﾞｸﾞｽﾘ ";HP	NO.81H
 DB "ｺﾅｸﾞｽﾘ  ";HP	NO.82H
 DB "ｱﾉﾖﾉｸｽﾘ ";HP/MP/PO	NO.83H
 DB "ﾂｷﾖﾉｸｽﾘ ";MP	NO.84H
 DB "ﾊﾞﾝﾉｳﾔｸ ";PO	NO.85H
 DB "ﾏﾖｹﾉｵｺｳ ";MA	NO.86H
IVITLS:
 DB "ｷﾝｲﾛﾉﾀﾏ ";	NO.C1H
 DB "ﾁｶﾗﾉｵｰﾌﾞ";	NO.C2H
 DB "ｺｺﾛﾉｵｰﾌﾞ";	NO.C3H
 DB "ﾋｶﾘﾉﾀﾏ  ";	NO.C4H
 DB "ｲﾉﾁﾉｵｰﾌﾞ";	NO.C5H
 DB "ﾘﾀﾝｽﾄｰﾝ ";	NO.C6H
 DB "ｷﾞﾝﾉｶﾀﾏﾘ";	NO.C7H
 DB "ﾌｳｲﾝﾉｶｷﾞ";	NO.C8H
 DB "ｱﾐｭﾚｯﾄ  ";	NO.C9H
 DB "ﾌｧﾙﾉｼｮ  ";	NO.CAH
 DB "ｳｨﾙﾉｼｮ  ";	NO.CBH
 DB "ﾏﾎｳﾉﾗﾝﾌﾟ";	NO.CCH
 DB "ﾊｳﾚﾝﾉｼｮ "; NO.CDH
 DB "ﾕｳｼｬﾉｼｮ "; NO.CEH
 DB "ｺﾝﾊﾟｽ   "; NO.CFH

;----------ﾏﾎｳ-----------

MAGICL:
 DB " ﾎﾞｳ ";DAM		LV 0
 DB " ﾚｽﾀ ";HPUP	LV 5
 DB " ﾊﾞﾙﾑ";DPUP	LV 10
 DB " ﾀﾞｽﾀ";APUP ｲﾁｼﾞ	LV 15
 DB " ﾚｽﾄｱ";HPUPP	LV 20
 DB " ﾛｽﾄ ";KILL ZAKI	LV 25
 DB " ｽﾙｰ ";FLDOWN	LV 30

;-------------------YAMEYO--------------------

YAMEYO:
 DB "ﾑﾘﾀﾞｿﾞ","ｺﾝﾅﾄｺﾛ","ﾃﾞﾊﾂｶｴ","ﾅｲｿﾞ  "


;-----------ｸﾞﾗﾌｨｯｸ　ﾃﾞｰﾀ----------

MISEG:
 DB 23H,23H,23H,23H,3FH,23H,23H,23H,23H,23H,23H,0E3H,63H,73H
 DB 0F3H,7FH,73H,0F3H,63H,0E3H,23H,23H,23H,23H,23H,3FH,23H,23H,23H,23H
 DB 22H,22H,22H,0A2H,7EH,0A2H,22H,22H,22H,22H,2EH,0B7H,0B9H,0A5H
 DB 0C5H,11H,0C5H,0A5H,0B9H,0B7H,2EH,22H,22H,22H,22H,3EH,22H,22H,22H,22H
 DB 0C4H,0C4H,0C5H,0C7H,0FBH,0CBH,0CBH,0CEH,0DEH,0D1H,0F9H,38H,00,12H,14H,7DH
 DB 14H,12H,00H,3CH,0C3H,0FEH,0C4H,0C4H,0C4H,0FCH,0C4H,0C4H,0C4H,0C4H
 DB 54H,0BCH,58H,0BCH,54H,0B0H,0F0H,00,00,00,0FFH,0ADH,0F5H,0ADH,0ADH
 DB 0F5H,0ADH,0ADH,0F5H,0ADH,0FFH,00,00,0F0H,0B2H,5EH,0B3H,53H,0BEH,52H
KAIFUG:
 DB 0C2H,7EH,0C7H,0FCH,89H,0FEH,0FEH,92H,0F2H,92H,9EH,92H,0F2H,92H,9EH,9EH
 DB 92H,0F2H,92H,9EH,92H,0F2H,92H,0FEH,0FEH,89H,0FCH,0C7H,7EH,0C2H
 DB 0C7H,7CH,0C7H,3CH,0E7H,0FFH,0FFH,24H,3CH,24H,0E7H,24H,3CH,24H,0E7H
 DB 0E7H,24H,3CH,24H,0E7H,24H,3CH,24H,0FFH,0FFH,0E7H,3CH,0C7H,7CH,0C7H
 DB 0FH,0F8H,87H,7CH,23H,3FH,5FH,91H,9FH,91H,51H,51H,5FH,51H,0D1H,0D1H
 DB 51H,5FH,51H,51H,91H,9FH,91H,5FH,3FH,23H,7CH,87H,0F8H,0FH
 DB 02,01,00,00,0CH,93H,61H,43H,66H,5AH,6AH,0A4H,96H,99H,88H
 DB 88H,99H,96H,0A4H,6AH,5AH,66H,43H,61H,93H,0CH,00,00,01,02
TOBIRA:
 DB 00,00,0F0H,0E8H,0D0H,0E0H,0F0H,0F4H,0AAH,0FCH,0F4H,0F2H,0E8H,0FAH
 DB 0F4H,0ECH,0FAH,0E8H,0F2H,0F4H,0FCH,0AAH,0F4H,0F0H,0E0H,0D0H,0E8H,0F0H,00,00
 DB 00,0B3H,5EH,0ADH,0FFH,0FFH,81H,7EH,42H,42H,42H,42H,7EH,00,0FFH
 DB 0FFH,00,7EH,42H,42H,42H,42H,7EH,81H,0FFH,0FFH,0ADH,5EH,0B3H,00
 DB 00,0D9H,0AFH,54H,0FFH,0FFH,40H,0BFH,0A1H,0A1H,0A1H,0A1H,0BFH,00,0FFH
 DB 0FFH,00,0BFH,0B9H,0A9H,0A1H,0A1H,0BFH,40H,0FFH,0FFH,54H,0AFH,0D9H,00
 DB 0E0H,0ECH,0F7H,0EBH,0FFH,0FFH,0E0H,0FFH,0F0H,0F0H,0F0H,0F0H,0FFH,0E0H,0FFH
 DB 0FFH,0E0H,0FFH,0F0H,0F0H,0F0H,0F0H,0FFH,0E0H,0FFH,0FFH,0EBH,0F7H,0ECH,0E0H
KAZIG:
 DB 93H,93H,0F3H,93H,93H,93H,9FH,93H,93H,93H,93H,93H,0D3H,0F3H
 DB 73H,73H,07FH,0F3H,0D3H,93H,0F3H,93H,93H,93H,93H,9FH,93H,93H,93H,93H
 DB 24H,24H,3CH,24H,24H,24H,0E7H,0A4H,0A4H,0A4H,0E4H,1CH,0D7H,36H,39H
 DB 44H,99H,56H,97H,0D4H,3CH,0E4H,24H,24H,24H,0E7H,0E6H,7BH,0FDH,0E6H
 DB 49H,49H,0CFH,0C9H,0C9H,0C9H,7FH,60H,60H,07FH,6CH,0F7H,9CH,95H,0D8H
 DB 58H,0D8H,99H,9EH,0ABH,7CH,5BH,59H,59H,4FH,0FFH,6AH,2AH,0FFH,7FH
 DB 0FCH,0F5H,0FEH,0F6H,0F6H,0F7H,0FDH,0F5H,0FCH,00H,10H,1FH,15H,1AH,07H
 DB 00H,07H,1AH,15H,1FH,10H,00H,60H,92H,96H,0AAH,0D1H,0ADH,93H,60H
MEGAMG:
 DB 44H,0C7H,44H,44H,7CH,44H,44H,0C7H,44H,0C4H,7CH,02H,0F1H,09H,09H,09H
 DB 0F1H,02H,7CH,0C7H,44H,44H,7CH,44H,44H,0C7H,44H,44H,7CH,44H
 DB 44H,0C7H,44H,44H,7CH,44H,44H,0C7H,7CH,83H,78H,87H,20H,21H,0D0H
 DB 21H,20H,87H,78H,83H,7CH,44H,7CH,44H,44H,0C7H,44H,44H,7CH,44H
 DB 44H,0C7H,44H,44H,7CH,44H,44H,0C7H,44H,0A4H,7DH,03H,01H,01H,00H
 DB 01H,01H,03H,7DH,0A7H,44H,0C4H,7CH,44H,44H,0C7H,44H,44H,7CH,44H
 DB 0C4H,0C7H,0C4H,0C4H,0C4H,0C4H,0C4H,0FFH,0C8H,0D3H,0D4H,0D4H,0D4H,0D4H,0D4H
 DB 0D4H,0D4H,0D4H,0D4H,0D3H,0C8H,0FFH,0C4H,0C4H,0C4H,0C7H,0C4H,0C4H,0C4H,0C4H
daig:
 db 24h,2Ch,0F4h,24h,25h,26h,24h,0A4h,0ACh,0B4h,0A4h,0A4h,3Eh,4Dh,9Ah,15h,9Ah
 db 4Dh,3Eh,0A5h,0A4h,0A4h,0B4h,0ACh,24h,24h,26h,25h,0F4h,2Ch
 db 49h,49h,79h,49h,49h,0CFh,49h,0FEh,8Ah,12h,0F1h,01h,55h,55h,0E9h,25h
 db 0E9h,55h,55h,01h,0F1h,12h,8Ah,0FEh,49h,0CFh,49h,49h,79h,49h
 db 92h,92h,9Eh,92h,92h,0F3h,92h,0BFh,0A8h,0FDh,9Fh,0DAh,34h,0FCh,94h
 db 1Ch,94h,0FCh,34h,0DAh,9Fh,0FDh,0A8h,0BFh,92h,0F3h,92h,92h,9Eh,92h
 db 24h,0E4h,67h,74h,54h,5Ch,54h,56h,56h,0F7h,0Fh,0E0h,1Ah,0FFh,56h,57h
 db 56h,0FFh,1Ah,0E0h,0Fh,0F7h,56h,54h,5Ch,54h,74h,64h,0E7h,24h
RIDNG:;72byte
 DB 00,00,80H,70H,98H,78H,06H,00,00,3CH,5EH,87H
 DB 86H,4FH,3EH,07H,00,06,78H,98H,70H,80H,00,00
 DB 00,00,1FH,20H,00H,3CH,46H,8EH,0B1H,79H,0E9H
 DB 0D6H,0E6H,0D9H,69H,0B1H,8FH,46H,3CH,00,20H,1FH,00,00
 DB 00,00,70H,8CH,92H,0B2H,0B9H,9DH,9FH,9DH,99H
 DB 4AH,4AH,0A9H,0ADH,9FH,9DH,0B9H,0B2H,82H,8CH,70H,00,00
HARTG:
 DB 00,00,00,10H,28H,10H,00,0F0H,0FCH,0FEH,0BFH,1FH
 DB 1EH,0BFH,0FEH,0FCH,0F0H,00,10H,28H,10H,00,00,00
 DB 00,00,20H,50H,20H,00H,80H,75H,8FH,6FH,07H,0C9H
 DB 0C9H,07,6FH,8FH,75H,80H,00,20H,50H,20H,00,00
 DB 00,10H,28H,10H,80H,0C0H,0E1H,76H,0BFH,4EH,80H
 DB 40H,80H,40H,8EH,5FH,0B6H,71H,0E0H,0C0H,90H,28H,10H,00
KOKORG:
 DB 00,00,00,00,00,00,08,18H,0ABH,0BEH,0C7H,4EH,47H
 DB 0CEH,0BFH,0A8H,18H,08,00,00,00,00,00,00
 DB 00,00,00,00,00,1EH,21H,4DH,0D2H,7BH,32H,49H
 DB 49H,0B2H,7BH,0D2H,4DH,21H,1EH,00,00,00,00,00
 DB 00,00,00,00,00,00,0CH,9FH,0E3H,0A1H,0FAH,09
 DB 0AH,0F9H,0A2H,0E3H,9FH,0CH,00,00,00,00,00,00
FUINDG:
 db 00,00,0F0h,0E8h,0D0h,0E0h,0F0h,0F4h,0AAh,0FCh,0F4h,0F2h,0E8h,0FAh
 db 0F4h,0ECh,0FAh,0E8h,0F2h,0F4h,0FCh,0AAh,0F4h,0F0h,0E0h,0D0h,0E8h,0F0h,0,00
 db 00,0B3h,5Eh,0ADh,0FFh,0FFh,081h,7Eh,42h,42h,42h,42h,7Eh,00,0FFh,0FFh
 db 00,7Eh,42h,42h,42h,42h,7Eh,81h,0FFh,0FFh,0ADh,5Eh,0B3h,00
 db 00,0D9h,0AFh,054h,0FFh,0FFh,40h,0BFh,0A1h,0A1h,0A1h,0A1h,0BFh,000h,0FFh
 db 0FFh,00,0BFh,0B9h,0A9h,0A1h,0A1h,0BFh,040h,0FFh,0FFh,054h,0AFh,0D9h,00
 db 0E0h,0ECh,0F7h,0EBh,0FFh,0FFh,0E0h,0FFh,0F0h,0F0h,0F0h,0F0h,0FFh,0E0h,0FFh
 db 0FFh,0E0h,0FFh,0F0h,0F0h,0F0h,0F0h,0FFh,0E0h,0FFh,0FFh,0EBh,0F7h,0ECh,0E0h
LASTG:
 DB 00,00,00,00,00,00,80H,0C8H,0C5H,4EH,5BH,0A6H
 DB 0A3H,7AH,5FH,0F6H,0CCH,98H,00,00,00,00,00,00
 DB 00,00,00,00,70H,0FCH,9FH,0FFH,0FFH,55H,0C0H,0C0H
 DB 0C0H,0C0H,55H,0FFH,0FFH,9FH,0FCH,70H,00,00,00,00
 DB 00,00,00,00,38H,3CH,1FH,0BFH,0EAH,0D5H,7FH,3FH
 DB 3FH,7FH,0D5H,0EAH,9FH,3FH,3CH,30H,00,00,00,00
MESSEG:
 DB 88H,88H,88H,88H,89H,8AH,8CH,0F8H,88H,88H,88H,88H,88H,88H,88H,0FFH
 DB 88H,88H,88H,88H,88H,88H,88H,0F8H,8CH,08AH,89H,88H,88H,88H
 DB 88H,88H,88H,8FH,88H,88H,88H,0F8H,88H,0FEH,82H,23H,9AH,22H,8AH
 DB 0A2H,2AH,82H,2AH,0A3H,02H,0FEH,88H,0F8H,88H,88H,88H,8FH,88H,88H
 DB 88H,88H,88H,8FH,88H,88H,88H,0F8H,88H,0BFH,0A0H,0A2H,0B6H,0A0H
 DB 0B2H,0E4H,0B8H,0A2H,0A8H,0B6H,0AEH,0BFH,88H,0F8H,88H,88H,88H,8FH,88H,88H
 DB 08H,08H,08H,0FH,08H,08H,08H,08H,08H,08H,08H,0FH,08H,08H,08H,08H
 DB 08H,08H,08H,0FH,08H,08H,08H,08H,08H,08H,08H,0FH,08H,08H
EXCALG:
 DB 00,00,00,00,00,80H,00,00,00,0F8H,04H,0FAH
 DB 74H,0F8H,00,00,00,00,00,00,00,00,00,00
 DB 00,00,00,00,01,02,01,80H,80H,0FFH,00,0FFH,76H
 DB 0FFH,80H,88H,14H,08H,00,00,00,00,00,00
 DB 00,00,00,00,00,00,01,01,03,03,7FH,7FH
 DB 3FH,03,03,01,01,00,00,00,00,00,00,00
SEITG:
 DB 00,00,00,00,00,0F0H,28H,0C8H,8CH,04,24H
 DB 54H,54H,24H,04,8CH,0C8H,28H,0F0H,00,00,00,00,00
 DB 00,00,00,00,00,0FFH,00,6AH,0FFH,0FFH,2AH
 DB 01,01,2AH,0FFH,0B7H,6AH,00,0FFH,00,00,00,00,00
 DB 00,20H,50H,20H,00,03,05,0CH,19H,10H,34H,2AH
 DB 2AH,34H,10H,19H,0CH,05,03,00,00,00,00,00
REFLEG:
 DB 00,00,10H,0A8H,28H,28H,0E8H,28H,10H,10H,28H
 DB 0E8H,0E8H,28H,10H,10H,28H,0E8H,28H,28H,28H,10H,00,00
 DB 00,00,01,02,01,00,81H,86H,7EH,22H,62H,5DH
 DB 5DH,22H,62H,0FEH,86H,81H,00H,08H,14H,08H,00,00
 DB 00,04,0AH,0EH,09H,07,44H,0A3H,43H,07,0DH,1DH
 DB 15H,0DH,07H,03,03,04,07,09,0EH,0AH,04H,00
OBUG:
 DB 00,00,20H,24H,74H,0FCH,0F8H,0F0H,0F0H,0F0H,78H,7CH
 DB 7EH,7EH,0F6H,0E2H,0E0H,0C0H,0C0H,0E0H,0F8H,00,00,00
 DB 00,8EH,1CH,0FCH,0FEH,0FFH,0FFH,0CBH,14H,2AH,55H
 DB 0AAH,51H,0A4H,4AH,24H,0C3H,0FFH,0FFH,0FFH,0BCH,1EH,0FH,00
 DB 00,01,03,03,07,0FH,0FH,0FH,1FH,1FH,1EH,1EH,1FH
 DB 1EH,1FH,1FH,0FH,0FH,07H,07H,07H,07H,03H,01H
TAKARG:
 DB 00,00,00,00,00,00,00,80H,40H,40H,40H,40H,40H
 DB 40H,40H,40H,40H,40H,40H,0C0H,0C0H,0C0H,00,00
 DB 00,00,0F0H,0B8H,54H,0B6H,53H,0F2H,52H,0D2H
 DB 52H,0F2H,52H,0B2H,52H,0B2H,5AH,0FEH,0BBH,0D5H,6AH,3FH,00,00
 DB 00,00,07,0AH,0DH,0AH,0DH,0AH,0DH,0AH,0DH
 DB 0AH,0DH,0AH,0DH,0AH,0DH,07H,02H,01,00H,00,00,00
TAKRFG:
 DB 00,80H,0E4H,3CH,08H,10H,10H,20H,18H,0EH,18H,10H
 DB 18H,08H,0CH,06H,08H,10H,20H,20H,10H,0FCH,80H,00
 DB 21H,0DEH,00H,0FEH,0B5H,5BH,0B5H,05BH,0F5H,05BH
 DB 0D5H,05BH,0F5H,05BH,0B5H,5BH,0B5H,5BH,0FDH,0ABH,0FEH,00,0BEH,41H
 DB 02,1DH,20H,4FH,8AH,0DH,0AH,0DH,0AH,0DH,0AH,0DH,0AH
 DB 0DH,0AH,0DH,0AH,0DH,0FH,86H,63H,18H,07H,00
BOOKG:
 DB 00,00,00,00,00,0F8H,0FCH,04,0C4H,64H,004H,0D4H
 DB 04H,64H,04H,0E4H,84H,0FCH,00,00,00,00,00,00
 DB 00,00,00,00,00,0FFH,0FFH,00,01,28H,38H,79H
 DB 78H,69H,60H,01,00,0FFH,00,00,00,00,00,00
 DB 00,00,00,00,00,07,0BH,0DH,0BH,0DH,0BH,0DH,0BH
 DB 0DH,0BH,0DH,0BH,07H,00,00,000,0,00,00





;------ﾀｲﾄﾙ用------

KAMI:DB 00H,00H,00H,04H,08EH,0DBH,071H,020H
SHIN:DB 0H,090H,0F7H,09BH,0F7H,09BH,0F7H,09BH
 DB 0F7H,09BH,0F7H,09BH,0F7H,09BH,0F7H,09BH,0F7H
 DB 09BH,0F7H,09BH,0F7H,09BH,0F7H,09BH,0F7H,09BH
 DB 0F7H,09BH,0F7H,09BH,0F7H,09BH,0F7H,090H,0H,0H
CURG:DB 1CH,2AH,55H,2AH,1CH,0H

;----------ｱｲｺﾝ----------

ICOM:
 DB 0D8H,0F8H,70H,0E8H,0D4H,0AH,5H,3H;ｹﾝ
 DB 3FH,49H,89H,0FFH,89H,0C9H,0FFH,7EH;ﾀﾃ
 DB 0E3H,0B5H,6AH,55H,55H,6AH,0B5H,0E3H;ﾖﾛｲ
 DB 0C0H,0A0H,0DEH,0B7H,0DEH,0A0H,0C0H,0;ｸｽﾘ
 DB 0DBH,0FFH,07EH,0E7H,0E7H,7EH,0FFH,0DBH;ｱｲﾃﾑ
 DB 14H,7CH,54H,00,7CH,11H,02,78H,00,78H,20H;RET

;-----ﾏｯﾌﾟ用-----

MAPF1:DB 0,0,0,0E0H,10H,0A0H,0F8H,0D4H,0ACH,0F8H,0C0H
 DB 0E0H,0F0H,0F4H,0AAH,0FCH,0F4H,0EAH,0D8H,0E4H
 DB 0C6H,0CAH,0E4H,0D8H,0EAH,0F4H,0FCH,0AAH,0F4H,0F0H
 DB 0E0H,0C0H,0F8H,0ACH,0D4H,0F8H,0A0H,10H,0E0H,0,0,0
MAPF2L:DB 0,3CH,42H,0BDH,66H,0FFH
MAPF2R:DB 0FFH,66H,0BDH,42H,03CH,0
MAPF3:DB 0,0,0,7H,8H,5H,1FH,2BH,35H,1FH,3H,7H,0FH,2FH
 DB 55H,3FH,2FH,57H,1BH,27H,63H,53H,27H,1BH,57H,2FH,3FH,55H
 DB 2FH,0FH,7H,3H,1FH,35H,2BH,1FH,5H,8H,7H,0,0,0,0,0,0
MESF1:DB 0,0,0,0E0H,20H,20H,20H,20H,20H,20H,20H,20H,20H
 DB 20H,20H,20H,20H,20H,20H,20H,20H,20H,20H,20H,20H
 DB 20H,20H,20H,20H,20H,20H,20H,20H,20H,20H,20H,20H
 DB 20H,20H,20H,20H,20H,20H,20H,20H,0E0H,0,0
MESF2:DB 0,0,0,0FFH
MESF3:DB 0,0,0,7,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4
 DB 4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,7
KB1:DB 7FH,6DH,57H,6DH,5BH,7FH
KB2L1:DB 0FCH,48H,0F0H,20H,0C0H,80H
 DB 0FFH,92H,0EDH,33H,0DEH,7FH;KB2L2:
 DB 0FH,04,03,01,00,00;KB2L3:
KB2R1:DB 80H,0C0H,20H,0F0H,48H,0FCH
 DB 7FH,0DEH,33H,0EDH,92H,0FFH;KB2R2:
 DB 0,0,1H,3H,4H,0FH;KB2R3:
KB3R1:DB 0FEH,92H,0F2H,92H,9EH,92H,0F2H,92H,9EH,9EH,92H,0F2H
KB3L1:DB 92H,9EH,92H,0F2H,92H,0FEH
KB3R2:DB 0FFH,24H,3CH,24H,0E7H,24H,3CH,24H,0E7H,0E7H,24H,3CH
KB3L2:DB 24H,0E7H,24H,3CH,24H,0FFH
KB3R3:DB 1FH,11H,1FH,11H,11H,11H,1FH,11H,11H,11H,11H,1FH
KB3L3:DB 11H,11H,11H,1FH,11H,1FH
KB4L1:DB 0C2H,7EH,0C7H,0FCH,89H,0FEH
 DB 0C7H,7CH,0C7H,3CH,0E7H,0FFH;KB4L2:
 DB 0FH,0F8H,87H,7CH,23H,1FH;KB4L3:
 DB 02H,01H,0,0,0,0;KB4L4:
KB4R1:DB 0FEH,89H,0FCH,0C7H,7EH,0C2H
 DB 0FFH,0E7H,3CH,0C7H,7CH,0C7H;KB4R2:
 DB 1FH,23H,7CH,87H,0F8H,0FH;KB4R3:
 DB 0,0,0,0,01H,02H;KB4R4:
DOA1:DB 7FH,7FH,55H,57H,7DH,7FH
DOA2L:DB 0FCH,0C8H,0F0H,0A0H,0C0H,80H,0FFH,0FFH,0AH,0FCH,0FFH,7FH
 DB 0FH,7,2,1,0,0
DOA2R:DB 80H,0C0H,0A0H,0F0H,0C8H,0FCH,7FH,0FFH,0FCH,0AH,0FFH,0FFH
 DB 00,00,01,02,07,0FH
DOA3:DB 0FEH,92H,0F2H,0F2H,1EH,0D2H,52H,52H,5EH,5EH,52H,52H
 DB 0D2H,1EH,0F2H,0F2H,92H,0FEH
 DB 0FFH,24H,3CH,0FFH,00,0FFH,00,06,06,06,06,00
 DB 0FFH,00,0FFH,3CH,24H,0FFH
 DB 1FH,11H,1FH,1FH,10H,1FH,10H,10H,10H,10H,10H,10H
 DB 1FH,10H,1FH,1FH,11H,1FH
DOA4R:DB 0FEH,89H,0FCH,17H,0EEH,2AH,0FFH,0E7H,0FFH,00,0FFH,00
 DB 1FH,23H,7FH,80H,0FFH,00,00,00,00,00,01,02
DOA4L:DB 2AH,0EEH,17H,0FCH,89H,0FEH,00,0FFH,00,0FFH,0E7H,0FFH
 DB 0,0FFH,80H,7FH,23H,1FH,2,1,0,0,0,0

;---------ﾃｷｸﾞﾗﾌｨｯｸ-------------

TGR:
;-------ｽｹﾙﾄﾝ----------
 DB 0,0,0,0,0F8H,0FCH,0,0,0,80H,88H,74H,0CAH,92H,64H,98H
 DB 0,0,0,0,0,0,0,0
 DB 0,0,0,2,0FH,0FH,6,2,83H,6AH,0D4H,55H,8AH,0D5H,55H
 DB 0EAH,41H,1EH,60H,0A0H,0,0,0,0
 DB 0,0,0,0,0,0,62H,5DH,6EH,11H,1,3,5,3,2,3FH
 DB 59H,66H,0,0,0,0,0,0
;-------ｸﾞｰﾙ-----------
 DB 0,0,0,0,0,0,0,80H,0C0H,78H,0FCH,9CH,7CH,0DCH,0B8H
 DB 0C0H,80H,0C0H,0,0,0,0,0,0
 DB 0,0,0,1CH,12H,0BH,5,2,7EH,0EBH,0DEH,0BCH,79H,0B2H
 DB 4DH,95H,0E6H,83H,0,0,0,0,0,0
 DB 0,0,0,0,0,0,0,60H,5EH,77H,7CH,43H,1,1,0FH,7EH,57H
 DB 7AH,4CH,0,0,0,0,0
;-------ﾉﾛｲﾉｹﾝ---------
 DB 0,0,0,0,0,80H,40H,60H,90H,0E8H,48H,34H,3CH,14H,8,0,0
 DB 78H,0A8H,0D0H,20H,0,0,0
 DB 0,0,0,0,0,7,9,1BH,3BH,57H,94H,68H,10H,0A0H,42H,0C5H
 DB 2BH,0E6H,0C4H,0,0,0,0,0
 DB 0,0,0,8,16H,2AH,2CH,18H,0,18H,34H,3FH,1BH,0CH,0FH,11H
 DB 27H,59H,70H,60H,0,0,0,0
;-------ﾋﾄｸｲｸｻ---------
 DB 0,0,0,0C0H,0,0,0,3CH,0E2H,0F2H,62H,0C0H,40H,0C0H
 DB 0B0H,18H,8,8,8,8,0,0,0,0
 DB 00,00,20H,0C3H,0CH,78H,0E0H,0FEH,0FH,0CEH,30H,0F1H
 DB 0E7H,7CH,1FH,0FFH,0B1H,19H,8DH,4CH,28H,20H,20H,10H
 DB 0,6,8,1BH,32H,26H,2FH,3FH,2FH,3FH,2EH,3DH,3FH,2EH
 DB 2BH,3BH,2FH,2DH,3DH,33H,0CH,3,0,0
;-------ﾀﾞｲｼﾞｬ---------
 DB 0,0FH,0FEH,8CH,1CH,0FEH,0F2H,06,0AH,0F6H,0FAH,4EH,0A6H
 DB 0AFH,6CH,0D0H,0B0H,0F0H,60H,80H,0,0,0,0
 DB 0,0,3,0DH,33H,32H,4EH,5EH,5EH,2EH,3EH,0BH,5,2,83H,66H
 DB 1DH,83H,0FFH,0FDH,7EH,0,0,0
 DB 0,0,0,60H,0A0H,0D0H,0D0H,98H,0B8H,0D8H,0D4H,96H,0B6H
 DB 0FDH,0AFH,0AFH,0A7H,0E7H,0AFH,0AEH,0D6H,52H,64H,38H
;-------ﾉｰﾄﾙ-----------
 DB 0,0,0,0,0,0E0H,0A0H,40H,0A0H,10H,88H,44H
 DB 62H,52H,8EH,0,0,40H,0A0H,18H,0A0H,40H,0,0
 DB 0,14H,78H,6CH,0C8H,9FH,0F4H,0EFH,0D2H,0B5H,5EH,94H
 DB 0C4H,74H,0F8H,0D1H,0FEH,0D0H,2EH,93H,8EH,0C0H,40H,0
 DB 0,0,0,30H,40H,40H,4EH,67H,7FH,7FH,7FH,7FH,7FH,7FH
 DB 7FH,3FH,3FH,1FH,0FH,7,1,0,0,0
;-------ｳｲｻﾞﾄﾞ---------
 DB 0,16,112,44,216,44,112,144,128,136
 db 148,186,206,102,204,186,140,0,0,0,0,0,0,0
 DB 0,0,0,28,247,30,31,47,95,95,255,199
 db 197,234,244,255,255,31,254,132,248,0,0,0
 DB 0,0,0,0,7,0,0,0,6,111,83,127,7,7
 db 127,87,127,7,1,2,1,0,0,0
;-------ｸﾞﾘﾌｫﾝ---------
 DB 00,00,00,00,80H,0C0H,60H,0D0H,0A8H,0A0H,40H,0C0H
 DB 0A0H,0D0H,0A8H,0A8H,0F8H,54H,54H,0AAH,54H,0A8H,40H,00
 DB 00,08,0BCH,0DAH,0E1H,68H,0CDH,80H,40H,15H,2DH,6BH
 DB 36H,2AH,0EBH,0B6H,0EAH,0B5H,55H,5AH,35H,55H,3AH,00
 DB 00,00,00,40H,78H,7EH,3DH,06,4EH,7CH,74H,04H,02H
 DB 6CH,7AH,7FH,15H,0EH,3CH,38H,30H,10H,00H,00H
;-------ﾄﾞﾗｺﾞﾝ---------
 DB 00,00,00,80H,0D8H,0A8H,28H,0C8H,50H,10H,08H,44H
 DB 6AH,0EH,36H,0E5H,73H,3AH,98H,0D8H,98H,10H,30H,00
 DB 00,0FEH,71H,3CH,8FH,0C6H,0E5H,7EH,3AH,0EDH,12H,0A8H
 DB 50H,0A8H,4EH,0BDH,72H,99H,0CH,1FH,38H,61H,0FEH,00
 DB 00,00,00,01,03,47H,0A6H,0D6H,8AH,4BH,64H,1AH
 DB 35H,0AAH,0FDH,92H,0C0H,0BFH,0C0H,00,00,00,01,00
;-------ﾗﾌﾚｼｱﾝ---------
 DB 0CH,08H,5CH,0F8H,0A4H,40H,98H,38H,68H,0C8H,38H,88H
 DB 08H,70H,70H,18H,8CH,5CH,30H,30H,60H,0C0H,00H,00H
 DB 00H,00H,80H,0C0H,31H,91H,53H,4FH,2EH,0ABH,0D8H,0F1H
 DB 0E2H,7CH,26H,93H,0CBH,0EAH,96H,0F7H,0BFH,07H,00H,00H
 DB 00H,00H,00H,61H,7EH,1FH,0EH,71H,79H,1DH,74H,7AH
 DB 1AH,31H,79H,78H,13H,76H,7FH,1BH,70H,7FH,00H,00H
;-------ﾄﾛﾙ--------------
 db 00,10h,80h,24h,00h,80h,80h,80h,80h,0F0h,0BCh,38h
 db 3Ah,0F0h,84h,80h,00,00,00,00,80h,20h,00,00
 db 00,18h,14h,3Eh,15h,0Ah,01,0E7h,0DFh,0E7h,0FFh
 db 0BFh,0BFh,03Eh,5Eh,0E9h,7Dh,0FFh,0F0h,0E0h,0C8h,0D2h,84h,00
 db 00,00,0Ah,00,0A0h,0C0h,0FEh,0C9h,0A3h,0FBh,07
 db 07,3Fh,0EFh,0CFh,0AFh,0DEh,0E0h,83h,07h,27h,07,13h,04
;-------ﾒﾀﾙﾅｲﾄ-----------
 db 00,80h,0FEh,81h,0FEh,60h,90h,70h,90h,0B6h,49h
 db 93h,49h,0B6h,90h,71h,96h,0E0h,80h,8Ch,0E8h,9Ch,60h,00
 db 00,00,01,07,0DFh,82h,5Fh,0A9h,69h,0E9h,57h,48h
 db 57h,0E9h,69h,0A9h,5Fh,80h,01,01,00,02,01,00
 db 00,00,80h,0E0h,9Ch,0EAh,39h,0Dh,02,03,05,05
 db 05,03,02,0Dh,39h,0EAh,9Ch,0E0h,80h,00,00,00
;-------ﾋﾞｼｮﾌﾟ-----------
 db 00,00,24h,18h,0E6h,18h,24h,00,00,38h,24h,72h
 db 9Ah,4Ah,9Ah,72h,24h,38h,00,00,00,00,00,00
 db 00,50h,00,00,61h,0FEh,5Ch,32h,19h,1Dh,0FBh
 db 75h,0D9h,0A9h,0D9h,75h,7Bh,0B1h,52h,7Eh,00,00,50h,00
 db 00,04,11h,40h,00,61h,1Fh,00,0Ch,0DBh,0AAh,0FAh
 db 05,04,09,0FAh,0AAh,0DBh,0Eh,00,40h,11h,04,00
;-------ﾏｼﾞﾝ-------------
 db 00,00,0F0h,0A8h,0D8h,70h,80h,40h,22h,26h,0ABh,11h,02h
 db 15h,2Eh,0A0h,20h,20h,0E0h,50h,0A8h,0F0h,00,00
 db 00,0FFh,0F5h,05Eh,0ABh,5Dh,5Fh,60h,0CEh,0C9h,0D2h
 db 0E7h,0AEh,67h,06Eh,72h,0E9h,58h,0ACh,57h,0BEh,0D5h,03Eh,00
 db 00,07,02,01,00,00,00,0E0h,70h,2Dh,17h,12h
 db 0ECh,58h,21h,12h,00Ch,03,00,01,02,1Fh,00,00
;-------ﾚｯﾄﾞD------------
 db 50h,28h,0C6h,0A8h,0D4h,6Ah,34h,90h,40h,0A0h,0D0h
 db 0A8h,44h,2Ah,0ADh,75h,0AAh,56h,0DAh,3Eh,0Fh,07h,03,01
 db 00,95h,2Bh,0D4h,79h,28h,84h,51h,0B9h,55h,0B4h
 db 0DAh,0FAh,75h,56h,57h,0D6h,7Fh,0A8h,50h,0A0h,60h,0C0h,00
 db 00,00,01,08,1Ch,0Fh,0DEh,7Fh,0EAh,77h,0FEh
 db 0FFh,97h,15h,15h,1Fh,2Bh,0D5h,6Ah,0F5h,6Ah,0F5h,0DFh,80h
;--------ﾐﾗｰﾅｲﾄ----------
 db 00,00,00,00,00,00,00,00,00,29h,9Eh,97h,0E2h
 db 0Ah,0E7h,0FEh,0EBh,0F4h,70h,20h,00,00,00,00
 db 00,00,00,00,40h,0E0h,50h,0ECh,5Eh,0Fh,0FFh,0CBh
 db 0A7h,0FBh,0D4h,0FFh,28h,1Fh,00,00,00,00,00,00
 db 00,00,00,1Ch,37h,4Ah,34h,0Fh,00,00,0F9h,0D7h
 db 0F0h,1Ch,68h,7Fh,40h,00,00,00,00,00,00,00
;--------ｽﾋﾟﾘｯﾄ----------
 db 00,00,00,80h,80h,0C0h,0E0h,58h,0C0h,60h,0A0h,50h
 db 0A8h,58h,0E8h,54h,0A2h,8Ch,70h,04,42h,02,08,00
 db 00,0F0h,0Fh,80h,0F0h,0E9h,0DAh,0B7h,76h,0E7h,0C5h
 db 081h,042h,0F1h,0E3h,0E2h,0A6h,29h,60h,50h,40h,08,02,00
 db 00,01,03,06,0Dh,18h,11h,21h,61h,22h,33h,13h
 db 0Bh,06,0Fh,0Bh,13h,13h,62h,86h,04h,1Ch,40h,00
;--------ﾙｼﾌﾙ------------
 db 00,00,00,80h,00,00,00,40h,0E0h,0F3h,3Ch,70h
 db 3Ch,0F3h,0E0h,040h,00,00,00,80h,00,00,00,00
 db 00,00,20h,00,00,0F0h,0A8h,55h,2Fh,0D7h,0FEh
 db 58h,0DEh,37h,0DFh,0ADh,58h,0F0h,80h,00,20h,00,00,00
 db 00,08,00,00,3Fh,0B5h,0EAh,0FDh,0FFh,3Dh,3Dh,1Dh
 db 1Eh,0FFh,0DFh,0FEh,95h,1Ah,1Fh,00,00,08,00,00

TGRB:
;------ｲｱﾘｽ------------
 DB 00,00,00,0E4H,48H,00,0F8H,0E0H,00,48H,24H,80H,60H,30H,28H
 DB 0A4H,24H,0A4H,54H,94H,0D8H,68H,0D0H,0A0H,0C0H,00,00,00,00,00
 DB 00,00,40H,82H,0DH,80H,0FFH,0FFH,80H,1DH,80H,0C7H,0CEH,0F1H,0EAH
 DB 0E1H,0F1H,0DFH,0CFH,0C6H,99H,0BFH,19H,27H,7BH,06H,00H,00H,80H,00
 DB 00,00,00,00,00,81H,47H,07H,05H,05H,07H,83H,0FFH,0FBH,0EDH
 DB 0EAH,0EDH,0FBH,0FFH,83H,07H,7FH,0AFH,0ACH,70H,00H,82H,41H,00,00
 DB 00,00,00,12H,04,08,01,42H,60H,58H,5EH,3FH,0FH,0FH,0FH
 DB 1FH,1FH,1FH,3FH,5FH,5EH,60H,00,00,10H,08,04,00,00,00
;------ｼﾛｷｼ-------------
 db 00,00,30h,0F8h,0F0h,00,00,00,80h,40h,0A0h,0A0h,60h,0B8h,5Ch,0B4h
 db 0D4h,0CCh,0B8h,60h,0E0h,20h,40h,80h,00,00,18h,7Ch,0F8h,00
 db 00,00,00,08h,07,00,80h,8Eh,79h,0FFh,7Eh,06h,0FDh,0B4h,0ABh
 db 0DCh,0ABh,0B4h,0A8h,0FDh,02,03,0Ch,0F9h,0FEh,0F0h,00,04,03,00
 db 40h,60h,60h,30h,18h,0Ch,07h,03h,03h,00h,0DEh,0FFh,50h,0FDh
 db 06h,0Ch,18h,0FEh,0FDh,4Ch,0FFh,06h,00,00,1Fh,17h,1Fh,00,00,00
 db 00,00,00,00,00,00,00,00,18h,1Eh,1Fh,10h,1Fh,07h,00,00,00,00
 db 07,0Eh,19h,26h,38h,00,00,00,00,00,00,00
;------ｾｯｺｳﾏﾙ-----------
 DB 00,80H,18H,0C4H,32H,0C8H,34H,0CH,24H,40H,00H,0F8H,0B4H,0AAH,5CH
 DB 4AH,0B4H,0AAH,0E8H,54H,00,0A0H,68H,0F0H,68H,0C0H,0A2H,84H,06H,08H
 DB 00,01,04,1BH,7AH,9FH,30H,41H,0C2H,40H,0C4H,4FH,0F3H,07H,83H
 DB 67H,0D3H,49H,0C6H,0C3H,20H,0F2H,7FH,9FH,0FH,3FH,7FH,1FH,3EH,00
 DB 40H,80H,00,08H,04,05,09,11H,03H,0F3H,0EEH,0EDH,0AAH,0BDH,0FAH
 DB 0EDH,0AAH,0EDH,3AH,07H,01,68H,90H,00H,61H,0D2H,98H,04,00,00
 DB 04,0BH,00,80H,8EH,0F1H,0F9H,0FEH,0FFH,3FH,07,03,03,03,23H,0C7H
 DB 0FH,7FH,0FFH,0F8H,0E0H,0C0H,80H,00,04,06,41H,0D0H,20H,00
;------ｸﾛｷｼ-------------
 db 00,00,30h,0F8h,0F0h,00,00,00,80h,40h,0A0h,0A0h,60h,0B8h,5Ch,0B4h
 db 0D4h,0CCh,0B8h,60h,0E0h,20h,40h,80h,00,00,18h,7Ch,0F8h,00
 db 00,00,00,08h,07,00,80h,8Eh,79h,0FFh,7Eh,06h,0FDh,0B4h,0ABh
 db 0DCh,0ABh,0B4h,0A8h,0FDh,02,03,0Ch,0F9h,0FEh,0F0h,00,04,03,00
 db 40h,60h,60h,30h,18h,0Ch,07h,03h,03h,00h,0DEh,0FFh,50h,0FDh
 db 06h,0Ch,18h,0FEh,0FDh,4Ch,0FFh,06h,00,00,1Fh,17h,1Fh,00,00,00
 db 00,00,00,00,00,00,00,00,18h,1Eh,1Fh,10h,1Fh,07h,00,00,00,00
 db 07,0Eh,19h,26h,38h,00,00,00,00,00,00,00
;-------ﾛﾚﾝｽ-------------
 db 00,00,40h,00,00,00,00,00,00,0E0h,0F0h,0F8h,0FCh,7Ch,0FCh
 db 0BCh,7Ch,7Ch,0F8h,0F0h,0E0h,00,00,00,40h,80h,0E0h,0C0h,00,80h
 db 00,00,80h,01,84h,00h,0C0h,0E0h,0FFh,0FFh,0F7h,79h,0BAh,0DCh
 db 5Ah,0DDh,0BCh,7Ah,0F9h,0FBh,0FFh,0FFh,0C0h,0C2h,07,8Fh,0DFh,8Fh,57h,00
 db 00,00,9Ah,0C7h,97h,03,0Fh,0BFh,0FFh,0FFh,0FFh,0FCh,0BBh,0D6h,0F4h,0D6h
 db 0BBh,0FCh,0FFh,0FFh,0FFh,07Fh,07h,07h,03h,03h,07h,83h,05h,0
 db 08,02,23h,47h,12h,00,3Ch,3Fh,0BFh,0FFh,3Fh,0BEh,7Eh,3Fh,3Fh
 db 3Fh,3Eh,7Eh,0BFh,3Fh,0FFh,0B8h,00,00,00,02,41h,20h,00,04
;-------ﾗｽﾄ--------------
 db 00,00,00,00,70h,3Eh,0E0h,00,00,00,0C0h,28h,0F0h,0D8h,30h
 db 18h,18h,0D0h,0F8h,30h,0E0h,0C0h,0C0h,18h,10h,0F8h,34h,62h,00,00
 db 00,00,00,9Ah,0CEh,07Eh,0FFh,0FFh,0F8h,0F8h,0FCh,0FCh,94h
 db 05,0Ah,0Ah,0Ah,07h,95h,0FFh,0FCh,0F9h,0F9h,0FEh,0FFh,0FFh,9Ah,32h,20h,00
 db 00,00,78h,9Dh,0Eh,07,0Fh,3Fh,0E7h,0E7h,0FFh,0BFh,4Ah,0F8h,0F8h
 db 0F8h,0F8h,0F8h,04Ah,0BFh,0FFh,0E7h,0E7h,3Fh,0Fh,1Fh,1Dh,0B5h,61h,00
 db 00,00,0Bh,1Eh,21h,60h,5Eh,1Fh,07h,07h,5Fh,7Ah,65h,3Fh,1Fh
 db 1Fh,1Fh,3Fh,65h,7Ah,47h,1Fh,1Fh,1Fh,1Ch,40h,73h,1Dh,0Eh,00

;---------MAP DATA-------------------

 DS 10;SMPﾉｲﾁﾌﾞ
SMP:DS 90
MAPM:DS 10
MPD1:
 DB 2FH,8DH,45H,5,45H,5,23H,8FH
 DB 5,5,15H,7,19H,3,0AH,9
 DB 9,5,5,3,0CH,6,0AH,4EH
 DB 0AH,9,13H,0CH,5,27H,8EH,1FH
 DB 0AH,0CH,6,0DH,5,1,1,7
 DB 0AH,09H,05H,03H,09H,06H,0AH,0BH
 DB 2AH,8EH,0BH,0EH,0AH,09H,04H,06H
 DB 0CH,05H,04H,05H,06H,0CH,05H,07H
;MPD2:
 DB 2FH,8DH,03H,09H,05H,07H,89H,03H
 DB 09H,05H,06H,0AH,0BH,1FH,02H,0AH
 DB 06H,4DH,05H,06H,0AH,0BH,0EH,0CH
 DB 23H,255,8DH,01H,02H,0CH,05H,05H
 DB 0AH,1BH,0BH,0AH,0CH,01H,05H,03H
 DB 0AH,0AH,0AH,0EH,0BH,4CH,07H,0AH
 DB 0EH,0AH,0CH,03H,2AH,223,0DH,46H
 DB 2FH,8CH,27H,0CH,06H,1DH,27H,8FH
;MPD3:
 DB 0BH,2BH,8BH,2BH,8FH,09H,05H,03H
 DB 0AH,0AH,0AH,2AH,0DH,06H,0BH,0AH
 DB 0AH,0AH,0CH,26H,0DH,01H,03H,0BH
 DB 0CH,26H,8DH,27H,8FH,4FH,4FH,4FH
 DB 1BH,09H,05H,07H,1FH,0FH,4FH,0FH
 DB 0EH,0AH,09H,07H,1FH,0EFH,0FFH,2FH
 DB 09H,26H,8EH,0BH,0EFH,0DFH,0FFH,1FH
 DB 0CH,05H,05H,06H,4FH,0BFH,6FH,0FH
;MPD4:
 DB 05H,05H,03H,09H,05H,05H,23H,89H
 DB 09H,07H,0EH,0AH,09H,07H,0EH,0AH
 DB 08H,05H,05H,06H,0CH,27H,8BH,0AH
 DB 0CH,05H,05H,27H,8BH,0BH,0CH,06H
 DB 09H,05H,05H,03H,0AH,0EH,0DH,03H
 DB 0AH,2BH,8FH,0EH,0CH,05H,03H,0AH
 DB 0AH,0AH,0BH,09H,45H,03H,2EH,8AH
 DB 0CH,04H,04H,06H,1FH,0CH,05H,06H
;MPD5
 DB 4FH,09H,03H,09H,03H,09H,05H,03H
 DB 1DH,06H,0CH,06H,0CH,06H,0DH,02H
 DB 05H,05H,23H,8FH,2FH,8DH,01H,00H
 DB 09H,03H,08H,03H,1FH,2BH,8EH,0EH
 DB 0AH,0CH,00H,06H,0BH,4EH,0DH,03H
 DB 00H,01H,04H,01H,02H,19H,03H,08H
 DB 0EH,0CH,01H,04H,00H,06H,0AH,0AH
 DB 0DH,05H,04H,05H,04H,05H,04H,06H
;MPD6
 DB 0DH,05H,01H,01H,01H,05H,05H,03H
 DB 0BH,09H,06H,0EH,0AH,0DH,03H,0AH
 DB 0AH,0CH,07H,0DH,04H,03H,0AH,0AH
 DB 0AH,09H,03H,0BH,0BH,0AH,0AH,0AH
 DB 0AH,0AH,0AH,0EH,0EH,0CH,06H,0AH
 DB 08H,06H,0EH,0BH,09H,03H,0BH,0AH
 DB 0AH,0DH,15H,06H,0EH,0CH,26H,0AH
 DB 0CH,05H,05H,05H,05H,05H,05H,06H
;MPD7
 DB 08H,45H,27H,8FH,09H,05H,05H,07H
 DB 02H,0DH,01H,05H,06H,09H,02H,0BH
 DB 09H,03H,0AH,09H,27H,8EH,0AH,0AH
 DB 0AH,0AH,0AH,0AH,2BH,8BH,0CH,02H
 DB 0AH,0CH,02H,0EH,0AH,08H,01H,02H
 DB 0DH,47H,4EH,09H,06H,09H,05H,03H
 DB 1FH,19H,13H,0EH,09H,02H,09H,06H
 DB 1BH,0CH,04H,05H,06H,0EH,0CH,07H
;MPD8
 DB 0BH,09H,01H,03H,09H,03H,8BH,0FH
 DB 08H,06H,08H,00H,06H,0AH,0CH,47H
 DB 08H,05H,22H,2AH,8DH,44H,05H,13H
 DB 0AH,09H,06H,08H,07H,255,255,0AH
 DB 0AH,2AH,0DH,02H,0FH,7FH,255,0EH
 DB 0AH,0CH,03H,08H,05H,01H,05H,03H
 DB 0AH,0BH,0AH,0CH,03H,4EH,09H,06H
 DB 0CH,04H,04H,05H,06H,1FH,0CH,07H
;MPD9
 DB 09H,45H,01H,01H,01H,01H,45H,03H
 DB 0AH,1FH,08H,00H,00H,02H,1FH,0AH
 DB 0CH,01H,00H,02H,08H,00H,01H,06H
 DB 1FH,08H,04H,02H,08H,04H,02H,1FH
 DB 09H,06H,09H,02H,08H,03H,0CH,03H
 DB 0AH,09H,02H,0CH,06H,08H,03H,0AH
 DB 0CH,04H,00H,05H,05H,00H,04H,06H
 DB 0DH,07H,0CH,05H,05H,06H,0DH,07H
;MPD10
 DB 4FH,0DH,05H,03H,0DH,03H,09H,03H
 DB 1DH,05H,03H,0CH,47H,0AH,0EH,0AH
 DB 0DH,01H,00H,05H,47H,0CH,03H,0AH
 DB 0BH,0AH,4EH,0BH,4FH,0BH,0AH,0AH
 DB 0AH,0AH,1DH,06H,9FH,0AH,0AH,0AH
 DB 0CH,00H,27H,0DH,05H,46H,0AH,0AH
 DB 2BH,8CH,03H,8DH,05H,07H,8AH,0AH
 DB 0CH,27H,174,0DH,05H,05H,26H,8EH
;MPD11
 db 0dh,01h,05h,05h,03h,0ah,0ah,1fh
 db 05h,06h,0dh,01h,00h,06h,0ch,05h
 db 09h,07h,09h,06h,0ah,0bh,09h,03h
 db 08h,05h,06h,0dh,06h,08h,06h,0ah
 db 04h,01h,05h,03h,0bh,08h,03h,0ch
 db 03h,0eh,0dh,06h,08h,06h,0eh,09h
 db 0ch,03h,09h,05h,04h,07h,09h,06h
 db 05h,06h,0ch,07h,0dh,03h,0ah,4dh
;MPD12
 DB 5FH,0DH,01H,07H,09H,44H,03H,1BH
 DB 19H,01H,04H,05H,06H,1BH,0CH,02H
 DB 0AH,0CH,03H,0DH,05H,00H,03H,0EH
 DB 06H,0dH,02H,09H,03H,0AH,08H,05H
 DB 0DH,03H,0aH,0CH,46H,0CH,00H,03H
 DB 03H,08H,00H,07H,9FH,09H,06H,08H
 DB 0AH,0AH,0CH,01H,01H,00H,01H,46H
 DB 4EH,0CH,05H,06H,0EH,0AH,0EH,1FH
;MPD13
 db 0bh,0bh,09h,05h,01h,01h,27h,0ah
 db 2ah,8eh,0ch,03h,0eh,0ah,0bh,0ch
 db 0ah,0dh,01h,06h,0bh,0ah,08h,03h
 db 2ah,8dh,02h,0bh,0ah,0eh,0eh,0ah
 db 0ah,0dh,06h,0ch,00h,07h,09h,02h
 db 2ah,8fh,0dh,05h,06h,09h,06h,0eh
 db 0ah,0eh,46h,4dh,45h,06h,4dh,03h
 db 2eh,8dh,15h,05h,1dh,05h,17h,0ah
;MPD14
 DB 0fh,2bh,0dh,05h,01h,05h,05h,03h
 DB 0dh,06h,89h,01h,04h,05h,03h,0ah
 DB 0dh,03h,0ah,0ch,03h,0bh,8eh,0ah
 DB 05h,00h,06h,0bh,0ah,00h,07h,00h
 DB 2fh,88h,05h,0eh,02h,0eh,89h,02h
 DB 0bh,0ch,07h,4fh,08h,01h,02h,0ah
 DB 0ch,03h,0dh,11h,06h,0ah,0ah,0eh
 DB 2fh,8ch,05h,06h,2fh,8eh,2eh,8fh
;MPD15
 DB 2bh,89h,05h,05h,05h,05h,05h,07h
 DB 0ah,0ah,0bh,09h,03h,09h,03h,0bh
 DB 0ah,0ah,0ah,0ah,0ah,0ah,0ah,0ah
 DB 8ah,0eh,0ah,0ah,0ah,0ah,0ah,2ah
 DB 0ah,0bh,0ah,0ah,0ah,0ah,0ah,0ah
 DB 0ah,0ah,0ah,0ah,0ah,0ah,0ah,0ah
 DB 0ah,0ah,0ch,06h,0ch,06h,0ch,06h
 DB 2eh,8ch,05h,05h,05h,05h,05h,07h

;-------IVENT DATA----------

;-------ｲﾍﾞﾝﾄ---------

;1:PRINT "ｾﾞｳｽｼﾝﾃﾞﾝ"
;2:MISE1
;3:CALL ｶｲﾌｸﾔ
;4:WAPU 1,0
;5:ﾌﾛｱｱｯﾌﾟ
;6:ﾌﾛｱﾀﾞｳﾝ
;7:ｵﾄｼｱﾅ
;8:GOLD 200G
;9:MS ﾐﾙｺﾄ
;A:MS ﾕｶｶﾗ
;B:WAPU 4,0
;C:WAPU 4,3
;D:WAPU 5,4
;E:WAPU 7,4
;F:WAPU 6,1
;10:PRINT "案内"
;11:ｶｷﾞ1,ｶｷﾞ本体
;12:ｶｷﾞのありか
;13:TALK ﾗｽﾄ
;14:BOSS ｲｱﾘｽ
;15:MISE2
;16:ITEM ｻﾝﾀﾞｱｰﾏｰ
;17:600G
;18:固定 ｼﾛｷｼ
;19:ﾌｳｲﾝｦﾄｸｶｷﾞ
;1A:動く床(ｽｲｯﾁ)
;1B:WAPU 0,6
;1C:WAPU 7,7
;1D:ITEM ﾘﾀﾝｽﾄｰﾝ
;1E:ITEM ｱｲｽｼｰﾙﾄﾞ
;1F:ｽｲｯﾁ2,ｽｲｯﾁ本体
;20:ｶｷﾞ3
;21:ｶｷﾞ1ﾋﾝﾄ
;22:ﾀﾞﾒｰｼﾞ床
;23:ｽｲｯﾁ 2F
;24:封印扉2F
;25:ｷﾞﾝﾉｶﾀﾏﾘ
;26:ｲﾉﾁﾉｵｰﾌﾞ
;27:MS 伝説の武具
;28:ITEM 封印のカギ
;29:すりぬけ上
;2A:命のオーブ
;2B:月夜の薬
;2C:鍛冶屋ﾀﾞｲ
;2D:伝説の盾
;2E:ｾｯｺｳﾏﾙ
;2F:6F TO 8F
;30:8F TO 6F
;31:回転の間に宝あり
;32:回転床
;33:ｱﾉﾖﾉｸｽﾘ
;34:スルー習得
;35:すり抜け下
;36:封印扉
;37:ﾌｳｲﾝｽｲｯﾁ
;38:ﾀﾞｲﾀﾛｽﾒｯｾｰｼﾞ
;39:回転の間左上
;3A:回転の間左下
;3B:回転の間右上
;3C:回転の間右下
;3D:回転の間の幸
;3E:8F TO 10F
;3F:ｱﾐｭﾚｯﾄ
;40:FL9 MS1
;41:ｾﾞｳｽﾉﾖﾛｲ
;42:10F TO 8F
;43:心の神
;44:ｴｸｽｶﾘﾊﾞｰ
;45:ｸﾛｷｼ
;46:10000G
;47:;歩いたところに戻す封印	;flag+43
;48:;12f to 13f
;49:;12F 本4
;4A:;ｺﾝﾊﾟｽ　(封印されている)
;4B:;daitaros,IV4Aと連動
;4C:;13f to 12f
;4D:;MS 14F壁のヒント
;4E:;月夜の薬
;4F:;歩いたところに戻すｽｲｯﾁ
;50:ﾏﾎｳﾉﾗﾝﾌﾟ	5F
;51:本1	4F
;52:本2	?F
;53:ﾏﾖｹﾉｵｺｳ	8F
;54:MISE4
;55:;ﾒｶﾞﾐｿﾞｳ
;56:;困った人 ﾊｳﾚﾝの書（3）
;57:;ALES IS ZAPED TO 6F! LAST1
;58:;15PUZZLE
;59:;ダークゾーン
;5A:;ﾛﾚﾝｽ
;5B:;１４階のﾌｳｲﾝ
;5C:;14F 賢者ﾌｧﾙ
;5D:;14F 賢者ｳｨﾙ
;5E:;14F ﾊｳﾚﾝ1世
;5F:;14F ﾀﾞｲﾀﾛｽ
;60:;守護の壁
;61:;守護1
;62:;守護2
;63:;ﾗｽﾄM1
;64:;ﾗｽﾄM2
;65:;ﾗｽﾄﾊﾞﾄﾙ



IVENT:;X,Y,NO.
 DB 00H,1
 DB 20H,10H
 DB 70H,2
 DB 73H,3
 DB 34H,4
 DB 77H,5
 DB 75H,12H
 DB 42H,13H
 DB 24H,26H
 DB 36H,28H
 DB 0FFH
;IVENT2:
 DB 51H,18H
 DB 52H,9
 DB 24H,0AH
 DB 35H,7
 DB 00H,5
 DB 77H,6
 DB 06H,8
 DB 13H,1AH	;注
 DB 07H,23H
 DB 10H,24H
 DB 0FFH
IVENT3:
 DB 61H,21H
 DB 43H,0BH
 DB 54H,0CH
 DB 74H,0DH
 DB 77H,0EH
 DB 00H,6
 DB 34H,0FH
 DB 35H,5
 DB 16H,11H
 DB 25H,14H
 DB 76H,6
 DB 0FFH
;IVENT4:
 DB 35H,6
 DB 25H,15H
 DB 26H,16H
 DB 47H,3
 DB 61H,5
 DB 43H,20H
 DB 51H,19H
 DB 64H,5
 DB 53H,51H
 DB 0FFH
;IVENT5:
 DB 32H,17H
 DB 42H,18H
 DB 72H,1AH
 DB 67H,1AH
 DB 75H,1AH
 DB 45H,1AH
 DB 46H,1AH
 DB 36H,1AH
 DB 24H,1AH
 DB 25H,1AH
 DB 26H,1AH
 DB 15H,1AH
 DB 04H,1AH
 DB 05H,1AH
 DB 56H,1BH
 DB 44H,1CH
 DB 02H,1CH
 DB 07H,1DH
 DB 73H,1EH
 DB 65H,1FH
 DB 64H,6
 DB 61H,6
 DB 00H,5
 DB 43H,50H
 DB 0FFH
;IVENT6:
 DB 00H,6
 DB 70H,5
 DB 77H,5
 DB 07H,5
 DB 34H,5
 DB 22H,56H
 DB 35H,27H
 DB 47H,29H
 DB 65H,2AH
 DB 31H,2BH
 DB 10H,22H
 DB 20H,22H
 DB 30H,22H
 DB 40H,22H
 DB 50H,22H
 DB 60H,22H
 DB 71H,22H
 DB 72H,22H
 DB 73H,22H
 DB 74H,22H
 DB 75H,22H
 DB 76H,22H
 DB 67H,22H
 DB 57H,22H
 DB 37H,22H
 DB 27H,22H
 DB 17H,22H
 DB 06H,22H
 DB 05H,22H
 DB 04H,22H
 DB 51H,25H
 DB 33H,2FH
 DB 01H,55H
 DB 0FFH
;IVENT7:
 DB 70H,6
 DB 77H,6
 DB 07H,6
 DB 34H,6
 DB 16H,7
 DB 30H,2CH
 DB 36H,2DH
 DB 33H,2EH
 DB 0FFH
;IVENT8:
 DB 44H,38H
 DB 77H,3EH
 DB 53H,39H
 DB 54H,3AH
 DB 63H,3BH
 DB 64H,3CH
 DB 00H,30H
 DB 16H,31H
 DB 20H,32H
 DB 31H,32H
 DB 53H,32H
 DB 54H,32H
 DB 63H,32H
 DB 64H,32H
 DB 57H,33H
 DB 74H,34H
 DB 43H,35H
 DB 32H,1AH
 DB 42H,1AH
 DB 52H,1AH
 DB 34H,1AH
 DB 24H,1AH
 DB 50H,37H
 DB 60H,36H
 DB 70H,53H
 DB 0FFH
;IVENT9:
 DB 17H,5
 DB 67H,5
 DB 73H,46H
 DB 35H,3FH
 DB 07H,40H
;DB 03H,	ほかの宝を入れる
 DB 0FFH
;IVENTA:
 DB 40H,52H
 DB 33H,42H
 DB 01H,45H
 DB 03H,45H
 DB 10H,43H
 DB 00H,41H	;ｾﾞｳｽの鎧
 DB 07H,7
 DB 22H,32H
 DB 42H,29H
 DB 61H,5
 DB 0FFH
;IVENTB:
 DB 61H,6
 DB 37H,5
 db 77h,47h	;戻し床
 DB 33H,45H
 DB 56H,54H
 DB 25H,58H
 db 70h,5Ah	;boss
 DB 0FFH
;IVENTC:
 DB 37H,6
 DB 33H,59H
 DB 34H,59H
 DB 43H,59H
 DB 44H,59H
 DB 33H,48h
 db 20h,49h
 db 13h,4ah
 db 77h,3
 db 00h,4dh		;MS 囲まれた部屋
 db 46h,29h
 DB 0FFH
;IVENTD:
 db 00h,4ch
 db 10h,4bh
 db 30h,47h	;戻し床
 db 33h,7
 db 54h,7
 db 61h,4eh		;月夜の薬
 db 53h,5
 db 42h,4fh		;ｽｲｯﾁ
 DB 0FFH
;IVENTE:
 DB 35H,44H		;ｴｸｽｶｲﾊﾞｰ
 DB 00H,5
 DB 53H,6
 db 10h,32h		;回転床
 db 11h,32h		;回転床
 db 12h,32h		;回転床
 db 16h,32h		;回転床
 db 22h,32h		;回転床
 db 25h,32h		;回転床
 db 31h,32h		;回転床
 db 37h,32h		;回転床
 db 40h,32h		;回転床
 db 41h,32h		;回転床
 db 43h,32h		;回転床
 db 45h,32h		;回転床
 db 56h,32h		;回転床
 db 61h,32h		;回転床
 db 62h,32h		;回転床
 db 66h,32h		;回転床
 db 70h,32h		;回転床
 db 74h,32h		;回転床
 db 76h,32h		;回転床
 db 33h,7		;落し穴
 db 14h,5bh		;ﾌｳｲﾝ
 db 17h,5bh		;ﾌｳｲﾝ
 db 21h,5bh		;ﾌｳｲﾝ
 db 36h,5bh		;ﾌｳｲﾝ
 db 57h,5bh		;ﾌｳｲﾝ
 db 67h,5bh		;ﾌｳｲﾝ
 db 77h,5ch		;fal
 db 47h,5dh		;wil
 db 07h,5eh		;houlen
 db 04h,5fh		;daitaros
 db 01h,29h		;隠し通路
 DB 0FFH
;IVENTF:
 DB 22H,57H		;zap
 db 03h,60h
 DB 00H,6
 db 70h,61h
 db 77h,62h
 db 41h,63h
 db 36h,64h
 db 21h,65h		;last
 DB 0FFH

;60:;守護の壁
;61:;守護1
;62:;守護2
;63:;ﾗｽﾄM1
;64:;ﾗｽﾄM2
;65:;ﾗｽﾄﾊﾞﾄﾙ

;------IVENT LIST-----------------

IV1:;MS "ｶﾝﾊﾞﾝ"
 LD HL,IVENTM
 LD C,18
 CALL MSOP
 ld A,(flag+3bh)
 rla
 JP nc,RETSAC
;**********ENDING************
 pop HL
 call tim255
 ld HL,ENDMES
 ld C,18
 call mso
 ld A,1
 out (67h),A
 ld A,5
 call flashn
 ld B,6
 call GRD
 call tim255
 call tim255
 jp ENDING
ENDMES:
 db "ｱﾚｽﾊ  ","ﾄﾋﾞﾗｦ ","ｱｹﾀ･･･"

IV2:		;MISEYA
 LD HL,MISE1
MISEJ:
 PUSH HL
 LD HL,MISEG
 CALL OPNG
 LD HL,IV2MS
 LD C,24
 CALL MSO2
 POP HL
MISEJ2:
 PUSH HL
 CALL GRO
 XOR A
 LD (0FFH),A
 POP HL
 POP AF
 LD (BUYAD+1),HL
 LD HL,IV2MS+24
 LD C,18
 CALL MSOP
 CALL CURSOL
IV2MIN:
 LD A,(0F3H)
 CP 2
 JR C,BUY
 JP Z,SELL
 JP IV2RET
BUY:
 LD A,1
 LD (0FFH),A
 LD HL,ITEM
 LD DE,FREE
 LD BC,11
 LDIR
BUYAD:
 LD HL,0	;ｶｷｶｴ
 LD DE,ITEM
 LD C,11
 LDIR
BUYL1:
 CALL BUYSEL
 LD A,(HL)
 CP 0FH
 JR Z,BUYEND
 CALL BYSLG
 CALL CURD2;GRPD
 JR BUYL1
SELL:
 CALL BUYSEL
 LD A,(HL)
 CP 0FH
 JR Z,IV2RET
 CALL BYSLG
 CALL CURD2;GRPD
 JR SELL
BUYEND:
 LD HL,FREE
 LD DE,ITEM
 LD BC,11
 LDIR
IV2RET:
 LD HL,IV2MS+42
 LD C,6
 CALL MSO
 LD A,(X)
 DEC A
 LD (X),A
 LD A,54H
 LD (0F8H),A
 JP START
IV2MS:
 DB "ｲﾗｯｼｬｲ","ｻｧ､   ","ﾐﾃｲｯﾃ ","ｸﾚ    "
 DB " ｶｳ   "," ｳﾙ   "," ﾓﾄﾞﾙ ","ｱﾘｶﾞﾄｳ"
BYSLG:
 PUSH HL
 PUSH AF
 RLA
 JR C,BYSLIT
 RLA
 JP C,BYSLAR
 RLA
 JP C,BYSLSH
 RLA
 JP C,BYSLSW
BYSLRP:
 POP AF
 POP HL
 RET
BYSLIT:
 RLA
 JR C,BYSLRP
 LD HL,BYSLP1
BYSLL1:
 POP AF
 DEC A
 AND 0FH
 RLCA
 LD D,0
 LD E,A
 ADD HL,DE
 LD E,(HL)	;ﾈﾀﾞﾝ	+1
 INC HL
 LD D,(HL)
 EX DE,HL
 LD A,(0FFH)
 CP 1
 JR NZ,BYSLSL
BYSLBY:
 PUSH HL
 CALL ASCN
 LD HL,NMEMRY
 LD DE,BYSLMS+6
 LD BC,5
 LDIR
 LD HL,BYSLMS
 LD C,22
 CALL MSO
BYSLL6:
 CP 7H
 JR Z,BYSLL5
 CP 16H
 JP Z,BYSLRP
 CALL 48381
 JR BYSLL6
BYSLL5:
 XOR A
 LD HL,FREE
 LD BC,11
 CPIR
 DEC HL
 POP DE		;+1
 JR NZ,BYSLOV
 PUSH HL
 LD HL,(G)
 OR A
 SBC HL,DE
 JR C,BYSLO2
 LD (G),HL
 POP HL
 POP DE
 LD A,(DE)
 LD (HL),A
 LD HL,IV2MS+42
 LD C,6
 CALL MSO
 RET
BYSLOV:
 LD HL,BYSLMS+34
 LD C,12
 CALL MSO
 POP HL
 RET
BYSLO2:
 POP HL
 LD HL,BYSLMS+22
 JR BYSLOV+3
BYSLAR:
 LD HL,BYSLP2
 JR BYSLL1
BYSLSH:
 LD HL,BYSLP3
 JR BYSLL1
BYSLSW:
 LD HL,BYSLP4
 JR BYSLL1
BYSLSL:
 LD A,4
 CALL WSAN
 PUSH HL
 POP DE
 LD A,2
 CALL XSAN
 PUSH HL
 POP DE
 PUSH DE
 CALL ASCN
 CALL BYSLC1
BYSLL2:
 CP 7H	;Y
 JR Z,BYSLL3
 CP 16H	;N
 JP Z,BYSLRP
 CALL 48381
 JR BYSLL2
BYSLL3:
 POP DE
 POP HL
 XOR A
 LD (HL),A
 LD HL,(G)
 ADD HL,DE
 JR NC,BYSLL4
 LD HL,0FFFFH
BYSLL4:
 LD (G),HL
 LD HL,(0F2H)
 LD DE,0800H
 ADD HL,DE
 EX DE,HL
 LD HL,GRD2
 LD B,8
 CALL GRPD
 RET

BYSLMS:
 DB "ｿﾚﾊ   ","     G","ﾆﾅﾙﾖ  ","Y/N?"
 DB "ｵｶﾈｶﾞ ","ﾀﾘﾅｲﾖ ","ﾓﾁﾓﾉｶﾞ","ｲｯﾊﾟｲ!"
BYSLP1:
 DW 20,500,15000,2000,300,12345
BYSLP2:
 DW 10,300,3000,10000,0
BYSLP3:
 DW 5,100,3000,9500,0
BYSLP4:
 DW 100,500,3000,12000,0,48
BYSLC1:
 LD HL,NMEMRY
 LD DE,BYSLMS+6
 LD BC,5
 LDIR
 LD HL,BYSLMS
 LD C,22
 CALL MSO
 RET
IV3:;カンケイない→LD HL,ITLIST;ITEMAD=ITEM ADD
 POP AF
 LD HL,KAIFUG
 CALL OPNG
 LD A,(Y)
 DEC A
 LD (Y),A
 LD HL,IV3MS
 LD C,22
 CALL MSO2P
IV3L1:
 CP 7;Y
 JR Z,IV3L2
 CP 16H;N
 JP Z,START
 CALL 48381
 JR IV3L1
IV3L2:
 LD A,3
 CALL FLASH
 CALL IT3
 JP MANSTS
 JP START
IV3MS:
 DB "ﾏﾎｳｼﾞﾝ","ｶﾞｱﾙ  ","ﾉｯﾃﾐﾙ?","Y/N?"
IV4:;WARP (1,0)
 LD DE,0100H
 JP WARPSL
IV5:
 JP FLUP
IV6:
 JP FLDN
IV7:
 LD HL,IVENTM+54
 LD C,12
 CALL MSOP
 CALL TIMBTL
 CALL SHAKE
 LD B,6
 CALL GRD
 CALL BEPFDC
 JP FLDNK
IV8:;GOLD
 XOR A		;FLAG+0
 CALL FLAGC	; LD A,(FLAG); RLA; JP C,RETSAC
 POP AF
 CALL TAKARP
 LD E,0		;FLAG+0
 LD HL,200
 JP TK1
IVB:;WARP(4,0)
 LD DE,0400H
 JR IV4+3
IVC:;WARP(4,3)
 LD DE,0403H
 JR IV4+3
IVD:;WARP(5,4)
 LD DE,0504H
 JR IV4+3
IVE:;WARP(7,4)
 LD DE,0704H
 JR IV4+3
IVF:;WARP(6,1)
 LD DE,0601H
 JR IV4+3
IV9:;TO SEEING IS TO BELIEVING
 LD HL,IV9M
 LD C,24
 CALL MSOP
IV9L:
 XOR A
 LD (0F0H),A								;
 JP RETSAC
IV9M:
 DB ":ﾒﾆﾐｴﾙ","ﾓﾉﾀﾞｹｶ","ﾞｼﾝｼﾞﾂ","ﾃﾞﾊﾅｲ:"
IVA:;ms ﾕｶ
 LD HL,IVAM
 LD C,18
 CALL MSOP
 LD A,(FLAG+0DH)
 RLA
 JP NC,RETSAC
IVATH:
 ;
 LD HL,IVAM2
 JP IV7+3
IVAM:
 DB "ｵﾓｲﾓﾉｦ","ｵｲﾀﾗﾕｶ","ﾇｹｿｳﾀﾞ"
IVAM2:
 DB "ﾕｶｶﾞ  ","ﾇｹﾀｧ!!"
IV10:;MS "ｶﾝﾊﾞﾝ"
 LD HL,IVENTM+108
 LD C,24
 CALL MSOP
 JP RETSAC
IV11:
 LD A,2		;FLAG+2
 CALL FLAGC
KAGI:
 LD A,(0FCH)
 OR A
 JP Z,RETSAC
 POP AF
IV11L:
 LD HL,IV11M
 LD C,18
 CALL MSO
 PUSH AF
 CALL GRPUT2
 POP AF
 CP 20H
 JR Z,IV11L
 JP MALP+3
IV11M:
 DB "ﾄﾋﾞﾗﾊ ","ﾌｳｲﾝ  ","ｻﾚﾃｲﾙ "
IV12:;MS "ｶｷﾞのありか"
 LD HL,IVENTM+84
 LD C,24
 CALL MSOP
 JP RETSAC
IV13:
 LD A,1		;FLAG+1
 CALL FLAGC
 POP HL
 LD HL,IV13M
 CALL TAKARP+3
 LD A,5
 CALL FLASH
 LD B,2
 LD HL,IV13M+6
 LD BC,04FFH
 CALL MSOBR
;IV13L:
; PUSH BC
; CALL MSOB
; POP BC
; DJNZ IV13L
 LD A,5
 CALL FLASH
 LD A,0C1H
 LD HL,IVITLS
 LD DE,FLAG+1
 JP TK2
IV13ED:
 POP HL
 JP MALP+3
IV13M:
 DB "ﾋｶﾘ   "
 DB "ｱﾚｽﾊ  ","ｿﾉﾋｶﾘﾆ","ﾌﾚﾀ   ",0F9H
 DB "ｽﾙﾄﾅﾝﾄ","ﾀｶﾗﾊﾞｺ","ｶﾞｱﾗﾜﾚ","ｶﾀﾘｶｹﾀ",0F9H
 DB ":ｱﾚｽﾖ､","ｱﾉｵﾄｺﾊ","ﾊ､ｶﾐｦﾓ","ﾌｳｲﾝｼﾀ",0F9H
 DB "ｵｰﾌﾞｦ ","ﾃﾆｲﾚ､ ","ｶﾐﾀﾁｦ ","ﾄｷﾊﾅﾃ!",0F9H
IV14:;ｲｱﾘｽ LV7 AP 52 DP 57 ﾉﾄｷ G 500 EX 480
 LD A,4		;FLAG+4
 CALL FLAGC
 POP HL
 LD A,(FLAG+3)	;FLAG+3
 RLA
 JR C,IV14TK
 CALL MCLEAR
 LD HL,TGRB
 CALL OPNG
 LD HL,IV14M
 LD B,03
 CALL MSOBR
 XOR A
 CALL BATTLB
 XOR A
 LD (BF),A
 LD A,80H
 LD (FLAG+3),A
 LD HL,IV14M2
 LD B,05
 CALL MSOBR
IV14TK:
 LD A,0C2H
 LD HL,IVITLS+8
 LD DE,FLAG+4
 JP DOBU
IV14M:
 DB "ﾜﾀｼﾊ  ","ｳﾗﾐﾉ  ","ｼﾈﾝﾀｲ ",0F9H
 DB "ﾜﾀｼﾀﾁﾊ","ﾌｸｼｭｳｦ","ﾄｹﾞﾅｹﾚ","ﾊﾞﾅﾗﾅｲ",0F9H
 DB "ｺｺｶﾗｻｷ","ﾆ ｽｽﾑﾉ","ﾅﾗｼﾈ!:",0F9H
IV14M2:
 DB "ﾖｸｿﾞｺﾉ","ﾜﾀｼｦﾀｵ","ｼﾀﾅ･･･",0F9H
 DB "ﾜﾀｼﾀﾁﾊ","ｶﾚﾄﾄﾓﾆ",0F9H
 DB "ｺﾉｸﾆｦ ","ﾖｸｼﾖｳﾄ","ｼﾖｳﾄｼﾀ",0F9H
 DB "ﾃﾞﾓｶﾚﾊ","ﾜﾀｼﾀﾁﾉ","･･ﾀﾒﾆ･",0F9H
 DB "ﾌｸｼ･ｳｦ","ｶﾅ･･ｽﾞ","･･ﾄｹﾞ･","ﾊｽﾞ･･･",0F9H
IV15:
 LD HL,MISE2
 JP MISEJ
IV16:;TAKARA SANDER ARMOR
 LD A,5		;FLAG+5
 CALL FLAGC	; LD A,(FLAG); RLA; JP C,RETSAC
 POP AF
 CALL TAKARP
 LD A,43H
 LD DE,FLAG+5
 LD HL,ARMOR+16
 JP TK2
IV17:;FLAG+6 720G
 LD A,6		;FLAG+6
 CALL FLAGC	; LD A,(FLAG); RLA; JP C,RETSAC
 POP AF
 CALL TAKARP
 LD HL,720
 LD E,6		;FLAG+6
 JP TK1
IV18:;ｼﾛｷｼ
 POP HL
 LD C,1
;JP KOTEIB
KOTEIB:
 LD HL,FLAG+14
 LD A,(HL)
 OR A
 JP NZ,KOTEIL
KOTEIT:	;C=TEKI NO.
 LD A,80H
 LD (HL),A
 LD A,C
 CALL BATTLB
 XOR A
 LD (BF),A
 JP START
KOTEIL:
 OR A
 RL (HL)
 CALL 48381
 CP 20H
 JP Z,MALP+3
 SCF
 RR (HL)
 JP MALP+3
IV19:		;剣の玉を掲げよ
 LD A,0BH	;FLAG+0BH
 CALL FLAGC	; LD A,(FLAG); RLA; JP C,RETSAC
 LD HL,IVENTM+132
IV19L:
 LD C,24
 CALL MSO
 POP HL
 JP MALP+3
IV1A:;動く床
 LD A,(0F0H)
 OR A
 JR NZ,IV1AL
 LD HL,IVENTM+156
 LD C,18
 CALL MSOP
 CALL TIM255
 POP AF
 JP MUP
IV1AL:
 LD A,0AH
 CALL FLAGC
 LD A,(X)
 LD HL,(Y)
 CP 2
 JR NZ,IV1AED
 LD A,L
 CP 5
 JR NZ,IV1AED
 LD A,(URDL)
 CP 3
 JR Z,IV1AED+4
IV1AED:
 NOP
 JP RETSAC
;
 LD A,0AH
 JP IV1F+2
IV1B:;WARP 0,6
 LD DE,0006H
 JP WARPSL
IV1C:;WARP 7,7
 LD A,0AH
 CALL FLAGC
 LD DE,0707H
 JR IV1B+3
IV1D:; DB "ﾘﾀﾝｽﾄｰﾝ ";	NO.C6H
 LD A,7		;FLAG+7
 CALL FLAGC	; LD A,(FLAG); RLA; JP C,RETSAC
 POP AF
 CALL TAKARP
 LD A,0C6H
 LD DE,FLAG+7
 LD HL,IVITLS+40
 JP TK2
IV1E:;ICE SHIELD
 LD A,8		;FLAG+8
 CALL FLAGC	; LD A,(FLAG); RLA; JP C,RETSAC
 POP AF
 CALL TAKARP
 LD A,23H
 LD DE,FLAG+8
 LD HL,SHIELD+16
 JP TK2
IV1F:
 LD A,9
 LD HL,FLAG
 LD E,A
 LD D,0
 ADD HL,DE
 LD (BOTANL+1),HL
 CALL FLAGC
 POP AF
 LD HL,IVENTM+174
 CALL TAKARP+3
 CALL TAKARS
 LD A,80H
BOTANL:
 LD (FLAG+9),A
 JP START
TAKARS:
 LD HL,MESSEG	;12/2
 CALL OPNG	;12/2
 LD HL,IV18M
 LD C,24
 CALL MSO2
IV18L:
 CP 7;Y
 JR Z,IV18L2
 CP 16H;N
 POP HL
 JP Z,START
 PUSH HL
 CALL 48381
 JR IV18L
IV18L2:
 CALL SHAKE
 CALL BEPBKC
 LD HL,IV18M+24
 LD C,18
 CALL MSOB
 RET
IV18M:
 DB "ﾎﾞﾀﾝ  ","ｶﾞｱﾙ  ","ｵｼﾃﾐﾙｶ","Y/N?  "
 DB "ﾅﾆｶｶﾞ ","ｷｴｻｯﾀ ","ｵﾄｶﾞｼﾀ"
IV20:
 LD A,9
 CALL FLAGC
 JP KAGI
IV21:;3F KAGI
 LD HL,IV21M
 LD C,6
 CALL MSOP
 JP RETSAC
IV21M:
 DB "ﾁｲｻﾅｱﾅ"
IV22:;ﾀﾞﾒｰｼﾞ床
 LD HL,IVENTM+180
 LD C,12
 CALL MSOP
 POP IY
 CALL DOKD
 PUSH IY
 JP RETSAC
IV23:;2F BOTAN
 LD A,0CH
 JP IV1F+2
IV24:
 LD A,0CH
 CALL FLAGC
 JP KAGI
IV25:;宝:ｷﾞﾝﾉｶﾀﾏﾘ
 LD A,0DH
 CALL FLAGC
 POP AF
 CALL TAKARP
 LD HL,IV25M
 LD C,12
 CALL MSO2
 LD A,0C7H
 LD HL,IVITLS+48
 LD DE,FLAG+0DH
 JP TK2
IV25M:
 DB "ｺﾚﾊ･･･","ｵﾓﾀｲ･･"
IV26:;ｲﾉﾁﾉｵｰﾌﾞ
 LD A,10H
 CALL FLAGC
 POP HL
 LD HL,IV26M
 CALL TAKARP+3
 LD A,0C5H
 LD HL,IVITLS+32
 LD DE,FLAG+10H
 JP DOBU
IV26M:
 DB "ｱｶｲﾀﾏ "
IV27:;伝説の武具
 POP HL
 LD HL,IV27M
 CALL TAKARP+3
 LD HL,MESSEG	;12/2
 CALL OPNG	;12/2
 LD HL,IV27M+6
 LD B,5
 CALL MSOBR
 JP START
IV27M:
 DB "ｶﾍﾞ   "
 DB "ﾌﾀ･ﾋﾞ ","ｼﾞ･ｱｸﾆ","･ｶ･ﾚﾀ ","ﾄｷ･ﾀﾒ･",0F9H
 DB "ｷｭ･ｷ･ｸ","ﾉ･ｳﾋﾞｦ","ﾌｳ･ﾝ･ﾃ","ｵｸ････",0F9H
 DB "ｺﾚ･･ﾊ ","ｶﾐｶﾞ･ﾉ","ﾁｶ･ｶﾞ･","･ﾂﾖ･ﾀﾞ",0F9H
 DB "ｿﾚ･ﾞﾚ ","7･･ｲ  ","･･ｶ･  ","･0･･ﾆ ","･ﾙ･ﾞﾛｳ",0F9H
 DB "ﾌ･ｲﾝ･ ","ﾄｸ･ｷ･ﾊ","1ｶ･ﾉﾕ･","ﾉｼﾀ･･ﾘ",0F9H
IV28:;ﾌｳｲﾝﾉｶｷﾞ
 LD A,11H
 CALL FLAGC
 POP HL
 LD HL,GRD2
 CALL TAKARP+3
 LD A,5
 CALL FLASHN
 LD A,0C8H
 LD HL,IVITLS+56
 LD DE,FLAG+11H
 JP TK2
IV29:;すりぬけ
 LD A,(URDL)
 DEC A
 JP NZ,RETSAC
 JP IV9L
IV2A:
 LD A,12H
 CALL FLAGC
 LD HL,IV2AM
 JP IV19L
IV2AM:
 DB "ｱﾚｽ､  ","ｾｲﾒｲﾉ ","ｶｶﾞﾔｷｦ","ｶｶｹﾅｻｲ"
IV2B:;月夜の薬
 LD A,13H
 CALL FLAGC
 POP HL
 CALL TAKARP
 LD A,84H
 LD HL,ITLIST+24
 LD DE,FLAG+13H
 JP TK2
IV2C:;鍛冶屋のｷﾞﾙ
 LD A,(FLAG+12H)
 RLA
 JR NC,IV2CL
 LD HL,KAZIG
 CALL OPNG
 LD HL,IV2CM
 LD B,3
 CALL MSOBR
 CALL C7C
 LD HL,MISE3
 JP MISEJ2
IV2CL:
 LD HL,IV2CM3
 LD C,22
 CALL MSOP
 JP RETSAC
IV2CM:
 DB "ﾜﾀｼﾊ  ","ｶｼﾞﾔﾉ ","ｷﾞﾙ   ",0F9H
 DB "ﾃﾞﾝｾﾂﾉ","ｿｳﾋﾞﾄﾊ","ｲｶﾅｲｶﾞ",0F9H
 DB "ﾖｲｿｳﾋﾞ","ｶﾞｱﾙﾖ ",0F9H
IV2CM2:
 DB "ｵｵｿﾚﾊ ","ｷﾞﾝﾉ  ","ｶﾀﾏﾘ! ",0F9H
 DB "10000G","ﾄｺｳｶﾝ ","ｼﾃｱｹﾞ ","ﾖｳ    ",0F9H
IV2CM3:
 DB ":ｲﾉﾁﾉ ","ﾌｳｲﾝｶﾞ","ﾄｹﾙﾏﾃﾞ","ﾔｽﾐ:"
C7C:
 LD HL,ITEM
 LD BC,12
 LD A,0C7H
 CPIR
 RET NZ
 DEC HL
 LD (HL),0
 LD HL,IV2CM2
 LD B,2
 CALL MSOBR
 LD HL,(G)
 LD DE,10000
 ADD HL,DE
 JR NC,C7CL
 LD HL,0FFFFH
C7CL:
 LD (G),HL
 RET
IV2D:;伝説の盾
 LD A,14H
 CALL FLAGC
 POP HL
 CALL TAKARP
 LD HL,FLAG+12H		;神のフラグ
 LD DE,IV2DRP		;各自宝
KYUEQJ:					;ここへジャンプ
 PUSH HL	;12/2
 PUSH DE	;12/2
 LD HL,TAKRFG	;12/2
 CALL OPNG2	;12/2
 POP DE		;12/2
 POP HL		;12/2
 LD (I2DEX1+1),HL	;神のフラグ
 LD A,(FLAG+11H)	;封印の鍵
 RLA
 JR C,IV2DL1	;A
 LD HL,IV2DM2	;ﾀｶﾗﾊﾞｺﾊﾋﾗｶﾅｲ	脱落
 LD C,12
 CALL MSO2
 jp start
IV2DL1:		;		成功
 PUSH DE	;A
 LD HL,IV2DM1	;ﾌｳｲﾝﾉｶｷﾞｦﾂｶｯﾀ
 LD C,24
 CALL MSO2
 LD A,5
 CALL FLASH
I2DEX1:
 LD A,(0000)
 POP HL
 PUSH HL
 DEC HL		;IV2DRP-1
 RLA
 JR C,IV2DL	
 LD (HL),0	;邪の道	;IV2DRP-1
 LD HL,IV2DM3
 LD C,18
 CALL MSOB
 RET		;各自の宝へ
IV2DL:	
 LD (HL),1	;聖の道	;IV2DRP-1
 LD HL,IV2DM3+18
 LD C,18
 CALL MSOB
 RET		;各自の宝へ
 DB 0		;IV2DRP-1
IV2DRP:
 LD A,(IV2DRP-1)
 OR A
 JR NZ,IV2DSI
IV2DJA:
 LD A,26H
 LD HL,SHIELD+40
 JR IV2DL2
IV2DSI:
 LD A,25H
 LD HL,SHIELD+32
IV2DL2:
 LD DE,FLAG+14H	
 JP DTATE	;TK2
IV2DM1:
 DB "ｱﾚｽﾊ  ","ﾌｳｲﾝﾉ ","ｶｷﾞｦ  ","ﾂｶｯﾀ  "
IV2DM2:
 DB "ﾀｶﾗﾊﾞｺ","ﾊﾋﾗｶﾅｲ"
IV2DM3:
 DB "ｼﾞｬｱｸﾅ","ﾋｶﾘｶﾞ ","ｱﾌﾚﾀﾞｽ"
 DB "ｶﾐﾉﾁｶﾗ","ﾃﾞﾉﾛｲ ","ｶﾞﾄｹﾀ "
IV2E:;ｾｯｺｳﾏﾙ
 LD A,15H	;FLAG+15H
 CALL FLAGC
 POP HL
 LD HL,IV2EM
 LD C,24
 CALL MSO2
 LD A,2
 CALL BATTLB
 LD HL,IV2EM2
 LD B,4
 CALL MSOBR
 XOR A
 LD (BF),A
 LD A,80H
 LD (FLAG+15H),A
 JP START
IV2EM:
 DB "ｾｯｺｳﾏﾙ","ﾉﾅﾆｶｹﾃ","ｵﾏｴｦ  ","ﾀｵｽ!  "
IV2EM2:
 DB "ﾅｶﾅｶﾔﾙ","ﾃﾞﾊﾅｲｶ",0F9H
 DB "ｼｶｼﾌｸｼ","ｭｳﾊ､ﾓｳ","ﾄﾏﾗﾅｲ ",0F9H
 DB "ｷｻﾏﾅﾗ､","ｱﾉｵｶﾀﾆ","ｱｴﾙｶﾓ ","ｼﾚﾅｲｶﾞ",0F9H
 DB "ｿｺﾃﾞｾﾞ","ﾂﾎﾞｳｦ･","ｼﾙ･･ｺﾄ","ﾆ･･ﾅﾙ･",0F9H
IV2F:;6F TO 8F
 LD HL,0100H
 LD A,8
IV2FL:
 LD (FL),A
 LD (X),HL
 POP AF
 LD HL,KAIFUG
 CALL OPNG
 LD HL,IV2FM
 LD C,24
 CALL MSO2
 LD A,3
 CALL FLASHN
 CALL GROR
 CALL GRO
 LD A,3
 CALL FLASHN
 JP START
IV2FM:
 DB "ﾊｹﾞｼｲ ","ﾋｶﾘｶﾞ ","ｱﾚｽｦ  ","ﾂﾂﾑ!  "
IV30:;8F TO 6F
 LD A,6
 LD HL,0403H
 JR IV2FL
IV31:;回転の間に宝あり
 LD HL,IV31M
 LD C,12
 CALL MSOP
 JP RETSAC
IV31M:
 DB "ｶｲﾃﾝﾉﾏ","ｦｼﾗﾍﾞﾖ"
IV32:;回転床
 ld A,2dh
 call flagc
 CALL RAND4
 INC A
 LD (URDL),A
 JP RETSAC
IV33:;ｱﾉﾖﾉｸｽﾘ
 LD A,16H
 CALL FLAGC
 POP AF
 CALL TAKARP
 LD A,83H
 LD HL,ITLIST+16
 LD DE,FLAG+16H
 JP TK2
IV34:;スルー習得
;JP RETSAC		;
 LD A,17H
 CALL FLAGC
 POP AF
 LD HL,IV34M
 CALL TAKARP+3
 LD HL,IV34M+6
 LD C,24
 CALL MSO2
 LD A,10
 CALL FLASH
 LD HL,IV34M+30
 LD C,12
 CALL MSOB
 LD A,80H
 LD (FLAG+17H),A
 LD HL,MG
 SET 6,(HL)
 JP START
IV34M:
 DB "ﾎｳｷﾞｮｸ"
 DB "ﾌｼｷﾞﾅ ","ﾋｶﾘｶﾞ ","ｱﾚｽﾆ  ","ﾊｲｯﾃｸﾙ"
 DB "ﾏﾎｳｽﾙｰ","ｦｵﾎﾞｴﾀ",0F9H
IV35:;すり抜け下
 NOP
 LD A,(URDL)
 CP 3
 JP Z,IV9L
 JP RETSAC
IV36:;封印扉
 LD A,18H
 JP IV11+2
IV37:;ﾌｳｲﾝｽｲｯﾁ
 LD A,18H
 JP IV1F+2
IV38:;ﾀﾞｲﾀﾛｽﾒｯｾｰｼﾞ
 NOP
 LD A,(FLAG+1EH)
 RLA
 NOP
 JP C,IV35
 LD HL,IV38M
 LD B,4
 CALL MSOBR
 LD A,80H
 LD (FLAG+1EH),A
 POP AF
 JP START
IV38M:
 DB ":ｺｺﾏﾃﾞ","ｷﾀｶｱﾚｽ",0F9H
 DB "ﾜﾀｼﾊ  ","ﾏﾀﾞﾏﾀﾞ","ｻｷﾆｲﾙ ",0F9H
 DB "ｵｼﾞｹｽﾞ","ｸﾅﾖ:  ",0F9H
 DB "ﾏﾘｮｸｶﾞ","ｶｲﾎｳ  ","ｻﾚﾀ   ",0F9H
IV39:;回転の間左上
 LD E,0
 JR IV3CL
IV3A:;回転の間左下
 LD E,1
 JR IV3CL
IV3B:;回転の間右上
 LD E,2
 JR IV3CL
IV3C:;回転の間右下
 LD E,3
IV3CL:
 LD D,0
 LD HL,FLAG+19H
 ADD HL,DE
 LD (HL),80H
IV3D:;回転の間の幸
 LD A,1DH
 CALL FLAGC
 LD HL,FLAG+19H
 XOR A
 LD BC,4
 CPIR
 JP Z,RETSAC
 POP AF
 LD HL,IV3DM
 LD C,24
 CALL MSO2
 LD DE,FLAG+1DH
 LD HL,IVITLS+16
 LD A,0C3H
 JP DOBU
IV3DM:
 DB "ﾃﾝｼﾞｮｳ","ｶﾗﾀﾏｶﾞ","ｺﾛｶﾞｯﾃ","ｷﾀ    "
IV3E:;8F TO 10F
 LD A,(FLAG+1EH)
 RLA
 JP NC,RETSAC
 LD A,10
 LD HL,0403H
 JP IV2FL
IV3F:;ｱﾐｭﾚｯﾄ
 LD A,1FH
 CALL FLAGC
 POP HL
 LD HL,GRD2
 CALL TAKARP+3
 LD A,5
 CALL FLASHN
 LD HL,IVITLS+64
 LD A,0C9H
 LD DE,FLAG+1FH
 JP TK2
IV40:;FL9 MS1
 LD HL,IV40M
 LD C,11
 CALL MSOP
 JP RETSAC
IV40M:
 DB "ﾊﾅﾉﾅｶﾆ","ﾀｶﾗｱﾘ"
IV41:;ｾﾞｳｽﾉﾖﾛｲ 10F
 LD A,20H
 CALL FLAGC
 POP HL
 CALL TAKARP
 LD HL,FLAG+21H		;神のフラグ
 LD DE,IV41RP		;各自宝
 JP KYUEQJ
 DB 0
IV41RP:
 LD A,(IV41RP-1)
 OR A
 JR NZ,IV41SI
IV41JA:
 LD A,46H
 LD HL,ARMOR+40
 JR IV41L2
IV41SI:
 LD A,45H
 LD HL,ARMOR+32
IV41L2:
 LD DE,FLAG+20H	
 JP DYORO	;TK2
IV42:;10F TO 8F
 LD A,8
 LD HL,0706H
 JP IV2FL
IV43:;心の神
 LD A,21H
 CALL FLAGC
 LD HL,IV43M
 JP IV19L
IV43M:
 DB "ｱﾚｽﾖ､ ","ｺｺﾛﾉ  ","ｶｶﾞﾔｷｦ","ﾃﾗｽﾉﾀﾞ"
IV44:;ｴｸｽｶﾘﾊﾞｰ	14F
 LD A,22H
 CALL FLAGC
 POP HL
 CALL TAKARP
 LD HL,FLAG+0BH		;神のフラグ
 LD DE,IV44RP		;各自宝
 JP KYUEQJ
 DB 0
IV44RP:
 LD A,(IV44RP-1)
 OR A
 JR NZ,IV44SI
IV44JA:
 LD A,16H
 LD HL,SWORD+40
 JR IV44L2
IV44SI:
 LD A,15H
 LD HL,SWORD+32
IV44L2:
 LD DE,FLAG+22H	
 JP DTURU	;TK2
IV45:;ｸﾛｷｼ
 POP HL
 LD C,3
 JP KOTEIB
IV46:;10000G
 LD A,23H
 CALL FLAGC
 POP AF
 CALL TAKARP
 LD E,23H		;FLAG+23H
 LD HL,10000
 JP TK1
IV47:;歩いたところに戻す封印	;flag+43
 ld A,2bh
 call flagc
 LD HL,iv47m
 LD C,18
 CALL MSOP
 CALL TIM255
 POP AF
 call mdownpc
 xor A
 ld (0f0h),A
 JP MUP
iv47m:
 db "ﾑｶｲｶﾗ ","ﾂﾖｲﾁｶﾗ","ｶﾞﾊﾀﾗｸ"
IV48:;12f to 13f
 ld A,13
 ld HL,0100h
 JP IV2FL
IV49:;12F 本4
 LD A,2cH
 CALL FLAGC
 POP AF
 CALL TAKARP
 LD HL,IVITLS+104;1ﾕｳｼｬ
 LD DE,FLAG+2cH
 LD A,8;0CDH
 JP TK3
IV4A:;ｺﾝﾊﾟｽ　(封印されている)
 ld A,2dh
 call flagc
 POP AF
 CALL TAKARP
 ld A,(flag+2eh)
 rla
 jr nc,IV4AED
 LD A,0CFH
 LD HL,IVITLS+112
 LD DE,FLAG+2dh
 JP TK2
IV4AED:
 ld HL,IV2DM2
 ld C,12
 call mso2
 jp start
IV4B:;daitaros,IV4Aと連動
 ld HL,IV4C-12
 ld C,12
 call msop
 ld A,2eh
 call flagc
 ld A,(bookf)
 cp 0fh
 jp nz,retsac
 pop AF
 LD HL,BOOKG	;12/2
 CALL OPNG2	;12/2
 ld A,7
 call flashn
 ld HL,daig	;12/2
 call opng	;12/2
 ld HL,IV4Bm
 ld B,12
 call msobr
 ld A,7
 call flashn
 ld HL,flag+2eh
 set 7,(HL)
 jp start
IV4Bm:
 db "ﾖｳﾔｸｺｺ","ﾏﾃﾞｷﾀｶ","ｱﾚｽﾖ､ ",0f9h
 db "ﾎﾝﾆｺﾒﾗ","ﾚﾀﾉﾛｲｦ","ﾄｲﾃｸﾚﾃ","ｱﾘｶﾞﾄｳ",0f9h
 db "ｵﾚﾉﾅﾊ､","ｲﾆｼｴﾉ ","ﾕｳｼｬ  ","ﾀﾞｲﾀﾛｽ",0f9h
 db "ｵﾚｶﾞｵﾏ","ｴｦｺｺﾆ ","ﾖﾋﾞﾖｾﾀ",0f9h
 db "ｺﾉｻｲﾔｸ","ｦｵｺｼﾀ ","ﾓﾉｶﾞﾌﾀ","ﾀﾋﾞｺｺﾆ",0f9h
 db "ﾖﾐｶﾞｴｯ","ﾃｼﾏｯﾀ ",0f9h
 db "ｿｲﾂﾉﾅﾊ",":ﾗｽﾄ: ",0f9h
 db "ﾗｽﾄﾊﾏﾀ","ｾﾝﾈﾝﾏｴ","ﾉｺﾄｦｸﾘ","ｶｴｽﾀﾒﾆ",0f9h
 db "ｺﾉﾊｳﾚﾝ","ﾉﾁｶﾗｦ ","ﾘﾖｳｼﾖｳ","ﾄｼﾃｲﾙ ",0f9h
 db "ｼﾝﾃﾞﾝﾊ","ｺﾉﾏﾁﾉ ","ｴﾈﾙｷﾞｰ","ｿﾉﾓﾉﾀﾞ",0f9h
 db "12ｶｲﾉ ","ﾀｶﾗﾉﾌｳ","ｲﾝﾊｲﾏ ","ﾄｶﾚﾀ  ",0f9h
 db "ｿﾉﾀｶﾗ ","ﾄﾄﾓﾆｻｷ","ﾆｽｽﾒ! ","ｱﾚｽ!  ",0f9h
 db "ｼｮﾓﾂﾉ ","ｻｲﾀﾞﾝ "
IV4C:;13f to 12f
 ld A,12
 ld HL,0403h
 JP IV2FL
IV4D:;MS 14F壁のヒント
 ld HL,iv4dm
 ld C,17
 call msop
 jp retsac
iv4dm:
 db "ｶﾍﾞﾆｶｺ","ﾏﾚｼﾍﾔｦ","ｼﾗﾍﾞﾖ"
IV4E:;月夜の薬
 ld A,2fh
 call flagc
 POP AF
 CALL TAKARP
 LD A,84H
 LD HL,Itlist+24
 LD DE,FLAG+2fh
 JP TK2
IV4F:;;歩いたところに戻すｽｲｯﾁ
 LD A,2bh
 JP IV1F+2
IV50:;ﾏﾎｳﾉﾗﾝﾌﾟ	5F
 LD A,24H
 CALL FLAGC
 POP AF
 CALL TAKARP
 LD HL,IVITLS+88
 LD DE,FLAG+24H
 LD A,0CCH
 JP TK2
IV51:;本1	4F
 LD A,25H
 CALL FLAGC
 POP AF
 CALL TAKARP
 LD HL,IVITLS+72
 LD DE,FLAG+25H
 LD A,1;0CAH
 JP TK3
IV52:;本2	10F
 LD A,26H
 CALL FLAGC
 POP AF
 CALL TAKARP
 LD HL,IVITLS+80
 LD DE,FLAG+26H
 LD A,2;0CBH
 JP TK3
IV53:;ﾏﾖｹﾉｵｺｳ	8F
 LD A,27H
 CALL FLAGC
 POP AF
 CALL TAKARP
 LD HL,ITLIST+40
 LD DE,FLAG+27H
 LD A,86H
 JP TK2
IV54:;MISE4
 LD HL,MISE4
 JP MISEJ
IV55:;ﾒｶﾞﾐｿﾞｳ
 LD A,2
 LD (Y),A
 XOR A
 LD (ST),A
 LD HL,MEGAMG
 CALL OPNG
 POP AF
 LD HL,IV55M
 LD C,17
 CALL MSO2
 LD BC,ES
 LD A,(BC)
 CP 16H
 JR Z,SEIES
 INC BC
 LD A,(BC)
 CP 26H
 JR Z,SEIET
 INC BC
 LD A,(BC)
 CP 46H
 JR Z,SEIEA
IV55L:
 LD A,5
 CALL FLASH
 LD HL,IV55M+18
 LD C,18
 CALL MSOB
 JP START
IV55M:
 DB "ｶｲｼﾞｭﾉ","ﾒｶﾞﾐｿﾞ","ｳｶﾞｱﾙ "
 DB "ｿｳﾋﾞｶﾞ","ﾋｶﾘｶｶﾞ","ﾔｲﾃｲﾙ "
IV55M2:
 DB "ｶﾐﾉﾉﾛｲ","ｦﾄｲﾃｶﾗ","ﾌﾀﾀﾋﾞｺ","ｺﾆｷﾅｻｲ"
SEIES:
 LD E,0BH
 JR SEIEQ
SEIET:
 LD E,12H
 JR SEIEQ
SEIEA:
 LD E,21H
SEIEQ:
 LD D,0
 LD HL,FLAG
 ADD HL,DE
 EX AF,AF'
 LD A,(HL)	;HL=FLAG
 RLA
 JP NC,IV55L3
 EX AF,AF'	;A=EQ
 AND 11110000B
 OR 00000101B
 LD (BC),A
 BIT 4,A
 JR NZ,SEIES2
 BIT 5,A
 JR NZ,SEIET2
SEIEA2:
 LD B,98
 JR SEIDP
SEIET2:
 LD B,70
SEIDP:
 LD HL,EDP
 LD A,(HL)
 ADD A,B
 LD (HL),A
 JR IV55L2
SEIES2:
 LD A,(AP)
 ADD A,139
 LD (EAP),A
IV55L2:
 LD HL,IV2DM3+18
 LD C,18
 CALL MSO2
 JP IV55L
IV55L3:
 LD HL,IV55M2
 LD C,24
 CALL MSO2
 JP START
IV56:;困った人 ﾊｳﾚﾝの書（3）
 LD A,29H
 CALL FLAGC
 POP HL
 LD HL,IV56M1
 CALL TAKARP+3
 LD HL,MISEG
 CALL OPNG
 LD HL,IV56M1
 LD B,3
 CALL MSOBR
 LD HL,ITEM
 LD BC,11
 LD A,86H
 CPIR
 DEC HL
 JR Z,IV56B
 JP START
IV56B:
 LD (HL),0
 LD HL,IV56M2
 LD B,3
 CALL MSOBR
 LD A,4;100B	;LD A,0CDH
 LD HL,IVITLS+96
 LD DE,FLAG+29H
 JP TK3
IV56M1:
 DB "ﾐｾﾔﾉﾋﾄ"
IV56M:
 DB "ｺﾏｯﾀﾅｧ",":ﾏﾖｹﾉｵ","ｺｳ:ｦｵﾄ","ｼﾃｼﾏｯﾀ",0F9H
 DB "ｱﾚｶﾞﾅｲ","ﾄﾏﾓﾉﾆ ","ｵｿﾜﾚﾃ ","ﾃﾞﾗﾚﾅｲ",0F9H
 DB "ｿﾚﾖﾘﾓ ","ｲﾂﾏﾃﾞ ","ﾆｲｻﾝﾀﾁ","ｺｺﾆｲﾙﾝ","ﾀﾞﾛｳ? ",0F9H
IV56M2:
 DB "ｱﾚｽﾊ､ ","ﾏﾖｹﾉｵｺ","ｳｦｱｹﾞﾀ",0F9H
 DB "ｵｵｱﾘｶﾞ","ﾄｳ!   ","ｺﾚﾃﾞｿﾄ","ﾆﾃﾞﾗﾚﾙ",0F9H
 DB "ｷﾐﾆｺﾚｦ","ｱｹﾞﾖｳ!","ｷｯﾄﾔｸﾆ","ﾀﾂﾀﾞﾛｳ",0F9H
IV57:;ALES IS ZAPED TO 6F! LAST1
 ld A,31h
 call flagc
 POP HL
 LD HL,IV57M
 LD B,1
 CALL MSOBR
 ld A,3
 call flash
 CALL GROB
 LD HL,GRD2
 CALL WGRO
 LD HL,LASTG
 CALL OPNG2
 LD A,5
 CALL FLASH
; LD A,0C9H
; LD HL,ITEM
; LD BC,11
; CPIR
; DEC HL
; JR NZ,ZAPING
; LD (HL),0
 ld HL,flag+0b
 xor A
 cp (HL)
 jr z,ZAPING
 ld HL,flag+12h
 cp (HL)
 jr z,ZAPING
 ld HL,flag+21h
 cp (HL)
 jr z,ZAPING
 call grput2
 LD HL,IV57M2
 LD B,3
 CALL MSOBR

 ld HL,RIDNG
 call OPNG2
 call tim30
 call grput2
 ld HL,KOKORG
 call OPNG2
 call tim30
 call grput2
 ld HL,HARTG
 call OPNG2
 call tim30

 ld HL,FLAG+31h
 ld (HL),80h
 JP START
ZAPING:
 CALL SHAKE
 LD HL,ZAPM
 LD B,1
 CALL MSOBR
 CALL GROB
 LD DE,0202H
 LD B,17
 CALL 0BFF1H
 INC HL
 LD DE,0403H
 LD B,21
 CALL 0BFF1H
 CALL BEPZPC
 CALL 48381
 LD HL,AP
 LD C,(HL)
 INC HL
 LD E,(HL)
 INC HL
 XOR A
 LD (HL),A
 INC HL
 LD (HL),A
 INC HL
 LD (HL),A
 INC HL
 LD (HL),C
 INC HL
 LD (HL),E
 CALL RAND4
 INC A
 LD HL,FL
 LD (HL),A
 INC HL
 LD (HL),A
 INC HL
 LD (HL),A
 LD (FLAG+14H),A
 LD (FLAG+20H),A
 LD (FLAG+22H),A
 JP START
IV57M:
 DB "ｺｺﾃﾞｸﾁ","ﾊﾃﾖ!  ","ｱﾚｽ!!!",0F9H
IV57M2:
 DB "3ﾆﾝﾉｶﾐ","ｶﾞｱﾗﾜﾚ","ｱﾚｽｦ  ","ｶﾊﾞｯﾀ!",0f9h
 db "ｻｲｺﾞﾉ ","ﾀﾀｶｲﾀﾞ","ｷｦﾇｸﾅ!",0f9h
 db "ｽｶﾞﾀﾊ ","ｼﾛｲﾋｶﾘ","ﾄﾅｯﾃｷｴ","ﾃｲｯﾀ･･",0f9h
ZAPM:
 DB "ｱﾚｽﾉｶﾗ","ﾀﾞｶﾞ  ","ｸﾀﾞｹﾁﾙ","･･････",0F9H
 DB "ﾃﾞﾝｾﾂﾉｿｳﾋﾞﾊｳｼﾅﾜﾚ､";"YOU  HAVE  TO  DO" 17
 DB "ﾄｷｶﾞﾓﾄﾞｯﾃｲｸﾉｦｶﾝｼﾞﾀ･･｡";"MISSON  OF  DAITALOS!" 21
IV58:;15PUZZLE
 POP HL
 LD HL,IV58M
 CALL TAKARP+3
 LD HL,IV58M+6
 LD C,6
 CALL MSO
 CALL IV58L-3
 JP START
 ld HL,0F800h
IV58L:
 push HL	;
 ld HL,pjl1
 push HL		;
 call phlset
 push HL			;
 call RAND4
 cp 1
 jr c,pzup
 jr z,pzdw
 cp 3
 jr c,pzrg
pzlf:
 ld DE,pzdata
 or A
 sbc HL,DE
 ld A,L
 pop HL			;
 cp 4
 ret z
 cp 9
 ret z
 cp 14
 ret z
 cp 19
 ret z
 inc HL
 ld A,(HL)
 ld (HL),0
 dec HL
 ld (HL),A
 ret		;
pzup:
 ld DE,pzdata
 or A
 sbc HL,DE
 ld A,L
 pop HL			;
 cp 15
 ret nc		;
 push HL			;
 ld DE,5
 add HL,DE
 ld A,(HL)
 ld (HL),0
 pop HL			;
 ld (HL),A
 ret		;
pzdw:
 ld DE,pzdata
 or A
 sbc HL,DE
 ld A,L
 pop HL			;
 cp 5
 ret c		;
 push HL			;
 ld DE,10000h-5
 add HL,DE
 ld A,(HL)
 ld (HL),0
 pop HL			;
 ld (HL),A
 ret		;
pzrg:
 ld DE,pzdata
 or A
 sbc HL,DE
 ld A,L
 pop HL			;
 or A
 ret z		;
 cp 5
 ret z		;
 cp 10
 ret z		;
 cp 15
 ret z		;
 dec HL
 ld A,(HL)
 ld (HL),0
 inc HL
 ld (HL),A
 ret		;
pjl1:
 pop HL	;
 dec L
 jp nz,IV58L
 dec H
 jp nz,IV58L
 ld HL,0
 add HL,SP
 ld (pjl2+1),HL
mainlp:
 call pzpnt
 ld HL,pjl2
 push HL
 call phlset
 push HL			;
 call 48381
 cp 1fh
 jp z,pzdw
 cp 20h
 jp z,pzup
 cp 21h
 jp z,pzlf
 cp 22h
 jp z,pzrg
pjl2:
 ld SP,0
 cp 51h
 ret z
 ld HL,pzdata
 ld A,"0"
pzck:
 inc A
 cpi
 jr z,pzck
 ld DE,65536-(pzdata+10)
 add HL,DE
 ld A,L
 or A
 jr nz,mainlp
 ld HL,pzdata+9
 ld A,40h
pzck2:
 inc A
 cpi
 jr z,pzck2
 ld DE,65536-(pzdata+20)
 add HL,DE
 ld A,L
 or A
 jr nz,mainlp
pzcomp:
 call pzpnt
 ld HL,pzcmpm
 LD C,16
 call MSOP
 CALL BEPBKC
 CALL 48381
 LD HL,pzcmpm+16
 LD B,4
 CALL MSOBR
 ret
pzcmpm:
 db "Congratulations!"
 DB "ｱﾘｶﾞﾄｳ","ﾎﾝﾄｳﾆｳ","ﾚｼｲｾﾞ!",0F9H
 DB "ｵﾄｸﾅ? ","ｼﾞｮｳﾎｳ","ｵｼｴﾙｾﾞ",0F9H
 DB "16ｶｲ  ","Iｷｰｦｵｽ","ﾄ､ｲﾛｶﾞ","ﾊﾝﾃﾝｽﾙ",0F9H
 DB "ｽﾝﾏｾﾝ､","ｿﾚﾀﾞｹ ","ﾃﾞｽ･･･",0F9H
pzpnt:
 ld HL,pzdata
 ld D,01h
 ld B,4
pzpl1:
 push BC
 ld B,5
 ld E,1
 CALL 0bff1h
 pop BC
 inc HL
 inc D
 djnz pzpl1
 ret
phlset:
 ld HL,pzdata
 xor A
 ld C,0ffh
 cpir
 dec HL
 ret
pzdata:
 db "123456789ABCDEFGHIJ",0
IV58M:
 DB "ﾍｷｶﾞ? "
 DB "ON:ｵﾜﾙ"
IV59:;ダークゾーン
 LD A,2AH
 CALL FLAGC
 POP AF
 CALL GROB
 LD HL,DZF
 LD (HL),80H
 CALL 48381
 CP 20H
 JR Z,IV59L
 JR IV59L2
IV59L:
 LD (HL),0
IV59L2:
 PUSH AF
 CALL GRPUT2
 POP AF
 JP MALP+3
IV5A:;ﾛﾚﾝｽ
 ld A,30h
 call flagc
 pop AF
 call TIM255
 ld A,1
 call FLASHN
 call BEPBKC
 call TIMBTL
 ld HL,TGRB+120*4
 call OPNG
 ld HL,iv5am
 ld B,4
 call MSOBR
 LD A,4
 CALL BATTLB
 ld HL,iv5am2
 ld B,8
 call MSOBR
 call BEPBKC
 ld HL,IV18M+24
 ld C,18
 call MSOB
 ld HL,FLAG+30h
 set 7,(HL)
 jp start
iv5am:
 db "ﾖｸｺｺﾆ ","ﾀﾄﾞﾘﾂｲ","ﾀﾅ､ﾎﾒﾃ","ﾔﾙｿﾞ  ",0f9h
 db "ﾜﾀｼｦﾀｵ","ｾﾊﾞ15ｶ","ｲﾍﾉﾐﾁﾊ","ﾋﾗｹﾙｿﾞ",0f9h
 db "ｼｶｼｵﾏｴ","ｶﾞｳｴﾆ ","ｲｸｺﾄﾊ ","ﾃﾞｷﾅｲ ",0f9h
 db "ｺｺﾃﾞｸﾁ","ﾊﾃﾖ!  ","ｱﾚｽﾖ!!",0f9h
iv5am2:
 db "ﾏｲｯﾀﾖ･","ｱﾚｽ･･･",0f9h
 db "ﾜﾀｼﾀﾁﾊ","ｺﾉﾖｦｳﾗ","ﾝﾃﾞｲﾙ ",0f9h
 db "ﾜﾀｼﾀﾁﾊ","ｵﾓｲﾂﾐﾉ","ｴﾝｻﾞｲｦ","ｶｹﾗﾚﾃ ",0f9h
 db "ﾗｽﾄﾀﾁﾄ","ﾛｳｺﾞｸﾆ","ｲﾚﾗﾚﾀ ",0f9h
 db "ｼｮｹｲｻﾚ","ﾙﾅｶﾃﾞ ","ｺﾉﾖﾉﾅｶ","ｦｳﾗﾐ  ",0f9h
 db "ﾜﾀｼﾀﾁﾊ","ｾｶｲｶﾞｺ","ﾜﾚﾙｺﾄｦ","ｲﾉｯﾀ  ",0f9h
 db "ｼｶｼｿﾉ ","ﾔﾎﾞｳﾊ ","ｼｭｳﾏｸｦ","ﾑｶｴﾙ･･",0f9h
 db "ｺﾚﾃﾞﾖｲ","ﾉﾀﾞ､･･","ﾗｽﾄｦﾀｵ","･･ｾ･ｱ･","･･ﾚ･ｽ･",0f9h
IV5B:;１４階のﾌｳｲﾝ
 LD A,30h
 CALL FLAGC
 JP KAGI
IV5C:;14F 賢者ﾌｧﾙ
 ld A,32h
 ld (iv5gl+1),A
 call flagc
 ld HL,iv5cm
;jp iv5g
iv5g:
 pop DE
 push HL
 LD HL,BOOKG	;12/2
 CALL OPNG2	;12/2
 ld A,5
 call FLASHN
 call MCLEAR
 ld B,3
 pop HL
 call MSOBR
 ld A,5
 call FLASHN
 ld HL,iv5gm
 ld B,1
 call MSOBR
iv5gl:
 ld E,0;A
 ld D,0;0
 ld HL,flag
 add HL,DE
 set 7,(HL)
 push HL	;
 ld HL,flag+32h
 xor A
 ld BC,4
 cpir
 pop HL		;
 jp z,START
 ld (HL),0
 ex DE,HL
 push DE
 LD A,5
 CALL FLASHN
 pop DE
 LD HL,IVITLS+64
 LD A,0C9H
 JP TK2
IV5D:;14F 賢者ｳｨﾙ
 ld A,33h
 ld (iv5gl+1),A
 call flagc
 ld HL,iv5dm
 jr iv5g
IV5E:;14F ﾊｳﾚﾝ1世
 ld A,34h
 ld (iv5gl+1),A
 call flagc
 ld HL,iv5em
 jr iv5g
IV5F:;14F ﾀﾞｲﾀﾛｽ
 ld A,35h
 ld (iv5gl+1),A
 call flagc
; ld HL,daig	;12/2
; call OPNG	;12/2
 ld HL,iv5fm
 jr iv5g
iv5cm:
 db "ｷﾐｶﾞｱﾚ","ｽｶ､ﾜﾀｼ","ﾊｹﾝｼﾞｬ","ﾌｧﾙ   ",0f9h
 db "ﾀﾞｲﾀﾛｽ","ﾉｲｯﾀﾄｵ","ﾘｷﾐﾊ  ","ﾘｯﾊﾟﾀﾞ",0f9h
 db "ｶﾅﾗｽﾞ ","ﾔﾂｦﾀｵｼ","ﾃｸﾙﾝﾀﾞ",0f9h
iv5dm:
 db "ﾖｸｷﾀﾅ､","ﾜﾀｼﾊ  ","ｹﾝｼﾞｬ ","ｳｨﾙ   ",0f9h
 db "ﾜﾀｼﾆ  ","ﾉｺｻﾚﾀ ","ﾁｶﾗﾉ  ","ｽﾍﾞﾃｦ ",0f9h
 db "ﾗｽﾄｦﾀｵ","ｽｵﾏｴﾆ ","ｻｻｹﾞﾖｳ",0f9h
iv5em:
 db "ﾜﾀｼﾊ  ","ﾊｳﾚﾝｺｸ","ｼｮﾀﾞｲ ","ｺｳﾃｲﾅﾘ",0f9h
 db "ｱﾚｽ､  ","ｿﾅﾀﾄﾁｶ","ﾗｦｱﾜｾ ",0f9h
 db "ﾜﾚﾜﾚﾓ ","ﾀﾀｶｯﾃ ","ﾕｸｿﾞ! ",0f9h
iv5fm:
 db "ｱﾚｽ!ｺﾉ","ﾀﾞｲﾀﾛｽ","ﾓｱｲﾂﾄﾀ","ﾀｶｳｾﾞ!",0f9h
 db "ﾔﾂｦﾀｵｾ","ﾅｶｯﾀ  ","ﾜﾀｼﾉｾｲ","ﾀﾞｶﾗﾅ ",0f9h
 db "ﾓｳｽｸﾞ ","ｿｺﾆﾔﾂ ","ｶﾞｲﾙ  ","ｶﾞﾝﾊﾞﾚ",0f9h
iv5gm:
 db "ｱﾚｽﾉ  ","ﾕｳｷｶﾞ ","ﾋﾄﾂ   ","ﾀｶﾏｯﾀ!",0f9h
IV60:;守護の壁
 ld A,(URDL)
 cp 4
 jp nz,RETSAC
 pop HL
 ld HL,flag+36h
 xor A
 cp (HL)
 jp nz,MALP	;nz=yattaato
 ld HL,FUINDG
 call OPNG
 ld HL,iv60m
 ld C,24
 call mso2
 xor A
 inc A
 ld (URDL),A
 jp start
iv60m:
 db "ｽｻﾏｼﾞｲ","ﾏﾘｮｸﾃﾞ","ﾌｳｲﾝｻﾚ","ﾋﾗｶﾅｲ!"
IV61:;守護1
 ld A,37h
 call flagc
 pop HL
 ld HL,iv61m
 call TAKARP+3
 ld HL,MEGAMG
 call OPNG
 ld HL,iv61m+6
 ld C,12
 call msob
 jp start
iv61m:
 db "ﾄﾞｳｿﾞｳ"
 db ":ｵﾏﾓﾘｦ","ｻｻｹﾞﾖ:"
IV62:;守護2
 ld A,38h
 jr IV61+2
IV63:;ﾗｽﾄM1
 ld A,39h
 call flagc
 pop HL
 call BEPBKC
 ld HL,iv63m
 ld C,24
 call mso
 ld HL,flag+39h
 set 7,(HL)
 jp start
iv63m:
 db "ﾎｫ､ｿｳｶ","ｺｺﾏﾃﾞ ","ﾀﾄﾞﾘﾂｲ","ﾀﾉｶ   "
IV64:;ﾗｽﾄM2
 ld A,3ah
 call flagc
 pop HL
 call BEPBKC
 ld HL,flag+3ah
 set 7,(HL)
 ld HL,iv64m
 jr IV63+12
iv64m:
 db "ﾀﾞｶﾞｷｻ","ﾏﾜｺｺﾆﾊ","ﾄﾄﾞﾘﾂｹ","ﾊｼﾅｲ  "
IV65:;ﾗｽﾄﾊﾞﾄﾙ
 ld A,3bh
 call flagc
 pop HL
 ld HL,lastg
 call OPNG2
 ld HL,iv65m
 ld B,4
 call msobr
 LD A,5
 CALL BATTLB
 ld HL,lastm
 ld B,4
 call msobr
 ld A,10
 call flash
 call BEPBKC
 call tim255
 call tim255
 ld HL,lastm2
 ld B,6
 call msobr
 ld A,6
 call flashn
 ld A,80h
 ld (flag+3bh),A
 jp start
iv65m:
 db "ｷｻﾏﾊｶﾐ","ｦﾓﾐｶﾀﾆ","ﾂｹﾀﾉｶ ",0f9h
 db "ｼｶｼﾜﾀｼ","ﾊﾏｴﾉﾖｳ","ﾅｼｯﾊﾟｲ","ﾊｼﾅｲ! ",0F9h
 db "ｺｲ!ｱﾚｽ",0f9h
 db "ｷｻﾏｦﾄｷ","ﾉｶﾅﾀﾆ ","ﾎｳﾑｯﾃ ","ｸﾚﾙﾜ!!",0f9h
lastm:
 db "ｸﾞｱｧｧｧ","!!!!!!",0f9h
 db "ﾏﾀｼﾃﾓ ","ﾜｶﾞﾔﾎﾞ","ｳﾊ･ｶﾅﾜ","ﾇｶ･･･!",0f9h
 db "ｼｶｼﾏﾀ､","ﾜﾀｼﾉﾖｳ","ﾅﾓﾉｶﾞ ","ｱﾗﾜﾚﾙ･",0f9h
 db "ｺﾚﾃﾞｵﾜ","ｯﾀﾜｹﾃﾞ","ﾜﾅｲ･･･","ｱﾚｽ･･･",0f9h
lastm2:
 db "ﾗｽﾄﾊﾋｶ","ﾘﾄﾄﾓﾆ ","ｷｴﾀ･･･",0f9h
 db "ﾀﾞｲﾀﾛｽ","ﾉｺｴｶﾞ ","ｷｺｴﾙ  ",0f9h
 db ":ﾀﾞｲﾀﾛ","ｽ:ﾕｳｼｬ","ｱﾚｽﾖ､ ","ﾖｸﾔｯﾀ ",0f9h
 db "ｿﾄﾆﾃﾞﾃ","ﾐﾝﾅﾉﾓﾄ","ﾆｶｴﾙｶﾞ","ｲｲ････",0f9h
 db "ﾜﾀｼﾀﾁﾊ","ｷﾐﾀﾁﾉ ","ｼｱﾜｾｦ ","ｲﾉｯﾃﾙﾖ",0f9h
 db "ｻﾗﾊﾞﾀﾞ","ﾕｳｼｬ  ","ｱﾚｽ!  ",0f9h



WARPSL:
 NOP
 PUSH DE
 LD DE,MRAM
 LD HL,IVENTM+18
 LD C,12
 CALL MSOP
 CALL TIM255
 POP DE
 LD A,D
 LD (X),A
 LD A,E
 LD (Y),A
 POP HL
 CALL BEPMGC
 JP MPL-3
FLUP:
 LD DE,MRAM
 LD HL,IVENTM+30
 LD C,18
 CALL MSO
 CP 31H
 JR Z,FLUPKB
 POP HL
 JP MALP+3
FLUPKB:
 LD B,6
 CALL GRD
 CALL BEPFLC
FLUPK:
 LD A,(FL)
 INC A
 LD (FL),A
 LD B,6
 CALL GRD
 POP AF
 JP MPL-3
FLDN:
 CALL MCLEAR
 LD DE,MRAM
 LD HL,IVENTM+30
 LD BC,12
 LDIR
 LD HL,IVENTM+48
 LD C,6
 LDIR
 CALL LOOP10-7
 CALL 48381
 CP 31H
 JR Z,FLDNKB
 POP HL
 JP MALP+3
FLDNKB:
 LD B,6
 CALL GRD
 CALL BEPFLC
FLDNK:
 LD A,(FL)
 DEC A
 LD (FL),A
 LD B,6
 CALL GRD
 POP AF
 JP MPL-3

;-----------------BOSS BATTLE----------------------

BATTLB:;
 AND 0FH
 LD (TNO),A
 PUSH AF
 LD HL,TNAMEB
 LD DE,6
 PUSH DE
 CALL XSAN
 POP BC
 LD DE,TNNAME
 LDIR
 POP AF
 LD HL,TPDATB
 LD DE,4
 PUSH DE
 CALL XSAN
 POP BC
 LD DE,THP
 LDIR
 LD A,80H
 LD (BF),A
 LD A,(EAP)
 LD (NAP),A
 LD A,(EDP)
 LD (NDP),A
 ld A,(flag+3bh)
 rla
 ret c
 JP BTMLP
TNAMEB:
 DB "ｲｱﾘｽ  "
 DB "ｼﾛｷｼ  "
 DB "ｾｯｺｳﾏﾙ"
 DB "ｸﾛｷｼ  "
 db "ﾛﾚﾝｽ  "
 db "ﾗｽﾄ   "
TPDATB:
 DB 120,4,105,35
 DB 90,4,65,40
 DB 200,7,150,80
 DB 150,0bh,180,80
 db 255,0ch,150,180
 db 255,10h,210,210
EXGTB:
 DW 300,1200
 DW 25,75
 DW 2500,5000
 DW 400,750
 DW 5000,10000
 dw 0,0

;------------------店屋---------------------

MISE1:
 DB 12H,22H,42H,81H,82H,85H,0,0,0,0,0,0FH
MISE2:
 DB 13H,81H,82H,84H,85H,0,0,0,0,0,0,0FH
MISE3:
 DB 14H,24H,44H,81H,82H,84H,0,0,0,0,0,0FH
MISE4:
 DB 82H,84H,85H,86H,0,0,0,0,0,0,0,0FH

;--------------FLAGC--------------------

FLAGC:
 LD HL,FLAG
 LD E,A
 LD D,0
 ADD HL,DE
 LD A,(HL)
 RLA
 RET NC
 POP HL
 JP RETSAC

;----------------ﾀｶﾗﾊﾞｺ-------------------

TK1:;G
 PUSH DE
 LD (TKGE+1),HL
 CALL GASCN
 POP DE
 LD D,0	;E
 LD A,80H
 LD HL,FLAG
 ADD HL,DE
 LD (HL),A
 call tkabep	;12/9
 LD HL,TAKARG	;12/2
 CALL OPNG2	;12/2
 LD HL,IVENTM+72
 LD C,12
 CALL MSO
 LD HL,(G)
TKGE:;ｶｷｶｴｼﾞｬﾝﾌﾟ
 LD DE,0000H
 OR A
 ADD HL,DE
 JR NC,GUP
 LD HL,0FFFFH
GUP:
 LD (G),HL
 JP START
GASCN:
 CALL ASCN
 LD HL,NMEMRY
 LD DE,IVENTM+78
 LD BC,5
 LDIR
 RET
DOBU:
 LD IX,OBUG
 JR TKST
DTATE:
 LD IX,SEITG
 JR TKST
DYORO:
 LD IX,REFLEG
 JR TKST
DTURU:
 LD IX,EXCALG
 JR TKST
TK2:;ITEM
 NOP
 LD IX,TAKARG
TKST:
 LD (TK2G+1),IX
 PUSH DE
 PUSH HL
 PUSH BC
 PUSH AF
 LD HL,GRD2
 CALL OPNG
TK2G:
 LD HL,0
 CALL OPNG2	;12/2
 call tkabep	;12/9
 POP AF
 POP BC
 POP HL
 POP DE

 PUSH DE
 CALL ITEMAD
 JR NC,TK2L
 POP HL
 JP START
TK2L:
 POP HL
 LD A,80H
 LD (HL),A
 JP START
TAKARP:
 LD HL,IVENTM+66
 LD C,6
 CALL MSO
 CP 31H
 RET Z
 POP HL
 JP MALP+3
TK3:;BOOKS	DE=FLAG+X	HL=BOOK NAME	A=BOOK NO.(BIT) 1,2,4,8
 NOP
 EX DE,HL
 LD (HL),80H
 LD HL,BOOKF
 LD B,(HL)
 PUSH BC	;
 OR (HL)
 LD (HL),A
 EX DE,HL
 LD DE,ITEMAM
 LD BC,8
 LDIR
 LD HL,GRD2	;12/13
 CALL OPNG	;12/13
 LD HL,BOOKG	;12/2
 CALL OPNG2	;12/2
 call tkabep	;12/9
 LD HL,ITEMAM
 LD C,24
 CALL MSO2
 POP AF		;
 OR A
 JR NZ,TK3ED
 LD HL,TK3M
 LD C,18
 CALL MSO
TK3ED:
 JP START
TK3M:
 DB "ｺﾉﾎﾝﾊ､","Rｷｰｦ､ｵ","ｽﾄﾖﾒﾏｽ"
tkabep:
 push HL
 push DE
 push BC
 push AF
 call BEPISC
 pop AF
 pop BC
 pop DE
 pop HL
 ret

;-----------ｲﾍﾞﾝﾄﾒｯｾｰｼﾞ-------------

IVENTM:
 DB ":ｾﾞｳｽ "
 DB "ｼﾝﾃﾞﾝ ";+6
 DB "ｲﾘｸﾞﾁ:";+12
 DB "ｹﾞｹﾞ!!";+18
 DB "ﾜｰﾌﾟﾀﾞ";+24
 DB "ｶｲﾀﾞﾝ ";+30
 DB "ｶﾞｱﾙ  ";+36
 DB "ﾉﾎﾞﾙ? ";+42
 DB "ｵﾘﾙ?  ";+48
 DB "ﾜｧ!   ";+54
 DB "ｵﾄｼｱﾅ!";+60
TAKMS:
 DB "ﾀｶﾗﾊﾞｺ";+66
 DB "ﾅｶﾐﾊ  ";+72
 DB "     G";+78
 DB ":ｶｷﾞﾉ ";+84
 DB "ｱﾘｶﾊ  ";+90
 DB "ﾍﾔﾉﾅｶﾉ";+96
 DB "ﾄﾞｺｶﾆ:";+102
 DB ":ﾋｶﾞｼ ";+108
 DB "ﾀﾛｽﾉﾐｾ";+114
 DB "ﾐﾅﾐ   ";+120
 DB "ｹｱﾙｰﾑ:";+126
 DB "ﾅﾝｼﾞﾖ ";+132
 DB "ﾁｶﾗﾉ  ";+138
 DB "ﾋｶﾘ ｦ ";+144
 DB "ｶｶｹﾞﾖ ";+150
 DB "ﾕｶ ｶﾞ ";+156
 DB "ｶｯﾃﾆ  ";+162
 DB "ｳｺﾞｸ! ";+168
 DB "ｽｲｯﾁ  ";+174
 DB "ｶﾗﾀﾞｶﾞ";+180
 DB "ｱﾂｲ!! ";+186

;-------PRISET DATA---------

PLV:
 DB 1;PLV:
 DB 25	;2 25	;PHP:
 DB 25	;2 25	; DB 25;PMHP:
 DB 7	;22 7	; DB 7;PMP:
 DB 7	;22 7	; DB 7;PMMP:
 DB 5		;225;PAP:
 DB 5		;225;PDP:
 DB 11H		;PES:
 DB 21H		;PET:
 DB 41H		;PEA:
 DB 20		;215;PEAP:
 DB 20		;215;PEDP:
 DB 0;PST:
 DB 0,0,0,0,0,0,0,0,0,0,0	;0,0,0,0,0,0,0,0,0,0,0;PITEM:0,0,0,0,0,0,0,0,0,0,0
 DB 0FH;
 DB 1		;0dh;1;PFL:
 DB 0		;PX:
 DB 0		;PY:
 DB 200,0	;0ffh,0ffh;200,0;PG:
 DB 0,0		;0ffh,0ffh;0,0;PEXP:
 DB 1		;7fh;1H	; DB 1;PMG 0~6BIT
 DB 1		;PURDL:

;----------ｽﾃｰﾀｽ ﾃﾞｰﾀ    -------------

LV:DB 0
HP:DB 0
MHP:DB 0
MP:DB 0
MMP:DB 0
AP:DB 0
DP:DB 0
ES:DB 0
ET:DB 0
EA:DB 0
EAP:DB 0
EDP:DB 0
ST:DB 0
ITEM:DB 0,0,0,0,0,0,0,0,0,0,0,0
FL:DB 0
X:DB 0
Y:DB 0
G:DB 0,0
EXP:DB 0,0
MG:DB 0
URDL:DB 0	;1~4
 DB 54H
SAVE:
 DB 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
FSAVE:
 DB 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
 DB 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
 DB 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
 DB 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
MSAVE:
 DB 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
 DB 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
 DB 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
 DB 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
 DB 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
 DB 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
 DB 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
 DB 0,0,0,0,0,0,0,0
 
;--------ﾌﾗｸﾞﾃﾞｰﾀ------------
 
FLAG:
 DB 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
;IV8,IV13,IV11,IV14,IV14,IV16,IV18,IV1D,IV1E,IV1F,IV1A,IV19,IV23,IV25,IV18,TV6
 DB 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
;IV26,IV28,IV2A,IV2B,IV2D,IV2E,IV33,IV34,IV36,IV39,IV3A,IV3B,IV3C,IV3D,IV38,IV3F
 DB 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
;IV41,IV42,IV44,IV46,IV50,IV51,IV52,IV53,IT6,IV56,TVC,IV47,IV49,IV4A,IV4B,IV4E
 DB 0,0,0,0,0,0,0,0,0,0,0,0,0,0
;IV5A,iv57,IV5C,IV5D,IV5E,IV5F,iv60,iv61,iv62,iv63,iv64,iv65,ai10,
DZF:DB 0
BOOKF:DB 0

;--------一時保存データ-------------

TNO:DB 0
TNNAME:DB 0,0,0,0,0,0
THP:DB 0
TAI:DB 0
TAP:DB 0
TDP:DB 0
NAP:DB 0
NDP:DB 0
STF:DB 0
BF:DB 0

;*********************ENDING**************************

ENDING:
 call GRPUT2
 ld HL,edg1
 call OPNG
 call tim255
 ld HL,ENDINM
 ld B,2
 call msobr
 ld B,3
 ld HL,edg1+30
edl1:
 push BC
 push HL
 call GRPUT2
 pop HL
 push HL
 call OPNG
 call tim255
 pop HL
 ld DE,30
 add HL,DE
 pop BC
 djnz edl1
 ld HL,ENDINM+30+2
 ld B,3
 call msobr

 ld HL,OPG1
 call OPNG
 ld HL,ENDINM+30+2+66+3
 ld B,3
 call msobr

 ld HL,edg3
 call OPNG
 ld HL,ENDINM+30+2+66+3+60+3
 ld B,3
 call msobr

 call timx3
 
ENDLOL:

 ld HL,GRD2
 ld C,24
 call msoptm

 ld HL,endlom
 ld C,12
 call msoptm

 ld HL,endlom+12
 ld C,6
 call msop
 call timx3+6
 ld HL,endlom+12
 ld C,12
 call msoptm

 ld HL,endlom+24
 ld C,6
 call msop
 call timx3+6
 ld HL,endlom+24
 ld C,12
 call msoptm

 ld HL,endlom+36
 ld C,12
 call msop
 call timx3+6
 ld HL,endlom+36
 ld C,18
 call msoptm

 ld HL,endlom+54
 ld c,12
 call msoptm

kyarap:
 xor A
 ld (kyarmp+1),A
 ld HL,kyaram
 ld (kyarmp+4),HL

 ld HL,MISEG	;ﾀﾛｽ
 call opng3
 ld HL,kazig	;ｷﾞﾙ
 call opng3
 ld HL,obug	;ｵｰﾌﾞ
 call opng4
 ld HL,takrfg	;ﾀｶﾗﾊﾞｺ(封)
 call opng4
 call grput2
 ld HL,takarg	;ﾀｶﾗﾊﾞｺ
 call opng2
 call timx3
 ld HL,megamg	;ﾒｶﾞﾐｿﾞｳ
 call opng3
 ld HL,bookg	;ﾎﾝ
 call opng4
 ld HL,excalg	;ｾｲﾅﾙｹﾝ
 call opng4
 ld HL,seitg	;ｾｲﾅﾙﾀﾃ
 call opng4
 ld HL,refleg	;ｾｲﾉﾖﾛｲ
 call opng4
 ld HL,ridng	;ｱｼｭﾗｽ
 call opng4
 ld HL,hartg	;ｱﾅﾝ
 call opng4
 ld HL,kokorg	;ﾏﾃｨﾅ
 call opng4
 ld HL,daig	;ﾀﾞｲﾀﾛｽ
 call opng3

 xor A
 ld (kyarmp+1),A
 ld HL,tname
 ld (kyarmp+4),HL

 ld B,18
 ld HL,tgr
endtgr:;ｽｹﾙﾄﾝ~ﾙｼﾌﾙ
 push BC
 push HL
 call opng4
 pop HL
 ld DE,72
 add HL,DE
 pop BC
 djnz endtgr

 xor A
 ld (kyarmp+1),A
 ld HL,tnameb
 ld (kyarmp+4),HL

 ld B,5
 ld HL,tgrb
endtg2:;ｲｱﾘｽ~ﾗｽﾄ
 push BC
 push HL
 call opng3
 pop HL
 ld DE,120
 add HL,DE
 pop BC
 djnz endtg2

 ld A,1
 out (67h),A
 call grput2
 ld HL,lastg
 call opng2
 ld HL,tnameb+6*5
 ld C,3
 call msop
 call timx3
 ld HL,tgrb+120*5
 call opng
 call timx3

 ld A,1
 out (67h),A
 ld HL,opg3	;ｱﾚｽ
 call opng
 ld HL,endinm
 ld C,3
 call msop
 call timx3

 ld B,6
 call grd

 ld HL,theend+7
 ld DE,0203h
 ld B,9
 call 0bff1h

 ld HL,theend+7+9
 ld DE,0306h
 ld B,17
 call 0bff1h
 call timx3

 ld HL,edg4
 ld DE,groe1
 ld BC,144*6
 ldir
 call gro2

 xor A
 out (67h),A
 call timx3
 ld HL,theend
 ld DE,0501h
 ld B,7
 call 0bff1h
 call timx3
 call 48381
 ret
theend:
 db "The End"
 db "Thank you","for your playing!"
ENDINM:
 db "ｱﾚｽｶﾞｿ","ﾄﾆﾃﾞﾙﾄ",0f9h
 db "ﾋﾄﾋﾞﾄﾉ","ｶﾝｾｲｶﾞ","ｷｺｴﾃｷﾀ",0f9h

 db "ﾋﾄﾋﾞﾄﾊ","ﾔｻｼｸ  ","ｱﾚｽｦ  ","ﾃﾞﾑｶｴ ",0f9h
 db "ﾐﾝﾅﾃﾞ ","ﾖﾛｺﾋﾞｦ","ﾜｶﾁｱｯﾀ",0f9h
 db "ﾌﾀﾀﾋﾞ ","ﾍｲﾜｦ  ","ﾄﾘﾓﾄﾞｼ","ﾀﾉﾀﾞ･･",0f9h

 db "ﾊｳﾚﾝﾊ ","ﾌﾀﾀﾋﾞ ","ｻｶｴ､  ",0f9h
 db "ﾖﾘﾖｲ  ","ｸﾆﾆﾅｯﾃ","ｲｯﾀ･･･",0f9h
 db "ｱﾚｽﾊｴｲ","ﾕｳﾄｼﾃ ","ﾃﾞﾝｾﾂﾄ","ﾅｯﾀ   ",0f9h

 db "ｼｶｼｱﾚｽ","ﾊﾌﾞｷﾄ ","ﾎﾞｳｸﾞｦ","ﾓｯﾃ､  ",0f9h
 db "ｱﾗﾀﾅﾙ ","ﾀﾋﾞｴﾑｶ","ｯﾃｲｯﾀ ",0f9h
 db "ｻﾗﾅﾙ  ","ﾎﾞｳｹﾝｦ","ﾓﾄﾒﾃ･･","･･････",0f9h
endlom:
 db "ﾊｳﾚﾝ  "
 db "ﾎﾞｳｹﾝｷ"

 db "ｹﾞﾝｻｸ "
 db "horie "

 db "ｾｲｻｸ  "
 db "tubasa"

 db "ｷｬﾗｸﾀｰ"
 db "ﾃﾞｻﾞｲﾝ"
 db "t.h   "

 db ":ｷｬﾗｸﾀ"
 db "ｼｮｳｶｲ:"
kyaram:
 db "ﾀﾛｽ   "
 db "ｷﾞﾙ   "
 db "ｵｰﾌﾞ  "
 db "ﾀｶﾗﾊﾞｺ"
 db "ﾒｶﾞﾐ  "
 db "ﾎﾝ    "
 db "ｾｲﾅﾙｹﾝ"
 db "ｾｲﾅﾙﾀﾃ"
 db "ｾｲﾉﾖﾛｲ"
 db "ｱｼｭﾗｽ "
 db "ｱﾅﾝ   "
 db "ﾏﾃｨﾅ  "
 db "ﾀﾞｲﾀﾛｽ"

edg1:
 db 2Bh,0CDh,0EDh,0EBh,0BBh,15h,15h,1Bh,1Bh,15h,95h,9Bh,9Bh,35h,0D5h
 db 9Bh,9Bh,55h,95h,9Bh,1Bh,15h,15h,1Bh,1Bh,0BDh,0EDh,0EBh,8Bh,4Dh
 db 49h,0B6h,0FFh,00,01,0FFh,00,60h,0D0h,50h,52h,0D3h,0AEh,6Bh,0B1h
 db 0B1h,6Bh,0AFh,0DAh,5Ah,50h,0D0h,60h,00,0FFh,01,00,0FFh,0EDh,12h
 db 92h,6Dh,0FFh,00,03,0FFh,00,00,0CFh,0B4h,9Fh,0C8h,0E8h,0FFh,0AAh
 db 0DAh,0FFh,68h,0C8h,9Fh,0B4h,4Fh,00,00,0FFh,03,00,0FFh,0B6h,49h
 db 44H,0BB,5Fh,0B0h,58h,0AFh,54h,0ACh,54h,0BCh,57h,0BEh,57h,0ADh,54h
 db 0ACh,15h,4Fh,9Eh,37h,5Ch,3Ch,54h,2Ch,47h,8Ch,18h,3Fh,4Bh,0B4h
edg2:
 db 27h,95h,55h,0A5h,45h,05,05,05,85h,0C5h,05h,75h,8Fh,0FDh,8Fh,0FDh
 db 8Fh,75h,05h,25h,0E5h,0D5h,0F5h,0F5h,0F5h,05,05,65h,0EDh,3Fh
 db 11h,73h,96h,0CDh,0A0h,0AEh,17h,07,1Fh,0AEh,0A2h,0C1h,06,7Eh,52h
 db 7Eh,06h,01h,0F2h,0ACh,0DBh,0A7h,0DBh,0AFh,0D7h,0A8h,0D8h,38h,7Eh,0C9h
 db 03,03,01,03,0F4h,1Fh,0C8h,28h,0C8h,1Fh,0F4h,03,2Bh,0F3h,69h,73h
 db 0FBh,03,0C1h,66h,2Fh,17h,17h,2Fh,66h,0C3h,02,00,01,39h
edg3:
 db 0FFh,0FFh,0FFh,0FFh,0FFh,7Fh,3Fh,9Fh,0DFh,0CFh,0EFh,0EFh,0EFh,0EFh,0CFh
 db 0DFh,9Fh,0BFh,3Fh,7Fh,7Fh,0FFh,0C7h,83h,39h,7Dh,7Fh,0FFh,0FFh,0FFh
 db 0EFh,0E3h,0F9h,0FDh,3Ch,8Eh,0AFh,2Fh,0C1h,4Dh,75h,35h,89h,2Bh,37h,17h
 db 09h,0C5h,75h,4Dh,54h,0D9h,9Bh,0B3h,27h,0EFh,0CFh,09Fh,7Fh,7Fh
 db 0FFh,0FFh,0FFh,83h,0B8h,0ABh,0B2h,0ADh,01Fh,0FFh,0CCh,24h,73h,99h,00h
 db 84h,79h,0E2h,84h,0F6h,13h,0A4h,48h,0F3h,0Ch,0FFh,0FFh,0FFh,0FFh,0FFh
 db 0FFh,0FFh,0FFh,0FFh,0FFh,3Fh,0DFh,6Fh,56h,54h,51h,56h,5Eh,77h,0D9h
 db 0E8h,77h,5Ch,53h,53h,54h,57h,6Fh,0DEh,3Eh,0FFh,0FFh,0FFh,0FFh,0FFh
edg4:
 db 00,00,00,00,00,00,00,80h,00,00,00,00,00,00,10h,30h,60h,0E0h,0F0h,0F8h
 db 38h,00,00,0C0h,70h,0D0h,0D0h,70h,0F0h,0D0h,70h,0F0h,0F0h,50h,0D0h,0D0h
 db 70h,0C0h,00,00,80h,80h,00,00,00,00,00,40h,0C0h,0C0h,0C0h,0C0h,80h,80h
 db 00,0C0h,0C0h,0C0h,0C0h,80h,00,00,00,00,00,00,0C0h,40h,0FCh,1Ch,0CCh,0CCh
 db 0Ch,8Ch,0FCh,40h,0C0h,00,00,00,00,00,0C0h,80h,80h,00,00,00,00,00,00,00
 db 00,0C0h,40h,40h,0F8h,9Ch,9Ch,3Ch,1Ch,0F8h,40h,0C0h,00,00,00,0C0h,0A0h
 db 0E0h,0B0h,0D8h,68h,58h,30h,0E0h,80h,80h,00h,00,00,80h,40h,0FCh,9Ch,9Ch
 db 0FCh,40h,80h,00,00,00,78h,10h,1Eh,0B0h,41h,06,0DCh,34h,66h,0CCh,98h,50h

 db 00,00,40h,0C0h,0C0h,0C1h,0C6h,9Eh,7Fh,8Fh,8Eh,0C1h,4Bh,0FFh,0CFh,37h,0DFh
 db 0B4h,0F7h,0FCh,9Ch,0BFh,0D5h,9Dh,97h,0DDh,0D5h,0B7h,0FDh,0FDh,0F7h,0F5h
 db 0BDh,0D7h,95h,9Dh,0D7h,0B5h,9Dh,0FFh,0FDh,0D7h,0B7h,77h,9Fh,0EFh,0BEh,0FEh
 db 8Bh,8Fh,3Fh,87h,0F7h,0FDh,0F9h,0E3h,0E7h,0E7h,1Fh,0C7h,0C2h,80h,0C0h,80h,00
 db 00,03,03,83h,0Fh,03h,0E1h,1Bh,03,03,83h,0C3h,0C7h,0DFh,0FEh,86h,80h,0FFh,9Bh
 db 83h,83h,0FEh,00,00,00,00,00,0E0h,33h,63h,0C7h,05,03,15h,0B1h,05,0Dh,0F7h,03
 db 00,0FCh,32h,2Fh,30h,3Fh,30h,70h,0EEh,0DEh,3Ch,0AFh,06Ch,0FFh,80h,0C0h,0A0h
 db 37h,0EAh,0Eh,0FAh,0ACh,0DCh,5Ah,77h,30h,00,00,0C0h,00,00,07,01,01,0Eh,1Bh,34h,29h,0E9h,7Fh

 db 00,0A0h,0C3h,0C7h,3Fh,07,0E3h,7Bh,0D6h,0ABh,55h,0AAh,55h,0BEh,77h,0A3h,6Ah,0A0h
 db 62h,0A8h,62h,0A0h,60h,0A2h,68h,0A0h,22h,0A8h,7Ah,0BAh,68h,22h,60h,0A0h,06Ah,0A0h
 db 62h,0A0h,68h,0A2h,60h,0ABh,72h,0A3h,7Ch,0AFh,55h,0AAh,0D5h,0EAh,75h,0FFh,21h,8Fh,0F3h,0FFh
 db 0FFh,0FFh,0FBh,18h,39h,0FFh,7Bh,53h,00,00,00,00,0CFh,00,0C0h,01,00,00,38h,79h,0F9h
 db 35h,0FFh,1Dh,3Dh,7Bh,33h,03h,03h,03,0C3h,0Bh,0C0h,00,04,06,07,06,06,07,06,03,40h,13h,9Ch
 db 60h,0Fh,00,00,0F9h,0C7h,60h,00,4Fh,28h,80h,0EEh,43h,76h,0Fh,1Eh,0F9h,87h,0FFh,14h,80h
 db 0FFh,04,57h,0FCh,80h,7Ch,0Bh,7Eh,80h,7Fh,02h,0FFh,00,02,0C7h,0C7h,0DFh,0C6h,00,01,0C1h,7Ah

 db 00,80h,4Fh,33h,7Ch,43h,00h,10h,0Ch,0C4h,0B1h,4Dh,73h,02h,03,0CEh,13h,02,65h,06,35h
 db 06,05,86h,35h,84h,0FDh,56h,54h,56h,54h,0FEh,35h,26h,0C5h,86h,05,26h,0Dh,0D6h,05,06
 db 45h,0E2h,1Bh,22h,03,01,7Eh,11h,0A8h,0E9h,7Eh,30h,03,1Fh,05h,3Dh,0FFh,0Fh,07,05,00,00
 db 00,00,80h,40h,52h,04h,01,00,0Ch,10h,10h,98h,80h,00,01,80h,84h,18h,08h,00,00,60h,26h
 db 22h,20h,22h,02h,02,02,0A0h,28h,89h,09h,20h,26h,46h,05h,88h,08h,0D0h,0A2h,0A3h,0A2h,0C2h
 db 02,03,01,00,00,00,0F8h,28h,0A7h,0A0h,0A0h,0A2h,0F8h,07,30h,72h,70h,37h,00,0F0h,02,0A0h,0A3h
 db 62h,0E6h,0FFh,00,00,00,00,07,81h,0E0h,1Eh,0F3h,00

 db 90h,91h,91h,91h,93h,82h,82h,14h,17h,15h,14h,24h,24h,24h,29h,28h,48h,0Fh,08h,0Bh,48h,48h
 db 4Ah,09h,0Eh,08h,3Fh,6Dh,0Dh,0Dh,0Dh,0Fh,1Ch,08h,48h,49h,48h,48h,44h,85h,84h,04h,04h,86h
 db 82h,82h,0C2h,03,01,01,00,00,40h,40h,40h,40h,40h,20h,30h,90h,08h,0Ch,00h,00,11h,09h,01
 db 04,46h,0C2h,0DAh,0FAh,0F3h,60h,78h,30h,00,00,00,80h,0F0h,0E8h,82h,10h,42h,08h,00,00,0F0h
 db 58h,84h,0AEh,0B9h,0BDh,0BDh,091h,0BFh,0D8h,0ECh,08Ch,00Ch,03Ch,04Ah,0D7h,0B4h,84h,0ECh
 db 87h,0FEh,04,04h,44h,48h,50h,57h,46h,66h,26h,46h,44h,47h,04h,84h,07h,05h,07h,04h,07h,06h
 db 06,06,04,0A4h,0F7h,0FCh,0A0h,10h,2Ch,83h,81h,3Ch,0C2h,07h,8Ch

 db 04,0C6h,3Ah,0Ah,02,02,02,7Eh,82h,26h,25h,15h,7Ch,0C8h,09,09,08,48h,08,10h,71h,0D0h
 db 11h,11h,11h,19h,28h,0CAh,0Ah,0Ah,06h,0F4h,04h,05,55h,85h,07h,76h,06h,06h,7Ch,84h,04h
 db 28h,0D8h,98h,12h,32h,22h,22h,62h,42h,0C2h,82h,03h,01,01,01,00,00,00,02,04,00,00,09,12h
 db 24h,40h,00,00,00,07,00,00,00,38h,24h,5Fh,51h,59h,51h,5Fh,5Fh,24h,1Bh,00,00,03,0Eh,08,08
 db 12h,14h,19h,12h,18h,09h,05h,05h,05h,07h,06h,00,00,00,0F0h,58h,0B4h,54h,0BAh,56h,0B1h
 db 5Dh,0B9h,55h,0B9h,56h,0B2h,5Ch,0B4h,58h,0F0h,00,02,00,00,38h,0ECh,32h,0BEh,2Dh,0B4h,2Fh,0BFh
 db 38h,37h,0E0h,01,0FEh,00,0Eh,00,98h
timx3:
 call tim255
 call tim255
 call tim255
 call tim255
 call tim255
 ret
msoptm:
 call msop
 call timx3
 ld HL,grd2
 ld C,24
 call msop
 call timx3
 ret
opng4:;24*24
 ld DE,opng2
 jr opng3+3
opng3:;30*32
 ld DE,opng
 ld (opng3l+1),DE
 ld A,1
 out (67h),A
 push HL
 call grput2
 pop HL
opng3l:
 call 0
 xor A
 out (67h),A
kyarmp:
 ld A,0	;不定
 push AF
 ld HL,kyaram
 ld DE,6
 call xsan
 ld C,6
 call msop
 call timx3
 call timx3
 pop AF
 inc A
 ld (kyarmp+1),A
RETPOI:
 RET
 END