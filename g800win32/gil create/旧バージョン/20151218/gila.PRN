			  Z80 ASSEMBLER - ZASM VER 1.6
  0100                	org 0100h
                      	
  0000                	overwrite:equ 0
  001E                	x0:equ 30
  008C                	xm:equ 140
  0000                	y0:equ 0
  002F                	ym:equ 47
  0080                	t:equ 80h
  0000                	f:equ 0
  0080                	m:equ 80h
  0000                	n:equ 0
                      	
  BFD0                	grp:equ 0bfd0h
  BFF1                	msp:equ 0bff1h
  BCFD                	kwait:equ 0bcfdh
  BE53                	kscan:equ 0be53h
                      	
                      	
                      	
                      	;*******************Title graph********************
  0100                	start:
  0100  210000        	 ld HL,0
  0103  39            	 add HL,SP
  0104  22841F        	 ld (retP+1),HL
  0107  228401        	 ld (rec+1),HL
  010A  229004        	 ld (rec2+1),HL
  010D  CD0C20        	 call cls 
  0110  21302A        	 ld HL,graph_title
  0113  110800        	 ld DE,0008h
  0116  0632          	 ld B,50
  0118  CD5720        	 call grp_open
  011B                	start_l:
  011B  3E01          	 ld A,1
  011D  326260        	 ld (floor),A
  0120  CD6620        	 call keysc		;left,right,on,0,/,space,down,up
  0123  CB57          	 bit 2,A
  0125  C0            	 ret nz
  0126  CB5F          	 bit 3,A
  0128  2006          	 jr nz,before_game_c
  012A  CB6F          	 bit 5,A
  012C  2052          	 jr nz,init
  012E  18EB          	 jr start_l
                      	;*****************Continue*******************
  0130                	before_game_c:
  0130  CB6F          	 bit 5,A
  0132  28E7          	 jr z,start_l
  0134  CD0C20        	 call cls
  0137  217904        	 ld HL,continue_ms
  013A  110201        	 ld DE,0102h
  013D  0612          	 ld B,18
  013F  CDF1BF        	 call msp
  0142  2A6260        	 ld HL,(floor)
  0145  2600          	 ld H,0
  0147  CDC61F        	 call ascn
  014A                	before_game_c_floor:
  014A  2A6260        	 ld HL,(floor)
  014D  2600          	 ld H,0
  014F  CDC61F        	 call ascn
  0152  21C41F        	 ld HL,nmemry+3
  0155  110B03        	 ld DE,030bh
  0158  0602          	 ld B,2
  015A  CDF1BF        	 call msp
  015D  CDFDBC        	 call kwait
  0160  216260        	 ld HL,floor
  0163  FE1E          	 cp 1eh
  0165  281C          	 jr z,Stating_before
  0167  FE20          	 cp 20h
  0169  280C          	 jr z,before_game_c_u
  016B  FE1F          	 cp 1fh
  016D  20DB          	 jr nz,before_game_c_floor
  016F                	before_game_c_d:
  016F  35            	 dec (HL)
  0170  AF            	 xor A
  0171  BE            	 cp (HL)
  0172  20D6          	 jr nz,before_game_c_floor
  0174  34            	 inc (HL)
  0175  18D3          	 jr before_game_c_floor
  0177                	before_game_c_u:
  0177  34            	 inc (HL)
  0178  3E3D          	 ld A,61
  017A  BE            	 cp (HL)
  017B  20CD          	 jr nz,before_game_c_floor
  017D  35            	 dec (HL)
  017E  18CA          	 jr before_game_c_floor
                      	 
                      	 
                      	 
                      	;***************init************************** 
  0180                	init:
  0180  CD0A02        	 call init_c
                      	 
                      	;***************Starting game****************
                      	;***************massage*********************
                      	
  0183                	Stating_before:
  0183                	rec:
  0183  310000        	 ld SP,0
  0186  CD1902        	 call stating_before_c
                      	
                      	;***********************free aria cleen****************
                      	
  0189  CD5702        	 call freecls
                      	
                      	;***********************map set************************
  018C  CDC722        	 call Map_make
                      	
                      	;********************************obj set***************************
                      	
  018F  CDEB02        	 call nextck
                      	
                      	;***********************obj init************************
  0192                	stating_obj:
  0192  216960        	 ld HL,obj
  0195  3600          	 ld (HL),0
  0197  116A60        	 ld DE,obj+1
  019A  015001        	 ld BC,48+48+48+96+48+48
  019D  EDB0          	 ldir
                      	;***********************obj countor**************
  019F  21A22D        	 ld HL,obj_1
  01A2  3A6260        	 ld A,(floor)
  01A5  3D            	 dec A
  01A6  280B          	 jr z,stating_obj_1
                      	
  01A8  57            	 ld D,A
                      	;*********************0=end sign****next floor data***ldi loop**********
  01A9                	stating_obj_2:
  01A9  010000        	 ld BC,0
  01AC  3E00          	 ld A,0
  01AE  EDB1          	 cpir
  01B0  15            	 dec D
  01B1  20F6          	 jr nz,stating_obj_2
  01B3                	stating_obj_1:
  01B3  116960        	 ld DE,obj
  01B6                	stating_obj_3:
  01B6  7E            	 ld A,(HL)
  01B7  B7            	 or A
  01B8  2804          	 jr z,stating_obj_7
  01BA  EDA0          	 ldi
  01BC  18F8          	 jr stating_obj_3
                      	
                      	;*********************obj cp= then goto mainbefore***************
                      	
  01BE                	stating_obj_7:
  01BE  216960        	 ld HL,obj
  01C1  110000        	 ld DE,0
  01C4                	stating_obj_4:
  01C4  AF            	 xor A
  01C5  BE            	 cp (HL)
  01C6  CA0002        	 jp z,main_before		;stating_obj_hp
  01C9  E5            	 push HL
  01CA  D5            	 push DE
                      	
                      	;x=x+7*A
  01CB  ED5F          	 ld A,R;call rand
  01CD  E60F          	 and 0fh		;a=0~15
  01CF  211E00        	 ld HL,001eh	;30
  01D2  110700        	 ld DE,0007h
  01D5  CDBA1F        	 call xsan
                      	
                      	
                      	
                      	;y=y+7*A
  01D8  CD9F1F        	 call rand
  01DB                	stating_obj_5:
  01DB  D607          	 sub 7
  01DD  30FC          	 jr nc,stating_obj_5
  01DF  C607          	 add A,7
  01E1  110007        	 ld DE,0700h
  01E4  CDBA1F        	 call xsan
                      	
  01E7  D1            	 pop DE
  01E8  E5            	 push HL		;xy
                      	
  01E9  212961        	 ld HL,obj_xy		;address
  01EC  19            	 add HL,DE		;address+
                      	
  01ED  CDF002        	 call stating_obj_hp_wp
                      	
  01F0  19            	 add HL,DE		;address++
  01F1  22F701        	 ld (stating_obj_6+1),HL
                      	; add HL,DE		;address++(direction)
  01F4  13            	 inc DE
                      	
  01F5  E1            	 pop HL
                      	
                      	; ld HL,151eh;(30,0)
                      	
  01F6                	stating_obj_6:
  01F6  220000        	 ld (overwrite),HL
  01F9  22F661        	 ld (gil_xy),HL
  01FC  E1            	 pop  HL
  01FD  23            	 inc HL
  01FE  18C4          	 jr stating_obj_4
                      	
                      	
                      	;****************before farse***pgil_xy set**************
                      	
  0200                	main_before:
  0200  CD6502        	 call main_before_c
  0203  AF            	 xor A
  0204  CD4103        	 call itemprint
  0207  C30205        	 jp main_gil
                      	
                      	
                      	;**************************************************************************
                      	;***************************init sub****************************************
                      	;**************************************************************************
                      	
  020A                	init_c:
  020A  21EE61        	 ld HL,gil_matk
  020D  11EF61        	 ld DE,gil_matk+1
  0210  013200        	 ld BC,50
  0213  3E00          	 ld A,0
  0215  77            	 ld (HL),A
  0216  EDB0          	 ldir
  0218  C9            	 ret
                      	 
                      	 
  0219                	Stating_before_c:
  0219  CD0C20        	 call cls
  021C  216104        	 ld HL,stating_ms1
  021F  110801        	 ld DE,0108h
  0222  0609          	 ld B,9
  0224  CDF1BF        	 call msp
  0227  216A04        	 ld HL,stating_ms2
  022A  110802        	 ld De,0208h
  022D  060A          	 ld B,10
  022F  CDF1BF        	 call msp
  0232  217404        	 ld HL,stating_msf
  0235  110804        	 ld De,0408h
  0238  0605          	 ld B,5
  023A  CDF1BF        	 call msp
  023D  2A6260        	 ld HL,(floor)
  0240  2600          	 ld H,0
  0242  CDC61F        	 call ascn
  0245  21C41F        	 ld HL,nmemry+3
  0248  110E04        	 ld DE,040eh
  024B  0602          	 ld B,2
  024D  CDF1BF        	 call msp
  0250  CD8F1F        	 call tim255
  0253  CDFDBC        	 call kwait
  0256  C9            	 ret
                      	 
  0257                	freecls:
  0257  218A2D        	 ld HL,dammy
  025A  AF            	 xor A
  025B  77            	 ld (HL),A
  025C  118B2D        	 ld DE,dammy+1
  025F  011700        	 ld BC,23
  0262  EDB0          	 ldir
  0264  C9            	 ret
                      	
  0265                	main_before_c:
  0265  2AF661        	 ld HL,(gil_xy)
  0268  226760        	 ld (pgil_xy),HL 
  026B  21A22D        	 ld HL,obj_1
  026E  3A6260        	 ld A,(floor)
  0271  3D            	 dec A
  0272  2810          	 jr z,main_before_15
  0274  57            	 ld D,A
  0275  AF            	 xor A
  0276  010000        	 ld BC,0
  0279                	main_before_1:
  0279  EDB1          	 cpir
  027B  15            	 dec D
  027C  20FB          	 jr nz,main_before_1
  027E  216960        	 ld HL,obj
  0281  B7            	 or A
  0282  ED42          	 sbc HL,BC		;it's start pointa**obj++
                      	
                      	
                      	;******************door set****************************
  0284                	main_before_15:
  0284  E5            	 push HL		;obj
  0285  3E83          	 ld A,83h
  0287  010000        	 ld BC,0
                      	;main_before_2:
  028A  EDB1          	 cpir
  028C  03            	 inc BC
  028D  212961        	 ld HL,obj_xy
  0290  B7            	 or A
  0291  ED42          	 sbc HL,BC
  0293  B7            	 or A
  0294  ED42          	 sbc HL,BC
  0296  5E            	 ld E,(HL)
  0297  23            	 inc HL
  0298  56            	 ld D,(HL)
  0299  ED536360      	 ld (pdoor_xy),DE
                      	
                      	;*****************key set*******************************
                      	
  029D  E1            	 pop HL
  029E  3E85          	 ld A,85h
  02A0  010000        	 ld BC,0
                      	;main_before_3:
  02A3  EDB1          	 cpir
  02A5  03            	 inc BC
  02A6  212961        	 ld HL,obj_xy
  02A9  B7            	 or A
  02AA  ED42          	 sbc HL,BC
  02AC  B7            	 or A
  02AD  ED42          	 sbc HL,BC
  02AF  5E            	 ld E,(HL)
  02B0  23            	 inc HL
  02B1  56            	 ld D,(HL)
  02B2  ED536560      	 ld (pkey_xy),DE
  02B6  AF            	 xor A
  02B7  320662        	 ld (key),A
                      	
                      	;*********************obj cross gil********************
                      	
  02BA  2AF661        	 ld HL,(gil_xy)
  02BD  4D            	 ld C,L
  02BE  44            	 ld B,H
  02BF  212961        	 ld HL,obj_xy
  02C2                	main_before_gil:
  02C2  E5            	 push HL
  02C3  5E            	 ld E,(HL)
  02C4  23            	 inc HL
  02C5  56            	 ld D,(HL)
  02C6  EB            	 ex DE,HL
  02C7  B7            	 or A
  02C8  ED42          	 sbc HL,BC
  02CA  E1            	 pop HL
  02CB  2804          	 jr z,main_before_gil_z
  02CD  23            	 inc HL
  02CE  23            	 inc HL
  02CF  18F1          	 jr main_before_gil
  02D1                	main_before_gil_z:
  02D1  23            	 inc HL
  02D2  23            	 inc HL
  02D3  7E            	 ld A,(HL)
  02D4  B7            	 or A
  02D5  C29201        	 jp nz,stating_obj
                      	 
  02D8  3AF701        	 ld A,(stating_obj_6+1)
  02DB  6F            	 ld L,A
  02DC  3AF801        	 ld A,(stating_obj_6+2)
  02DF  67            	 ld H,A
  02E0  3E15          	 ld A,21
  02E2  77            	 ld (HL),A
  02E3  23            	 inc HL
  02E4  3E2A          	 ld A,42
  02E6  77            	 ld (HL),A
  02E7  22F000        	 ld (0f0h),HL
  02EA  C9            	 ret
                      	 
                      	 
  02EB                	nextck:
  02EB  AF            	 xor A
  02EC  320662        	 ld (key),A
  02EF  C9            	 ret
                      	
                      	 
                      	;*********************obs  hp  wp set*********************
  02F0                	stating_obj_hp_wp:
  02F0  E5            	 push HL
  02F1  D5            	 push DE
                      	
  02F2  216960        	 ld HL,obj
  02F5  19            	 add HL,DE
  02F6  7E            	 ld A,(HL)
  02F7  E60F          	 and 0fh
  02F9  CB7E          	 bit 7,(HL)
  02FB  2028          	 jr nz,stating_obj_hp_wp5
  02FD  CB76          	 bit 6,(HL)
  02FF  201D          	 jr nz,stating_obj_hp_wp4
  0301  CB6E          	 bit 5,(HL)
  0303  2012          	 jr nz,stating_obj_hp_wp3
  0305  CB66          	 bit 4,(HL)
  0307  2007          	 jr nz,stating_obj_hp_wp2
  0309                	stating_obj_hp_wp1:
  0309  212A60        	 ld HL,hp_table1
  030C  C32C03        	 jp stating_obj_hp_wp6
  030F  C9            	 ret
  0310                	stating_obj_hp_wp2:
  0310  213A60        	 ld HL,hp_table2
  0313  C32C03        	 jp stating_obj_hp_wp6
  0316  C9            	 ret
  0317                	stating_obj_hp_wp3:
  0317  214360        	 ld HL,hp_table3
  031A  C32C03        	 jp stating_obj_hp_wp6
  031D  C9            	 ret
  031E                	stating_obj_hp_wp4:
  031E  214A60        	 ld HL,hp_table4
  0321  C32C03        	 jp stating_obj_hp_wp6
  0324  C9            	 ret
  0325                	stating_obj_hp_wp5:
  0325  215260        	 ld HL,hp_table5
  0328  C32C03        	 jp stating_obj_hp_wp6
  032B  C9            	 ret
  032C                	stating_obj_hp_wp6:
  032C  5F            	 ld E,A
  032D  1D            	 dec E
  032E  1600          	 ld D,0
  0330  19            	 add HL,DE
  0331  7E            	 ld A,(HL)
  0332  D1            	 pop DE
  0333  219960        	 ld HL,obj_hp
  0336  19            	 add HL,DE
  0337  77            	 ld (HL),A
                      	 
  0338  E1            	 pop HL
  0339  E67F          	 and 01111111b
                      	 ;********************************************************HP*******************************
  033B  3E38          	 ld A,00111000b
  033D  32EA61        	 ld (gil_hp),A
  0340  C9            	 ret	;gil is end of data.
                      	 
                      	 
                      	;************************item print1*******************************************
                      	 
  0341                	itemprint:
  0341  E5            	 push HL
  0342  CD4E04        	 call item_get
  0345  3A0662        	 ld A,(key)
  0348  B7            	 or A
  0349  2809          	 jr z,itemprint_matk
  034B  21242D        	 ld HL,graph_key
  034E  110000        	 ld DE,0000h
  0351  CDB324        	 call grp_set
  0354                	itemprint_matk:
  0354  3AFA61        	 ld A,(matk)
  0357  B7            	 or A
  0358  280C          	 jr z,itemprint_boot
  035A  CD2204        	 call matk_set
  035D  213C2D        	 ld HL,graph_matk
  0360  110007        	 ld DE,0700h
  0363  CDB324        	 call grp_set
  0366                	itemprint_boot:
  0366  3AFB61        	 ld A,(boot)
  0369  B7            	 or A
  036A  2809          	 jr z,itemprint_po
  036C  21422D        	 ld HL,graph_boot
  036F  110707        	 ld DE,0707h
  0372  CDB324        	 call grp_set
  0375                	itemprint_po:
  0375  3A0562        	 ld A,(posion)
  0378  B7            	 or A
  0379  2809          	 jr z,itemprint_sword
  037B  21482D        	 ld HL,graph_po
  037E  110E07        	 ld DE,070eh
  0381  CDB324        	 call grp_set
  0384                	itemprint_sword:
  0384  3AFC61        	 ld A,(sword)
  0387  B7            	 or A
  0388  2809          	 jr z,itemprint_kndl
  038A  214E2D        	 ld HL,graph_sword
  038D  11000E        	 ld DE,0e00h
  0390  CDB324        	 call grp_set
  0393                	itemprint_kndl:
  0393  3A0362        	 ld A,(kndl)
  0396  B7            	 or A
  0397  2809          	 jr z,itemprint_gnt
  0399  21602D        	 ld HL,graph_kndl
  039C  110015        	 ld DE,1500h
  039F  CDB324        	 call grp_set
  03A2                	itemprint_gnt:
  03A2  3AFE61        	 ld A,(gnt)
  03A5  B7            	 or A
  03A6  2809          	 jr z,itemprint_armor
  03A8  21542D        	 ld HL,graph_gnt
  03AB  11070E        	 ld DE,0e07h
  03AE  CDB324        	 call grp_set
  03B1                	itemprint_armor:
  03B1  3AFD61        	 ld A,(armor)
  03B4  B7            	 or A
  03B5  2809          	 jr z,itemprint_shield
  03B7  215A2D        	 ld HL,graph_armor
  03BA  110E0E        	 ld DE,0e0eh
  03BD  CDB324        	 call grp_set
  03C0                	itemprint_shield:
  03C0  3AFF61        	 ld A,(shield)
  03C3  B7            	 or A
  03C4  2809          	 jr z,itemprint_hlmt
  03C6  21662D        	 ld HL,graph_shield
  03C9  110715        	 ld DE,1507h
  03CC  CDB324        	 call grp_set
  03CF                	itemprint_hlmt:
  03CF  3A0062        	 ld A,(hlmt)
  03D2  B7            	 or A
  03D3  280C          	 jr z,itemprint_nec
  03D5  CD3C04        	 call hlmt_set
  03D8  21722D        	 ld HL,graph_hlmt
  03DB  11001C        	 ld DE,1c00h
  03DE  CDB324        	 call grp_set
  03E1                	itemprint_nec:
  03E1  3A0762        	 ld A,(nec)
  03E4  B7            	 or A
  03E5  2809          	 jr z,itemprint_brns
  03E7  216C2D        	 ld HL,graph_nec
  03EA  110E15        	 ld DE,150eh
  03ED  CDB324        	 call grp_set
  03F0                	itemprint_brns:
  03F0  3A0462        	 ld A,(brns)
  03F3  B7            	 or A
  03F4  2809          	 jr z,itemprint_meis
  03F6  21782D        	 ld HL,graph_brns
  03F9  11071C        	 ld DE,1c07h
  03FC  CDB324        	 call grp_set
  03FF                	itemprint_meis:
  03FF  3A0862        	 ld A,(meis)
  0402  B7            	 or A
  0403  2809          	 jr z,itemprint_rod
  0405  217E2D        	 ld HL,graph_meis
  0408  110E1C        	 ld DE,1c0eh
  040B  CDB324        	 call grp_set
  040E                	itemprint_rod:
  040E  3A0162        	 ld A,(rod)
  0411  B7            	 or A
  0412  2809          	 jr z,itemprint_
  0414  21842D        	 ld HL,graph_rod
  0417  110023        	 ld DE,2300h
  041A  CDB324        	 call grp_set
  041D                	itemprint_:
                      	
  041D  CD4020        	 call grp_o
  0420  E1            	 pop HL
  0421  C9            	 ret
                      	 
                      	 
                      	;****************************item set************************************
  0422                	matk_set:
  0422  FE01          	 cp 1
  0424  2810          	 jr z,cmtk
  0426  FE02          	 cp 2
  0428  2806          	 jr z,smtk
  042A                	gmtk:
  042A  3EFF          	 ld A,255
  042C  32EF61        	 ld (gil_matk_count),A
  042F  C9            	 ret
  0430                	smtk:
  0430  3E04          	 ld A,4
  0432  32EF61        	 ld (gil_matk_count),A
  0435  C9            	 ret
  0436                	cmtk:
  0436  3E02          	 ld A,2
  0438  32EF61        	 ld (gil_matk_count),A
  043B  C9            	 ret
                      	 
  043C                	hlmt_set:
  043C  B7            	 or A
  043D  C8            	 ret z
  043E  FE02          	 cp 2
  0440  2806          	 jr z,ihlmt
  0442  3E60          	 ld A,96
  0444  32EA61        	 ld (gil_hp),A
  0447  C9            	 ret
  0448                	ihlmt:
  0448  3E10          	 ld A,16
  044A  32EA61        	 ld (gil_hp),A
  044D  C9            	 ret
                      	
                      	 
                      	;**************item get*************************
  044E                	item_get:
  044E  B7            	 or A
  044F  C8            	 ret z
  0450  213C2D        	 ld HL,graph_matk
  0453  3D            	 dec A
  0454  110600        	 ld DE,6
  0457  CDBA1F        	 call xsan
  045A  110700        	 ld DE,0007h
  045D  CDB324        	 call grp_set
  0460  C9            	 ret
                      	
  0461                	stating_ms1:
  0461  47455420524541	 db "GET READY"
  046A                	stating_ms2:
  046A  504C4159455220	 db "PLAYER ONE"
  0474                	stating_msf:
  0474  464C4F4F52    	 db "FLOOR"
  0479                	continue_ms:
  0479  53454C45435420	 db "SELECT START FLOOR"
  048B                	wall_grp:
  048B  FFFFFF        	 db 0ffh,0ffh,0ffh
  048E                	pole_grp:
  048E  01            	 db 1h
                      	 
                      	 
                      	;*************************************************************************************
                      	;********************************recover**********************************************
  048F                	stating_rec:
  048F                	rec2:
  048F  310000        	 ld SP,0
  0492  CD1902        	 call Stating_before_c
  0495  CDC722        	 call map_make
  0498  CD5702        	 call freecls
  049B  AF            	 xor A
  049C  320662        	 ld (key),A
                      	; xor A
                      	; ld (posion),A
  049F  ED5B6760      	 ld DE,(pgil_xy)
  04A3  ED53F661      	 ld (gil_xy),DE
  04A7                	stating_rec1:
  04A7  DD219960      	 ld IX,obj_hp
  04AB  212961        	 ld HL,obj_xy
  04AE  110000        	 ld DE,0
  04B1                	stating_rec2:
  04B1  DD7ED0        	 ld A,(IX-48)
  04B4  FE8F          	 cp 8fh
  04B6  CAF704        	 jp z,stating_rec3
  04B9  D5            	 push DE
  04BA  CDF002        	 call stating_obj_hp_wp
  04BD  CD4B21        	 call cross_ck_a
  04C0  DACB04        	 jp c,obj_of
  04C3  D1            	 pop DE
  04C4  23            	 inc HL
  04C5  23            	 inc HL
  04C6  13            	 inc DE
  04C7  DD23          	 inc IX
  04C9  18E6          	 jr  stating_rec2
                      	 
  04CB                	obj_of:
  04CB  E5            	 push HL
  04CC  110700        	 ld DE,7
  04CF  210000        	 ld HL,0
  04D2  CD9F1F        	 call rand
  04D5  E60E          	 and 0eh
  04D7  CDBA1F        	 call xsan
  04DA  111E00        	 ld DE,30
  04DD  19            	 add HL,DE
  04DE  7D            	 ld A,L
  04DF  E1            	 pop HL
  04E0  77            	 ld (HL),A
  04E1  E5            	 push HL
  04E2  110700        	 ld DE,7
  04E5  210000        	 ld HL,0
  04E8  ED5F          	 ld A,R
  04EA  E606          	 and 06
  04EC  CDBA1F        	 call xsan
  04EF  7D            	 ld A,L
  04F0  E1            	 pop HL
  04F1  23            	 inc HL
  04F2  77            	 ld (HL),A
  04F3  2B            	 dec HL
  04F4  C3A704        	 jp stating_rec1
                      	 
  04F7                	stating_rec3:
  04F7  AF            	 xor A
  04F8  DD772E        	 ld (IX+46),A
  04FB  AF            	 xor A
  04FC  CD4103        	 call itemprint
  04FF  C30205        	 jp main_gil
                      	 
                      	 
                      	
  0502                	main_gil:
  0502  215C2B        	 ld HL,graph_gil_ulf
  0505  ED5B6760      	 ld DE,(pgil_xy)
  0509  CDB324        	 call grp_set
  050C  CD4020        	 call grp_o
  050F  CDFDBC        	 call kwait
  0512  3E02          	 ld A,00000010b
  0514  32ED61        	 ld (gil_st2),A
  0517  21F761        	 ld HL,gil_xy+1
  051A  CBFE          	 set 7,(HL)
                      	
                      	;**************************************************************************************
                      	;************************************Main*********************************************
                      	;**************************************************************************************
  051C                	main:
  051C  CD4020        	 call grp_o
                      	; call tim30
  051F  3E30          	 ld A,48
  0521  323005        	 ld (count+1),A
  0524  212961        	 ld HL,obj_xy
  0527  DD219960      	 ld IX,obj_hp
  052B  FD218961      	 ld IY,obj_st2
  052F                	mains:
                      	; ret
  052F                	count:
  052F  3E00          	 ld A,overwrite
  0531  B7            	 or A
  0532  CA1C05        	 jp z,main
                      	;unknown_ID_throght(0)
  0535  DD7ED0        	 ld A,(IX-48)
  0538  B7            	 or A
  0539  CA691F        	 jp z,mains_end
                      	;count out then main
                      	
                      	;graph_delete
                      	
  053C  E5            	 push HL		;>
  053D  5E            	 ld E,(HL)
  053E  23            	 inc HL
  053F  56            	 ld D,(HL)
  0540  CD3F25        	 call grp_del
  0543  E1            	 pop HL		;<
                      	;hp_zero_throght
                      	
  0544  DD7E00        	 ld A,(IX)
  0547  B7            	 or A
  0548  CA691F        	 jp z,mains_end
                      	
                      	
                      	
                      	
                      	;******************************ivent action **********************
                      	 
  054B  DD7ED0        	 ld A,(IX-48)
  054E  47            	 ld B,A
  054F  E6E0          	 and 0e0h
  0551  C2D605        	 jp nz,st_action
  0554  78            	 ld A,B
  0555  FE0A          	 cp 0ah
  0557  CA7309        	 jp z,spells_action
  055A  FE0B          	 cp 0bh
  055C  CA7309        	 jp z,spells_action
  055F  FE0C          	 cp 0ch
  0561  CA7A0A        	 jp z,bress_action
                      	
                      	;wp
  0564  DD7E30        	 ld A,(IX+48)
  0567  B7            	 or A
                      	
                      	;wp=0
  0568  CA7A05        	 jp z,st_check
                      	
                      	
                      	
                      	;wp>0
  056B  3D            	 dec A
  056C  DD7730        	 ld (IX+48),A
  056F  DD7ED0        	 ld A,(IX-48);(Syubetsu)
  0572  CB67          	 bit 4,A
  0574  CAE106        	 jp z,sraim_move3_e;(suraimuGPRINT)
  0577  C38907        	 jp wizard_move_e_wpp
                      	; jp wizard_act_e
                      	; jp nz,mains_end
                      	; jp st_check
  057A                	st_check:
  057A  DD7E60        	 ld A,(IX+96)
  057D  B7            	 or A
  057E  C2CF05        	 jp nz,st_dec
                      	
                      	;wp=0,st=0
                      	;wp setting((di)=move lutin)
                      	
  0581  DD7ED0        	 ld A,(IX-48);(Syurui)
  0584  CB67          	 bit 4,A
  0586  2808          	 jr z,wp_str_b
  0588  ED5F          	 ld A,R;		(wizard)
  058A  E61F          	 and 00011111b
  058C  CBEF          	 set 5,A
  058E  182A          	 jr wp_str
  0590                	wp_str_b:
  0590  F5            	 push AF
  0591  ED5F          	 ld A,R
  0593  E67F          	 and 7fh
  0595  47            	 ld B,A
  0596  ED5F          	 ld A,R
  0598  E67F          	 and 7fh
  059A  80            	 add A,B
  059B  47            	 ld B,A
  059C  F1            	 pop AF
  059D  FE02          	 cp 2
  059F  3816          	 jr c,wp_G
  05A1  280F          	 jr z,wp_B
  05A3  FE04          	 cp 4
  05A5  78            	 ld A,B
  05A6  3806          	 jr c,wp_R
  05A8  2804          	 jr z,wp_BL
  05AA                	wp_D:
  05AA                	wp_DY:
  05AA  E608          	 and 8
  05AC  180C          	 jr wp_str
  05AE                	wp_BL:
  05AE                	wp_R:
  05AE  E610          	 and 16
  05B0  1808          	 jr wp_str
  05B2                	wp_B:
  05B2  78            	 ld A,B
  05B3  E608          	 and 8
  05B5  1803          	 jr wp_str
  05B7                	wp_G:
  05B7  78            	 ld A,B
  05B8  E610          	 and 16
  05BA                	wp_str:
  05BA  C608          	 add A,8
  05BC  DD7730        	 ld (IX+48),A
  05BF  3E19          	 ld A,25
  05C1  DD7760        	 ld (IX+96),A
                      	
  05C4  DD7ED0        	 ld A,(IX-48);(Syubetsu)
  05C7  CB67          	 bit 4,A
  05C9  CAE106        	 jp z,sraim_move3_e;(suraimuGPRINT)
  05CC  C38907        	 jp wizard_move_e_wpp;(wizard not print)mains_end
                      	; jp Egraph;
                      	
                      	
                      	
                      	;wp=0,st=x
  05CF                	st_dec:
  05CF  3D            	 dec A
  05D0  DD7760        	 ld (IX+96),A
  05D3  C35906        	 jp sraim_or_wiz_action
                      	 
                      	 
                      	;***********************************knight,quox,ivent*********************************
  05D6                	st_action:;Individual action
                      	; call bls
  05D6  DD7ED0        	 ld A,(IX-48)
  05D9  FE41          	 cp 41h
  05DB  CA8A0C        	 jp z,quox_action
  05DE  FE42          	 cp 42h
  05E0  CA8A0C        	 jp z,quox_action
  05E3  FE43          	 cp 43h
  05E5  CA8A0C        	 jp z,quox_action
  05E8  FE44          	 cp 44h
  05EA  CA8A0C        	 jp z,quox_action
  05ED  FE45          	 cp 45h
  05EF  CA1208        	 jp z,goast_action
  05F2  FE46          	 cp 46h
  05F4  CA1208        	 jp z,goast_action
  05F7  CB6F          	 bit 5,A
  05F9  C2DB0A        	 jp nz,knight_action
  05FC  FE81          	 cp 81h
  05FE  CAD310        	 jp z,druaga
  0601  FE85          	 cp 85h
  0603  CAB70E        	 jp z,key_action
  0606  FE84          	 cp 84h
  0608  CA2F1D        	 jp z,door_action
  060B  FE83          	 cp 83h
  060D  CA5011        	 jp z,box_action
  0610  FE86          	 cp 86h
  0612  CADD0E        	 jp z,excarivor
  0615  FE87          	 cp 87h
  0617  CA1511        	 jp z,sacubus
                      	 
  061A  FE8A          	 cp 8ah
  061C  CA1C0F        	 jp z,grod
  061F  FE8B          	 cp 8bh
  0621  CA4A0F        	 jp z,rrod
  0624  FE8C          	 cp 8ch
  0626  CA780F        	 jp z,brod
  0629  FE8D          	 cp 8dh
  062B  CABB0F        	 jp z,ishitar
  062E  FE8E          	 cp 8eh
  0630  CAE90F        	 jp z,kai
                      	 
  0633  FE8F          	 cp 8fh
  0635  CAA41D        	 jp z,gil_action
  0638  C3691F        	 jp mains_end
                      	
  063B  32F000        	 ld (0f0h),A
  063E  DD7ED0        	 ld A,(IX-48)
  0641  32F400        	 ld (0f4h),A
  0644  DD7E00        	 ld A,(IX-0)
  0647  32F500        	 ld (0f5h),A
  064A  DD7E30        	 ld A,(IX+48)
  064D  32F600        	 ld (0f6h),A
  0650  DD7E60        	 ld A,(IX+96)
  0653  32F700        	 ld (0f7h),A
  0656  C3831F        	 jp retP
                      	
                      	
                      	
                      	
                      	
                      	
                      	
                      	
                      	
                      	
                      	
                      	
                      	
                      	
                      	
                      	
                      	
                      	
                      	
                      	;****************************************************************************
                      	;*********************************sraim or wiz*******************************
                      	
  0659                	sraim_or_wiz_action:;HL=obj_xy++
  0659  DDCBD066      	 bit 4,(IX-48);(NO.)
  065D  C21607        	 jp nz,wiz_action
                      	
                      	 ;;;;
                      	 ;;;;
  0660  DD7E60        	 ld A,(IX+96);(st)
                      	 
                      	; ld (0f0h),A
                      	; jp retP
                      	
  0663  FE09          	 cp 9
  0665  280B          	 jr z,sraim_move1_B
  0667  FE05          	 cp 5
  0669  2834          	 jr z,sraim_move1
  066B  FE01          	 cp 1
  066D  2850          	 jr z,sraim_move3
  066F  C3E106        	 jp sraim_move3_e;mains_end
                      	
                      	
  0672                	sraim_move1_B:
  0672  DD7ED0        	 ld A,(IX-48)
  0675  FE03          	 cp 3
  0677  380A          	 jr c,sraim_move1_nspell
  0679  CD9F1F        	 call rand
  067C  FE40          	 cp 64
  067E  3003          	 jr nc,sraim_move1_nspell
  0680  CD0F09        	 call spell_create
  0683                	sraim_move1_nspell:
  0683  CD8421        	 call wall_ck
  0686  2817          	 jr z,sraim_move1
  0688  23            	 inc HL
  0689  CBBE          	 res 7,(HL)
  068B  CBB6          	 res 6,(HL)
  068D  ED5F          	 ld A,R
                      	; rla
  068F  1F            	 rra
  0690  1F            	 rra
  0691  1F            	 rra
  0692  E6C0          	 and 0c0h
  0694  B6            	 or (HL)
  0695  77            	 ld (HL),A
  0696  2B            	 dec HL
  0697  3E50          	 ld A,80
  0699  DD7760        	 ld (IX+96),A
  069C  C3E106        	 jp sraim_move3_e
  069F                	sraim_move1:
                      	
                      	
                      	;graph_delete
                      	
                      	; push HL		;>
                      	; call bls
                      	; ld E,(HL)
                      	; inc HL
                      	; ld D,(HL)
                      	; call grp_del
                      	; pop HL		;<
                      	
                      	
  069F  23            	 inc HL
  06A0  7E            	 ld A,(HL)
  06A1  E6C0          	 and 0c0h
  06A3  280B          	 jr z,sraim_move1_u
  06A5  FE80          	 cp 80h
  06A7  380C          	 jr c,sraim_move1_r
  06A9  280F          	 jr z,sraim_move1_d
  06AB                	sraim_move1_l:
  06AB  2B            	 dec HL
  06AC  35            	 dec (HL)
  06AD  35            	 dec (HL)
  06AE  1831          	 jr sraim_move3_e
  06B0                	sraim_move1_u:
  06B0  35            	 dec (HL)
  06B1  35            	 dec (HL)
  06B2  2B            	 dec HL
  06B3  182C          	 jr sraim_move3_e
  06B5                	sraim_move1_r:
  06B5  2B            	 dec HL
  06B6  34            	 inc (HL)
  06B7  34            	 inc (HL)
  06B8  1827          	 jr sraim_move3_e
  06BA                	sraim_move1_d:
  06BA  34            	 inc (HL)
  06BB  34            	 inc (HL)
  06BC  2B            	 dec HL
                      	
  06BD  1822          	 jr sraim_move3_e
                      	
                      	
  06BF                	sraim_move3:
                      	
  06BF  23            	 inc HL
  06C0  7E            	 ld A,(HL)
  06C1  E6C0          	 and 0c0h
  06C3  280C          	 jr z,sraim_move3_u
  06C5  FE80          	 cp 80h
  06C7  380E          	 jr c,sraim_move3_r
  06C9  2812          	 jr z,sraim_move3_d
  06CB                	sraim_move3_l:
  06CB  2B            	 dec HL
  06CC  35            	 dec (HL)
  06CD  35            	 dec (HL)
  06CE  35            	 dec (HL)
  06CF  1810          	 jr sraim_move3_e
  06D1                	sraim_move3_u:
  06D1  35            	 dec (HL)
  06D2  35            	 dec (HL)
  06D3  35            	 dec (HL)
  06D4  2B            	 dec HL
  06D5  180A          	 jr sraim_move3_e
  06D7                	sraim_move3_r:
  06D7  2B            	 dec HL
  06D8  34            	 inc (HL)
  06D9  34            	 inc (HL)
  06DA  34            	 inc (HL)
  06DB  1804          	 jr sraim_move3_e
  06DD                	sraim_move3_d:
  06DD  34            	 inc (HL)
  06DE  34            	 inc (HL)
  06DF  34            	 inc (HL)
  06E0  2B            	 dec HL
  06E1                	sraim_move3_e:
  06E1  11EC2B        	 ld DE,graph_sraimd
  06E4                	Egraph:;(DE=)
  06E4  ED53ED06      	 ld (Egraph_put+1),DE
  06E8  E5            	 push HL		;>
  06E9  5E            	 ld E,(HL)
  06EA  23            	 inc HL
  06EB  56            	 ld D,(HL)
  06EC                	Egraph_put:
  06EC  210000        	 ld HL,overwrite
  06EF  CDB324        	 call grp_set
  06F2  E1            	 pop HL			;<
  06F3  DD7ED0        	 ld A,(IX-48)
  06F6  E6F8          	 and 11111000b
  06F8  CAFC06        	 jp z,sraim_cross_ck;
  06FB  C9            	 ret
                      	 
  06FC                	sraim_cross_ck:
  06FC  3AED61        	 ld A,(gil_st2)
  06FF  CB7F          	 bit 7,A		;(gil sworud MIRU)
  0701  2808          	 jr z,s1
  0703  CD4B21        	 call cross_ck_a;s
  0706  DC6D21        	 call c,cha_kill;(suraim HP=0)
  0709  1808          	 jr s2
  070B                	s1:;(gil_st=0-x)
  070B  CD4B21        	 call cross_ck_a
  070E  3003          	 jr nc,s2
  0710  C34A1F        	 jp gil_killing
                      	 
  0713                	s2:
                      	; jp c,retP
  0713  C3691F        	 jp mains_end
                      	
                      	
                      	;******************wiz actions**Main***********************
  0716                	wiz_action:
  0716  DD7ED0        	 ld A,(IX-48)
  0719  FE14          	 cp 14h
  071B  2007          	 jr nz,wiz_action2
  071D  3A962D        	 ld A,(dammy+12)
  0720  B7            	 or A
  0721  CA691F        	 jp z,mains_end
  0724                	wiz_action2:
  0724  DD7E60        	 ld A,(IX+96)
  0727  FE18          	 cp 24
  0729  CA5507        	 jp z,wiz_ap
  072C  FE0C          	 cp 12
  072E  CA7707        	 jp z,wiz_sp
  0731  FD7E00        	 ld A,(IY)
  0734  B7            	 or A
  0735  C27D07        	 jp nz,wiz_dec
  0738                	wiz_dec2:
  0738  11042C        	 ld DE,magic
  073B  CDE406        	 call Egraph
                      	;********************cross chack wiz*******************
  073E                	wizard_cross_ck;
  073E  3AED61        	 ld A,(gil_st2)
  0741  CB7F          	 bit 7,A		;(gil sworud MIRU)
  0743  2808          	 jr z,ss1
  0745  CD4B21        	 call cross_ck_a;s
  0748  DC6D21        	 call c,cha_kill;(suraim HP=0)
  074B  1805          	 jr ss2
  074D                	ss1:;(gil_st=0-x)
  074D  CD4B21        	 call cross_ck_a
  0750  3000          	 jr nc,wizard_end
                      	; jp gil_killing
  0752                	ss2:
  0752                	wizard_end:
                      	;********************wiz end***************************
  0752  C3691F        	 jp mains_end
                      	
  0755                	wiz_ap:
                      	
  0755                	gil_notaction_f:
  0755  3AE961        	 ld A,(gil_button)
  0758  DD3430        	 inc (IX+48)
  075B  DD3460        	 inc (IX+96)
  075E  E6C3          	 and 11000011b
  0760  CA5207        	 jp z,wizard_end
  0763  DD3530        	 dec (IX+48)
  0766  DD3560        	 dec (IX+96)
                      	 
  0769  DD7E60        	 ld A,(IX+96)
  076C  3E0A          	 ld A,10
  076E  FD7700        	 ld (IY),A
  0771  CD8C07        	 call wiz_locate
  0774  C33807        	 jp wiz_dec2
  0777                	wiz_sp:
  0777  CD0F09        	 call spell_create
  077A  C33807        	 jp wiz_dec2
  077D                	wiz_dec:
  077D  DD3460        	 inc (IX+96)
  0780  FD3500        	 dec (IY)
  0783  FD7E00        	 ld A,(IY)
  0786  C33807        	 jp wiz_dec2
                      	
                      	;***********************wp>0 then noting*********************
  0789                	wizard_move_e_wpp;wp>0
  0789  C3691F        	 jp mains_end
                      	
                      	;***********************wiz_locate**************************
  078C                	wiz_locate:
                      	
  078C  E5            	 push HL	;>
  078D  21F661        	 ld HL,gil_xy
  0790  5E            	 ld E,(HL);x
  0791  23            	 inc HL
  0792  56            	 ld D,(HL);y
                      	
                      	; ld A,E
                      	; ld (0f0h),A
                      	; ld A,D
                      	; ld (0f1h),A
                      	 
  0793  E1            	 pop HL		;<
  0794  ED5F          	 ld A,R
  0796  4F            	 ld C,A
  0797  ED5F          	 ld A,R
  0799  E603          	 and 00000011b
  079B  B7            	 or A
  079C  CABA07        	 jp z,wiz_locate_left
  079F  FE02          	 cp 2
  07A1  DAD107        	 jp c,wiz_locate_down
  07A4  CAE507        	 jp z,wiz_locate_right
  07A7                	wiz_locate_up:
  07A7  7A            	 ld A,D
  07A8  E63F          	 and 00111111b
  07AA  D60E          	 sub 14
  07AC  38DE          	 jr c,wiz_locate
  07AE  F680          	 or 10000000b
  07B0  57            	 ld D,A
                      	 
  07B1  7B            	 ld A,E
  07B2  77            	 ld (HL),A
  07B3  23            	 inc HL
  07B4  7A            	 ld A,D
  07B5  77            	 ld (HL),A
  07B6  2B            	 dec HL
                      	 
  07B7  C3FD07        	 jp wiz_locate_end
  07BA                	wiz_locate_left;
  07BA  7B            	 ld A,E
  07BB  D60E          	 sub 14
  07BD  FE1E          	 cp 30
  07BF  38CB          	 jr c,wiz_locate
  07C1  5F            	 ld E,A
                      	 
  07C2  7A            	 ld A,D
  07C3  E63F          	 and 00111111b
  07C5  F640          	 or 01000000b
  07C7  57            	 ld D,A
                      	 
  07C8  7B            	 ld A,E
  07C9  77            	 ld (HL),A
  07CA  23            	 inc HL
  07CB  7A            	 ld A,D
  07CC  77            	 ld (HL),A
  07CD  2B            	 dec HL
                      	 
  07CE  C3FD07        	 jp wiz_locate_end
  07D1                	wiz_locate_down;
  07D1  7A            	 ld A,D
  07D2  E63F          	 and 00111111b
  07D4  7A            	 ld A,D
  07D5  C60E          	 add A,14
  07D7  FE30          	 cp 47+1
  07D9  30B1          	 jr nc,wiz_locate
  07DB  57            	 ld D,A
                      	 
  07DC  7B            	 ld A,E
  07DD  77            	 ld (HL),A
  07DE  23            	 inc HL
  07DF  7A            	 ld A,D
  07E0  77            	 ld (HL),A
  07E1  2B            	 dec HL
                      	 
  07E2  C3FD07        	 jp wiz_locate_end
  07E5                	wiz_locate_right;
  07E5  7B            	 ld A,E
  07E6  C60E          	 add A,14
  07E8  FE88          	 cp 135+1
  07EA  D28C07        	 jp nc,wiz_locate
  07ED  5F            	 ld E,A
                      	 
  07EE  7A            	 ld A,D
  07EF  E63F          	 and 00111111b
  07F1  F6C0          	 or 11000000b
  07F3  57            	 ld D,A
                      	 
  07F4  7B            	 ld A,E
  07F5  77            	 ld (HL),A
  07F6  23            	 inc HL
  07F7  7A            	 ld A,D
  07F8  77            	 ld (HL),A
  07F9  2B            	 dec HL
                      	 
  07FA  C3FD07        	 jp wiz_locate_end
                      	 
                      	;
  07FD                	wiz_locate_end:
  07FD  CD1722        	 call wall_mod
  0800  7E            	 ld A,(HL)
  0801  91            	 sub C
  0802  77            	 ld (HL),A 
  0803  23            	 inc HL		;>
  0804  7E            	 ld A,(HL)
  0805  90            	 sub B
  0806  77            	 ld (HL),A
  0807  E63F          	 and 00111111b
  0809  FE2A          	 cp 7*6
  080B  2003          	 jr nz,wizle
  080D  328D2D        	 ld (dammy+3),A
  0810                	wizle:
  0810  2B            	 dec HL		;<
  0811  C9            	 ret
                      	 
                      	;******************************goast action***************************
  0812                	goast_action:
  0812  DD7E60        	 ld A,(IX+96)
  0815  47            	 ld B,A
  0816  DD7E00        	 ld A,(IX)
  0819  B8            	 cp B
  081A  3803          	 jr c,goast_action_b
  081C  DD7760        	 ld (IX+96),A
  081F                	goast_action_b:
  081F  DD7E30        	 ld A,(IX+48)
  0822  B7            	 or A
  0823  CA3008        	 jp z,goast_action_a
  0826  3D            	 dec A
  0827  DD7730        	 ld (IX+48),A
  082A  CADC08        	 jp z,goast_warp_ap
  082D  C39D08        	 jp goast_end
  0830                	goast_action_a:
  0830  CD1722        	 call wall_mod
  0833  79            	 ld A,C
  0834  B7            	 or A
  0835  C29A08        	 jp nz,goast_move
  0838  78            	 ld A,B
  0839  B7            	 or A
  083A  C29A08        	 jp nz,goast_move 
                      	 
  083D                	goast_action_0:
  083D  CDB41F        	 call rand4
  0840  FEA0          	 cp 0a0h
  0842  3803          	 jr c,goast_action_1
  0844  CD0F09        	 call spell_create
  0847                	goast_action_1:
  0847  CDE00D        	 call xyload
  084A  3AF661        	 ld A,(gil_xy)
  084D  93            	 sub E
  084E  3004          	 jr nc,goast_cp1
  0850  2812          	 jr z,goast_y
  0852  ED44          	 neg
  0854                	goast_cp1:
  0854  4F            	 ld C,A
  0855  3AF761        	 ld A,(gil_xy+1)
  0858  E63F          	 and 00111111b
  085A  92            	 sub D
  085B  3004          	 jr nc,goast_cp2
  085D  280C          	 jr z,goast_x
  085F  ED44          	 neg
  0861                	goast_cp2:
  0861  B9            	 cp C
  0862  3807          	 jr c,goast_x 
  0864                	goast_y:
  0864  CDD30D        	 call y_ck
  0867  3819          	 jr c,goast_up
  0869  181F          	 jr goast_do
  086B                	goast_x:
  086B  CDCB0D        	 call x_ck
  086E  3802          	 jr c,goast_le
  0870  1808          	 jr goast_ri
  0872                	goast_le:
  0872  23            	 inc HL
  0873  CBFE          	 set 7,(HL)
  0875  CBF6          	 set 6,(HL)
  0877  2B            	 dec HL
  0878  1818          	 jr goast_wc
  087A                	goast_ri:
  087A  23            	 inc HL
  087B  CBBE          	 res 7,(HL)
  087D  CBF6          	 set 6,(HL)
  087F  2B            	 dec HL
  0880  1810          	 jr goast_wc
  0882                	goast_up:
  0882  23            	 inc HL
  0883  CBBE          	 res 7,(HL)
  0885  CBB6          	 res 6,(HL)
  0887  2B            	 dec HL
  0888  1808          	 jr goast_wc
  088A                	goast_do:
  088A  23            	 inc HL
  088B  CBFE          	 set 7,(HL)
  088D  CBB6          	 res 6,(HL)
  088F  2B            	 dec HL
  0890  1800          	 jr goast_wc
  0892                	goast_wc:
  0892  CD8421        	 call wall_ck
  0895  2803          	 jr z,goast_move
  0897  C3D408        	 jp goast_warp
  089A                	goast_move:
  089A  CDA80B        	 call empty_move
  089D                	goast_end:
                      	 
                      	;*****************************cross ck goast*****************************
  089D  DD7ED0        	 ld A,(IX-48)
  08A0  FE81          	 cp 81h
  08A2  CADD10        	 jp z,druaga_cross
                      	
  08A5  3AED61        	 ld A,(gil_st2)
  08A8  B7            	 or A
  08A9  2811          	 jr z,sssss1
  08AB  CB7F          	 bit 7,A
  08AD  2808          	 jr z,sssss0
  08AF  CD4B21        	 call cross_ck_a;s
  08B2  DC230E        	 call c,HP_decB;
  08B5  280D          	 jr z,sssss2
  08B7                	sssss0:
  08B7  CD4B21        	 call cross_ck_a;
  08BA  1808          	 jr sssss2
  08BC                	sssss1:;(gil_st=0-x)
  08BC  CD4B21        	 call cross_ck_a
  08BF  3003          	 jr nc,sssss2
  08C1  C34A1F        	 jp gil_killing
  08C4                	sssss2:
  08C4  3A0362        	 ld A,(kndl)
  08C7  B7            	 or A
  08C8  CA691F        	 jp z,mains_end
  08CB  111C2C        	 ld DE,graph_goast
  08CE  CDE406        	 call Egraph
  08D1  C3691F        	 jp mains_end
                      	 
                      	;****************************goast sub*********************************** 
  08D4                	goast_warp:
  08D4  3E12          	 ld A,18
  08D6  DD7730        	 ld (IX+48),A
  08D9  C39D08        	 jp goast_end
                      	 
  08DC                	goast_warp_ap:
  08DC  23            	 inc HL
  08DD  7E            	 ld A,(HL)
  08DE  2B            	 dec HL
  08DF  E6C0          	 and 11000000b
  08E1  280C          	 jr z,goast_warp_ap_u
  08E3  FE80          	 cp 80h
  08E5  3810          	 jr c,goast_warp_ap_r
  08E7  2814          	 jr z,goast_warp_ap_d
  08E9                	goast_warp_ap_l:
  08E9  7E            	 ld A,(HL)
  08EA  D607          	 sub 7
  08EC  77            	 ld (HL),A
  08ED  1816          	 jr goast_warp_ap_e
  08EF                	goast_warp_ap_u:
  08EF  23            	 inc HL
  08F0  7E            	 ld A,(HL)
  08F1  D607          	 sub 7
  08F3  77            	 ld (HL),A
  08F4  2B            	 dec HL
  08F5  180E          	 jr goast_warp_ap_e
  08F7                	goast_warp_ap_r:
  08F7  7E            	 ld A,(HL)
  08F8  C607          	 add A,7
  08FA  77            	 ld (HL),A
  08FB  1808          	 jr goast_warp_ap_e
  08FD                	goast_warp_ap_d:
  08FD  23            	 inc HL
  08FE  7E            	 ld A,(HL)
  08FF  C607          	 add A,7
  0901  77            	 ld (HL),A
  0902  2B            	 dec HL
  0903  1800          	 jr goast_warp_ap_e
  0905                	goast_warp_ap_e:
  0905  3A922D        	 ld A,(dammy+8)
  0908  3C            	 inc A
  0909  32922D        	 ld (dammy+8),A
  090C  C39D08        	 jp goast_end
                      	 
                      	;******************************spell create*************************** 
                      	;******************************spell create*************************** 
  090F                	spell_create:
  090F  E5            	 push HL
  0910  216960        	 ld HL,obj
  0913  AF            	 xor A
  0914  010000        	 ld BC,0
  0917  EDB1          	 cpir		;BC<0
  0919  03            	 inc BC
                      	 
                      	 
                      	; ld (HL),0	;chr clr
  091A  2B            	 dec HL		;spell address
  091B  DD7ED0        	 ld A,(IX-48)
  091E  FE04          	 cp 4h
  0920  2823          	 jr z,spellB
  0922  DD7ED0        	 ld A,(IX-48)
  0925  FE13          	 cp 13h
  0927  281C          	 jr z,spellB
  0929  FE14          	 cp 14h
  092B  2818          	 jr z,spellB
  092D  FE46          	 cp 46h
  092F  2814          	 jr z,spellB
  0931  FE41          	 cp 41h
  0933  2814          	 jr z,bress
  0935  FE42          	 cp 42h
  0937  2810          	 jr z,bress
  0939  FE43          	 cp 43h
  093B  280C          	 jr z,bress
  093D  FE44          	 cp 44h
  093F  2808          	 jr z,bress
  0941  360A          	 ld (HL),0Ah
  0943  1806          	 jr spellsetok
  0945                	spellB:
  0945  360B          	 ld (HL),0Bh
  0947  1802          	 jr spellsetok
  0949                	bress:
  0949  360C          	 ld (HL),0ch
  094B                	spellsetok:
                      			;hp
  094B  113000        	 ld DE,48
  094E  19            	 add HL,DE
  094F  3601          	 ld (HL),1
                      	 		;st2
  0951  11F000        	 ld DE,48*5
  0954  19            	 add HL,DE
  0955  3600          	 ld (HL),0
                      	 
  0957  E1            	 pop HL
                      	 
                      	; ld (0f4h),HL
                      	
  0958  7E            	 ld A,(HL)
  0959  5F            	 ld E,A
  095A  23            	 inc HL
  095B  7E            	 ld A,(HL)
  095C  57            	 ld D,A
  095D  2B            	 dec HL
                      	 
  095E  E5            	 push HL
  095F  210000        	 ld HL,0
  0962  B7            	 or A
  0963  ED42          	 sbc HL,BC;xy_countor
  0965  B7            	 or A
  0966  ED42          	 sbc HL,BC
  0968  012961        	 ld BC,obj_xy
  096B  09            	 add HL,BC
                      	 
                      	 
  096C  7B            	 ld A,E
  096D  77            	 ld (HL),A
  096E  23            	 inc HL
  096F  7A            	 ld A,D
  0970  77            	 ld (HL),A
                      	 
                      	; ld (0f0h),HL
                      	; ld (0f2h),BC
                      	 
                      	 
  0971  E1            	 pop HL
  0972  C9            	 ret
                      	;******************************spell action****************************
  0973                	spells_action:
  0973  FD7E00        	 ld A,(IY)
  0976  FE01          	 cp 1
  0978  CABC09        	 jp z,spells_action1
  097B  FE02          	 cp 2
  097D  CAE509        	 jp z,spells_action2
                      	
  0980  CD1722        	 call wall_mod
  0983  78            	 ld A,B
  0984  B7            	 or A
  0985  C2670A        	 jp nz,spells_action_delete
  0988  79            	 ld A,C
  0989  B7            	 or A
  098A  C2670A        	 jp nz,spells_action_delete
                      	 
  098D  CD8421        	 call wall_ck
  0990  C2120A        	 jp nz,spells_action_dol
  0993                	spells_action_wiz:
  0993  23            	 inc HL
  0994  7E            	 ld A,(HL)
  0995  2B            	 dec HL
  0996  E6C0          	 and 11000000b
  0998  280A          	 jr z,spells_action_u
  099A  FE80          	 cp 80h
  099C  380C          	 jr c,spells_action_r
  099E  280E          	 jr z,spells_action_d
  09A0                	spells_action_l:
  09A0  35            	 dec (HL)
  09A1  35            	 dec (HL)
  09A2  1810          	 jr spells_action_urdl
  09A4                	spells_action_u:
  09A4  23            	 inc HL
  09A5  35            	 dec (HL)
  09A6  35            	 dec (HL)
  09A7  2B            	 dec HL
  09A8  180A          	 jr spells_action_urdl
  09AA                	spells_action_r:
  09AA  34            	 inc (HL)
  09AB  34            	 inc (HL)
  09AC  1806          	 jr spells_action_urdl
  09AE                	spells_action_d:
  09AE  23            	 inc HL
  09AF  34            	 inc (HL)
  09B0  34            	 inc (HL)
  09B1  2B            	 dec HL
  09B2  1800          	 jr spells_action_urdl
  09B4                	spells_action_urdl:
  09B4  3E01          	 ld A,1
  09B6  FD7700        	 ld (IY),A
  09B9  C31F0A        	 jp spells_actionend
                      	 
                      	 
                      	 
  09BC                	spells_action1:
  09BC  23            	 inc HL
  09BD  7E            	 ld A,(HL)
  09BE  2B            	 dec HL
  09BF  E6C0          	 and 11000000b
  09C1  280A          	 jr z,spells_action1_u
  09C3  FE80          	 cp 80h
  09C5  380C          	 jr c,spells_action1_r
  09C7  280E          	 jr z,spells_action1_d
  09C9                	spells_action1_l:
  09C9  35            	 dec (HL)
  09CA  35            	 dec (HL)
  09CB  1810          	 jr spells_action1_urdl
  09CD                	spells_action1_u:
  09CD  23            	 inc HL
  09CE  35            	 dec (HL)
  09CF  35            	 dec (HL)
  09D0  2B            	 dec HL
  09D1  180A          	 jr spells_action1_urdl
  09D3                	spells_action1_r:
  09D3  34            	 inc (HL)
  09D4  34            	 inc (HL)
  09D5  1806          	 jr spells_action1_urdl
  09D7                	spells_action1_d:
  09D7  23            	 inc HL
  09D8  34            	 inc (HL)
  09D9  34            	 inc (HL)
  09DA  2B            	 dec HL
  09DB  1800          	 jr spells_action1_urdl
  09DD                	spells_action1_urdl:
  09DD  3E02          	 ld A,2
  09DF  FD7700        	 ld (IY),A
  09E2  C31F0A        	 jp spells_actionend
                      	 
                      	 
                      	
  09E5                	spells_action2:
  09E5  23            	 inc HL
  09E6  7E            	 ld A,(HL)
  09E7  2B            	 dec HL
  09E8  E6C0          	 and 11000000b
  09EA  280B          	 jr z,spells_action2_u
  09EC  FE80          	 cp 80h
  09EE  380E          	 jr c,spells_action2_r
  09F0  2811          	 jr z,spells_action2_d
  09F2                	spells_action2_l:
  09F2  35            	 dec (HL)
  09F3  35            	 dec (HL)
  09F4  35            	 dec (HL)
  09F5  1813          	 jr spells_action2_urdl
  09F7                	spells_action2_u:
  09F7  23            	 inc HL
  09F8  35            	 dec (HL)
  09F9  35            	 dec (HL)
  09FA  35            	 dec (HL)
  09FB  2B            	 dec HL
  09FC  180C          	 jr spells_action2_urdl
  09FE                	spells_action2_r:
  09FE  34            	 inc (HL)
  09FF  34            	 inc (HL)
  0A00  34            	 inc (HL)
  0A01  1807          	 jr spells_action2_urdl
  0A03                	spells_action2_d:
  0A03  23            	 inc HL
  0A04  34            	 inc (HL)
  0A05  34            	 inc (HL)
  0A06  34            	 inc (HL)
  0A07  2B            	 dec HL
  0A08  1800          	 jr spells_action2_urdl
  0A0A                	spells_action2_urdl:
  0A0A  3E00          	 ld A,0
  0A0C  FD7700        	 ld (IY),A
  0A0F  C31F0A        	 jp spells_actionend
  0A12                	spells_action_dol:
  0A12  DD7ED0        	 ld A,(IX-48)
  0A15  FE0B          	 cp 0bh
  0A17  E5            	 push HL
  0A18  CC5222        	 call z,matk_action
  0A1B  E1            	 pop HL
  0A1C  C3670A        	 jp spells_action_delete
                      	 
  0A1F                	spells_actionend:
  0A1F                	spells_action_cross
                      	 
                      	
                      	;********************cross chack spell*******************
  0A1F                	spell_cross_ck;
  0A1F  CD4B21        	 call cross_ck_a;s
  0A22  3033          	 jr nc,spell_cross_ck_end
  0A24                	spell_cross_ck_1:
                      	
  0A24  3AF761        	 ld A,(gil_xy+1)
  0A27  E6C0          	 and 11000000b
  0A29  17            	 rla
  0A2A  17            	 rla
  0A2B  17            	 rla
  0A2C  47            	 ld B,A
  0A2D  23            	 inc HL
  0A2E  7E            	 ld A,(HL)
  0A2F  2B            	 dec HL
  0A30  E6C0          	 and 11000000b
  0A32  17            	 rla
  0A33  17            	 rla
  0A34  17            	 rla
  0A35  3C            	 inc A
  0A36  3C            	 inc A
  0A37  E603          	 and 00000011b
  0A39  4F            	 ld C,A
  0A3A  C5            	 push BC
                      	
  0A3B  3AED61        	 ld A,(gil_st2)
  0A3E  CB7F          	 bit 7,A		;(gil sworud MIRU)
  0A40  2009          	 jr nz,spell_cross_ck_s
  0A42                	spell_cross_ck_n:
  0A42  C1            	 pop BC
  0A43  79            	 ld A,C
  0A44  A8            	 xor B				;urdl = turdl
  0A45  CA600A        	 jp z,spells_action_delete_g
  0A48  C34A1F        	 jp gil_killing
  0A4B                	spell_cross_ck_s:
  0A4B  C1            	 pop BC
  0A4C  79            	 ld A,C
  0A4D  3C            	 inc A
  0A4E  E603          	 and 00000011b
  0A50  A8            	 xor B				;urdl = turdl
  0A51  CA600A        	 jp z,spells_action_delete_g
  0A54  C34A1F        	 jp gil_killing
  0A57                	spell_cross_ck_end:
  0A57  11342C        	 ld DE,graph_spell
  0A5A  CDE406        	 call Egraph;call Egraph
  0A5D  C3691F        	 jp mains_end
                      	 
  0A60                	spells_action_delete_g
  0A60  3A8B2D        	 ld A,(dammy+1)
  0A63  3C            	 inc A
  0A64  328B2D        	 ld (dammy+1),A
  0A67                	spells_action_delete:
  0A67  AF            	 xor A
  0A68  DD77D0        	 ld (IX-48),A
  0A6B  DD7700        	 ld (IX),A
  0A6E  FD7700        	 ld (IY),A
  0A71  3600          	 ld (HL),0
  0A73  23            	 inc HL
  0A74  3600          	 ld (HL),0
  0A76  2B            	 dec HL
  0A77  C3691F        	 jp mains_end
                      	 
                      	;******************************bress action****************************
  0A7A                	bress_action:
                      	
  0A7A  CD1722        	 call wall_mod
  0A7D  78            	 ld A,B
  0A7E  B7            	 or A
  0A7F  C2670A        	 jp nz,spells_action_delete
  0A82  79            	 ld A,C
  0A83  B7            	 or A
  0A84  C2670A        	 jp nz,spells_action_delete
  0A87  CD8421        	 call wall_ck
  0A8A  C2670A        	 jp nz,spells_action_delete
                      	 
  0A8D  23            	 inc HL
  0A8E  7E            	 ld A,(HL)
  0A8F  2B            	 dec HL
  0A90  E6C0          	 and 11000000b
  0A92  2823          	 jr z,bress_u
  0A94  FE80          	 cp 80h
  0A96  3816          	 jr c,bress_r
  0A98  2809          	 jr z,bress_d
  0A9A                	bress_l:
  0A9A  35            	 dec (HL)
  0A9B  35            	 dec (HL)
  0A9C  35            	 dec (HL)
  0A9D  35            	 dec (HL)
  0A9E  35            	 dec (HL)
  0A9F  35            	 dec (HL)
  0AA0  35            	 dec (HL)
  0AA1  181F          	 jr bress_e
  0AA3                	bress_d:
  0AA3  23            	 inc HL
  0AA4  34            	 inc (HL)
  0AA5  34            	 inc (HL)
  0AA6  34            	 inc (HL)
  0AA7  34            	 inc (HL)
  0AA8  34            	 inc (HL)
  0AA9  34            	 inc (HL)
  0AAA  34            	 inc (HL)
  0AAB  2B            	 dec HL
  0AAC  1814          	 jr bress_e
  0AAE                	bress_r:
  0AAE  34            	 inc (HL)
  0AAF  34            	 inc (HL)
  0AB0  34            	 inc (HL)
  0AB1  34            	 inc (HL)
  0AB2  34            	 inc (HL)
  0AB3  34            	 inc (HL)
  0AB4  34            	 inc (HL)
  0AB5  180B          	 jr bress_e
  0AB7                	bress_u:
  0AB7  23            	 inc HL
  0AB8  35            	 dec (HL)
  0AB9  35            	 dec (HL)
  0ABA  35            	 dec (HL)
  0ABB  35            	 dec (HL)
  0ABC  35            	 dec (HL)
  0ABD  35            	 dec (HL)
  0ABE  35            	 dec (HL)
  0ABF  2B            	 dec HL
  0AC0  1800          	 jr bress_e
  0AC2                	bress_e:
  0AC2                	bress_cross_ck:
  0AC2  3A0762        	 ld A,(nec)
  0AC5  FE02          	 cp 2
  0AC7  3006          	 jr nc,bress_action_end
  0AC9  CD4B21        	 call cross_ck_a;s
  0ACC  DC4A1F        	 call c,gil_killing;(suraim HP=0)
                      	
  0ACF                	bress_action_end:
  0ACF  110C2D        	 ld DE,graph_brack
  0AD2  CDE406        	 call Egraph
  0AD5  C3691F        	 jp mains_end
                      	
                      	
  0AD8  C3691F        	 jp mains_end
                      	 
                      	 
                      	 
                      	;***************************************************************
                      	;**************************knight action************************
  0ADB                	knight_action:;HL=obj_xy++
                      	;******************ricaba*******************
  0ADB  DD7E60        	 ld A,(IX+96)
  0ADE  47            	 ld B,A
  0ADF  DD7E00        	 ld A,(IX)
  0AE2  B8            	 cp B
  0AE3  3803          	 jr c,knight_actiona
  0AE5  DD7760        	 ld (IX+96),A
  0AE8                	knight_actiona:
  0AE8  DD7ED0        	 ld A,(IX-48)
  0AEB  FE23          	 cp 23h
  0AED  280B          	 jr z,knight_action1
  0AEF  FE27          	 cp 27h
  0AF1  2807          	 jr z,knight_action1
  0AF3  DD7E30        	 ld A,(IX+48)
  0AF6  B7            	 or A
  0AF7  CAC10B        	 jp z,knight_action_end
                      	
  0AFA                	knight_action1:
  0AFA  CD1722        	 call wall_mod
  0AFD  78            	 ld A,B
  0AFE  B7            	 or A
  0AFF  C2A40B        	 jp nz,knight_move
  0B02  79            	 ld A,C
  0B03  B7            	 or A
  0B04  C2A40B        	 jp nz,knight_move
                      	 
  0B07  CDBC0D        	 call xy_ck
  0B0A  CA490B        	 jp z,knight_xy
  0B0D  CDCB0D        	 call x_ck
  0B10  CA580B        	 jp z,knight_x
  0B13  CDD30D        	 call y_ck
  0B16  CA7E0B        	 jp z,knight_y
  0B19                	kight_accel:
                      	
                      	 
  0B19  CDE80D        	 call right_turn
  0B1C  CD8421        	 call wall_ck
                      	; call z,48381
  0B1F  CAA40B        	 jp z,knight_move
  0B22  CDF60D        	 call left_turn
                      	 
  0B25  CD8421        	 call wall_ck
  0B28  C22E0B        	 jp nz,rndurdl
  0B2B  C3A40B        	 jp knight_move
  0B2E                	kight_accel_2:
  0B2E                	rndurdl:
  0B2E  CDE80D        	 call right_turn
  0B31  CD8421        	 call wall_ck
  0B34  CAA40B        	 jp z,knight_move
                      	
  0B37  CDE80D        	 call right_turn 
  0B3A  CDE80D        	 call right_turn
  0B3D  CD8421        	 call wall_ck
  0B40  CAA40B        	 jp z,knight_move
                      	 
  0B43  CDF60D        	 call left_turn 
  0B46  C3A40B        	 jp knight_move
                      	
                      	
  0B49                	knight_xy:
  0B49  23            	 inc HL
  0B4A  7E            	 ld A,(HL)
  0B4B  F6C0          	 or 11000000b
  0B4D  77            	 ld (HL),A
  0B4E  2B            	 dec HL
  0B4F  CD8421        	 call wall_ck
  0B52  CAA40B        	 jp z,knight_move
  0B55  C32E0B        	 jp kight_accel_2 
                      	 
  0B58                	knight_x:
  0B58  CDD30D        	 call y_ck
  0B5B  3808          	 jr c,knight_x_1
  0B5D  23            	 inc HL
  0B5E  CBFE          	 set 7,(HL)
  0B60  CBB6          	 res 6,(HL)
  0B62  2B            	 dec HL
  0B63  1806          	 jr knight_x_2
  0B65                	knight_x_1:
  0B65  23            	 inc HL
  0B66  CBBE          	 res 7,(HL)
  0B68  CBB6          	 res 6,(HL)
  0B6A  2B            	 dec HL
  0B6B                	knight_x_2:
  0B6B  CD8421        	 call wall_ck
  0B6E  CAA40B        	 jp z,knight_move
  0B71  DD7ED0        	 ld A,(IX-48)
  0B74  FE27          	 cp 27h
  0B76  2003          	 jr nz,rndurdl3
  0B78  C3C10B        	 jp knight_action_end
  0B7B                	rndurdl3:
  0B7B  C32E0B        	 jp kight_accel_2 
                      	 
  0B7E                	knight_y:
  0B7E  CDCB0D        	 call x_ck
  0B81  3808          	 jr c,knight_y_1
  0B83  23            	 inc HL
  0B84  CBBE          	 res 7,(HL)
  0B86  CBF6          	 set 6,(HL)
  0B88  2B            	 dec HL
  0B89  1806          	 jr knight_y_2
  0B8B                	knight_y_1:
  0B8B  23            	 inc HL
  0B8C  CBFE          	 set 7,(HL)
  0B8E  CBF6          	 set 6,(HL)
  0B90  2B            	 dec HL
  0B91                	knight_y_2:
  0B91  CD8421        	 call wall_ck
  0B94  CAA40B        	 jp z,knight_move
  0B97  DD7ED0        	 ld A,(IX-48)
  0B9A  FE27          	 cp 27h
  0B9C  2003          	 jr nz,rndurdl2
  0B9E  C3C10B        	 jp knight_action_end
  0BA1                	rndurdl2:
  0BA1  C32E0B        	 jp kight_accel_2 
                      	 
                      	
                      	
                      	
                      	
                      	
                      	
  0BA4                	knight_move:;a=0~3
  0BA4  11C10B        	 ld DE, knight_action_end
  0BA7  D5            	 push DE
  0BA8                	empty_move:
  0BA8  23            	 inc HL
  0BA9  7E            	 ld A,(HL)
  0BAA  2B            	 dec HL
  0BAB  E6C0          	 and 11000000b
  0BAD  2808          	 jr z,knight_action_up
  0BAF  FE80          	 cp 80h
  0BB1  3808          	 jr c,knight_action_ri
  0BB3  2808          	 jr z,knight_action_do
  0BB5                	knight_action_le:
  0BB5  35            	 dec (HL)
  0BB6  C9            	 ret
  0BB7                	knight_action_up:
  0BB7  23            	 inc HL
  0BB8  35            	 dec (HL)
  0BB9  2B            	 dec HL
  0BBA  C9            	 ret
  0BBB                	knight_action_ri:
  0BBB  34            	 inc (HL)
  0BBC  C9            	 ret
  0BBD                	knight_action_do:
  0BBD  23            	 inc HL
  0BBE  34            	 inc (HL)
  0BBF  2B            	 dec HL
  0BC0  C9            	 ret
                      	
                      	 
                      	 
                      	
                      	
  0BC1                	knight_action_end:
  0BC1  FD7E30        	 ld A,(IY+48)
  0BC4  EE01          	 xor 1
  0BC6  FD7730        	 ld (IY+48),A
  0BC9  B7            	 or A
  0BCA  2805          	 jr z,knight_action_end2
                      	 
  0BCC  114C2C        	 ld DE,graph_n_knightu
  0BCF  1803          	 jr knight_action_end3
  0BD1                	knight_action_end2:
  0BD1  11642C        	 ld DE,graph_n_knightu+24
  0BD4                	knight_action_end3:
  0BD4  CDE406        	 call Egraph
                      	 
                      	 
                      	;********************chack knight cross*******************
                      	; call kwait
                      	
  0BD7  E5            	 push HL
  0BD8  2A2961        	 ld HL,(obj_xy)
  0BDB  22902D        	 ld (dammy+6),HL
  0BDE  E1            	 pop HL
                      	
                      	
  0BDF  3AED61        	 ld A,(gil_st2)
  0BE2  B7            	 or A
  0BE3  2814          	 jr z,ssss1
  0BE5  CB7F          	 bit 7,A	;(gil sworud MIRU) 
  0BE7  2808          	 jr z,ssss0
  0BE9  CD4B21        	 call cross_ck_a;s
  0BEC  DC000E        	 call c,HP_dec;(suraim HP=0)
  0BEF  1810          	 jr ssss2
  0BF1                	ssss0:
  0BF1  CD4B21        	 call cross_ck_a;s
  0BF4  DC180E        	 call c,HP_dec_swdbc
  0BF7  1808          	 jr ssss2
  0BF9                	ssss1:;(gil_st=0-x)
  0BF9  CD4B21        	 call cross_ck_a
  0BFC  3003          	 jr nc,ssss2
  0BFE  C34A1F        	 jp gil_killing
  0C01                	ssss2:
  0C01  DD7E30        	 ld A,(IX+48)
  0C04  EEFF          	 xor 0ffh
  0C06  DD7730        	 ld (IX+48),A
  0C09  C3691F        	 jp mains_end
                      	 
                      	
                      	
  0C0C                	knight_front_ck:
  0C0C  CDE00D        	 call xyload
  0C0F  F5            	 push AF
  0C10  327D0C        	 ld (knight_front_ck_end+3),A
  0C13  7B            	 ld A,E
  0C14  327B0C        	 ld (knight_front_ck_end+1),A 
  0C17  F1            	 pop AF
  0C18  E6C0          	 and 11000000b
  0C1A  2810          	 jr z,knight_front_ck_u
  0C1C  FE02          	 cp 2
  0C1E  3814          	 jr c,knight_front_ck_r
  0C20  281C          	 jr z,knight_front_ck_d
  0C22                	knight_front_ck_l:
  0C22  7B            	 ld A,E
  0C23  D607          	 sub 7
  0C25  FE1E          	 cp 30
  0C27  DA870C        	 jp c,knight_front_outerwall
  0C2A  181C          	 jr knight_front_ck_e
  0C2C                	knight_front_ck_u:
  0C2C  7A            	 ld A,D
  0C2D  D607          	 sub 7
  0C2F  DA870C        	 jp c,knight_front_outerwall
  0C32  1814          	 jr knight_front_ck_e
  0C34                	knight_front_ck_r:
  0C34  7B            	 ld A,E
  0C35  C607          	 add A,7
  0C37  FE88          	 cp 136
  0C39  D2870C        	 jp nc,knight_front_outerwall
  0C3C  180A          	 jr knight_front_ck_e
  0C3E                	knight_front_ck_d:
  0C3E  7A            	 ld A,D
  0C3F  C607          	 add A,7
  0C41  FE2B          	 cp 43
  0C43  D2870C        	 jp nc,knight_front_outerwall
  0C46  1800          	 jr knight_front_ck_e
  0C48                	knight_front_ck_e:
  0C48  CDE80D        	 call right_turn
  0C4B  CD8421        	 call wall_ck
  0C4E  CA7A0C        	 jp z,knight_front_ck_end
                      	
  0C51  CDF60D        	 call left_turn
  0C54  CD8421        	 call wall_ck
  0C57  CA7A0C        	 jp z,knight_front_ck_end
                      	
  0C5A  CDF60D        	 call left_turn
  0C5D  CD8421        	 call wall_ck
  0C60  CA7A0C        	 jp z,knight_front_ck_end
                      	 
  0C63  CDE80D        	 call right_turn
  0C66  CDE80D        	 call right_turn
                      	 
  0C69  23            	 inc HL
  0C6A  7E            	 ld A,(HL)
  0C6B  E6C0          	 and 11000000b
  0C6D  47            	 ld B,A
  0C6E  3A7D0C        	 ld A,(knight_front_ck_end+3)
  0C71  E63F          	 and 00111111b
  0C73  B0            	 or B
  0C74  327D0C        	 ld (knight_front_ck_end+3),A
  0C77  2B            	 dec HL
                      	 
  0C78  18CE          	 jr knight_front_ck_e
                      	 
  0C7A                	knight_front_ck_end:
  0C7A  1E00          	 ld E,overwrite
  0C7C  1600          	 ld D,overwrite
  0C7E  7B            	 ld A,E
  0C7F  77            	 ld (HL),A
  0C80  23            	 inc HL
  0C81  7A            	 ld A,D
  0C82  77            	 ld (HL),A
  0C83  2B            	 dec HL
  0C84  C3A40B        	 jp knight_move
                      	
  0C87                	knight_front_outerwall:
  0C87  C32E0B        	 jp kight_accel_2
                      	
                      	
                      	
                      	;************************************************************************
                      	;***********************quox action***************************************
                      	
  0C8A                	quox_action:
  0C8A  3A972D        	 ld A,(dammy+13)
  0C8D  FE04          	 cp 4
  0C8F  DA691F        	 jp c,mains_end
                      	
  0C92  DD7E60        	 ld A,(IX+96)
  0C95  47            	 ld B,A
  0C96  DD7E00        	 ld A,(IX)
  0C99  B8            	 cp B
  0C9A  3803          	 jr c,quox_actiona
  0C9C  DD7760        	 ld (IX+96),A
  0C9F                	quox_actiona:
  0C9F  FD7E30        	 ld A,(IY+48)
  0CA2  FE03          	 cp 3
  0CA4  C23F0D        	 jp nz,quox_action_end
                      	
  0CA7                	quox_action1:
                      	
                      	 
  0CA7  CD1722        	 call wall_mod
  0CAA  78            	 ld A,B
  0CAB  B7            	 or A
  0CAC  C2880D        	 jp nz,quox_move
  0CAF  79            	 ld A,C
  0CB0  B7            	 or A
  0CB1  C2880D        	 jp nz,quox_move
                      	 
  0CB4                	quox_bress:
  0CB4  FD7E00        	 ld A,(IY)
  0CB7  FE05          	 cp 5
  0CB9  CAAA0D        	 jp z,bress_create
                      	 
  0CBC  FD3400        	 inc (IY)
  0CBF  CDBC0D        	 call xy_ck
  0CC2  CAE60C        	 jp z,quox_xy
  0CC5  CDCB0D        	 call x_ck
  0CC8  CAF50C        	 jp z,quox_x
  0CCB  CDD30D        	 call y_ck
  0CCE  CA1A0D        	 jp z,quox_y
                      	 
                      	 
                      	 
  0CD1                	quox_accel:
  0CD1  CDE80D        	 call right_turn
  0CD4  CD8421        	 call wall_ck
  0CD7  CA880D        	 jp z,quox_move
  0CDA  CDF60D        	 call left_turn
  0CDD  CD8421        	 call wall_ck
  0CE0  CA880D        	 jp z,quox_move
  0CE3  C38F0D        	 jp rndurdlq
                      	 
  0CE6                	quox_xy:
  0CE6  23            	 inc HL
  0CE7  7E            	 ld A,(HL)
  0CE8  F6C0          	 or 11000000b
  0CEA  77            	 ld (HL),A
  0CEB  2B            	 dec HL
  0CEC  CD8421        	 call wall_ck
  0CEF  CA880D        	 jp z,quox_move
  0CF2  C38F0D        	 jp rndurdlq 
  0CF5                	quox_x:
  0CF5  CDD30D        	 call y_ck
  0CF8  3808          	 jr c,quox_x_1
  0CFA  23            	 inc HL
  0CFB  CBFE          	 set 7,(HL)
  0CFD  CBB6          	 res 6,(HL)
  0CFF  2B            	 dec HL
  0D00  1806          	 jr quox_x_2
  0D02                	quox_x_1:
  0D02  23            	 inc HL
  0D03  CBBE          	 res 7,(HL)
  0D05  CBB6          	 res 6,(HL)
  0D07  2B            	 dec HL
  0D08                	quox_x_2:
  0D08  CD8421        	 call wall_ck
  0D0B  CA880D        	 jp z,quox_move
  0D0E  CD5222        	 call matk_action
  0D11  CD8421        	 call wall_ck
  0D14  CA880D        	 jp z,quox_move
  0D17  C38F0D        	 jp rndurdlq
                      	 
  0D1A                	quox_y:
  0D1A  CDCB0D        	 call x_ck
  0D1D  3808          	 jr c,quox_y_1
  0D1F  23            	 inc HL
  0D20  CBBE          	 res 7,(HL)
  0D22  CBF6          	 set 6,(HL)
  0D24  2B            	 dec HL
  0D25  1806          	 jr quox_y_2
  0D27                	quox_y_1:
  0D27  23            	 inc HL
  0D28  CBFE          	 set 7,(HL)
  0D2A  CBF6          	 set 6,(HL)
  0D2C  2B            	 dec HL
  0D2D                	quox_y_2:
  0D2D  CD8421        	 call wall_ck
  0D30  CA880D        	 jp z,quox_move
  0D33  CD5222        	 call matk_action
  0D36  CD8421        	 call wall_ck
  0D39  CA880D        	 jp z,quox_move
  0D3C  C38F0D        	 jp rndurdlq
                      	 
                      	 
                      	 
  0D3F                	quox_action_end:
  0D3F  FD7E30        	 ld A,(IY+48)
  0D42  3C            	 inc A
  0D43  E603          	 and 00000011b
  0D45  FD7730        	 ld (IY+48),A
  0D48  FE01          	 cp 1
  0D4A  2809          	 jr z,quox_action_end2
  0D4C  FE03          	 cp 3
  0D4E  2805          	 jr z,quox_action_end2
                      	 
  0D50  117C2C        	 ld DE,graph_quox_ulf
  0D53  1803          	 jr quox_action_end3
  0D55                	quox_action_end2:
  0D55  11942C        	 ld DE,graph_quox_ulf+24
  0D58                	quox_action_end3:
  0D58  CDE406        	 call Egraph
                      	
                      	;********************chack quox cross*******************
                      	; call kwait
                      	
                      	
  0D5B  3AED61        	 ld A,(gil_st2)
  0D5E  B7            	 or A
  0D5F  2814          	 jr z,ssssss1
  0D61  CB7F          	 bit 7,A	;(gil sworud MIRU) 
  0D63  2808          	 jr z,ssssss0
  0D65  CD4B21        	 call cross_ck_a;s
  0D68  DC3A0E        	 call c,HP_decC;(suraim HP=0)
  0D6B  1810          	 jr ssssss2
  0D6D                	ssssss0:
  0D6D  CD4B21        	 call cross_ck_a;s
  0D70  DC180E        	 call c,HP_dec_swdbc
  0D73  1808          	 jr ssssss2
  0D75                	ssssss1:;(gil_st=0-x)
  0D75  CD4B21        	 call cross_ck_a
  0D78  3003          	 jr nc,ssssss2
  0D7A  C34A1F        	 jp gil_killing
  0D7D                	ssssss2:
  0D7D  DD7E30        	 ld A,(IX+48)
  0D80  EEFF          	 xor 0ffh
  0D82  DD7730        	 ld (IX+48),A
  0D85  C3691F        	 jp mains_end
                      	
                      	
                      	
                      	
  0D88                	quox_move:
  0D88  113F0D        	 ld DE,quox_action_end
  0D8B  D5            	 push DE
  0D8C  C3A80B        	 jp empty_move
                      	 
                      	
  0D8F                	rndurdlq:
  0D8F  CDE80D        	 call right_turn
  0D92  CD8421        	 call wall_ck
  0D95  CA880D        	 jp z,quox_move
                      	
  0D98  CDE80D        	 call right_turn 
  0D9B  CDE80D        	 call right_turn
  0D9E  CD8421        	 call wall_ck
  0DA1  CA880D        	 jp z,quox_move
                      	 
  0DA4  CDF60D        	 call left_turn 
  0DA7  C3880D        	 jp quox_move
                      	 
  0DAA                	bress_create:
  0DAA  AF            	 xor A
  0DAB  FD7700        	 ld (IY),A
  0DAE  CD8421        	 call wall_ck
  0DB1  2803          	 jr z,brsc
  0DB3  CDE80D        	 call right_turn
  0DB6                	brsc:
  0DB6  CD0F09        	 call spell_create
  0DB9  C33F0D        	 jp quox_action_end
                      	 
                      	
                      	;***************************ckeck sub****************************
                      	
  0DBC                	xy_ck:;chr cp
  0DBC  CDE00D        	 call xyload
  0DBF  E5            	 push HL		;>
  0DC0  2AF661        	 ld HL,(gil_xy)
  0DC3  7C            	 ld A,H
  0DC4  E63F          	 and 00111111b
  0DC6  67            	 ld H,A
  0DC7  ED52          	 sbc HL,DE
  0DC9  E1            	 pop HL			;<
  0DCA  C9            	 ret
  0DCB                	x_ck:
  0DCB  CDE00D        	 call xyload
  0DCE  3AF661        	 ld A,(gil_xy)
  0DD1  93            	 sub E
  0DD2  C9            	 ret
  0DD3                	y_ck:
  0DD3  CDE00D        	 call xyload
  0DD6  7A            	 ld A,D
  0DD7  E63F          	 and 00111111b
  0DD9  3AF761        	 ld A,(gil_xy+1)
  0DDC  E63F          	 and 00111111b
  0DDE  92            	 sub D
  0DDF  C9            	 ret
                      	
                      	
  0DE0                	xyload:;A=urdl D=none
  0DE0  5E            	 ld E,(HL)
  0DE1  23            	 inc HL
  0DE2  7E            	 ld A,(HL)
  0DE3  E63F          	 and 00111111b
  0DE5  57            	 ld D,A
  0DE6  2B            	 dec HL
  0DE7  C9            	 ret
                      	
  0DE8                	right_turn:
  0DE8  23            	 inc HL
  0DE9  7E            	 ld A,(HL)
  0DEA  E6C0          	 and 11000000b
  0DEC  C640          	 add A,40H
  0DEE  47            	 ld B,A
  0DEF  7E            	 ld A,(HL)
  0DF0  E63F          	 and 00111111b
  0DF2  B0            	 or B
  0DF3  77            	 ld (HL),A
  0DF4  2B            	 dec HL
  0DF5  C9            	 ret
                      	 
  0DF6                	left_turn:
  0DF6  CDE80D        	 call right_turn
  0DF9  CDE80D        	 call right_turn
  0DFC  CDE80D        	 call right_turn
  0DFF  C9            	 ret
                      	
                      	;*************************hp dec*****************************
  0E00                	HP_dec:
  0E00  3AFC61        	 ld A,(sword)
  0E03  FE04          	 cp 4
  0E05  CA180E        	 jp z,gil_HP_dec
                      	 
  0E08  FE03          	 cp 3
  0E0A  DD7E00        	 ld A,(IX)
  0E0D  2003          	 jr nz,HP_dec1
  0E0F  3D            	 dec A
  0E10  2801          	 jr z,HP_dec2
  0E12                	HP_dec1:
  0E12  3D            	 dec A
  0E13                	HP_dec2:
  0E13  DD7700        	 ld (IX),A
  0E16  2879          	 jr z,HP_rec
  0E18                	HP_dec_swdbc:
  0E18                	gil_HP_dec:
  0E18  3AEA61        	 ld A,(gil_hp)
  0E1B  3D            	 dec A
  0E1C  32EA61        	 ld (gil_hp),A
  0E1F  CA4A1F        	 jp z,gil_killing
  0E22  C9            	 ret
                      	 
  0E23                	HP_decB:
  0E23  3AFC61        	 ld A,(sword)
  0E26  FE04          	 cp 4
  0E28  C8            	 ret z
  0E29  FE02          	 cp 2
  0E2B  DD7E00        	 ld A,(IX)
  0E2E  2003          	 jr nz,HP_decb1
  0E30  3D            	 dec A
  0E31  2801          	 jr z,HP_decb2
  0E33                	HP_decb1:
  0E33  3D            	 dec A
  0E34                	HP_decb2:
  0E34  DD7700        	 ld (IX),A
  0E37  286B          	 jr z,HP_rec2
  0E39  C9            	 ret
                      	
                      	
  0E3A                	HP_decC:;dragon
  0E3A  3AFC61        	 ld A,(sword)
  0E3D  FE02          	 cp 2
  0E3F  DA180E        	 jp c,HP_dec_swdbc
                      	 
  0E42  DD7ED0        	 ld A,(IX-48)
  0E45  FE44          	 cp 44h
  0E47  2836          	 jr z,HP_decE
  0E49  C3000E        	 jp HP_dec
                      	
                      	
  0E4C                	HP_decD:;druaga
  0E4C  3AFC61        	 ld A,(sword)
  0E4F  FE03          	 cp 3
  0E51  DA4A1F        	 jp c,gil_killing
  0E54  3AFE61        	 ld A,(gnt)
  0E57  FE02          	 cp 2
  0E59  DA4A1F        	 jp c,gil_killing
  0E5C  3AFD61        	 ld A,(armor)
  0E5F  FE02          	 cp 2
  0E61  DA4A1F        	 jp c,gil_killing
  0E64  3AFF61        	 ld A,(shield)
  0E67  FE02          	 cp 2
  0E69  DA4A1F        	 jp c,gil_killing
  0E6C  3A0062        	 ld A,(hlmt)
  0E6F  FE01          	 cp 1
  0E71  DA4A1F        	 jp c,gil_killing
  0E74  3A0162        	 ld A,(rod)
  0E77  FE03          	 cp 3
  0E79  DA4A1F        	 jp c,gil_killing
  0E7C  C3000E        	 jp HP_dec
                      	 
  0E7F                	HP_decE:;ruby meis
  0E7F  3A0862        	 ld A,(meis)
  0E82  B7            	 or A
  0E83  CA4A1F        	 jp z,gil_killing
  0E86  CD6D21        	 call cha_kill
  0E89  3E01          	 ld A,1
  0E8B  32982D        	 ld (dammy+14),A
  0E8E  C3691F        	 jp mains_end
                      	
  0E91                	HP_rec:
  0E91  DD7E60        	 ld A,(IX+96)
  0E94  47            	 ld B,A
  0E95  AF            	 xor A
  0E96  DD7760        	 ld (IX+96),A
  0E99  3AEA61        	 ld A,(gil_HP)
  0E9C  80            	 add A,B
  0E9D  3002          	 jr nc,H_recP2
  0E9F  3EFF          	 ld A,255
  0EA1                	H_recP2:
  0EA1  32EA61        	 ld (gil_HP),A
  0EA4                	HP_rec2:
  0EA4  3E01          	 ld A,1
  0EA6  32962D        	 ld (dammy+12),A
  0EA9  AF            	 xor A
  0EAA  DD7700        	 ld (IX),A
  0EAD  DD7730        	 ld (IX+48),A
  0EB0  DD7760        	 ld (IX+96),A
  0EB3  FD7700        	 ld (IY),A
  0EB6  C9            	 ret
                      	
                      	;*************************key actions************************
  0EB7                	key_action:
  0EB7  3A0662        	 ld A,(key)
  0EBA  B7            	 or A
  0EBB  280B          	 jr z,key_action_1
  0EBD  AF            	 xor A
  0EBE  CD4103        	 call itemprint
  0EC1  AF            	 xor A
  0EC2  DD7700        	 ld (IX),A
  0EC5  C3691F        	 jp mains_end
  0EC8                	key_action_1:
  0EC8  E5            	 push HL
  0EC9  CD4B21        	 call cross_ck_a
  0ECC  E1            	 pop HL
  0ECD  3005          	 jr nc,key_action_end
  0ECF  3E01          	 ld A,1
  0ED1  320662        	 ld (key),A
  0ED4                	key_action_end:
  0ED4  11242D        	 ld DE,graph_key
  0ED7  CDE406        	 call Egraph
  0EDA  C3691F        	 jp mains_end
                      	
                      	;*************************************************************
  0EDD                	excarivor:
  0EDD  3A0562        	 ld A,(posion)
  0EE0  FE04          	 cp 4
  0EE2  2803          	 jr z,ext
  0EE4  C3261D        	 jp box_action_end
  0EE7                	ext:
  0EE7  DD7E30        	 ld A,(IX+48)
  0EEA  B7            	 or A
  0EEB  C2691F        	 jp nz,mains_end
  0EEE  E5            	 push HL
  0EEF  CD4B21        	 call cross_ck_a
  0EF2  E1            	 pop HL
  0EF3  D2261D        	 jp nc,box_action_end
  0EF6  3A0462        	 ld A,(brns)
  0EF9  B7            	 or A
  0EFA  2007          	 jr nz,exttu
  0EFC  3E04          	 ld A,4
  0EFE  32FC61        	 ld (sword),A
  0F01  1805          	 jr exttt
  0F03                	exttu:
  0F03  3E03          	 ld A,3
  0F05  32FC61        	 ld (sword),A
  0F08                	exttt:
  0F08  AF            	 xor A
  0F09  320462        	 ld (brns),A
  0F0C  320562        	 ld (posion),A
  0F0F  3E04          	 ld A,03h+1
  0F11  CD4103        	 call itemprint
  0F14  3E01          	 ld A,1
  0F16  DD7730        	 ld (IX+48),A
  0F19  C3691F        	 jp mains_end
                      	
                      	
  0F1C                	grod:
  0F1C  3A942D        	 ld A,(dammy+10)
  0F1F  B7            	 or A
  0F20  CA691F        	 jp z,mains_end
                      	 
  0F23  E5            	 push HL
  0F24  114FA3        	 ld DE,0a34fh
  0F27  73            	 ld (HL),E
  0F28  23            	 inc HL
  0F29  72            	 ld (HL),D
                      	 
  0F2A  2AF661        	 ld HL,(gil_xy)
  0F2D  B7            	 or A
  0F2E  ED52          	 sbc HL,DE
  0F30  21952D        	 ld HL,dammy+11
  0F33  2002          	 jr nz,groda
  0F35  CBC6          	 set 0,(HL)
  0F37                	groda:
  0F37  CB46          	 bit 0,(HL)
  0F39  CA460F        	 jp z,grode
  0F3C  E1            	 pop HL
  0F3D  11F42C        	 ld DE,graph_3rod
  0F40  CDE406        	 call Egraph
  0F43  C3691F        	 jp mains_end
  0F46                	grode:
  0F46  E1            	 pop HL
  0F47  C3691F        	 jp mains_end
                      	 
  0F4A                	rrod:
  0F4A  3A952D        	 ld A,(dammy+11)
  0F4D  B7            	 or A
  0F4E  CA691F        	 jp z,mains_end
                      	 
  0F51  E5            	 push HL
  0F52  114F87        	 ld DE,874fh
  0F55  73            	 ld (HL),E
  0F56  23            	 inc HL
  0F57  72            	 ld (HL),D
                      	 
  0F58  2AF661        	 ld HL,(gil_xy)
  0F5B  B7            	 or A
  0F5C  ED52          	 sbc HL,DE
  0F5E  21962D        	 ld HL,dammy+12
  0F61  2002          	 jr nz,rroda
  0F63  CBCE          	 set 1,(HL)
  0F65                	rroda:
  0F65  CB4E          	 bit 1,(HL)
  0F67  CA740F        	 jp z,rrode
  0F6A  E1            	 pop HL
  0F6B  11F42C        	 ld DE,graph_3rod
  0F6E  CDE406        	 call Egraph
  0F71  C3691F        	 jp mains_end
  0F74                	rrode:
  0F74  E1            	 pop HL
  0F75  C3691F        	 jp mains_end
                      	 
  0F78                	brod:
  0F78  3A972D        	 ld A,(dammy+13)
  0F7B  B7            	 or A
  0F7C  CA691F        	 jp z,mains_end
                      	 
  0F7F  E5            	 push HL
  0F80  114F95        	 ld DE,954fh
  0F83  73            	 ld (HL),E
  0F84  23            	 inc HL
  0F85  72            	 ld (HL),D
                      	 
  0F86  2AF661        	 ld HL,(gil_xy)
  0F89  B7            	 or A
  0F8A  ED52          	 sbc HL,DE
  0F8C  21982D        	 ld HL,dammy+14
  0F8F  2002          	 jr nz,broda
  0F91  CBD6          	 set 2,(HL)
  0F93                	broda:
  0F93  CB56          	 bit 2,(HL)
  0F95  CAB70F        	 jp z,brode
  0F98  E1            	 pop HL
  0F99  11F42C        	 ld DE,graph_3rod
  0F9C  CDE406        	 call Egraph
  0F9F  AF            	 xor A
  0FA0  320162        	 ld (rod),A
  0FA3  CD4103        	 call itemprint
                      	 
  0FA6  E5            	 push HL
  0FA7  115695        	 ld DE,954fh+7
  0FAA  2AF661        	 ld HL,(gil_xy)
  0FAD  B7            	 or A
  0FAE  ED52          	 sbc HL,DE
  0FB0  CA2710        	 jp z,ending
                      	 
  0FB3  E1            	 pop HL
  0FB4  C3691F        	 jp mains_end
  0FB7                	brode:
  0FB7  E1            	 pop HL
  0FB8  C3691F        	 jp mains_end
                      	
  0FBB                	ishitar:
  0FBB  1615          	 ld D,21
  0FBD  1E87          	 ld E,135
  0FBF  73            	 ld (HL),E
  0FC0  23            	 inc HL
  0FC1  72            	 ld (HL),D
  0FC2  2B            	 dec HL
  0FC3  3A942D        	 ld A,(dammy+10)
  0FC6  B7            	 or A
  0FC7  280C          	 jr z,ishitar_cross
  0FC9  C3691F        	 jp mains_end
  0FCC                	ishitar_end:
  0FCC  11DC2C        	 ld DE,graph_ishitar
  0FCF  CDE406        	 call Egraph
  0FD2  C3691F        	 jp mains_end
  0FD5                	ishitar_cross:
  0FD5  CD4B21        	 call cross_ck_a
  0FD8  30F2          	 jr nc,ishitar_end
  0FDA  3AED61        	 ld A,(gil_st2)
  0FDD  CB7F          	 bit 7,A
  0FDF  C24A1F        	 jp nz,gil_zapping
  0FE2  3E01          	 ld A,1
  0FE4  32942D        	 ld (dammy+10),A
  0FE7  18E3          	 jr ishitar_end
                      	 
  0FE9                	kai:
  0FE9  1615          	 ld D,21
  0FEB  1E1E          	 ld E,30
  0FED  73            	 ld (HL),E
  0FEE  23            	 inc HL
  0FEF  72            	 ld (HL),D
  0FF0  2B            	 dec HL
  0FF1  3A972D        	 ld A,(dammy+13)
  0FF4  B7            	 or A
  0FF5  C2691F        	 jp nz,mains_end
  0FF8  3A962D        	 ld A,(dammy+12)
  0FFB  B7            	 or A
  0FFC  2012          	 jr nz,kai_cross
  0FFE  11342C        	 ld DE,graph_spell
  1001  CDE406        	 call Egraph
  1004  C3691F        	 jp mains_end
  1007                	kai_end:
  1007  11E22C        	 ld DE,graph_kai
  100A  CDE406        	 call Egraph
  100D  C3691F        	 jp mains_end
  1010                	kai_cross:
  1010  CD4B21        	 call cross_ck_a
  1013  30F2          	 jr nc,kai_end
  1015  3AED61        	 ld A,(gil_st2)
  1018  CB7F          	 bit 7,A
  101A  C24A1F        	 jp nz,gil_zapping
  101D  3E01          	 ld A,1
  101F  32972D        	 ld (dammy+13),A
  1022  18A8          	 jr ishitar_end
  1024  C3691F        	 jp mains_end
                      	 
  1027                	ending:
  1027  E1            	 pop HL
  1028  114895        	 ld DE,954fh-7
  102B  21E22C        	 ld HL,graph_kai
  102E  CDB324        	 call grp_set
  1031  CD4020        	 call grp_o
  1034  CD8F1F        	 call tim255
  1037  CD8F1F        	 call tim255
  103A  CD8F1F        	 call tim255
  103D  CD8F1F        	 call tim255
  1040  CDFDBC        	 call 48381
                      	 
  1043  CD0C20        	 call cls
  1046  110400        	 ld DE,0004h
  1049  0612          	 ld B,18
  104B  218410        	 ld HL,endms
  104E  CDF1BF        	 call msp
  1051  23            	 inc HL
  1052  110501        	 ld DE,0105h
  1055  060F          	 ld B,15
  1057  CDF1BF        	 call msp
  105A  23            	 inc HL
  105B  110B02        	 ld DE,020bh
  105E  0603          	 ld B,3
  1060  CDF1BF        	 call msp
  1063  23            	 inc HL
  1064  110203        	 ld DE,0302h
  1067  0615          	 ld B,21
  1069  CDF1BF        	 call msp
  106C  23            	 inc HL
  106D  110804        	 ld DE,0408h
  1070  0609          	 ld B,9
  1072  CDF1BF        	 call msp
  1075  23            	 inc HL
  1076  110A05        	 ld DE,050ah
  1079  0605          	 ld B,5
  107B  CDF1BF        	 call msp
  107E                	eee:
  107E  CDFDBC        	 call 48381
  1081  C3831F        	 jp retp
                      	 
                      	 
  1084                	endms:
  1084  434F4E47524154	 db "CONGRATURATIONS !!"
  1096  4E4F5720594F55	 db "NOW YOU SAVE KI"
  10A5  414E44        	 db "AND"
  10A8  54484520414456	 db "THE ADVENTURE IS OVER"
  10BD  5448414E4B2059	 db "THANK YOU"
  10C6  6E616D636F    	 db "namco"
                      	 
  10CB  542E5320534F46	 db "T.S SOFT"
                      	 
                      	;**********************************************************
                      	;*********************druaga*******************************
                      	
  10D3                	druaga:
  10D3  3A982D        	 ld A,(dammy+14)
  10D6  B7            	 or A
  10D7  CA691F        	 jp z,mains_end
  10DA  C31208        	 jp goast_action
                      	 
                      	 
  10DD                	druaga_cross:
                      	
  10DD  3AED61        	 ld A,(gil_st2)
  10E0  B7            	 or A
  10E1  2811          	 jr z,dsssss1
  10E3  CB7F          	 bit 7,A
  10E5  2808          	 jr z,dsssss0
  10E7  CD4B21        	 call cross_ck_a;s
  10EA  DC4C0E        	 call c,HP_decD;
  10ED  280D          	 jr z,dsssss2
  10EF                	dsssss0:
  10EF  CD4B21        	 call cross_ck_a;
  10F2  1808          	 jr dsssss2
  10F4                	dsssss1:;(gil_st=0-x)
  10F4  CD4B21        	 call cross_ck_a
  10F7  3003          	 jr nc,dsssss2
  10F9  C34A1F        	 jp gil_killing
  10FC                	dsssss2:
  10FC  FD7E00        	 ld A,(IY)
  10FF  EE01          	 xor 1
  1101  FD7700        	 ld (IY),A
  1104  B7            	 or A
  1105  2805          	 jr z,dsssss23
  1107  11AC2C        	 ld DE,graph_druaga_ulf
  110A  1803          	 jr dsssss24
  110C                	dsssss23:
  110C  11C42C        	 ld DE,graph_druaga_ulf+24
  110F                	dsssss24:
  110F  CDE406        	 call Egraph
  1112  C3691F        	 jp mains_end
                      	
                      	;**********************************************************
                      	;**********************succubus****************************
                      	
  1115                	sacubus:
  1115  11342C        	 ld DE,graph_spell
  1118  3A8E2D        	 ld A,(dammy+4)
  111B  B7            	 or A
  111C  2009          	 jr nz,sacubus_end
  111E  11342C        	 ld DE,graph_spell
  1121  CDE406        	 call Egraph
  1124  C3691F        	 jp mains_end
  1127                	sacubus_end:
  1127  11DC2C        	 ld DE,graph_ishitar
  112A  CDE406        	 call Egraph
                      	 
  112D  3AED61        	 ld A,(gil_st2)
  1130  CB7F          	 bit 7,A		;(gil sworud MIRU)
  1132  280B          	 jr z,i1
  1134  CD4B21        	 call cross_ck_a;s
  1137  DC4A11        	 call c,dammy_11
  113A  DC6D21        	 call c,cha_kill;(suraim HP=0)
  113D  1808          	 jr i2
  113F                	i1:;(gil_st=0-x)
  113F  CD4B21        	 call cross_ck_a
  1142  3003          	 jr nc,i2
  1144  C34A1F        	 jp gil_killing
                      	 
  1147                	i2:
                      	; jp c,retP
  1147  C3691F        	 jp mains_end
                      	
  114A                	dammy_11:
  114A  3E01          	 ld A,1
  114C  32942D        	 ld (dammy+10),A
  114F  C9            	 ret
                      	
                      	;**************************box action*************************
  1150                	box_action:
  1150  ED5B6760      	 ld DE,(pgil_xy)
  1154  7B            	 ld A,E
  1155  77            	 ld (HL),A
  1156  7A            	 ld A,D
  1157  23            	 inc HL
  1158  77            	 ld (HL),A
  1159  2B            	 dec HL
                      	
  115A  DD7E30        	 ld A,(IX+48)
  115D  B7            	 or A
  115E  3A6260        	 ld A,(floor)
  1161  2012          	 jr nz,box_actiont
                      	 
  1163  3D            	 dec A
  1164  D9            	 exx
  1165  87            	 add A,A
  1166  5F            	 ld E,A
  1167  1600          	 ld D,0
  1169  218011        	 ld HL,box_action_table_farse
  116C                	box_action2:
  116C  19            	 add HL,DE
  116D  5E            	 ld E,(HL)
  116E  23            	 inc HL
  116F  56            	 ld D,(HL)
  1170  EB            	 ex DE,HL
                      	 
  1171  22F000        	 ld (0f0h),HL
                      	; ret
                      	 
  1174  E9            	 jp (HL)
  1175                	box_actiont:
  1175  3D            	 dec A
  1176  D9            	 exx
  1177  87            	 add A,A
  1178  5F            	 ld E,A
  1179  1600          	 ld D,0
  117B  21F811        	 ld HL,box_action_table_true
  117E  18EC          	 jr box_action2
  1180                	box_action_table_farse:
  1180  7012A112CD1200	 dw floor1,floor2,floor3,floor4,floor5,floor6,floor7,floor8,floor9,floor10
  1194  4E149114BA141A	 dw floor11,floor12,floor13,floor14,floor15,floor16,floor17,floor18,floor19,floor20
  11A8  9916991699169D	 dw floor21,floor22,floor23,floor24,floor25,floor26,floor27,floor28,floor29,floor30
  11BC  EC17F017251871	 dw floor31,floor32,floor33,floor34,floor35,floor36,floor37,floor38,floor39,floor40
  11D0  5A195A195E19B2	 dw floor41,floor42,floor43,floor44,floor45,floor46,floor47,floor48,floor49,floor50
  11E4  F11B2D1C731C73	 dw floor51,floor52,floor53,floor54,floor55,floor56,floor57,floor58,floor59,floor60
  11F8                	box_action_table_true:
  11F8  7F12B012DD1204	 dw floor1t,floor2t,floor3t,floor4t,floor5t,floor6t,floor7t,floor8t,floor9t,floor10t
  120C  76149F14F8141E	 dw floor11t,floor12t,floor13t,floor14t,floor15t,floor16t,floor17t,floor18t,floor19t,floor20t
  1220  991699169916B7	 dw floor21t,floor22t,floor23t,floor24t,floor25t,floor26t,floor27t,floor28t,floor29t,floor30t
  1234  EC170A18391871	 dw floor31t,floor32t,floor33t,floor34t,floor35t,floor36t,floor37t,floor38t,floor39t,floor40t
  1248  5A195A199119D7	 dw floor41t,floor42t,floor43t,floor44t,floor45t,floor46t,floor47t,floor48t,floor49t,floor50t
  125C  121C401C731C73	 dw floor51t,floor52t,floor53t,floor54t,floor55t,floor56t,floor57t,floor58t,floor59t,floor60t
                      	
                      	
                      	;***********************floor1******************************
  1270                	floor1:
  1270  D9            	 exx
  1271  3A8A2D        	 ld A,(dammy)
  1274  FE03          	 cp 3
  1276  DA691F        	 jp c,mains_end
  1279  DD7730        	 ld (IX+48),A
  127C  C3691F        	 jp mains_end
  127F                	floor1t
  127F  D9            	 exx
  1280  3AFA61        	 ld A,(matk)
  1283  B7            	 or A
  1284  C2691F        	 jp nz,mains_end
  1287  E5            	 push HL
  1288  CD4B21        	 call cross_ck_a
  128B  E1            	 pop HL
  128C  D2261D        	 jp nc,box_action_end
  128F  3E01          	 ld A,1
  1291  32FA61        	 ld (matk),A
  1294  3E02          	 ld A,2
  1296  32EF61        	 ld (gil_matk_count),A
  1299  3E01          	 ld A,1h
  129B  CD4103        	 call itemprint
  129E  C3691F        	 jp mains_end
                      	 
                      	 
                      	
                      	;***********************floor2******************************
  12A1                	floor2:
  12A1  D9            	 exx
                      	 
  12A2  3A8A2D        	 ld A,(dammy)
  12A5  FE02          	 cp 2
  12A7  DA691F        	 jp c,mains_end
  12AA  DD7730        	 ld (IX+48),A
  12AD  C3691F        	 jp mains_end
  12B0                	floor2t
  12B0  D9            	 exx
  12B1  3AFB61        	 ld A,(boot)
  12B4  B7            	 or A
  12B5  C2691F        	 jp nz,mains_end
  12B8  E5            	 push HL
  12B9  CD4B21        	 call cross_ck_a
  12BC  E1            	 pop HL
  12BD  D2261D        	 jp nc,box_action_end
  12C0  3E01          	 ld A,1
  12C2  32FB61        	 ld (boot),A
  12C5  3E02          	 ld A,1h+1
  12C7  CD4103        	 call itemprint
  12CA  C3691F        	 jp mains_end
                      	
                      	
                      	;***********************floor3******************************
  12CD                	floor3:
  12CD  D9            	 exx
  12CE  3A9960        	 ld A,(obj_hp)
  12D1  B7            	 or A
  12D2  C2691F        	 jp nz,mains_end
  12D5  3E01          	 ld A,1
  12D7  DD7730        	 ld (IX+48),A
  12DA  C3691F        	 jp mains_end
  12DD                	floor3t:
  12DD  D9            	 exx
  12DE  3A0562        	 ld A,(posion)
  12E1  FE01          	 cp 1
  12E3  CA691F        	 jp z,mains_end
  12E6  E5            	 push HL
  12E7  CD4B21        	 call cross_ck_a
  12EA  E1            	 pop HL
  12EB  D2261D        	 jp nc,box_action_end
  12EE  3E01          	 ld A,1
  12F0  320562        	 ld (posion),A
  12F3  3E03          	 ld A,2h+1
  12F5  CD4103        	 call itemprint
  12F8  3E40          	 ld A,64
  12FA  32EA61        	 ld (gil_hp),A
  12FD  C3691F        	 jp mains_end
                      	 
                      	;***********************floor4*****************************
  1300                	floor4:
  1300  D9            	 exx
  1301  C3691F        	 jp mains_end
  1304                	floor4t:
  1304  D9            	 exx
  1305  C3691F        	 jp mains_end
                      	 
                      	;***********************floor5*****************************
  1308                	floor5:
  1308  D9            	 exx
  1309  3A8B2D        	 ld A,(dammy+1)
  130C  FE04          	 cp 4
  130E  DA691F        	 jp c,mains_end
  1311  3E01          	 ld A,1
  1313  DD7730        	 ld (IX+48),A
  1316  C3691F        	 jp mains_end
  1319                	floor5t:
  1319  D9            	 exx
  131A  3AFC61        	 ld A,(sword)
  131D  B7            	 or A
  131E  C2691F        	 jp nz,mains_end
  1321  E5            	 push HL
  1322  CD4B21        	 call cross_ck_a
  1325  E1            	 pop HL
  1326  D2261D        	 jp nc,box_action_end
  1329  3E01          	 ld A,1
  132B  32FC61        	 ld (sword),A
  132E  3E04          	 ld A,3h+1
  1330  CD4103        	 call itemprint
  1333  C3691F        	 jp mains_end
                      	 
                      	;***********************floor6*****************************
  1336                	floor6:
  1336  D9            	 exx
  1337  3AF761        	 ld A,(gil_xy+1)
  133A  E63F          	 and 00111111b
  133C  C24413        	 jp nz,floor6l
  133F  3E01          	 ld A,1
  1341  DD7760        	 ld (IX+96),A
  1344                	floor6l:
  1344  DD7E60        	 ld A,(IX+96)
  1347  B7            	 or A
  1348  CA691F        	 jp z,mains_end
  134B  3AF761        	 ld A,(gil_xy+1)
  134E  E63F          	 and 00111111b
  1350  FE01          	 cp 1
  1352  C2691F        	 jp nz,mains_end
  1355  DD7730        	 ld (IX+48),A
  1358  C3691F        	 jp mains_end
  135B                	floor6t:
  135B  D9            	 exx
  135C  3A0362        	 ld A,(kndl)
  135F  B7            	 or A
  1360  C2691F        	 jp nz,mains_end
  1363  CD4B21        	 call cross_ck_a
  1366  D2261D        	 jp nc,box_action_end
  1369  3E01          	 ld A,1
  136B  320362        	 ld (kndl),A
  136E  3E07          	 ld A,6h+1
  1370  CD4103        	 call itemprint
  1373  C3691F        	 jp mains_end
                      	;***********************floor7*****************************
  1376                	floor7:
  1376  D9            	 exx
  1377  3A8C2D        	 ld A,(dammy+2)
  137A  B7            	 or A
  137B  CA691F        	 jp z,mains_end
  137E  3E01          	 ld A,1
  1380  DD7730        	 ld (IX+48),A
  1383  C3691F        	 jp mains_end
  1386                	floor7t:
  1386  D9            	 exx
  1387  3AFA61        	 ld A,(matk)
  138A  B7            	 or A
  138B  C2691F        	 jp nz,mains_end
  138E  CD4B21        	 call cross_ck_a
  1391  D2261D        	 jp nc,box_action_end
  1394  3E02          	 ld A,2
  1396  32FA61        	 ld (matk),A
  1399  3E04          	 ld A,4
  139B  32EF61        	 ld (gil_matk_count),A
  139E  3E01          	 ld A,0h+1
  13A0  CD4103        	 call itemprint
  13A3  C3691F        	 jp mains_end
                      	 
  13A6                	floor8:
  13A6  D9            	 exx
  13A7  CD1722        	 call wall_mod
  13AA  78            	 ld A,B
  13AB  FE01          	 cp 1
  13AD  CA691F        	 jp z,mains_end
  13B0  79            	 ld A,C
  13B1  B7            	 or A
  13B2  C2691F        	 jp nz,mains_end
  13B5  3AE961        	 ld A,(gil_button)
  13B8  CB6F          	 bit 5,A
  13BA  CA691F        	 jp z,mains_end
  13BD  DD7730        	 ld (IX+48),A
  13C0  C3691F        	 jp mains_end
  13C3                	floor8t
  13C3  D9            	 exx
  13C4  3A0562        	 ld A,(posion)
  13C7  FE01          	 cp 1
  13C9  CA691F        	 jp z,mains_end
  13CC  CD4B21        	 call cross_ck_a
  13CF  D2261D        	 jp nc,box_action_end
  13D2  3E01          	 ld A,1
  13D4  320562        	 ld (posion),A
  13D7  3E40          	 ld A,64
  13D9  32EA61        	 ld (gil_hp),A
  13DC  3E03          	 ld A,2h+1
  13DE  CD4103        	 call itemprint
  13E1  C3691F        	 jp mains_end
                      	 
  13E4                	floor9:
  13E4  D9            	 exx
  13E5  ED5BF661      	 ld DE,(gil_xy)
  13E9  7A            	 ld A,D
  13EA  E63F          	 and 00111111b
  13EC  C2691F        	 jp nz,mains_end
  13EF  7B            	 ld A,E
  13F0  FE56          	 cp 30+7*8
  13F2  CAFA13        	 jp z,floor9l
  13F5  FE5D          	 cp 30+7*9
  13F7  C2691F        	 jp nz,mains_end
  13FA                	floor9l:
  13FA  3E01          	 ld A,1
  13FC  DD7730        	 ld (IX+48),A
  13FF  C3691F        	 jp mains_end
  1402                	floor9t
  1402  D9            	 exx
  1403  3A0562        	 ld A,(posion)
  1406  FE02          	 cp 2
  1408  CA691F        	 jp z,mains_end
  140B  CD4B21        	 call cross_ck_a
  140E  D2261D        	 jp nc,box_action_end
  1411  3E02          	 ld A,2
  1413  320562        	 ld (posion),A
  1416  3E10          	 ld A,16
  1418  32EA61        	 ld (gil_hp),A
  141B  3E03          	 ld A,2h+1
  141D  CD4103        	 call itemprint
  1420  C3691F        	 jp mains_end
                      	 
  1423                	floor10:
  1423  D9            	 exx
  1424  3A8B2D        	 ld A,(dammy+1)
  1427  B7            	 or A
  1428  CA691F        	 jp z,mains_end
  142B  3E01          	 ld A,1
  142D  DD7730        	 ld (IX+48),A
  1430  C3691F        	 jp mains_end
  1433                	floor10t:
  1433  D9            	 exx
  1434  3AFE61        	 ld A,(gnt)
  1437  B7            	 or A
  1438  C2691F        	 jp nz,mains_end
  143B  CD4B21        	 call cross_ck_a
  143E  D2261D        	 jp nc,box_action_end
  1441  3E01          	 ld A,1
  1443  32FE61        	 ld (gnt),A
  1446  3E05          	 ld A,4h+1
  1448  CD4103        	 call itemprint
  144B  C3691F        	 jp mains_end
                      	 
                      	 
  144E                	floor11:
  144E  D9            	 exx
  144F  3AF761        	 ld A,(gil_xy+1)
  1452  E63F          	 and 00111111b
  1454  FE2A          	 cp 42
  1456  2005          	 jr nz,floor11l
  1458  3E01          	 ld A,1
  145A  DD7760        	 ld (IX+96),A
  145D                	floor11l:
  145D  DD7E60        	 ld A,(IX+96)
  1460  B7            	 or A
  1461  CA691F        	 jp z,mains_end
  1464  3AF761        	 ld A,(gil_xy+1)
  1467  E63F          	 and 00111111b
  1469  FE29          	 cp 41
  146B  C2691F        	 jp nz,mains_end
  146E  3E01          	 ld A,1
  1470  DD7730        	 ld (IX+48),A
  1473  C3691F        	 jp mains_end
  1476                	floor11t:
  1476  D9            	 exx
  1477  3A0362        	 ld A,(kndl)
  147A  B7            	 or A
  147B  C2691F        	 jp nz,mains_end
  147E  CD4B21        	 call cross_ck_a
  1481  D2261D        	 jp nc,box_action_end
  1484  3E01          	 ld A,1
  1486  320362        	 ld (kndl),A
  1489  3E07          	 ld A,6h+1
  148B  CD4103        	 call itemprint
  148E  C3691F        	 jp mains_end
                      	
  1491                	floor12:
  1491  D9            	 exx
  1492  3A8D2D        	 ld A,(dammy+3)
  1495  B7            	 or A
  1496  CA691F        	 jp z,mains_end
  1499  DD7730        	 ld (IX+48),A
  149C  C3691F        	 jp mains_end
  149F                	floor12t:
  149F  D9            	 exx
  14A0  3AFD61        	 ld A,(armor)
  14A3  B7            	 or A
  14A4  C2691F        	 jp nz,mains_end
  14A7  CD4B21        	 call cross_ck_a
  14AA  D2261D        	 jp nc,box_action_end
  14AD  3E01          	 ld A,1
  14AF  32FD61        	 ld (armor),A
  14B2  3E06          	 ld A,5h+1
  14B4  CD4103        	 call itemprint
  14B7  C3691F        	 jp mains_end
                      	 
                      	 
  14BA                	floor13:
  14BA  D9            	 exx
  14BB  E5            	 push HL
  14BC  219960        	 ld HL,obj_hp
  14BF  7E            	 ld A,(HL)
  14C0  B7            	 or A
  14C1  C2F414        	 jp nz,floor13l
  14C4  23            	 inc HL
  14C5  7E            	 ld A,(HL)
  14C6  B7            	 or A
  14C7  C2F414        	 jp nz,floor13l
  14CA  23            	 inc HL
  14CB  7E            	 ld A,(HL)
  14CC  B7            	 or A
  14CD  C2F414        	 jp nz,floor13l
  14D0  23            	 inc HL
  14D1  7E            	 ld A,(HL)
  14D2  B7            	 or A
  14D3  C2F414        	 jp nz,floor13l
  14D6  23            	 inc HL
  14D7  7E            	 ld A,(HL)
  14D8  B7            	 or A
  14D9  C2F414        	 jp nz,floor13l
  14DC  23            	 inc HL
  14DD  7E            	 ld A,(HL)
  14DE  B7            	 or A
  14DF  C2F414        	 jp nz,floor13l
  14E2  23            	 inc HL
  14E3  7E            	 ld A,(HL)
  14E4  B7            	 or A
  14E5  C2F414        	 jp nz,floor13l
  14E8  E1            	 pop HL
  14E9  3E01          	 ld A,1
  14EB  328F2D        	 ld (dammy+5),A
  14EE  DD7730        	 ld (IX+48),A
  14F1  C3691F        	 jp mains_end
  14F4                	floor13l:
  14F4  E1            	 pop HL
  14F5  C3691F        	 jp mains_end
  14F8                	floor13t:
  14F8  D9            	 exx
  14F9  3A8E2D        	 ld A,(dammy+4)
  14FC  B7            	 or A
  14FD  CA691F        	 jp z,mains_end
  1500  3AFF61        	 ld A,(shield)
  1503  B7            	 or A
  1504  C2691F        	 jp nz,mains_end
  1507  CD4B21        	 call cross_ck_a
  150A  D2261D        	 jp nc,box_action_end
  150D  3E01          	 ld A,1
  150F  32FF61        	 ld (shield),A
  1512  3E08          	 ld A,7h+1
  1514  CD4103        	 call itemprint
  1517  C3691F        	 jp mains_end
                      	 
  151A                	floor14:
  151A  D9            	 exx
  151B  C3691F        	 jp mains_end
  151E                	floor14t:
  151E  D9            	 exx
  151F  C3691F        	 jp mains_end
                      	 
  1522                	floor15:
  1522  D9            	 exx
  1523  E5            	 push HL
  1524  21902D        	 ld HL,dammy+6
  1527  CDBC0D        	 call xy_ck
  152A  E1            	 pop HL
  152B  C2691F        	 jp nz,mains_end
  152E  3AED61        	 ld A,(gil_st2)
  1531  E67F          	 and 01111111b
  1533  CA691F        	 jp z,mains_end
  1536  3E01          	 ld A,1
  1538  DD7730        	 ld (IX+48),A
  153B  C3691F        	 jp mains_end
  153E                	floor15t:
  153E  D9            	 exx
  153F  3A0762        	 ld A,(nec)
  1542  B7            	 or A
  1543  C2691F        	 jp nz,mains_end
  1546  CD4B21        	 call cross_ck_a
  1549  D2261D        	 jp nc,box_action_end
  154C  3E01          	 ld A,1
  154E  320762        	 ld (nec),A
  1551  3E09          	 ld A,8h+1
  1553  CD4103        	 call itemprint
  1556  C3691F        	 jp mains_end
                      	 
  1559                	floor16:
  1559  D9            	 exx
  155A  3AF661        	 ld A,(gil_xy)
  155D  FE1E          	 cp x0
  155F  2004          	 jr nz,floor16l1
  1561  DDCB60C6      	 set 0,(IX+96)
  1565                	floor16l1
  1565  3AF661        	 ld A,(gil_xy)
  1568  FE87          	 cp 135
  156A  2004          	 jr nz,floor16l2
  156C  DDCB60CE      	 set 1,(IX+96)
  1570                	floor16l2:
  1570  DD7E60        	 ld A,(IX+96)
  1573  FE03          	 cp 3
  1575  C2691F        	 jp nz,mains_end
  1578  DD7730        	 ld (IX+48),A
  157B  C3691F        	 jp mains_end
  157E                	floor16t:
  157E  D9            	 exx
  157F  3A0362        	 ld A,(kndl)
  1582  FE02          	 cp 2
  1584  CA691F        	 jp z,mains_end
  1587  CD4B21        	 call cross_ck_a
  158A  D2261D        	 jp nc,box_action_end
  158D  3E02          	 ld A,2
  158F  320362        	 ld (kndl),A
  1592  3E07          	 ld A,6h+1
  1594  CD4103        	 call itemprint
  1597  C3691F        	 jp mains_end
                      	
  159A                	floor17:
  159A  D9            	 exx
  159B  1808          	 jr f17test
  159D  3A922D        	 ld A,(dammy+8)
  15A0  FE05          	 cp 5
  15A2  DA691F        	 jp c,mains_end
  15A5                	f17test:
  15A5  3E01          	 ld A,1
  15A7  DD7730        	 ld (IX+48),A
  15AA  C3691F        	 jp mains_end
  15AD                	floor17t
  15AD  D9            	 exx
  15AE  3A0562        	 ld A,(posion)
  15B1  FE03          	 cp 3
  15B3  CA691F        	 jp z,mains_end
  15B6  CD4B21        	 call cross_ck_a
  15B9  D2261D        	 jp nc,box_action_end
  15BC  3E03          	 ld A,3
  15BE  320562        	 ld (posion),A
  15C1  3E03          	 ld A,2h+1
  15C3  CD4103        	 call itemprint
  15C6  C3691F        	 jp mains_end
                      	 
  15C9                	floor18:
  15C9  D9            	 exx
  15CA  3AF661        	 ld A,(gil_xy)
  15CD  FE1E          	 cp X0
  15CF  2821          	 jr z,floor18_e
  15D1  FE87          	 cp 135
  15D3  281D          	 jr z,floor18_e
  15D5  3AF761        	 ld A,(gil_xy+1)
  15D8  E63F          	 and 00111111b
  15DA  2816          	 jr z,floor18_e
  15DC  FE2A          	 cp 42
  15DE  2812          	 jr z,floor18_e
                      	
  15E0  DD3460        	 inc (IX+96)
  15E3  DD7E60        	 ld A,(IX+96)
  15E6  B7            	 or A
  15E7  C2691F        	 jp nz,mains_end
  15EA  3E01          	 ld A,1
  15EC  DD7730        	 ld (IX+48),A
  15EF  C3691F        	 jp mains_end 
  15F2                	floor18_e:
  15F2  AF            	 xor A
  15F3  DD7760        	 ld (IX+96),A
  15F6  C3691F        	 jp mains_end
  15F9                	floor18t
  15F9  D9            	 exx
  15FA  3AFC61        	 ld A,(sword)
  15FD  FE02          	 cp 2
  15FF  CA691F        	 jp z,mains_end
  1602  3A0562        	 ld A,(posion)
  1605  FE03          	 cp 3
  1607  C2261D        	 jp nz,box_action_end
  160A  CD4B21        	 call cross_ck_a
  160D  D2261D        	 jp nc,box_action_end
  1610  3E02          	 ld A,2
  1612  32FC61        	 ld (sword),A
  1615  AF            	 xor A
  1616  320562        	 ld (posion),A
  1619  110E07        	 ld DE,070eh
  161C  CD3F25        	 call grp_del
  161F  3E04          	 ld A,3h+1
  1621  CD4103        	 call itemprint
  1624  C3691F        	 jp mains_end
                      	 
  1627                	floor19:
  1627  D9            	 exx
  1628  C3691F        	 jp mains_end
  162B                	floor19t:
  162B  D9            	 exx
  162C  C3691F        	 jp mains_end
                      	
  162F                	floor20:
  162F  D9            	 exx
  1630  E5            	 push HL
  1631  219960        	 ld HL,obj_hp
  1634  7E            	 ld A,(HL)
  1635  B7            	 or A
  1636  CA7416        	 jp z,floor20e
  1639  23            	 inc HL
  163A  7E            	 ld A,(HL)
  163B  B7            	 or A
  163C  CA7416        	 jp z,floor20e
  163F  23            	 inc HL
  1640  7E            	 ld A,(HL)
  1641  B7            	 or A
  1642  CA7416        	 jp z,floor20e
  1645  23            	 inc HL
  1646  7E            	 ld A,(HL)
  1647  B7            	 or A
  1648  CA7416        	 jp z,floor20e
  164B  23            	 inc HL
  164C  7E            	 ld A,(HL)
  164D  B7            	 or A
  164E  CA7416        	 jp z,floor20e
  1651  23            	 inc HL
  1652  7E            	 ld A,(HL)
  1653  B7            	 or A
  1654  CA7416        	 jp z,floor20e
  1657  23            	 inc HL
  1658  7E            	 ld A,(HL)
  1659  B7            	 or A
  165A  CA7416        	 jp z,floor20e
  165D  23            	 inc HL
  165E  7E            	 ld A,(HL)
  165F  B7            	 or A
  1660  CA7416        	 jp z,floor20e
  1663  23            	 inc HL
  1664  E1            	 pop HL
  1665  3A0662        	 ld A,(key)
  1668  B7            	 or A
  1669  CA691F        	 jp z,mains_end
  166C  3E01          	 ld A,1
  166E  DD7730        	 ld (IX+48),A
  1671  C3691F        	 jp mains_end 
  1674                	floor20e:
  1674  E1            	 pop HL
  1675  C3691F        	 jp mains_end
  1678                	floor20t
  1678  D9            	 exx
  1679  3A0562        	 ld A,(posion)
  167C  FE01          	 cp 1
  167E  CA691F        	 jp z,mains_end
  1681  CD4B21        	 call cross_ck_a
  1684  D2261D        	 jp nc,box_action_end
  1687  3E01          	 ld A,1
  1689  320562        	 ld (posion),A
  168C  3E40          	 ld A,64
  168E  32EA61        	 ld (gil_hp),A
  1691  3E03          	 ld A,2h+1
  1693  CD4103        	 call itemprint
  1696  C3691F        	 jp mains_end
                      	
                      	
  1699                	floor21:
  1699                	floor21t:
  1699                	floor22:
  1699                	floor22t:
  1699                	floor23:
  1699                	floor23t:
  1699  D9            	 exx
  169A  C3691F        	 jp mains_end
                      	 
  169D                	floor24:
  169D  D9            	 exx
  169E  E5            	 push HL
  169F  216760        	 ld HL,pgil_xy
  16A2  CDBC0D        	 call xy_ck
  16A5  E1            	 pop HL
  16A6  C2691F        	 jp nz,mains_end
  16A9  3AED61        	 ld A,(gil_st2)
  16AC  CB7F          	 bit 7,A
  16AE  CA691F        	 jp z,mains_end
  16B1  DD7730        	 ld (IX+48),A
  16B4  C3691F        	 jp mains_end
  16B7                	floor24t:
  16B7  D9            	 exx
  16B8  3A0462        	 ld A,(brns)
  16BB  B7            	 or A
  16BC  C2691F        	 jp nz,mains_end
  16BF  CD4B21        	 call cross_ck_a
  16C2  D2261D        	 jp nc,box_action_end
  16C5  3E01          	 ld A,1
  16C7  320462        	 ld (brns),A
  16CA  3E0B          	 ld A,0ah+1
  16CC  CD4103        	 call itemprint
  16CF  C3691F        	 jp mains_end
  16D2                	floor25:
  16D2                	floor25t:
  16D2  D9            	 exx
  16D3  C3691F        	 jp mains_end
                      	 
                      	 
  16D6                	floor26:
  16D6  D9            	 exx
                      	; jp f26t
  16D7  E5            	 push HL
  16D8  0600          	 ld B,0
  16DA  219960        	 ld HL,obj_hp
  16DD  7E            	 ld A,(HL)
  16DE  B7            	 or A
  16DF  C2E316        	 jp nz,floor26a
  16E2  04            	 inc B
  16E3                	floor26a:
  16E3  23            	 inc HL
  16E4  7E            	 ld A,(HL)
  16E5  B7            	 or A
  16E6  C2EA16        	 jp nz,floor26b
  16E9  04            	 inc B
  16EA                	floor26b:
  16EA  23            	 inc HL
  16EB  7E            	 ld A,(HL)
  16EC  B7            	 or A
  16ED  C2F116        	 jp nz,floor26c
  16F0  04            	 inc B
  16F1                	floor26c:
  16F1  E1            	 pop HL
  16F2  78            	 ld A,B
  16F3  FE01          	 cp 1
  16F5  DA691F        	 jp c,mains_end
  16F8  CA0317        	 jp z,floor26d
  16FB  FE03          	 cp 3
  16FD  DA0317        	 jp c,floor26d
  1700  C3691F        	 jp mains_end
  1703                	floor26d:
  1703  3A0662        	 ld A,(key)
  1706  B7            	 or A
  1707  CA691F        	 jp z,mains_end
  170A                	f26t:
  170A  3E01          	 ld A,1
  170C  DD7730        	 ld (IX+48),A
  170F  C3691F        	 jp mains_end
  1712                	floor26t
  1712  D9            	 exx
  1713  3AFE61        	 ld A,(gnt)
  1716  FE02          	 cp 2
  1718  CA691F        	 jp z,mains_end
  171B  FE03          	 cp 3
  171D  CA691F        	 jp z,mains_end
  1720  CD4B21        	 call cross_ck_a
  1723  D2261D        	 jp nc,box_action_end
  1726  3A0462        	 ld A,(brns)
  1729  B7            	 or A
  172A  2007          	 jr nz,floor26tt
  172C                	floor26ti:
  172C  3E03          	 ld A,3
  172E  32FE61        	 ld (gnt),A
  1731  1805          	 jr floor26tl
  1733                	floor26tt: 
  1733  3E02          	 ld A,2
  1735  32FE61        	 ld (gnt),A
  1738                	floor26tl:
  1738  AF            	 xor A
  1739  320462        	 ld (brns),A
  173C  11071C        	 ld DE,1c07h
  173F  CD3F25        	 call grp_del
  1742  3E05          	 ld A,4h+1
  1744  CD4103        	 call itemprint
  1747  C3691F        	 jp mains_end
                      	 
  174A                	floor27:
  174A  D9            	 exx
  174B  3A9960        	 ld A,(obj_hp)
  174E  B7            	 or A
  174F  C2691F        	 jp nz,mains_end
  1752  3E01          	 ld A,1
  1754  DD7730        	 ld (IX+48),A
  1757  C3691F        	 jp mains_end
  175A                	floor27t
  175A  D9            	 exx
  175B  3A0762        	 ld A,(nec)
  175E  FE01          	 cp 1
  1760  C2691F        	 jp nz,mains_end
  1763  FE02          	 cp 2
  1765  CA691F        	 jp z,mains_end
  1768  CD4B21        	 call cross_ck_a
  176B  D2261D        	 jp nc,box_action_end
  176E  3E02          	 ld A,2
  1770  320762        	 ld (nec),A
  1773  3E09          	 ld A,8h+1
  1775  CD4103        	 call itemprint
  1778  C3691F        	 jp mains_end
                      	 
  177B                	floor28:
  177B                	floor28t:
  177B  D9            	 exx
  177C  C3691F        	 jp mains_end
                      	 
  177F                	floor29:
  177F  D9            	 exx
  1780  3A8C2D        	 ld A,(dammy+2)
  1783  B7            	 or A
  1784  CA691F        	 jp z,mains_end
  1787  3E01          	 ld A,1
  1789  DD7730        	 ld (IX+48),A
  178C  C3691F        	 jp mains_end
  178F                	floor29t:
  178F  D9            	 exx
  1790  3AFA61        	 ld A,(matk)
  1793  B7            	 or A
  1794  C2691F        	 jp nz,mains_end
  1797  CD4B21        	 call cross_ck_a
  179A  D2261D        	 jp nc,box_action_end
  179D  3E03          	 ld A,3
  179F  32FA61        	 ld (matk),A
  17A2  3EFF          	 ld A,255
  17A4  32EF61        	 ld (gil_matk_count),A
  17A7  3E01          	 ld A,0h+1
  17A9  CD4103        	 call itemprint
  17AC  C3691F        	 jp mains_end
                      	 
  17AF                	floor30:
  17AF  D9            	 exx
  17B0  C3691F        	 jp mains_end
                      	
  17B3  ED5BF661      	 ld DE,(gil_xy)
  17B7  7A            	 ld A,D
  17B8  E63F          	 and 00111111b
  17BA  FE07          	 cp 7
  17BC  C2691F        	 jp nz,mains_end
  17BF  7B            	 ld A,E
  17C0  FE80          	 cp 30+7*14
  17C2  C2691F        	 jp nz,mains_end
  17C5                	floor30l:
  17C5  3E01          	 ld A,1
  17C7  DD7730        	 ld (IX+48),A
  17CA  C3691F        	 jp mains_end
  17CD                	floor30t
  17CD  D9            	 exx
  17CE  C3691F        	 jp mains_end
                      	
  17D1  3A0562        	 ld A,(posion)
  17D4  FE03          	 cp 3
  17D6  CA691F        	 jp z,mains_end
  17D9  CD4B21        	 call cross_ck_a
  17DC  D2261D        	 jp nc,box_action_end
  17DF  3E03          	 ld A,3
  17E1  320562        	 ld (posion),A
  17E4  3E03          	 ld A,2h+1
  17E6  CD4103        	 call itemprint
  17E9  C3691F        	 jp mains_end
                      	
  17EC                	floor31:
  17EC                	floor31t:
  17EC  D9            	 exx
  17ED  C3691F        	 jp mains_end
                      	 
  17F0                	floor32:
  17F0  D9            	 exx
  17F1  3AED61        	 ld A,(gil_st2)
  17F4  CB7F          	 bit 7,A
  17F6  CA691F        	 jp z,mains_end
  17F9  DD3460        	 inc (IX+96)
  17FC  DD7E60        	 ld A,(IX+96)
  17FF  FE02          	 cp 2
  1801  DA691F        	 jp c,mains_end
  1804  DD7730        	 ld (IX+48),A
  1807  C3691F        	 jp mains_end
  180A                	floor32t:
  180A  D9            	 exx
  180B  3A0462        	 ld A,(brns)
  180E  B7            	 or A
  180F  C2691F        	 jp nz,mains_end
  1812  CD4B21        	 call cross_ck_a
  1815  D2261D        	 jp nc,box_action_end
  1818  3E01          	 ld A,1
  181A  320462        	 ld (brns),A
  181D  3E0B          	 ld A,0ah+1
  181F  CD4103        	 call itemprint
  1822  C3691F        	 jp mains_end
                      	
                      	
  1825                	floor33:
  1825  D9            	 exx
  1826  E5            	 push HL
  1827  212961        	 ld HL,obj_xy
  182A  CDBC0D        	 call xy_ck
  182D  E1            	 pop HL
  182E  C2691F        	 jp nz,mains_end
  1831  3E01          	 ld A,1
  1833  DD7730        	 ld (IX+48),A
  1836  C3691F        	 jp mains_end
  1839                	floor33t:
  1839  D9            	 exx
  183A  3AFF61        	 ld A,(shield)
  183D  FE01          	 cp 1
  183F  C2691F        	 jp nz,mains_end
  1842  FE02          	 cp 2
  1844  CA691F        	 jp z,mains_end
  1847  CD4B21        	 call cross_ck_a
  184A  D2261D        	 jp nc,box_action_end
  184D  3A0462        	 ld A,(brns)
  1850  B7            	 or A
  1851  2007          	 jr nz,floor33tt
  1853                	floor33ti:
  1853  3E03          	 ld A,3
  1855  32FF61        	 ld (shield),A
  1858  1805          	 jr floor33tl
  185A                	floor33tt: 
  185A  3E02          	 ld A,2
  185C  32FF61        	 ld (shield),A
  185F                	floor33tl:
  185F  AF            	 xor A
  1860  320462        	 ld (brns),A
  1863  11071C        	 ld DE,1c07h
  1866  CD3F25        	 call grp_del
  1869  3E08          	 ld A,07h+1
  186B  CD4103        	 call itemprint
  186E  C3691F        	 jp mains_end
                      	 
  1871                	floor34:
  1871                	floor34t:
  1871  D9            	 exx
  1872  C3691F        	 jp mains_end
                      	
  1875                	floor35:
  1875  D9            	 exx
  1876  E5            	 push HL
  1877  212961        	 ld HL,obj_xy
  187A  CDBC0D        	 call xy_ck
  187D  E1            	 pop HL
  187E  C2691F        	 jp nz,mains_end
  1881  3E01          	 ld A,1
  1883  DD7730        	 ld (IX+48),A
  1886  C3691F        	 jp mains_end
  1889                	floor35t:
  1889  D9            	 exx
  188A  3A0562        	 ld A,(posion)
  188D  FE02          	 cp 2
  188F  CA691F        	 jp z,mains_end
  1892  CD4B21        	 call cross_ck_a
  1895  D2261D        	 jp nc,box_action_end
  1898  3E02          	 ld A,2
  189A  320562        	 ld (posion),A
  189D  3E10          	 ld A,16
  189F  32EA61        	 ld (gil_hp),A
  18A2  3E03          	 ld A,02h+1
  18A4  CD4103        	 call itemprint
  18A7  C3691F        	 jp mains_end
                      	 
  18AA                	floor36:
  18AA  D9            	 exx
  18AB  E5            	 push HL
  18AC  212961        	 ld HL,obj_xy
  18AF  CDBC0D        	 call xy_ck
  18B2  E1            	 pop HL
  18B3  C2691F        	 jp nz,mains_end
  18B6  3E01          	 ld A,1
  18B8  DD7730        	 ld (IX+48),A
  18BB  C3691F        	 jp mains_end
  18BE                	floor36t:
  18BE  D9            	 exx
  18BF  3A0462        	 ld A,(brns)
  18C2  B7            	 or A
  18C3  C2691F        	 jp nz,mains_end
  18C6  CD4B21        	 call cross_ck_a
  18C9  D2261D        	 jp nc,box_action_end
  18CC  3E01          	 ld A,1
  18CE  320462        	 ld (brns),A
  18D1  3E0B          	 ld A,0ah+1
  18D3  CD4103        	 call itemprint
  18D6  C3691F        	 jp mains_end
                      	 
  18D9                	floor37:
  18D9  D9            	 exx
  18DA  3A9960        	 ld A,(obj_hp)
  18DD  B7            	 or A
  18DE  C2691F        	 jp nz,mains_end
  18E1  3A9A60        	 ld A,(obj_hp+1)
  18E4  B7            	 or A
  18E5  C2691F        	 jp nz,mains_end
  18E8  3E01          	 ld A,1
  18EA  DD7730        	 ld (IX+48),A
  18ED  C3691F        	 jp mains_end
  18F0                	floor37t
  18F0  D9            	 exx
  18F1  3A0062        	 ld A,(hlmt)
  18F4  B7            	 or A
  18F5  C2691F        	 jp nz,mains_end
  18F8  CD4B21        	 call cross_ck_a
  18FB  D2261D        	 jp nc,box_action_end
  18FE  3A0462        	 ld A,(brns)
  1901  B7            	 or A
  1902  2007          	 jr nz,floor37tt
  1904                	floor37ti:
  1904  3E02          	 ld A,2
  1906  320062        	 ld (hlmt),A
  1909  1805          	 jr floor37tl
  190B                	floor37tt: 
  190B  3E01          	 ld A,1
  190D  320062        	 ld (hlmt),A
  1910                	floor37tl:
  1910  AF            	 xor A
  1911  320462        	 ld (brns),A
  1914  11071C        	 ld DE,1c07h
  1917  CD3F25        	 call grp_del
  191A  3E0A          	 ld A,09h+1
  191C  CD4103        	 call itemprint
  191F  C3691F        	 jp mains_end
                      	 
  1922                	floor38:
  1922  D9            	 exx
  1923  3A8B2D        	 ld A,(dammy+1)
  1926  B7            	 or A
  1927  CA691F        	 jp z,mains_end
  192A  3AED61        	 ld A,(gil_st2)
  192D  CB7F          	 bit 7,A
  192F  CA3819        	 jp z,floor38l
  1932  DD7730        	 ld (IX+48),A
  1935  C3691F        	 jp mains_end
  1938                	floor38l:
  1938  AF            	 xor A
  1939  328B2D        	 ld (dammy+1),A
  193C  C3691F        	 jp mains_end
  193F                	floor38t
  193F  D9            	 exx
  1940  3A0162        	 ld A,(rod)
  1943  B7            	 or A
  1944  C2691F        	 jp nz,mains_end
  1947  CD4B21        	 call cross_ck_a
  194A  D2261D        	 jp nc,box_action_end
  194D  3E01          	 ld A,1
  194F  320162        	 ld (rod),A
  1952  3E0D          	 ld A,0ch+1
  1954  CD4103        	 call itemprint
  1957  C3691F        	 jp mains_end
                      	 
  195A                	floor39:
  195A                	floor39t
  195A                	floor40:
  195A                	floor40t
  195A                	floor41:
  195A                	floor41t:
  195A                	floor42:
  195A                	floor42t:
  195A  D9            	 exx
  195B  C3691F        	 jp mains_end
                      	 
  195E                	floor43:
  195E  D9            	 exx
  195F  3A9960        	 ld A,(obj_hp)
  1962  B7            	 or A
  1963  C2691F        	 jp nz,mains_end
  1966  3A9A60        	 ld A,(obj_hp+1)
  1969  B7            	 or A
  196A  C2691F        	 jp nz,mains_end
  196D  3A9B60        	 ld A,(obj_hp+2)
  1970  B7            	 or A
  1971  C2691F        	 jp nz,mains_end
  1974  3A9C60        	 ld A,(obj_hp+3)
  1977  B7            	 or A
  1978  C2691F        	 jp nz,mains_end
  197B  3A9D60        	 ld A,(obj_hp+4)
  197E  B7            	 or A
  197F  C2691F        	 jp nz,mains_end
  1982  3A9E60        	 ld A,(obj_hp+5)
  1985  B7            	 or A
  1986  C2691F        	 jp nz,mains_end
  1989  3E01          	 ld A,1
  198B  DD7730        	 ld (IX+48),A
  198E  C3691F        	 jp mains_end
  1991                	floor43t:
  1991  D9            	 exx
  1992  3A0562        	 ld A,(posion)
  1995  FE02          	 cp 2
  1997  CA691F        	 jp z,mains_end
  199A  CD4B21        	 call cross_ck_a
  199D  D2261D        	 jp nc,box_action_end
  19A0  3E02          	 ld A,2
  19A2  320562        	 ld (posion),A
  19A5  3E10          	 ld A,16
  19A7  32EA61        	 ld (gil_hp),A
  19AA  3E03          	 ld A,02h+1
  19AC  CD4103        	 call itemprint
  19AF  C3691F        	 jp mains_end
                      	 
                      	
  19B2                	floor44:
  19B2  D9            	 exx
  19B3  3A9960        	 ld A,(obj_hp)
  19B6  B7            	 or A
  19B7  C2691F        	 jp nz,mains_end
  19BA  3A9A60        	 ld A,(obj_hp+1)
  19BD  B7            	 or A
  19BE  C2691F        	 jp nz,mains_end
  19C1  3A9B60        	 ld A,(obj_hp+2)
  19C4  B7            	 or A
  19C5  C2691F        	 jp nz,mains_end
  19C8  3A9C60        	 ld A,(obj_hp+3)
  19CB  B7            	 or A
  19CC  C2691F        	 jp nz,mains_end
  19CF  3E01          	 ld A,1
  19D1  DD7730        	 ld (IX+48),A
  19D4  C3691F        	 jp mains_end
  19D7                	floor44t:
  19D7  D9            	 exx
  19D8  3A0462        	 ld A,(brns)
  19DB  B7            	 or A
  19DC  C2691F        	 jp nz,mains_end
  19DF  CD4B21        	 call cross_ck_a
  19E2  D2261D        	 jp nc,box_action_end
  19E5  3E01          	 ld A,1
  19E7  320462        	 ld (brns),A
  19EA  3E0B          	 ld A,0ah+1
  19EC  CD4103        	 call itemprint
  19EF  C3691F        	 jp mains_end
                      	
  19F2                	floor45:
  19F2  D9            	 exx
  19F3  3A9960        	 ld A,(obj_hp)
  19F6  B7            	 or A
  19F7  C2691F        	 jp nz,mains_end
  19FA  3A9A60        	 ld A,(obj_hp+1)
  19FD  B7            	 or A
  19FE  C2691F        	 jp nz,mains_end
  1A01  3A9B60        	 ld A,(obj_hp+2)
  1A04  B7            	 or A
  1A05  C2691F        	 jp nz,mains_end
  1A08  3A9C60        	 ld A,(obj_hp+3)
  1A0B  B7            	 or A
  1A0C  C2691F        	 jp nz,mains_end
  1A0F  3E01          	 ld A,1
  1A11  DD7730        	 ld (IX+48),A
  1A14  C3691F        	 jp mains_end
  1A17                	floor45t:
  1A17  D9            	 exx
  1A18  3A0562        	 ld A,(posion)
  1A1B  FE04          	 cp 4
  1A1D  CA691F        	 jp z,mains_end
  1A20  CD4B21        	 call cross_ck_a
  1A23  D2261D        	 jp nc,box_action_end
  1A26  3E04          	 ld A,4
  1A28  320562        	 ld (posion),A
  1A2B  3E03          	 ld A,02h+1
  1A2D  CD4103        	 call itemprint
  1A30  C3691F        	 jp mains_end
                      	 
                      	
  1A33                	floor46:
  1A33  D9            	 exx
  1A34  E5            	 push HL
  1A35  2600          	 ld H,0
  1A37  2E1E          	 ld L,30
  1A39  ED5BF661      	 ld DE,(gil_xy)
  1A3D  7A            	 ld A,D
  1A3E  E63F          	 and 00111111b
  1A40  57            	 ld D,A
  1A41  D5            	 push DE
  1A42  B7            	 or A
  1A43  ED52          	 sbc HL,DE
  1A45  2004          	 jr nz,floor46a
  1A47  DDCB60C6      	 set 0,(IX+96)
  1A4B                	floor46a:
  1A4B  262A          	 ld H,42
  1A4D  2E1E          	 ld L,30
  1A4F  D1            	 pop DE
  1A50  D5            	 push DE
  1A51  B7            	 or A
  1A52  ED52          	 sbc HL,DE
  1A54  2004          	 jr nz,floor46b
  1A56  DDCB60CE      	 set 1,(IX+96)
  1A5A                	floor46b:
  1A5A  262A          	 ld H,42
  1A5C  2E87          	 ld L,135
  1A5E  D1            	 pop DE
  1A5F  D5            	 push DE
  1A60  B7            	 or A
  1A61  ED52          	 sbc HL,DE
  1A63  2004          	 jr nz,floor46c
  1A65  DDCB60D6      	 set 2,(IX+96)
  1A69                	floor46c:
  1A69  2600          	 ld H,0
  1A6B  2E87          	 ld L,135
  1A6D  D1            	 pop DE
  1A6E  B7            	 or A
  1A6F  ED52          	 sbc HL,DE
  1A71  2004          	 jr nz,floor46d
  1A73  DDCB60DE      	 set 3,(IX+96)
  1A77                	floor46d:
  1A77  E1            	 pop HL
  1A78  DD7E60        	 ld A,(IX+96)
  1A7B  FE0F          	 cp 0fh
  1A7D  C2691F        	 jp nz,mains_end
  1A80  DD7730        	 ld (IX+48),A
  1A83  C3691F        	 jp mains_end
  1A86                	floor46t:
  1A86  D9            	 exx
  1A87  3A0762        	 ld A,(nec)
  1A8A  FE02          	 cp 2
  1A8C  C2691F        	 jp nz,mains_end
  1A8F  FE03          	 cp 3
  1A91  CA691F        	 jp z,mains_end
  1A94  CD4B21        	 call cross_ck_a
  1A97  D2261D        	 jp nc,box_action_end
  1A9A  3E03          	 ld A,3
  1A9C  320762        	 ld (nec),A
  1A9F  3E09          	 ld A,08h+1
  1AA1  CD4103        	 call itemprint
  1AA4  C3691F        	 jp mains_end
                      	
  1AA7                	floor47:
  1AA7  D9            	 exx
  1AA8  3A9960        	 ld A,(obj_hp)
  1AAB  B7            	 or A
  1AAC  C2691F        	 jp nz,mains_end
  1AAF  3E01          	 ld A,1
  1AB1  DD7730        	 ld (IX+48),A
  1AB4  C3691F        	 jp mains_end
  1AB7                	floor47t
  1AB7  D9            	 exx
  1AB8  3A0562        	 ld A,(posion)
  1ABB  FE03          	 cp 3
  1ABD  CA691F        	 jp z,mains_end
  1AC0  CD4B21        	 call cross_ck_a
  1AC3  D2261D        	 jp nc,box_action_end
  1AC6  3E03          	 ld A,3
  1AC8  320562        	 ld (posion),A
  1ACB  3E03          	 ld A,2h+1
  1ACD  CD4103        	 call itemprint
  1AD0  C3691F        	 jp mains_end
                      	
  1AD3                	floor48:
  1AD3  D9            	 exx
  1AD4  E5            	 push HL
  1AD5  2600          	 ld H,0
  1AD7  2E1E          	 ld L,30
  1AD9  ED5BF661      	 ld DE,(gil_xy)
  1ADD  7A            	 ld A,D
  1ADE  E63F          	 and 00111111b
  1AE0  57            	 ld D,A
  1AE1  D5            	 push DE
  1AE2  B7            	 or A
  1AE3  ED52          	 sbc HL,DE
  1AE5  2004          	 jr nz,floor48a
  1AE7  DDCB60C6      	 set 0,(IX+96)
  1AEB                	floor48a:
  1AEB  262A          	 ld H,42
  1AED  2E1E          	 ld L,30
  1AEF  D1            	 pop DE
  1AF0  D5            	 push DE
  1AF1  B7            	 or A
  1AF2  ED52          	 sbc HL,DE
  1AF4  2004          	 jr nz,floor48b
  1AF6  DDCB60CE      	 set 1,(IX+96)
  1AFA                	floor48b:
  1AFA  262A          	 ld H,42
  1AFC  2E87          	 ld L,135
  1AFE  D1            	 pop DE
  1AFF  D5            	 push DE
  1B00  B7            	 or A
  1B01  ED52          	 sbc HL,DE
  1B03  2004          	 jr nz,floor48c
  1B05  DDCB60D6      	 set 2,(IX+96)
  1B09                	floor48c:
  1B09  2600          	 ld H,0
  1B0B  2E87          	 ld L,135
  1B0D  D1            	 pop DE
  1B0E  B7            	 or A
  1B0F  ED52          	 sbc HL,DE
  1B11  2004          	 jr nz,floor48d
  1B13  DDCB60DE      	 set 3,(IX+96)
  1B17                	floor48d:
  1B17  E1            	 pop HL
  1B18  DD7E60        	 ld A,(IX+96)
  1B1B  FE0F          	 cp 0fh
  1B1D  C2691F        	 jp nz,mains_end
  1B20  DD7730        	 ld (IX+48),A
  1B23  C3691F        	 jp mains_end
  1B26                	floor48t:
  1B26  D9            	 exx
  1B27  3A0162        	 ld A,(rod)
  1B2A  FE01          	 cp 1
  1B2C  C2691F        	 jp nz,mains_end
  1B2F  FE02          	 cp 2
  1B31  CA691F        	 jp z,mains_end
  1B34  CD4B21        	 call cross_ck_a
  1B37  D2261D        	 jp nc,box_action_end
  1B3A  3E02          	 ld A,2
  1B3C  320162        	 ld (rod),A
  1B3F  3E0D          	 ld A,0ch+1
  1B41  CD4103        	 call itemprint
  1B44  C3691F        	 jp mains_end
                      	
  1B47                	floor49:
  1B47  D9            	 exx
  1B48  E5            	 push HL
  1B49  219960        	 ld HL,obj_hp
  1B4C  7E            	 ld A,(HL)
  1B4D  B7            	 or A
  1B4E  C25D1B        	 jp nz,floor49l
  1B51  E1            	 pop HL
  1B52  3E01          	 ld A,1
  1B54  328F2D        	 ld (dammy+5),A
  1B57  DD7730        	 ld (IX+48),A
  1B5A  C3691F        	 jp mains_end
  1B5D                	floor49l:
  1B5D  E1            	 pop HL
  1B5E  C3691F        	 jp mains_end
  1B61                	floor49t:
  1B61  D9            	 exx
  1B62  3A8E2D        	 ld A,(dammy+4)
  1B65  B7            	 or A
  1B66  CA691F        	 jp z,mains_end
                      	
  1B69  3A0562        	 ld A,(posion)
  1B6C  FE02          	 cp 2
  1B6E  CA691F        	 jp z,mains_end
  1B71  3A0562        	 ld A,(posion)
  1B74  FE03          	 cp 3
  1B76  C2261D        	 jp nz,box_action_end
  1B79  CD4B21        	 call cross_ck_a
  1B7C  D2261D        	 jp nc,box_action_end
  1B7F  3E02          	 ld A,2
  1B81  320562        	 ld (posion),A
  1B84  3E10          	 ld A,16
  1B86  32EA61        	 ld (gil_hp),A
  1B89  3E03          	 ld A,2h+1
  1B8B  CD4103        	 call itemprint
  1B8E  C3691F        	 jp mains_end
                      	
  1B91                	floor50:
  1B91  D9            	 exx
  1B92  0600          	 ld B,0
  1B94  3AF761        	 ld A,(gil_xy+1)
  1B97  E63F          	 and 00111111b
  1B99  F5            	 push AF
  1B9A  B8            	 cp B
  1B9B  2004          	 jr nz,floor50a
  1B9D  DDCB60C6      	 set 0,(IX+96)
  1BA1                	floor50a:
  1BA1  062A          	 ld B,42
  1BA3  F1            	 pop AF
  1BA4  B8            	 cp B
  1BA5  2004          	 jr nz,floor50b
  1BA7  DDCB60CE      	 set 1,(IX+96)
  1BAB                	floor50b:
  1BAB  061E          	 ld B,30
  1BAD  3AF661        	 ld A,(gil_xy)
  1BB0  F5            	 push AF
  1BB1  B8            	 cp B
  1BB2  2004          	 jr nz,floor50c
  1BB4  DDCB60D6      	 set 2,(IX+96)
  1BB8                	floor50c:
  1BB8  0687          	 ld B,135
  1BBA  F1            	 pop AF
  1BBB  B8            	 cp B
  1BBC  2004          	 jr nz,floor50d
  1BBE  DDCB60DE      	 set 3,(IX+96)
  1BC2                	floor50d:
  1BC2  DD7E60        	 ld A,(IX+96)
  1BC5  FE0F          	 cp 0fh
  1BC7  C2691F        	 jp nz,mains_end
  1BCA  DD7730        	 ld (IX+48),A
  1BCD  C3691F        	 jp mains_end
  1BD0                	floor50t
  1BD0  D9            	 exx
  1BD1  3A0562        	 ld A,(posion)
  1BD4  FE01          	 cp 1
  1BD6  CA691F        	 jp z,mains_end
  1BD9  CD4B21        	 call cross_ck_a
  1BDC  D2261D        	 jp nc,box_action_end
  1BDF  3E01          	 ld A,1
  1BE1  320562        	 ld (posion),A
  1BE4  3E40          	 ld A,64
  1BE6  32EA61        	 ld (gil_hp),A
  1BE9  3E03          	 ld A,2h+1
  1BEB  CD4103        	 call itemprint
  1BEE  C3691F        	 jp mains_end
                      	 
  1BF1                	floor51:
  1BF1  D9            	 exx
  1BF2  3AE961        	 ld A,(gil_button)
  1BF5  E6C3          	 and 11000011b
  1BF7  B7            	 or A
  1BF8  2811          	 jr z,floor51e
  1BFA  DD3460        	 inc (IX+96)
  1BFD  DD7E60        	 ld A,(IX+96)
  1C00  FE7F          	 cp 127
  1C02  C2691F        	 jp nz,mains_end
  1C05  DD7730        	 ld (IX+48),A
  1C08  C3691F        	 jp mains_end
  1C0B                	floor51e:
  1C0B  AF            	 xor A
  1C0C  DD7760        	 ld (IX+96),A
  1C0F  C3691F        	 jp mains_end
  1C12                	floor51t:
  1C12  D9            	 exx
  1C13  3A0462        	 ld A,(brns)
  1C16  B7            	 or A
  1C17  C2691F        	 jp nz,mains_end
  1C1A  CD4B21        	 call cross_ck_a
  1C1D  D2261D        	 jp nc,box_action_end
  1C20  3E01          	 ld A,1
  1C22  320462        	 ld (brns),A
  1C25  3E0B          	 ld A,0ah+1
  1C27  CD4103        	 call itemprint
  1C2A  C3691F        	 jp mains_end
                      	
  1C2D                	floor52:
  1C2D  D9            	 exx
  1C2E  1808          	 jr f52t
  1C30  3A932D        	 ld A,(dammy+9)
  1C33  FE04          	 cp 4
  1C35  DA691F        	 jp c,mains_end
  1C38                	f52t:
  1C38  3E01          	 ld A,1
  1C3A  DD7730        	 ld (IX+48),A
  1C3D  C3691F        	 jp mains_end
  1C40                	floor52t:
  1C40  D9            	 exx
  1C41  3AFD61        	 ld A,(armor)
  1C44  FE01          	 cp 1
  1C46  C2691F        	 jp nz,mains_end
  1C49  CD4B21        	 call cross_ck_a
  1C4C  D2261D        	 jp nc,box_action_end
  1C4F  3A0462        	 ld A,(brns)
  1C52  B7            	 or A
  1C53  2007          	 jr nz,floor52tt
  1C55                	floor52ti:
  1C55  3E03          	 ld A,3
  1C57  32FD61        	 ld (armor),A
  1C5A  1805          	 jr floor52tl
  1C5C                	floor52tt: 
  1C5C  3E02          	 ld A,2
  1C5E  32FD61        	 ld (armor),A
  1C61                	floor52tl:
  1C61  AF            	 xor A
  1C62  320462        	 ld (brns),A
  1C65  11071C        	 ld DE,1c07h
  1C68  CD3F25        	 call grp_del
  1C6B  3E06          	 ld A,5h+1
  1C6D  CD4103        	 call itemprint
  1C70  C3691F        	 jp mains_end
  1C73                	floor53:
  1C73                	floor53t:
  1C73                	floor54:
  1C73                	floor54t:
  1C73                	floor55:
  1C73                	floor55t:
  1C73                	floor56:
  1C73                	floor56t:
  1C73  D9            	 exx
  1C74  C3691F        	 jp mains_end
                      	 
  1C77                	floor57:
  1C77  D9            	 exx
  1C78  3A942D        	 ld A,(dammy+10)
  1C7B  B7            	 or A
  1C7C  CA691F        	 jp z,mains_end
  1C7F  3A9960        	 ld A,(obj_hp)
  1C82  B7            	 or A
  1C83  C2691F        	 jp nz,mains_end
  1C86  3A9A60        	 ld A,(obj_hp+1)
  1C89  B7            	 or A
  1C8A  C2691F        	 jp nz,mains_end
  1C8D  3E01          	 ld A,1
  1C8F  DD7730        	 ld (IX+48),A
  1C92  C3691F        	 jp mains_end
  1C95                	floor57t
  1C95  D9            	 exx
  1C96  3A0862        	 ld A,(meis)
  1C99  B7            	 or A
  1C9A  C2691F        	 jp nz,mains_end
  1C9D  CD4B21        	 call cross_ck_a
  1CA0  D2261D        	 jp nc,box_action_end
  1CA3  3E01          	 ld A,1
  1CA5  320862        	 ld (meis),A
  1CA8  3E0C          	 ld A,0bh+1
  1CAA  CD4103        	 call itemprint
  1CAD  C3691F        	 jp mains_end
                      	 
  1CB0                	floor58:
  1CB0  D9            	 exx
  1CB1  E5            	 push HL
  1CB2  114FA3        	 ld DE,0a34fh
  1CB5  2AF661        	 ld HL,(gil_xy)
  1CB8  B7            	 or A
  1CB9  ED52          	 sbc HL,DE
  1CBB  21952D        	 ld HL,dammy+11
  1CBE  2002          	 jr nz,floor58a
  1CC0  CBC6          	 set 0,(HL)
  1CC2                	floor58a:
  1CC2  CB46          	 bit 0,(HL)
  1CC4  CAFA1C        	 jp z,floor58e
                      	 
                      	 
  1CC7  114F87        	 ld DE,874fh
  1CCA  2AF661        	 ld HL,(gil_xy)
  1CCD  B7            	 or A
  1CCE  ED52          	 sbc HL,DE
  1CD0  21952D        	 ld HL,dammy+11
  1CD3  2002          	 jr nz,floor58b
  1CD5  CBCE          	 set 1,(HL)
  1CD7                	floor58b:
  1CD7  CB4E          	 bit 1,(HL)
  1CD9  CAFA1C        	 jp z,floor58e
                      	
                      	
  1CDC  114F95        	 ld DE,954fh
  1CDF  2AF661        	 ld HL,(gil_xy)
  1CE2  B7            	 or A
  1CE3  ED52          	 sbc HL,DE
  1CE5  21952D        	 ld HL,dammy+11
  1CE8  2002          	 jr nz,floor58c
  1CEA  CBD6          	 set 2,(HL)
  1CEC                	floor58c:
  1CEC  CB56          	 bit 2,(HL)
  1CEE  CAFA1C        	 jp z,floor58e
  1CF1  E1            	 pop HL
  1CF2  3E01          	 ld A,1
  1CF4  DD7730        	 ld (IX+48),A
  1CF7  C3691F        	 jp mains_end
  1CFA                	floor58e:
  1CFA  E1            	 pop HL
  1CFB  C3691F        	 jp mains_end
  1CFE                	floor58t
  1CFE  D9            	 exx
  1CFF  3A0162        	 ld A,(rod)
  1D02  FE02          	 cp 2
  1D04  C2691F        	 jp nz,mains_end
  1D07  3A0162        	 ld A,(rod)
  1D0A  FE03          	 cp 3
  1D0C  CA691F        	 jp z,mains_end
  1D0F  CD4B21        	 call cross_ck_a
  1D12  D2261D        	 jp nc,box_action_end
  1D15  3E03          	 ld A,3
  1D17  320162        	 ld (rod),A
  1D1A  3E0D          	 ld A,0ch+1
  1D1C  CD4103        	 call itemprint
  1D1F  C3691F        	 jp mains_end
  1D22                	floor59:
  1D22                	floor59t
  1D22                	floor60:
  1D22                	floor60t
  1D22  D9            	 exx
  1D23  C3691F        	 jp mains_end
                      	
                      	
                      	
                      	
                      	
  1D26                	box_action_end:
  1D26  11362D        	 ld DE,graph_box
  1D29  CDE406        	 call Egraph
  1D2C  C3691F        	 jp mains_end
                      	
                      	
                      	;*************************door actions************************
  1D2F                	door_action:
  1D2F  3A0662        	 ld A,(key)
  1D32  B7            	 or A
  1D33  2002          	 jr nz,door_action_1
  1D35  1812          	 jr door_action_end
  1D37                	door_action_1:
  1D37  11302D        	 ld DE,graph_door+6
  1D3A  CDE406        	 call Egraph
  1D3D  CD4B21        	 call cross_ck_a
  1D40  CDBC0D        	 call xy_ck
  1D43  CA621D        	 jp z,next_floor
  1D46  C3691F        	 jp mains_end
  1D49                	door_action_end:
  1D49  CD4B21        	 call cross_ck_a
  1D4C  300B          	 jr nc,door_action_end2
  1D4E  3A8F2D        	 ld A,(dammy+5)
  1D51  B7            	 or A
  1D52  2005          	 jr nz,door_action_end2
  1D54  3E01          	 ld A,1
  1D56  328E2D        	 ld (dammy+4),A
  1D59                	door_action_end2:
  1D59  112A2D        	 ld DE,graph_door
  1D5C  CDE406        	 call Egraph
  1D5F  C3691F        	 jp mains_end
                      	
  1D62                	next_floor:
  1D62  AF            	 xor A
  1D63  320662        	 ld (key),A
  1D66  CD4103        	 call itemprint
  1D69  CD4020        	 call grp_o
                      	 
  1D6C  110601        	 ld DE,0106h
  1D6F  060B          	 ld B,11
  1D71  218F1D        	 ld HL,next_floorms
  1D74  CDF1BF        	 call msp
  1D77  110802        	 ld DE,0208h
  1D7A  060A          	 ld B,10
  1D7C  219A1D        	 ld HL,next_floorms+11
  1D7F  CDF1BF        	 call msp
  1D82  CD8F1F        	 call tim255
  1D85  CDFDBC        	 call kwait
  1D88  216260        	 ld HL,floor
  1D8B  34            	 inc (HL)
  1D8C  C38301        	 jp Stating_before
  1D8F                	next_floorms:
  1D8F  464C4F4F522043	 db "FLOOR CLEAR"
  1D9A  4E45585420464C	 db "NEXT FLOOR"
                      	
                      	;*************************gil actions*************************
  1DA4                	gil_action:
  1DA4  E5            	 push HL
                      	
                      	
  1DA5  3AF661        	 ld A,(gil_xy)
  1DA8  5F            	 ld E,A
  1DA9  3AF761        	 ld A,(gil_xy+1)
  1DAC  57            	 ld D,A
  1DAD  CD3F25        	 call grp_del
                      	; call kwait
                      	
                      	;*************************key scanf**************************
  1DB0  CD6620        	 call keysc
  1DB3  32E961        	 ld (gil_button),A
  1DB6  08            	 ex AF,AF'
                      	
                      	;************************sword back***************************
  1DB7  3AED61        	 ld A,(gil_st2)
  1DBA  B7            	 or A
  1DBB  C2131F        	 jp nz,gil_sword_f2
                      	;***********************sword atack****************************
  1DBE                	gil_action_l_b:
  1DBE  08            	 ex AF,AF'
  1DBF  CB6F          	 bit 5,A
  1DC1  C2B21E        	 jp nz,gil_sword_f
  1DC4  CDE91E        	 call gil_sword_reset
                      	
  1DC7  215C2B        	 ld HL,graph_gil_ulf
  1DCA  22841E        	 ld (gil_action_end-2),HL
                      	;************************urdl move*****************************
  1DCD                	gil_action_l:
  1DCD  08            	 ex AF,AF'
  1DCE  3AFB61        	 ld A,(boot)
  1DD1  B7            	 or A
  1DD2  200B          	 jr nz,gil_action_l2
  1DD4  3AF061        	 ld A,(gil_bt)
  1DD7  EEFF          	 xor 0ffh
  1DD9  32F061        	 ld (gil_bt),A
  1DDC  CA831E        	 jp z,gil_action_end-3
  1DDF                	gil_action_l2:
  1DDF  08            	 ex AF,AF'
  1DE0  CB47          	 bit 0,A
  1DE2  200F          	 jr nz,gil_left
  1DE4  CB4F          	 bit 1,A
  1DE6  202D          	 jr nz,gil_right
  1DE8  CB77          	 bit 6,A
  1DEA  204C          	 jr nz,gil_down
  1DEC  CB7F          	 bit 7,A
  1DEE  206C          	 jr nz,gil_up
                      	;*****************************noting************************
  1DF0  C3831E        	 jp gil_action_end-3
                      	 ;************************move farse*************************
  1DF3                	gil_left:
  1DF3  3AF761        	 ld A,(gil_xy+1);y
  1DF6  E63F          	 and 00111111b
  1DF8  CA021E        	 jp z,gil_left_l
  1DFB                	gil_left_s:
  1DFB  D607          	 sub 7
  1DFD  DA9F1E        	 jp c,direction_p
  1E00  20F9          	 jr nz,gil_left_s
  1E02                	gil_left_l:
  1E02  3EC0          	 ld A,11000000b
  1E04  21F761        	 ld HL,gil_xy+1
  1E07  B6            	 or (HL)
  1E08  77            	 ld (HL),A
  1E09  2B            	 dec HL;ld HL,gil_xy
  1E0A  CD8421        	 call wall_ck
  1E0D  B7            	 or A;
  1E0E  C2831E        	 jp nz,gil_action_end-3
                      	
                      	; ld HL,gil_xy
  1E11  35            	 dec (HL)
  1E12  C37C1E        	 jp gil_walk
                      	
  1E15                	gil_right:
  1E15  3AF761        	 ld A,(gil_xy+1);y
  1E18  E63F          	 and 00111111b
  1E1A  CA241E        	 jp z,gil_right_l
  1E1D                	gil_right_s:
  1E1D  D607          	 sub 7
  1E1F  DA9F1E        	 jp c,direction_p
  1E22  20F9          	 jr nz,gil_right_s
  1E24                	gil_right_l:
  1E24  3E3F          	 ld A,00111111b
  1E26  21F761        	 ld HL,gil_xy+1
  1E29  A6            	 and (HL)
  1E2A  77            	 ld (HL),A
  1E2B  CBF6          	 set 6,(HL)
  1E2D  2B            	 dec HL;ld HL,gil_xy
  1E2E  CD8421        	 call wall_ck
  1E31  B7            	 or A;
  1E32  C2831E        	 jp nz,gil_action_end-3
                      	
                      	; ld HL,gil_xy
  1E35  34            	 inc (HL)
  1E36  1844          	 jr gil_walk
                      	
  1E38                	gil_down:
  1E38  3AF661        	 ld A,(gil_xy);x
  1E3B  D61E          	 sub 30
  1E3D  CA471E        	 jp z,gil_down_l
  1E40                	gil_down_s:
  1E40  D607          	 sub 7
  1E42  DA9F1E        	 jp c,direction_p
  1E45  20F9          	 jr nz,gil_down_s
  1E47                	gil_down_l:
  1E47  3E3F          	 ld A,00111111b
  1E49  21F761        	 ld HL,gil_xy+1
  1E4C  A6            	 and (HL)
  1E4D  77            	 ld (HL),A
  1E4E  CBFE          	 set 7,(HL)
  1E50  2B            	 dec HL;ld HL,gil_xy
  1E51  CD8421        	 call wall_ck
  1E54  B7            	 or A;
  1E55  C2831E        	 jp nz,gil_action_end-3
                      	
                      	; ld HL,gil_xy
  1E58  23            	 inc HL
  1E59  34            	 inc (HL)
  1E5A  1820          	 jr gil_walk
                      	
  1E5C                	gil_up:
  1E5C  3AF661        	 ld A,(gil_xy);x
  1E5F  D61E          	 sub 30
  1E61  CA6B1E        	 jp z,gil_up_l
  1E64                	gil_up_s:
  1E64  D607          	 sub 7
  1E66  DA9F1E        	 jp c,direction_p
  1E69  20F9          	 jr nz,gil_up_s
  1E6B                	gil_up_l:
  1E6B  3E3F          	 ld A,00111111b
  1E6D  21F761        	 ld HL,gil_xy+1
  1E70  A6            	 and (HL)
  1E71  77            	 ld (HL),A
  1E72  2B            	 dec HL;ld HL,gil_xy
  1E73  CD8421        	 call wall_ck
  1E76  B7            	 or A;
  1E77  C2831E        	 jp nz,gil_action_end-3
                      	
                      	; ld HL,gil_xy
  1E7A  23            	 inc HL
  1E7B  35            	 dec (HL)
                      	; jr gil_walk
                      	
                      	
  1E7C                	gil_walk:
  1E7C  21EC61        	 ld HL,gil_st1
  1E7F  3EFF          	 ld A,0ffh
  1E81  AE            	 xor (HL)
  1E82  77            	 ld (HL),A
                      	
  1E83  215C2B        	 ld HL,graph_gil_ulf
  1E86                	gil_action_end:
  1E86  3AEC61        	 ld A,(gil_st1)
  1E89  3C            	 inc A
  1E8A  111800        	 ld DE,24
  1E8D  CDBA1F        	 call xsan
  1E90                	gil_action_end_l:
  1E90  3AF661        	 ld A,(gil_xy)
  1E93  5F            	 ld E,A
  1E94  3AF761        	 ld A,(gil_xy+1)
  1E97  57            	 ld D,A
  1E98  CDB324        	 call grp_set
  1E9B  E1            	 pop HL
  1E9C  C3691F        	 jp mains_end
                      	
  1E9F                	direction_p:
  1E9F  3AF761        	 ld A,(gil_xy+1)
  1EA2  E6C0          	 and 11000000b
  1EA4  CA6B1E        	 jp z,gil_up_l
  1EA7  FE80          	 cp 80h
  1EA9  DA241E        	 jp c,gil_right_l
  1EAC  CA471E        	 jp z,gil_down_l
  1EAF  C3F31D        	 jp gil_left
                      	
  1EB2                	gil_sword_f:;key_action
  1EB2  08            	 ex AF,AF'
  1EB3  B7            	 or A
  1EB4  C2DE1E        	 jp nz,gil_sword_set 
                      	;************************sword atack***************************
  1EB7  3AFE61        	 ld A,(gnt)
  1EBA  FE01          	 cp 1
  1EBC  380D          	 jr c,gnt_back_1
  1EBE  280B          	 jr z,gnt_back_1
  1EC0  FE03          	 cp 3
  1EC2  3803          	 jr c,gnt_back_2
  1EC4  AF            	 xor A
  1EC5  1806          	 jr gnt_back_e
  1EC7                	gnt_back_2:
  1EC7  3E04          	 ld A,4
  1EC9  1802          	 jr gnt_back_e
  1ECB                	gnt_back_1:
  1ECB  3E0A          	 ld A,10		;back flame
  1ECD                	gnt_back_e:
  1ECD  32ED61        	 ld (gil_st2),A
                      	;***********************matk action****************************
  1ED0  CD3A22        	 call matk_action_gil
                      	;*************************************************************
  1ED3  118C2B        	 ld DE,graph_gilsw_ulf	;gil_sw
  1ED6  ED53841E      	 ld (gil_action_end-2),DE
  1EDA  08            	 ex AF,AF'
  1EDB  C3CD1D        	 jp gil_action_l
  1EDE                	gil_sword_set:
  1EDE  11BC2B        	 ld DE,graph_gilsword_ulf	;gil_swd
  1EE1  ED53841E      	 ld (gil_action_end-2),DE
  1EE5                	gil_sword_set_l:
  1EE5  08            	 ex AF,AF'
  1EE6  C3CD1D        	 jp gil_action_l
  1EE9                	gil_sword_reset:
  1EE9  08            	 ex AF,AF'
  1EEA  3AED61        	 ld A,(gil_st2)
  1EED  47            	 ld B,A
  1EEE  08            	 ex AF,AF'
  1EEF  CB78          	 bit 7,B
  1EF1  C8            	 ret z
  1EF2  08            	 ex AF,AF'
  1EF3  E1            	 pop HL
                      	;************************sword back***************************
  1EF4  3AFE61        	 ld A,(gnt)
  1EF7  FE01          	 cp 1
  1EF9  380D          	 jr c,gnt_backb_1
  1EFB  280B          	 jr z,gnt_backb_1
  1EFD  FE03          	 cp 3
  1EFF  3803          	 jr c,gnt_backb_2
  1F01  AF            	 xor A
  1F02  1806          	 jr gnt_backb_e
  1F04                	gnt_backb_2:
  1F04  3E04          	 ld A,4
  1F06  1802          	 jr gnt_backb_e
  1F08                	gnt_backb_1:
  1F08  3E0A          	 ld A,10		;back flame
  1F0A                	gnt_backb_e:
  1F0A  F680          	 or 10000000b
  1F0C  32ED61        	 ld (gil_st2),A
                      	 
  1F0F  08            	 ex AF,AF'
  1F10  C3CD1D        	 jp gil_action_l
  1F13                	gil_sword_f2:;auto_action
  1F13  FE80          	 cp 80h
  1F15  CABE1D        	 jp z,gil_action_l_b
  1F18  E680          	 and 10000000b
  1F1A  C2321F        	 jp nz,gil_sword_f_decB;A=1nnnnnnnb
  1F1D                	gil_sword_f_decA:;A=0nnnnnnnb
  1F1D  21ED61        	 ld HL,gil_st2
  1F20  7E            	 ld A,(HL)
  1F21  3D            	 dec A
  1F22  77            	 ld (HL),A
  1F23  118C2B        	 ld DE,graph_gilsw_ulf	;gil_sw
  1F26  ED53841E      	 ld (gil_action_end-2),DE
  1F2A  C2461F        	 jp nz,gil_action_l_r
  1F2D  CBFE          	 set 7,(HL)
  1F2F  C3461F        	 jp gil_action_l_r
  1F32                	gil_sword_f_decB:;A=1nnnnnnnb
  1F32  21ED61        	 ld HL,gil_st2
  1F35  7E            	 ld A,(HL)
  1F36  3D            	 dec A
  1F37  77            	 ld (HL),A
  1F38  E67F          	 and 01111111b
  1F3A  118C2B        	 ld DE,graph_gilsw_ulf	;gil_sw
  1F3D  ED53841E      	 ld (gil_action_end-2),DE
  1F41  C2461F        	 jp nz,gil_action_l_r
  1F44  CBBE          	 res 7,(HL)
  1F46                	gil_action_l_r:
  1F46  08            	 ex AF,AF'
  1F47  C3CD1D        	 jp gil_action_l
                      	
  1F4A                	gil_zapping:
  1F4A                	gil_killing:
  1F4A  CD4020        	 call grp_o
  1F4D  215E1F        	 ld HL,killingm
  1F50  110000        	 ld DE,0
  1F53  060B          	 ld B,11
  1F55  CDF1BF        	 call msp
  1F58  CDFDBC        	 call 48381
  1F5B  C38F04        	 jp stating_rec
                      	
                      	
                      	
  1F5E                	killingm:
  1F5E  6265656E206B69	 db "been killed"
                      	
                      	
  1F69                	mains_end:
                      	; ld A,(IX+48)
                      	; ld (0f0h),A
                      	; ld (0f2h),IX
  1F69  3A3005        	 ld A,(count+1)
  1F6C  3D            	 dec A
  1F6D  323005        	 ld (count+1),A
  1F70  23            	 inc HL
  1F71  23            	 inc HL
  1F72  DD23          	 inc IX
  1F74  FD23          	 inc IY
  1F76  D9            	 exx
  1F77  CD6620        	 call keysc
  1F7A  CB57          	 bit 2,A
  1F7C  C2831F        	 jp nz,retp
  1F7F  D9            	 exx
  1F80  C32F05        	 jp mains
                      	
                      	
  1F83                	retP:
  1F83  310000        	 ld SP,0
  1F86  C9            	 ret
                      	
                      	
                      	
                      	
                      	
                      	
                      	
                      	;*********************************************************
  1F87                	TIMBTL:
  1F87  3E32          	 LD A,50
  1F89  1806          	 JR TIMER
  1F8B                	TIM30:
  1F8B  3E25          	 LD A,37
  1F8D  1802          	 JR TIMER
  1F8F                	TIM255:
  1F8F  3EFF          	 LD A,255
  1F91                	TIMER:
  1F91  010000        	 LD BC,0
  1F94  03            	 INC BC;LOOP
  1F95  000000000000  	 DB 0,0,0,0,0,0
  1F9B  A8            	 XOR B
  1F9C  C8            	 RET Z
  1F9D  18F5          	 JR TIMER+3
  1F9F                	RAND:;A
  1F9F  E5            	 PUSH HL
  1FA0  D5            	 push DE
  1FA1  210000        	 LD HL,0
  1FA4  54            	 LD D,H
  1FA5  5D            	 LD E,L
  1FA6  29            	 ADD HL,HL
  1FA7  29            	 ADD HL,HL
  1FA8  19            	 ADD HL,DE
  1FA9  11475D        	 LD DE,5D47H
  1FAC  19            	 ADD HL,DE
  1FAD  22A21F        	 LD (RAND+3),HL
  1FB0  7C            	 LD A,H
  1FB1  D1            	 pop DE
  1FB2  E1            	 POP HL
  1FB3  C9            	 RET
  1FB4                	RAND4:
                      	; ld A,R
                      	; rra
                      	; rra
                      	; rra
                      	; and 11000000b
                      	; ret
  1FB4  CD9F1F        	 CALL RAND
  1FB7  E6C0          	 AND 11000000b
  1FB9  C9            	 RET
  1FBA                	XSAN:
  1FBA  B7            	 OR A
  1FBB  C8            	 RET Z
  1FBC                	XSANL:
  1FBC  19            	 ADD HL,DE
  1FBD  3D            	 DEC A
  1FBE  20FC          	 JR NZ,XSANL
  1FC0  C9            	 RET
  1FC1                	NMEMRY:
  1FC1  0000000000    	 DB 0,0,0,0,0
  1FC6                	ASCN:;HL=l(2byte)DE
  1FC6  11C11F        	 LD DE,NMEMRY
  1FC9  011027        	 LD BC,10000
  1FCC  CD0020        	 CALL WARIS
  1FCF  01E803        	 LD BC,1000
  1FD2  CD0020        	 CALL WARIS
  1FD5  016400        	 LD BC,100
  1FD8  CD0020        	 CALL WARIS
  1FDB  010A00        	 LD BC,10
  1FDE  CD0020        	 CALL WARIS
  1FE1  7D            	 LD A,L
  1FE2  12            	 LD (DE),A
  1FE3  0605          	 LD B,5
  1FE5  11C11F        	 LD DE,NMEMRY
  1FE8                	ASCL:
  1FE8  1A            	 LD A,(DE)
  1FE9  FE00          	 CP 0
  1FEB  2802          	 JR Z,ASCL2
  1FED  1808          	 JR ASC2
  1FEF                	ASCL2:
  1FEF  13            	 INC DE
  1FF0  10F6          	 DJNZ ASCL
  1FF2  0601          	 LD B,1
  1FF4  11C51F        	 LD DE,NMEMRY+4
  1FF7                	ASC2:
  1FF7  1A            	 LD A,(DE)
  1FF8  0E30          	 LD C,30H
  1FFA  81            	 ADD A,C
  1FFB  12            	 LD (DE),A
  1FFC  13            	 INC DE
  1FFD  10F8          	 DJNZ ASC2
  1FFF  C9            	 RET
  2000                	WARIS:
  2000  AF            	 XOR A
                      	;WARI1:
  2001  ED42          	 SBC HL,BC
  2003  3803          	 JR C,WARI2
  2005  3C            	 INC A
  2006  18F9          	 JR WARIS+1
  2008                	WARI2:
  2008  09            	 ADD HL,BC
  2009  12            	 LD (DE),A
  200A  13            	 INC DE		;
  200B  C9            	 RET
  200C                	cls:
  200C  F5            	 push AF
  200D  D5            	 push DE
  200E  E5            	 push HL
  200F  C5            	 push BC
  2010  3E00          	 ld A,0
  2012  214026        	 ld HL,grapu_area
  2015  114126        	 ld DE,grapu_area+1
  2018  77            	 ld (HL),A
  2019  015F03        	 ld BC,144*6-1
  201C  EDB0          	 ldir
  201E  CD4020        	 call grp_o
  2021  C1            	 pop BC
  2022  E1            	 pop HL
  2023  D1            	 pop DE
  2024  F1            	 pop AF
  2025  C9            	 ret
                      	
  2026                	bls:
  2026  F5            	 push AF
  2027  D5            	 push DE
  2028  E5            	 push HL
  2029  C5            	 push BC
  202A  214026        	 LD HL,grapu_area
  202D  36FF          	 LD (HL),0FFH
  202F  114126        	 LD DE,grapu_area+1
  2032  015F03        	 LD BC,863
  2035  EDB0          	 LDIR
  2037  CD4020        	 CALL grp_o
  203A  D9            	 EXX
  203B  C1            	 pop BC
  203C  E1            	 pop HL
  203D  D1            	 pop DE
  203E  F1            	 pop AF
  203F  C9            	 RET
  2040                	grp_o:
  2040  3E06          	 ld A,6
  2042  110000        	 ld DE,0
  2045  214026        	 ld HL,grapu_area
  2048                	grp_o_l:
  2048  D5            	 push DE
  2049  F5            	 push AF
  204A  0690          	 ld B,144
  204C  CDD0BF        	 call grp
  204F  23            	 inc HL
  2050  F1            	 pop AF
  2051  D1            	 pop DE
  2052  14            	 inc D
  2053  3D            	 dec A
  2054  20F2          	 jr nz,grp_o_l
  2056  C9            	 ret
                      	
  2057                	grp_open:
  2057  0E06          	 ld C,6
  2059                	grp_open_l
  2059  C5            	 push BC
  205A  D5            	 push DE
  205B  CDD0BF        	 call grp
  205E  D1            	 pop DE
  205F  14            	 inc D
  2060  23            	 inc HL
  2061  C1            	 pop BC
  2062  0D            	 dec C
  2063  20F4          	 jr nz,grp_open_l
  2065  C9            	 ret
                      	
  2066                	keysc:
  2066  F3            	 di
  2067  AF            	 xor A
  2068  D311          	 out (11h),A
  206A  3E08          	 ld A,08h
  206C  D311          	 out (11h),A
  206E  CDAD8A        	 call 8aadh
  2071  DB10          	 in A,(10h)
  2073  E6E0          	 and 0e0h
  2075  47            	 ld B,A
  2076  AF            	 xor A
  2077  D311          	 out (11h),A
  2079  3E10          	 ld A,10h
  207B  D311          	 out (11h),A
  207D  CDAD8A        	 call 8aadh
  2080  DB10          	 in A,(10h)
  2082  E60F          	 and 0fh
  2084  B0            	 or B
  2085  FB            	 ei
  2086  C9            	 ret
                      	
                      	
                      	
  2087                	charReput:;HL=obj_xy++
  2087                	charReput_x:
  2087  7E            	 ld A,(HL);x
  2088  4F            	 ld C,A
  2089  D61E          	 sub 30
  208B  CAA320        	 jp z,charReput_y
  208E                	charReput_x_lp:
  208E  D607          	 sub 7
  2090  CAA320        	 jp z,charReput_y
  2093  30F9          	 jr nc,charReput_x_lp
  2095  FEFD          	 cp 0fch+1;cy=-4~-6 left
  2097  3804          	 jr c,charReput_x_1
  2099  ED44          	 neg;(right+)
  209B  1804          	 jr charReput_x_2
  209D                	charReput_x_1:
  209D  C607          	 add A,7
  209F  ED44          	 neg;(left-)
  20A1                	charReput_x_2:
  20A1  81            	 add A,C
  20A2  77            	 ld (HL),A
                      	
  20A3                	charReput_y:
  20A3  23            	 inc HL
  20A4  7E            	 ld A,(HL)
  20A5  2B            	 dec HL
  20A6  4F            	 ld C,A
  20A7  E63F          	 and 00111111b
  20A9  C8            	 ret z
  20AA                	charReput_y_lp:
  20AA  D607          	 sub 7
  20AC  C8            	 ret z
  20AD  30FB          	 jr nc,charReput_y_lp
  20AF  FEFD          	 cp 0fch+1;cy=-4~-6 up
  20B1  3804          	 jr c,charReput_y_1
  20B3  ED44          	 neg;(down+)
  20B5  1804          	 jr charReput_y_2
  20B7                	charReput_y_1:
  20B7  C607          	 add A,7
  20B9  ED44          	 neg;(up-)
  20BB                	charReput_y_2:
  20BB  81            	 add A,C
  20BC  23            	 inc HL
  20BD  77            	 ld (HL),A
  20BE  2B            	 dec HL
  20BF  C9            	 ret 
                      	
                      	
  20C0                	cross_ck_s:;HL=obj_xy+
  20C0  5E            	 ld E,(HL)
  20C1  23            	 inc HL
  20C2  56            	 ld D,(HL)
  20C3  2B            	 dec HL
  20C4  3AF761        	 ld A,(gil_xy+1)
  20C7  E6C0          	 and 11000000b
  20C9  CAF220        	 jp z,cross_ck_s_up
  20CC  FE80          	 cp 80h
  20CE  DA1021        	 jp c,cross_ck_s_right
  20D1  CA2D21        	 jp z,cross_ck_s_down
  20D4                	cross_ck_s_left:
  20D4  3AF761        	 ld A,(gil_xy+1)
  20D7  E63F          	 and 3fh
  20D9  92            	 sub D	;x-x1
  20DA  FE03          	 cp 3
  20DC  3805          	 jr c,cross_ck_s_left_2
  20DE  2F            	 cpl
  20DF  3C            	 inc A
  20E0  FE03          	 cp 3
  20E2  D0            	 ret nc
  20E3                	cross_ck_s_left_2:
  20E3  3AF661        	 ld A,(gil_xy)
  20E6  93            	 sub E
  20E7  FE06          	 cp 6		;when (a-d)>0 is that empty at left.
  20E9  D8            	 ret c
  20EA  2F            	 cpl
  20EB  3C            	 inc A
  20EC  FE03          	 cp 3
  20EE  DA4A1F        	 jp c,gil_killing
  20F1  C9            	 ret
  20F2                	cross_ck_s_up:
  20F2  3AF661        	 ld A,(gil_xy)
  20F5  93            	 sub E	;x-x1
  20F6  FE03          	 cp 3
  20F8  3805          	 jr c,cross_ck_s_up_2
  20FA  2F            	 cpl
  20FB  3C            	 inc A
  20FC  FE03          	 cp 3
  20FE  D0            	 ret nc
  20FF                	cross_ck_s_up_2:
  20FF  3AF761        	 ld A,(gil_xy+1)
  2102  E63F          	 and 3fh
  2104  92            	 sub D
  2105  FE03          	 cp 3		;when (a-d)>0 is that empty at up.
  2107  D8            	 ret c
  2108  2F            	 cpl
  2109  3C            	 inc A
  210A  FE03          	 cp 3
  210C  DA4A1F        	 jp c,gil_killing
  210F  C9            	 ret
  2110                	cross_ck_s_right:
  2110  3AF761        	 ld A,(gil_xy+1)
  2113  E63F          	 and 3fh
  2115  92            	 sub D	;x-x1
  2116  FE03          	 cp 3
  2118  3805          	 jr c,cross_ck_s_right_2
  211A  2F            	 cpl
  211B  3C            	 inc A
  211C  FE03          	 cp 3
  211E  C9            	 ret ;c or nc
  211F                	cross_ck_s_right_2:
  211F  3AF661        	 ld A,(gil_xy)
  2122  93            	 sub E
  2123  FE03          	 cp 3		;when (a-d)<0 is that empty at right.
  2125  DA4A1F        	 jp c,gil_killing
  2128  2F            	 cpl
  2129  3C            	 inc A
  212A  FE06          	 cp 6
  212C  C9            	 ret ;c or nc
  212D                	cross_ck_s_down:
  212D  3AF661        	 ld A,(gil_xy)
  2130  93            	 sub E	;x-x1
  2131  FE03          	 cp 3
  2133  3805          	 jr c,cross_ck_s_down_2
  2135  2F            	 cpl
  2136  3C            	 inc A
  2137  FE03          	 cp 3
  2139  D0            	 ret nc
  213A                	cross_ck_s_down_2:
  213A  3AF761        	 ld A,(gil_xy+1)
  213D  E63F          	 and 3fh
  213F  92            	 sub D
  2140  FE03          	 cp 3		;when (a-d)<0 is that empty at down.
  2142  DA4A1F        	 jp c,gil_killing
  2145  D8            	 ret c
  2146  2F            	 cpl
  2147  3C            	 inc A
  2148  FE06          	 cp 6
  214A  C9            	 ret
                      	
                      	
  214B                	cross_ck_a:;HL=obj_xy+
  214B  5E            	 ld E,(HL);x
  214C  23            	 inc HL
  214D  7E            	 ld A,(HL)
  214E  2B            	 dec HL
  214F  E63F          	 and 3fh
  2151  57            	 ld D,A	;y
                      	; ld HL,(gil_xy)
  2152  3AF661        	 ld A,(gil_xy)
  2155  93            	 sub E	;x-x1
  2156  FE03          	 cp 3
  2158  3805          	 jr c,cross_ck_al
  215A  2F            	 cpl
  215B  3C            	 inc A
  215C  FE03          	 cp 3
  215E  D0            	 ret nc
  215F                	cross_ck_al:
  215F  3AF761        	 ld A,(gil_xy+1)
  2162  E63F          	 and 3fh
  2164  92            	 sub D
  2165  FE03          	 cp 3
  2167  D8            	 ret c
  2168  2F            	 cpl
  2169  3C            	 inc A
  216A  FE03          	 cp 3
  216C  C9            	 ret ;nc or cy
                      	;cy is crosses.
                      	
  216D                	cha_kill:;HL=obj_xy++,IX=obj_hp
  216D  E5            	 push HL
  216E  5E            	 ld E,(HL)
  216F  23            	 inc HL
  2170  56            	 ld D,(HL)
  2171  CD3F25        	 call grp_del
  2174  218A2D        	 ld HL,dammy
  2177  7E            	 ld A,(HL)
  2178  3C            	 inc A
  2179  77            	 ld (HL),A
  217A  21972D        	 ld HL,dammy+13
  217D  34            	 inc (HL)
  217E  E1            	 pop HL
  217F  AF            	 xor A
  2180  DD7700        	 ld (IX),A
  2183  C9            	 ret
                      	
                      	
  2184                	wall_ck:
  2184  E5            	 push HL
  2185  CD8A21        	 call wall_cks
  2188  E1            	 pop HL
  2189  C9            	 ret
                      	
  218A                	wall_cks:;HL,obj_xy+;non zero=don't pass, zero=pass and A=0, cy=not block
  218A  E5            	 push HL
                      	;HL=(y,x)
  218B  5E            	 ld E,(HL);x
  218C  23            	 inc HL
  218D  56            	 ld D,(HL);y
  218E  2B            	 dec HL
  218F  EB            	 ex DE,HL
  2190  3E3F          	 ld A,00111111b
  2192  A4            	 and H
  2193  010000        	 ld BC,0
  2196  2808          	 jr z,wall_ck_lc
  2198                	wall_ck_lb:
  2198  04            	 inc B
  2199  D607          	 sub 7
  219B  DA1422        	 jp c,wall_ck_end
  219E  20F8          	 jr nz,wall_ck_lb
  21A0                	wall_ck_lc:
  21A0  7D            	 ld A,L
  21A1  D61E          	 sub 30
  21A3  2808          	 jr z,wall_ck_le
  21A5                	wall_ck_ld:
  21A5  0C            	 inc C
  21A6  D607          	 sub 7
  21A8  DA1422        	 jp c,wall_ck_end
  21AB  20F8          	 jr nz,wall_ck_ld
  21AD                	wall_ck_le:
  21AD  7C            	 ld A,H
  21AE  E6C0          	 and 11000000b
  21B0  CAFE21        	 jp z,wall_ck_lu
  21B3  FE80          	 cp 80h
  21B5  DAE721        	 jp c,wall_ck_lr
  21B8  CAD121        	 jp z,wall_ck_ldd
                      	
  21BB                	wall_ck_ll:
  21BB  210E24        	 ld HL,map_memry_left-17
                      	;x+C
  21BE  59            	 ld E,C
  21BF  1600          	 ld D,0
  21C1  19            	 add HL,DE
                      	;y+17*B
  21C2  111100        	 ld DE,17
  21C5  04            	 inc B
  21C6                	wall_ck_ll_2:
  21C6  19            	 add HL,DE
  21C7  10FD          	 djnz wall_ck_ll_2
                      	; or A
                      	; sbc HL,DE
  21C9  226322        	 ld (block_pointaP+1),HL
  21CC  7E            	 ld A,(HL)
  21CD  E680          	 and t;t(80h) or f(0)
  21CF  E1            	 pop HL
                      	
                      	; ld A,"l"
                      	; ld DE,0
                      	; call 0be62h
                      	; pop HL
                      	
  21D0  C9            	 ret
                      	
                      	
  21D1                	wall_ck_ldd:
  21D1  218F23        	 ld HL,map_memry_top-16
                      	;x+C
  21D4  59            	 ld E,C
  21D5  1600          	 ld D,0
  21D7  19            	 add HL,DE
                      	;y+16*B
  21D8  111000        	 ld DE,16
  21DB  04            	 inc B
  21DC                	wall_ck_ld2:
  21DC  19            	 add HL,DE
  21DD  10FD          	 djnz wall_ck_ld2
                      	; sub HL,DE
  21DF  226322        	 ld (block_pointaP+1),HL
  21E2  7E            	 ld A,(HL)
  21E3  E680          	 and t;t(80h) or f(0)
  21E5  E1            	 pop HL
                      	
                      	; ld A,"d"
                      	; ld DE,0
                      	; call 0be62h
                      	; pop HL
                      	
  21E6  C9            	 ret
                      	
                      	
  21E7                	wall_ck_lr:
  21E7  210E24        	 ld HL,map_memry_left-17
                      	;x+C
  21EA  59            	 ld E,C
  21EB  1600          	 ld D,0
  21ED  19            	 add HL,DE
  21EE  23            	 inc HL
                      	;y+17*B
  21EF  111100        	 ld DE,17
  21F2  04            	 inc B
  21F3                	wall_ck_lr_2:
  21F3  19            	 add HL,DE
  21F4  10FD          	 djnz wall_ck_lr_2
                      	; or A
                      	; sbc HL,DE
  21F6  226322        	 ld (block_pointaP+1),HL
  21F9  7E            	 ld A,(HL)
  21FA  E680          	 and t;t(80h) or f(0)
  21FC  E1            	 pop HL
                      	
                      	; ld A,"r"
                      	; ld DE,0
                      	; call 0be62h
                      	; pop HL
                      	
  21FD  C9            	 ret
                      	
                      	
                      	
                      	
  21FE                	wall_ck_lu:
  21FE  217F23        	 ld HL,map_memry_top-16-16
                      	;x+C
  2201  59            	 ld E,C
  2202  1600          	 ld D,0
  2204  19            	 add HL,DE
                      	;y+16*B
  2205  111000        	 ld DE,16
  2208  04            	 inc B
  2209                	wall_ck_lu2:
  2209  19            	 add HL,DE
  220A  10FD          	 djnz wall_ck_lu2
                      	; or A
                      	; sbc HL,DE
  220C  226322        	 ld (block_pointaP+1),HL
  220F  7E            	 ld A,(HL)
  2210  E680          	 and t;t(80h) or f(0)
  2212  E1            	 pop HL
                      	
                      	; ld A,"u"
                      	; ld DE,0
                      	; call 0be62h
                      	; pop HL
                      	
  2213  C9            	 ret
  2214                	wall_ck_end:
  2214  E1            	 pop HL
  2215  AF            	 xor A
  2216  C9            	 ret
                      	
                      	
                      	;******************************wall mod block**************************
                      	;********************wall mod****HL=obj_xy************************
  2217                	wall_mod:
  2217  010000        	 ld BC,0
  221A  7E            	 ld A,(HL) 
  221B  5F            	 ld E,A
  221C  23            	 inc HL
  221D  7E            	 ld A,(HL)
  221E  E63F          	 and 00111111b
  2220  57            	 ld D,A
  2221  2B            	 dec HL
                      	 
  2222  7B            	 ld A,E
  2223  D61E          	 sub 30
  2225  2807          	 jr z,wall_mod_l2
  2227                	wall_mod_l1:
  2227  D607          	 sub 7
  2229  2803          	 jr z,wall_mod_l2
  222B  30FA          	 jr nc,wall_mod_l1
  222D  4F            	 ld C,A
                      	
  222E                	wall_mod_l2
  222E  7A            	 ld A,D
  222F  B7            	 or A
  2230  2807          	 jr z,wall_mod_l4
  2232                	wall_mod_l3:
  2232  D607          	 sub 7
  2234  2803          	 jr z,wall_mod_l4
  2236  30FA          	 jr nc,wall_mod_l3
  2238  47            	 ld B,A
  2239                	wall_mod_l4
                      	; ld A,E
                      	; ld (0f0h),A
                      	; ld A,D
                      	; ld (0f1h),A
                      	; ld A,C
                      	; ld (0f4h),A
                      	; ld A,B
                      	; ld (0f5h),A
  2239  C9            	 ret
                      	 
                      	 
                      	 
                      	;*************************************matk action******************************
                      	
  223A                	matk_action_gil:
                      	
  223A  21F661        	 ld HL,gil_xy
  223D  CD8421        	 call wall_ck
  2240  C8            	 ret z
                      	
  2241  21EF61        	 ld HL,gil_matk_count
  2244  5E            	 ld E,(HL)
  2245  1C            	 inc E
  2246  1D            	 dec E
  2247  C8            	 ret z
  2248  1D            	 dec E
  2249  73            	 ld (HL),E
  224A  F5            	 push AF
  224B  CC9F22        	 call z,gil_matk_break 
  224E  F1            	 pop AF
                      	
  224F  21F661        	 ld HL,gil_xy
  2252                	matk_action:;HL=obj address+ let push pop
  2252  08            	 ex AF,AF'
  2253  32AA22        	 ld (matk_action_gil_ret+1),A
  2256  227422        	 ld (matk_action_HLP+1),HL
                      	 
                      	 
  2259  CD8421        	 call wall_ck
  225C  DAA922        	 jp c,matk_action_gil_ret
  225F  CAA922        	 jp z,matk_action_gil_ret
  2262                	block_pointaP:
  2262  210000        	 ld HL,overwrite		;block address
  2265  3A932D        	 ld A,(dammy+9)
  2268  3C            	 inc A
  2269  32932D        	 ld (dammy+9),A
  226C  4E            	 ld C,(HL)
  226D  0C            	 inc C
  226E  CA9F22        	 jp z,gil_matk_break 
  2271  3600          	 ld (HL),0
                      	 
                      	; call bls
                      	
  2273                	matk_action_HLP:
  2273  210000        	 ld HL,overwrite
  2276  22AC22        	 ld (matk_action_gil_ret+3),HL
                      	
  2279  5E            	 ld E,(HL)
  227A  23            	 inc HL
  227B  56            	 ld D,(HL)
  227C  7A            	 ld A,D
  227D  E6C0          	 and 11000000b
  227F  2818          	 jr z,matk_action_u
  2281  FE80          	 cp 80h
  2283  380E          	 jr c,matk_action_r
  2285  2806          	 jr z,matk_action_d
  2287                	matk_action_l:
  2287  1D            	 dec E
  2288  CD3F25        	 call grp_del
  228B  181C          	 jr matk_action_gil_ret
  228D                	matk_action_d:
  228D  14            	 inc D
  228E  CD3F25        	 call grp_del
  2291  1816          	 jr matk_action_gil_ret
  2293                	matk_action_r:
  2293  1C            	 inc E
  2294  CD3F25        	 call grp_del
  2297  1810          	 jr matk_action_gil_ret
  2299                	matk_action_u:
  2299  15            	 dec D
  229A  CD3F25        	 call grp_del
  229D  180A          	 jr matk_action_gil_ret
                      	
  229F                	gil_matk_break:
  229F  DD7ED0        	 ld A,(IX-48)
  22A2  FE8F          	 cp 8fh
  22A4  2003          	 jr nz,matk_action_gil_ret
  22A6  CDB022        	 call matklost
  22A9                	matk_action_gil_ret:
  22A9  3E00          	 ld A,overwrite
  22AB  210000        	 ld HL,overwrite
  22AE  08            	 ex AF,AF'
  22AF  C9            	 ret
                      	 
                      	 
                      	
  22B0                	matklost:
  22B0  AF            	 xor A
  22B1  32EF61        	 ld (gil_matk_count),A
  22B4  32FA61        	 ld (matk),A
  22B7  AF            	 xor A
  22B8  32FA61        	 ld (matk),A
  22BB  110007        	 ld DE,0700h
  22BE  CD3F25        	 call grp_del
  22C1  3E01          	 ld A,1
  22C3  328C2D        	 ld (dammy+2),A
  22C6  C9            	 ret
                      	
                      	
  22C7                	Map_make:
  22C7  CD0C20        	 call cls
  22CA  214530        	 ld HL,Map_data
  22CD  3A6260        	 ld A,(floor)
  22D0  3D            	 dec A
  22D1  11C900        	 ld DE,96+105
  22D4  CDBA1F        	 call xsan
  22D7  119F23        	 ld DE,map_memry_top
  22DA  016000        	 ld BC,96
  22DD  EDB0          	 ldir
  22DF  111F24        	 ld DE,map_memry_left
  22E2  3E07          	 ld A,7
  22E4  13            	 inc DE
  22E5                	map_make_l:
  22E5  F5            	 push AF
  22E6  010F00        	 ld BC,15
  22E9  EDB0          	 ldir
  22EB  13            	 inc DE
  22EC  13            	 inc DE
  22ED  F1            	 pop AF
  22EE  3D            	 dec A
  22EF  20F4          	 jr nz,map_make_l
  22F1  111E06        	 ld DE,061eh
  22F4  DD219F23      	 ld IX,map_memry_top
  22F8  FD211F24      	 ld IY,map_memry_left
                      	
  22FC                	map_make_l_l:
  22FC  DD7E00        	 ld A,(IX)
  22FF  E680          	 and t
  2301  2808          	 jr z,map_make_Xe
  2303  D5            	 push DE
  2304  21A724        	 ld HL,graph_wall+0
  2307  CDB324        	 call grp_set
  230A  D1            	 pop DE
  230B                	map_make_Xe:
  230B  DD23          	 inc IX
                      	
  230D  FD7E00        	 ld A,(IY)
  2310  E680          	 and t
  2312  280F          	 jr z,map_make_Ye
  2314  D5            	 push DE
  2315  21AD24        	 ld HL,graph_wall+6
  2318  15            	 dec D
  2319  15            	 dec D
  231A  15            	 dec D
  231B  15            	 dec D
  231C  15            	 dec D
  231D  15            	 dec D
  231E  1D            	 dec E
  231F  CDB324        	 call grp_set
  2322  D1            	 pop DE
  2323                	map_make_Ye:
  2323  FD23          	 inc IY
                      	
  2325  3E07          	 ld A,7
  2327  83            	 add A,E
  2328  5F            	 ld E,A
  2329  FE8E          	 cp 142
  232B  C2FC22        	 jp nz,map_make_l_l
                      	 
  232E  3E07          	 ld A,7
  2330  82            	 add A,D
  2331  57            	 ld D,A
  2332  FE37          	 cp 55
  2334  2807          	 jr z,map_make_end
  2336  1E1E          	 ld E,1eh
  2338  FD23          	 inc IY
  233A  C3FC22        	 jp map_make_l_l
  233D                	map_make_end:
                      	;**********************left right wall***********************
  233D  0E02          	 ld c,2
  233F  3E1B          	 ld A,27
  2341  324923        	 ld (Stating_before_mkwall1+1),A
  2344                	Stating_before_mkwall2
  2344  1600          	 ld D,0
  2346  0606          	 ld B,6
  2348                	Stating_before_mkwall1:
  2348  1E00          	 ld E,overwrite
  234A  C5            	 push BC
  234B  D5            	 push DE
  234C  218B04        	 ld HL,wall_grp
  234F  0603          	 ld B,3
  2351  CDB524        	 call grp_set+2
  2354  D1            	 pop DE
  2355  C1            	 pop BC
  2356  3E08          	 ld A,8
  2358  82            	 add A,D
  2359  57            	 ld D,A
  235A  10EC          	 djnz Stating_before_mkwall1
  235C  3E8D          	 ld A,141
  235E  324923        	 ld (Stating_before_mkwall1+1),A
  2361  0D            	 dec C
  2362  20E0          	 jr nz,Stating_before_mkwall2
                      	
                      	;**************************wall dot set***********************
                      	
  2364  0E0F          	 ld c,15
  2366  3E24          	 ld A,36
  2368  327023        	 ld (Stating_before_mkwall11+1),A
  236B                	Stating_before_mkwall21
  236B  1606          	 ld D,6
  236D  0606          	 ld B,6
  236F                	Stating_before_mkwall11:
  236F  1E00          	 ld E,overwrite
  2371  C5            	 push BC
  2372  D5            	 push DE
  2373  218E04        	 ld HL,pole_grp
  2376  0601          	 ld B,1
  2378  CDB524        	 call grp_set+2
  237B  D1            	 pop DE
  237C  C1            	 pop BC
  237D  3E07          	 ld A,7
  237F  82            	 add A,D
  2380  57            	 ld D,A
  2381  10EC          	 djnz Stating_before_mkwall11
  2383  3A7023        	 ld A,(Stating_before_mkwall11+1)
  2386  C607          	 add A,7
  2388  327023        	 ld (Stating_before_mkwall11+1),A
  238B  0D            	 dec C
  238C  20DD          	 jr nz,Stating_before_mkwall21
  238E  C9            	 ret
                      	
                      	
                      	
                      	
  238F  FFFFFFFFFFFFFF	 db 0ffh,0ffh,0ffh,0ffh,0ffh,0ffh,0ffh,0ffh,0ffh,0ffh,0ffh,0ffh,0ffh,0ffh,0ffh,0ffh;16
  239F                	map_memry_top:;1(ture or false)0000000(loop count,7fh=Outer wall)b
  239F                	 ds 16
  23AF                	 ds 16
  23BF                	 ds 16
  23CF                	 ds 16
  23DF                	 ds 16
  23EF                	 ds 16
  23FF  FFFFFFFFFFFFFF	 db 0ffh,0ffh,0ffh,0ffh,0ffh,0ffh,0ffh,0ffh,0ffh,0ffh,0ffh,0ffh,0ffh,0ffh,0ffh,0ffh;16
  240F  FFFFFFFFFFFFFF	 db 0ffh,0ffh,0ffh,0ffh,0ffh,0ffh,0ffh,0ffh,0ffh,0ffh,0ffh,0ffh,0ffh,0ffh,0ffh,0ffh;16
                      	
                      	
                      	
  241F                	map_memry_left:;1(ture or false)0000000(loop count,7fh=Outer wall)b
  241F  FF            	 db 0ffh
  2420                	 ds 15
  242F  FF            	 db 0ffh
  2430  FF            	 db 0ffh
  2431                	 ds 15
  2440  FF            	 db 0ffh
  2441  FF            	 db 0ffh
  2442                	 ds 15
  2451  FF            	 db 0ffh
  2452  FF            	 db 0ffh
  2453                	 ds 15
  2462  FF            	 db 0ffh
  2463  FF            	 db 0ffh
  2464                	 ds 15
  2473  FF            	 db 0ffh
  2474  FF            	 db 0ffh
  2475                	 ds 15
  2484  FF            	 db 0ffh
  2485  FF            	 db 0ffh
  2486                	 ds 15
  2495  FF            	 db 0ffh
  2496  FF            	 db 0ffh
                      	 
  2497                	 ds 15
  24A6  FF            	 db 0ffh
  24A7                	graph_wall:
  24A7  010101010101  	 db 1,1,1,1,1,1
  24AD  3F0000000000  	 db 3fh,0,0,0,0,0
                      	
                      	
                      	
  24B3                	grp_set:;HL_data,DE_(y,x),B_databit
  24B3  0606          	 ld B,6
                      	;
                      	
  24B5  7A            	 ld A,D
  24B6  E6C0          	 and 11000000b
  24B8  281F          	 jr z,grp_set_0
  24BA  FE80          	 cp 80h
  24BC  3814          	 jr c,grp_set_1
  24BE  2809          	 jr z,grp_set_2
                      	;left
  24C0  3E12          	 ld A,18
  24C2  85            	 add A,L
  24C3  6F            	 ld L,A
  24C4  3013          	 jr nc,grp_set_0
  24C6  24            	 inc H
  24C7  1810          	 jr grp_set_0
                      	;dowm
  24C9                	grp_set_2:
  24C9  3E0C          	 ld A,12
  24CB  85            	 add A,L
  24CC  6F            	 ld L,A
  24CD  300A          	 jr nc,grp_set_0
  24CF  24            	 inc H
  24D0  1807          	 jr grp_set_0
                      	;right
  24D2                	grp_set_1:
  24D2  3E06          	 ld A,6
  24D4  85            	 add A,L
  24D5  6F            	 ld L,A
  24D6  3001          	 jr nc,grp_set_0
  24D8  24            	 inc H
                      	
                      	;up,non direction
  24D9                	grp_set_0:
  24D9  7B            	 ld A,E
  24DA  320025        	 ld (grp_set_or1+1),A
  24DD  7A            	 ld A,D
  24DE  E63F          	 and 3fh
  24E0  1600          	 ld D,0
  24E2                	grp_set_set1:
  24E2  14            	 inc D
  24E3  D608          	 sub 8
  24E5  30FB          	 jr nc,grp_set_set1
  24E7  15            	 dec D
  24E8  C608          	 add A,8
  24EA                	grp_set_set2:
  24EA  320925        	 ld (grp_set_shiftd_bit+1),A
  24ED  4F            	 ld C,A
  24EE  3E08          	 ld A,8
  24F0  91            	 sub C
  24F1  322F25        	 ld (grp_set_shiftu_bit+1),A
                      	
  24F4                	grp_set_shiftd:
  24F4  7A            	 ld A,D			;line number
  24F5  E5            	 push HL					;HL
  24F6  214026        	 ld HL,grapu_area
  24F9  119000        	 ld DE,144
  24FC  CDBA1F        	 call xsan		;y+
  24FF                	grp_set_or1:
  24FF  1E00          	 ld E,overwrite
  2501  1600          	 ld D,0
  2503  19            	 add HL,DE		;x+
  2504  EB            	 ex DE,HL
  2505  E1            	 pop HL			;data
  2506  E5            	 push HL					;HL
  2507  C5            	 push BC						;BC
  2508                	grp_set_shiftd_bit:
  2508  0E00          	 ld C,overwrite		;shift bit count
  250A  7E            	 ld A,(HL)
  250B  08            	 ex AF,AF'
  250C  79            	 ld A,C
  250D  B7            	 or A
  250E  2807          	 jr z,grp_set_shiftd_bit_2
  2510  08            	 ex AF,AF'
  2511                	grp_set_shiftd_bit_l:
  2511  CB27          	 sla A
  2513  0D            	 dec C
  2514  20FB          	 jr nz,grp_set_shiftd_bit_l
  2516  08            	 ex AF,AF'
  2517                	grp_set_shiftd_bit_2:
  2517  08            	 ex AF,AF'
  2518  4F            	 ld C,A
  2519  1A            	 ld A,(DE)
  251A                	grp_set_change1:
  251A  B1            	 or C
  251B  12            	 ld (DE),A
  251C                	grp_set_shiftd_l:
  251C  23            	 inc HL
  251D  13            	 inc DE
  251E  10E8          	 djnz grp_set_shiftd_bit
                      	
                      	; dec DE
                      	
  2520  EB            	 ex DE,HL
  2521  119000        	 ld DE,144
  2524  19            	 add HL,DE
                      	
                      	
  2525  C1            	 pop BC						;HL
  2526  7D            	 ld A,L
  2527  90            	 sub B
  2528  3001          	 jr nc,grp_set_shiftu_bit_b
  252A  25            	 dec H
  252B                	grp_set_shiftu_bit_b:
  252B  6F            	 ld L,A
  252C  EB            	 ex DE,HL
                      	
  252D  E1            	 pop HL			;data2
  252E                	grp_set_shiftu_bit:
  252E  0E00          	 ld C,overwrite		;shift bit count
  2530  7E            	 ld A,(HL)
  2531                	grp_set_shiftu_bit_l
  2531  CB3F          	 srl A
  2533  0D            	 dec C
  2534  20FB          	 jr nz,grp_set_shiftu_bit_l
  2536  4F            	 ld C,A
  2537  1A            	 ld A,(DE)
  2538                	grp_set_change2:
  2538  B1            	 or C
  2539  12            	 ld (DE),A
  253A                	grp_set_shiftu_l:
  253A  23            	 inc HL
  253B  13            	 inc DE
  253C  10F0          	 djnz grp_set_shiftu_bit
                      	
                      	; call grp_o;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
  253E  C9            	 ret
                      	
                      	
                      	
                      	
                      	
                      	
                      	
                      	
                      	
  253F                	grp_del:;HL_data,DE_(y,x),B_databit
  253F  21AA25        	 ld HL,del_graph
  2542  0606          	 ld B,6
  2544  7B            	 ld A,E
  2545  326B25        	 ld (grp_set_or1d+1),A
  2548  7A            	 ld A,D
  2549  E63F          	 and 3fh
  254B  1600          	 ld D,0
  254D                	grp_set_set1d:
  254D  14            	 inc D
  254E  D608          	 sub 8
  2550  30FB          	 jr nc,grp_set_set1d
  2552  15            	 dec D
  2553  C608          	 add A,8
  2555                	grp_set_set2d:
  2555  327425        	 ld (grp_set_shiftd_bitd+1),A
  2558  4F            	 ld C,A
  2559  3E08          	 ld A,8
  255B  91            	 sub C
  255C  329A25        	 ld (grp_set_shiftu_bitd+1),A
                      	
  255F                	grp_set_shiftdd:
  255F  7A            	 ld A,D			;line number
  2560  E5            	 push HL					;HL
  2561  214026        	 ld HL,grapu_area
  2564  119000        	 ld DE,144
  2567  CDBA1F        	 call xsan		;y+
  256A                	grp_set_or1d:
  256A  1E00          	 ld E,overwrite
  256C  1600          	 ld D,0
  256E  19            	 add HL,DE		;x+
  256F  EB            	 ex DE,HL
  2570  E1            	 pop HL			;data
  2571  E5            	 push HL					;HL
  2572  C5            	 push BC						;BC
  2573                	grp_set_shiftd_bitd:
  2573  0E00          	 ld C,overwrite		;shift bit count
  2575  7E            	 ld A,(HL)
  2576  08            	 ex AF,AF'
  2577  79            	 ld A,C
  2578  B7            	 or A
  2579  2807          	 jr z,grp_set_shiftd_bit_2d
  257B  08            	 ex AF,AF'
  257C                	grp_set_shiftd_bit_ld:
  257C  37            	 scf
  257D  17            	 rla
  257E  0D            	 dec C
  257F  20FB          	 jr nz,grp_set_shiftd_bit_ld
  2581  08            	 ex AF,AF'
  2582                	grp_set_shiftd_bit_2d:
  2582  08            	 ex AF,AF'
  2583  4F            	 ld C,A
  2584  1A            	 ld A,(DE)
  2585                	grp_set_change1d:
  2585  A1            	 and C
  2586  12            	 ld (DE),A
  2587                	grp_set_shiftd_ld:
  2587  23            	 inc HL
  2588  13            	 inc DE
  2589  10E8          	 djnz grp_set_shiftd_bitd
                      	
                      	; dec DE
                      	
  258B  EB            	 ex DE,HL
  258C  119000        	 ld DE,144
  258F  19            	 add HL,DE
                      	
                      	
  2590  C1            	 pop BC						;HL
  2591  7D            	 ld A,L
  2592  90            	 sub B
  2593  3001          	 jr nc,grp_set_shiftu_bit_bd
  2595  25            	 dec H
  2596                	grp_set_shiftu_bit_bd:
  2596  6F            	 ld L,A
  2597  EB            	 ex DE,HL
                      	
  2598  E1            	 pop HL			;data2
  2599                	grp_set_shiftu_bitd:
  2599  0E00          	 ld C,overwrite		;shift bit count
  259B  7E            	 ld A,(HL)
  259C                	grp_set_shiftu_bit_ld
  259C  37            	 scf
  259D  1F            	 rra
  259E  0D            	 dec C
  259F  20FB          	 jr nz,grp_set_shiftu_bit_ld
  25A1  4F            	 ld C,A
  25A2  1A            	 ld A,(DE)
  25A3                	grp_set_change2d:
  25A3  A1            	 and C
  25A4  12            	 ld (DE),A
  25A5                	grp_set_shiftu_ld:
  25A5  23            	 inc HL
  25A6  13            	 inc DE
  25A7  10F0          	 djnz grp_set_shiftu_bitd
  25A9  C9            	 ret
                      	
  25AA                	del_graph:
  25AA  C0C0C0C0C0C0  	 db 0c0h,0c0h,0c0h,0c0h,0c0h,0c0h
                      	
                      	
                      	; ds 144
                      	; ds 144
                      	
  25B0                	 ds 144
  2640                	grapu_area:
  2640                	 ds 144*6
  29A0                	 ds 144
                      	 
                      	; ds 144
                      	; ds 144
                      	;********************************Graphics**********************************
  2A30                	graph_title:
  2A30  00000000000000	 db 00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,80h,60h,80h,00,00,0C0h,30h,0Ch,08h,30h,0C0h,0C0h,30h,08h,10h,0E0h,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00
  2A62  00000000000000	 db 00,00,00,00,00,00,00,00,00,80h,0C0h,00,00,80h,60h,10h,18h,06h,01h,00h,01h,0Eh,03h,00,00,00,00,00,00,01,00,00,00,03,0Ch,30h,40h,080h,00,80h,0E0h,00,00,00,00,00,00,00,00,00
  2A94  000000000000C0	 db 00,00,00,00,00,00,0C0h,30h,0Eh,01h,4Fh,66h,0F1h,0E0h,0F0h,58h,58h,40h,20h,80h,0E0h,0F8h,80h,0F0h,0C0h,0E0h,0F0h,0D8h,68h,0A9h,0C3h,42h,82h,86h,84h,0Ch,18h,79h,0F6h,0E1h,0C1h,86h,38h,0C0h,00,00,00,00,00,00
  2AC6  00804020180601	 db 00,80h,40h,20h,18h,06h,01h,00,00,00,00,0Fh,3Fh,7Fh,0FEh,0F8h,0F8h,0F0h,0FEh,0FFh,0FFh,0FFh,0FFh,0FFh,0FFh,0FFh,0FFh,0FFh,0FFh,0FFh,0FFh,0FFh,0FFh,7Eh,7Eh,7Dh,7Dh,78h,7Dh,3Fh,1Fh,0Fh,00,00,03h,0Ch,70h,80h,00,00
  2AF8  00FF0000000000	 db 00,0FFh,00,00,00,00,00,00,00,0F8h,08,08,0F0h,00,0FCh,02Eh,06Fh,0D7h,07,7Fh,80h,00,0F8h,00,0F0h,50h,4Ch,4Eh,0FFh,07,0F7h,0Fh,4Eh,4Ch,0D4h,00,0F0h,50h,48h,48h,0F8h,00,00,00,00,00,00,0Fh,30h,0C0h
  2B2A  78474040404044	 db 78h,47h,40h,40h,40h,40h,44h,44h,44h,45h,45h,45h,44h,44h,45h,44h,44h,45h,44h,44h,45h,45h,45h,44h,45h,44h,44h,44h,45h,44h,44h,45h,45h,45h,45h,44h,45h,44h,44h,44h,45h,44h,44h,44h,40h,40h,40h,40h,40h,7Fh
                      	
                      	;***********************gil graph***************************
                      	
  2B5C                	graph_gil_ulf:
  2B5C  000C3F1F0C00  	 db 00,0Ch,3Fh,1Fh,0Ch,00
  2B62                	graph_gil_rlf:
  2B62  00003F3F0C00  	 db 00,00,3Fh,3Fh,0Ch,00
  2B68                	graph_gil_dlf:
  2B68  000C1F370C00  	 db 00,0Ch,1Fh,37h,0Ch,00
  2B6E                	graph_gil_llf:
  2B6E  000C3F3F0000  	 db 00,0Ch,3Fh,3Fh,00,00
                      	
  2B74                	graph_gil_urf:
  2B74  000C1F3F0C00  	 db 00,0Ch,1Fh,3Fh,0Ch,00
  2B7A                	graph_gil_rrf:
  2B7A  00201F1F2C00  	 db 00,20h,1Fh,1Fh,2Ch,00
  2B80                	graph_gil_drf:
  2B80  000C3F170C00  	 db 00,0Ch,3Fh,17h,0Ch,00
  2B86                	graph_gil_lrf:
  2B86  002C1F1F2000  	 db 00,2Ch,1Fh,1Fh,20h,00
                      	
  2B8C                	graph_gilsw_ulf:
  2B8C  000C3F1F0C08  	 db 00,0Ch,3Fh,1Fh,0Ch,08
  2B92  080C3F3F0C00  	 db 08h,0Ch,3Fh,3Fh,0Ch,00
  2B98  080C1F370C00  	 db 08,0Ch,1Fh,37h,0Ch,00
  2B9E  000C3F3F0C08  	 db 00,0Ch,3Fh,3Fh,0Ch,08
                      	;graph_gilsw_urf:
  2BA4  000C1F3F0C08  	 db 00,0Ch,1Fh,3Fh,0Ch,08
  2BAA  082C1F1F2C00  	 db 08,2Ch,1Fh,1Fh,2Ch,00
  2BB0  080C3F170C00  	 db 08,0Ch,3Fh,17h,0Ch,00
  2BB6  002C1F1F2C08  	 db 00,2Ch,1Fh,1Fh,2Ch,08
                      	
  2BBC                	graph_gilsword_ulf:
  2BBC  1E0C3F1F0407  	 db 1Eh,0Ch,3Fh,1Fh,04h,07h
  2BC2  000E3F3F0808  	 db 00,0Eh,3Fh,3Fh,08,08
  2BC8  38041F3F0C1E  	 db 38h,04h,1Fh,3Fh,0Ch,1Eh
  2BCE  08083F3F0E00  	 db 08,08,3Fh,3Fh,0Eh,00
                      	;graph_gilsword_ulf:
  2BD4  1E0C1F3F0407  	 db 1Eh,0Ch,1Fh,3Fh,04,07
  2BDA  002E1F1F2808  	 db 00,2Eh,1Fh,1Fh,28h,08
  2BE0  38043F1F0C1E  	 db 38h,04h,3Fh,1Fh,0Ch,1Eh
  2BE6  08281F1F2E00  	 db 08,28h,1Fh,1Fh,2Eh,00
                      	
                      	;********************enemy graph*************************
                      	
  2BEC                	graph_sraimd:
  2BEC  00181C1C1800  	 db 00,18h,1Ch,1Ch,18h,00
  2BF2                	graph_sraimu:
  2BF2  00181C1C1800  	 db 00,18h,1Ch,1Ch,18h,00
  2BF8                	graph_sraimd1:
  2BF8  000C1A1E0C00  	 db 00,0Ch,1Ah,1Eh,0Ch,00
  2BFE                	graph_sraimu2:
  2BFE  000C1A1E0C00  	 db 00,0Ch,1Ah,1Eh,0Ch,00
                      	
  2C04                	magic:
  2C04  032E3F3F2E03  	 db 03,2Eh,3Fh,3Fh,2Eh,03
  2C0A                	magicr:
  2C0A  00203F3F2E18  	 db 00,20h,3Fh,3Fh,2Eh,18h
  2C10                	magic3:
  2C10  182E3F3F2E18  	 db 18h,2Eh,3Fh,3Fh,2Eh,18h
  2C16                	magic4:
  2C16  182E3F3F2000  	 db 18h,2Eh,3Fh,3Fh,20h,00
                      	 
  2C1C                	graph_goast:
  2C1C  030E1F1F0E03  	 db 03,0Eh,1Fh,1Fh,0Eh,03
  2C22  10181E1F0F1A  	 db 10h,18h,1Eh,1Fh,0Fh,1Ah
  2C28  180E1F1F0E18  	 db 18h,0Eh,1Fh,1Fh,0Eh,18h
  2C2E  1A0F1F1E1810  	 db 1Ah,0Fh,1Fh,1Eh,18h,10h
                      	 
  2C34                	graph_spell:
  2C34  000018180000  	 db 00,00,18h,18h,00,00
  2C3A  000018180000  	 db 00,00,18h,18h,00,00
  2C40  000018180000  	 db 00,00,18h,18h,00,00
  2C46  000018180000  	 db 00,00,18h,18h,00,00
                      	 
                      	
  2C4C                	graph_n_knightu:;r foot
  2C4C  000C1F3F0407  	 db 00,0Ch,1Fh,3Fh,04,07
  2C52                	graph_n_knightr:
  2C52  00201F1F2808  	 db 00,20h,1Fh,1Fh,28h,08
  2C58                	graph_n_knightd:
  2C58  38043F1F0C00  	 db 38h,04h,3Fh,1Fh,0Ch,00
  2C5E                	graph_n_knightl:
  2C5E  08281F1F2000  	 db 08,28h,1Fh,1Fh,20h,00
                      	 
                      	;graph_n_knightu:;l foot
  2C64  000C3F1F0407  	 db 00,0Ch,3Fh,1Fh,04h,07h
                      	;graph_n_knightr:
  2C6A  00003F3F0808  	 db 00,00,3Fh,3Fh,08h,08
                      	;graph_n_knightd:
  2C70  38041F3F0C00  	 db 38h,04h,1Fh,3Fh,0Ch,00
                      	;graph_n_knightl:
  2C76  08083F3F0000  	 db 08,08,3Fh,3Fh,00,00
                      	
  2C7C                	graph_quox_ulf:
  2C7C  063E3F1F1E06  	 db 06,3Eh,3Fh,1Fh,1Eh,06
  2C82  0E3D3C3C3A0E  	 db 0Eh,3Dh,3Ch,3Ch,3Ah,0Eh
  2C88  061E1B373E06  	 db 06,1Eh,1Bh,37h,3Eh,06
  2C8E  0E3A3C3C3D0E  	 db 0Eh,3Ah,3Ch,3Ch,3Dh,0Eh
                      	 
  2C94  061E1F3F3E06  	 db 06,1Eh,1Fh,3Fh,3Eh,06
  2C9A  2E3D1C1C3A2E  	 db 2Eh,3Dh,1Ch,1Ch,3Ah,2Eh
  2CA0  063E3B171E06  	 db 06,3Eh,3Bh,17h,1Eh,06h
  2CA6  2E3A1C1C3D2E  	 db 2Eh,3Ah,1Ch,1Ch,3Dh,2Eh
                      	
  2CAC                	graph_druaga_ulf:
  2CAC  082D1E1E0D08  	 db 08,2Dh,1Eh,1Eh,0Dh,08
  2CB2  241C1E1B1C2C  	 db 24h,1Ch,1Eh,1Bh,1Ch,2Ch
  2CB8  080D1A162D08  	 db 08,0Dh,1Ah,16h,2Dh,08
  2CBE  2C1C1B1E1C24  	 db 2Ch,1Ch,1Bh,1Eh,1Ch,24h
                      	 
  2CC4  080D1E1E2D08  	 db 08,0Dh,1Eh,1Eh,2Dh,08
  2CCA  043C1E1B3C0C  	 db 04,3Ch,1Eh,1Bh,3Ch,0Ch
  2CD0  082D1A160D08  	 db 08,2Dh,1Ah,16h,0Dh,08h
  2CD6  0C3C1B1E3C04  	 db 0Ch,3Ch,1Bh,1Eh,3Ch,04
                      	
  2CDC                	graph_ishitar
  2CDC  08362D2D3608  	 db 8,36h,2dh,2dh,36h,8
  2CE2                	graph_kai
  2CE2  000E3B3B0E00  	 db 0,0eh,3bh,3bh,0eh,0
  2CE8  000E3B3B0E00  	 db 0,0eh,3bh,3bh,0eh,0
  2CEE  000E3B3B0E00  	 db 0,0eh,3bh,3bh,0eh,0
  2CF4                	graph_3rod:
  2CF4  00203D3D2000  	 db 00,20h,3Dh,3Dh,20h,00
  2CFA  00203D3D2000  	 db 00,20h,3Dh,3Dh,20h,00
  2D00  00203D3D2000  	 db 00,20h,3Dh,3Dh,20h,00
  2D06  00203D3D2000  	 db 00,20h,3Dh,3Dh,20h,00
                      	
                      	
  2D0C                	graph_brack:
  2D0C  3F3F3F3F3F3F  	 db 3fh,3fh,3fh,3fh,3fh,3fh
  2D12  3F3F3F3F3F3F  	 db 3fh,3fh,3fh,3fh,3fh,3fh
  2D18  3F3F3F3F3F3F  	 db 3fh,3fh,3fh,3fh,3fh,3fh
  2D1E  3F3F3F3F3F3F  	 db 3fh,3fh,3fh,3fh,3fh,3fh
                      	
                      	;******************item graph*******************************
                      	
  2D24                	graph_key:
  2D24  20283A0D0200  	 db 20h,28h,3Ah,0Dh,02,00
  2D2A                	graph_door:
  2D2A  3E29293D293E  	 db 3Eh,29h,29h,3Dh,29h,3Eh
  2D30  3E3F3F3F3F3E  	 db 3Eh,3Fh,3Fh,3Fh,3Fh,3Eh
  2D36                	graph_box:
  2D36  1C161A161E0E  	 db 1Ch,16h,1Ah,16h,1Eh,0Eh
  2D3C                	graph_matk:
  2D3C  3D0E070B1121  	 db 3Dh,0Eh,07h,0Bh,11h,21h
  2D42                	graph_boot:
  2D42  20303E3E140A  	 db 20h,30h,3Eh,3Eh,14h,0Ah
  2D48                	graph_po:
  2D48  302827272830  	 db 30h,28h,27h,27h,28h,30h
  2D4E                	graph_sword:
  2D4E  03072E3C182C  	 db 03,07h,2Eh,3Ch,18h,2Ch
  2D54                	graph_gnt:
  2D54  0506070E1A3C  	 db 05,06,07,0Eh,1Ah,3Ch
  2D5A                	graph_armor:
  2D5A  010F3A2E3A0F  	 db 01,0Fh,3Ah,2Eh,3Ah,0Fh
  2D60                	graph_kndl:
  2D60  0020203A2020  	 db 00,20h,20h,3Ah,20h,20h
  2D66                	graph_shield:
  2D66  1F33272D391F  	 db 1Fh,33h,27h,2Dh,39h,1Fh
  2D6C                	graph_nec:
  2D6C  0C3231110B04  	 db 0Ch,32h,31h,11h,0Bh,04h
  2D72                	graph_hlmt:
  2D72  1D263232261D  	 db 1Dh,26h,32h,32h,26h,1Dh
  2D78                	graph_brns:
  2D78  30281C322A3C  	 db 30h,28h,1Ch,32h,2Ah,3Ch
  2D7E                	graph_meis:
  2D7E  0D0A0D1F3830  	 db 0Dh,0Ah,0Dh,1Fh,38h,30h
  2D84                	graph_rod
  2D84  030304081020  	 db 03h,03h,04h,08h,10h,20h
                      	
                      	
                      	
                      	
  2D8A                	dammy:
                      	;1:sraim count
                      	;2:spell count
  2D8A  000000000000  	 db 0,0,0,0,0,0
  2D90  000000000000  	 db 0,0,0,0,0,0
  2D96  000000000000  	 db 0,0,0,0,0,0
  2D9C  000000000000  	 db 0,0,0,0,0,0
                      	;************************************Data**************************************
  2DA2                	obj_1:
                      	;1
  2DA2  01010101010101	 db 1,1,1,1,1,1,1,1,83h,84h,85h,8fh,0
  2DAF  01010101010102	 db 1,1,1,1,1,1,2,2,83h,84h,85h,8fh,0
  2DBC  21210101010183	 db 21h,21h,1,1,1,1,83h,84h,85h,8fh,0
  2DC7  02020202020211	 db 2,2,2,2,2,2,11h,83h,84h,85h,8fh,0
  2DD3  01010101111111	 db 1,1,1,1,11h,11h,11h,11h,11h,83h,84h,85h,8fh,0
  2DE1  01010101010101	 db 1,1,1,1,1,1,1,1,83h,84h,85h,8fh,0
  2DEE  01010101010101	 db 1,1,1,1,1,1,1,1,83h,84h,85h,8fh,0
  2DFB  01010101010101	 db 1,1,1,1,1,1,1,1,83h,84h,85h,8fh,0
  2E08  01010101010101	 db 1,1,1,1,1,1,1,1,83h,84h,85h,8fh,0
  2E15  03030303030383	 db 3,3,3,3,3,3,83h,84h,85h,8fh,0
                      	;11
  2E20  01010101010101	 db 1,1,1,1,1,1,1,1,83h,84h,85h,8fh,0
  2E2D  02021313458384	 db 2,2,13h,13h,45h,83h,84h,85h,8fh,0
  2E37  11110404040404	 db 11h,11h,4,4,4,4,4,83h,84h,85h,8fh,0
  2E43  02020202020211	 db 2,2,2,2,2,2,11h,83h,84h,85h,8fh,0
  2E4F  21222204048384	 db 21h,22h,22h,4,4,83h,84h,85h,8fh,0
  2E59  01010101010101	 db 1,1,1,1,1,1,1,1,83h,84h,85h,8fh,0
  2E66  01010101010101	 db 1,1,1,1,1,1,1,1,83h,84h,85h,8fh,0
  2E73  01010101010101	 db 1,1,1,1,1,1,1,1,83h,84h,85h,8fh,0
  2E80  01010101010101	 db 1,1,1,1,1,1,1,1,83h,84h,85h,8fh,0
  2E8D  13131346222222	 db 13h,13h,13h,46h,22h,22h,22h,22h,83h,84h,85h,8fh,0
                      	;21
  2E9A  01010101010101	 db 1,1,1,1,1,1,1,1,83h,84h,85h,8fh,0
  2EA7  02021313458384	 db 2,2,13h,13h,45h,83h,84h,85h,8fh,0
  2EB1  11110404040404	 db 11h,11h,4,4,4,4,4,83h,84h,85h,8fh,0
  2EBD  02020202020211	 db 2,2,2,2,2,2,11h,83h,84h,85h,8fh,0
  2EC9  21222204048384	 db 21h,22h,22h,4,4,83h,84h,85h,8fh,0
  2ED3  13131313248384	 db 13h,13h,13h,13h,24h,83h,84h,85h,8fh,0
  2EDD  22010101010101	 db 22h,1,1,1,1,1,1,1,83h,84h,85h,8fh,0
  2EEA  01010101010101	 db 1,1,1,1,1,1,1,1,83h,84h,85h,8fh,0
  2EF7  01010101010101	 db 1,1,1,1,1,1,1,1,83h,84h,85h,8fh,0
  2F04  03030303030303	 db 3,3,3,3,3,3,3,83h,84h,85h,8fh,0
                      	;31
  2F10  01010101010101	 db 1,1,1,1,1,1,1,1,83h,84h,85h,8fh,0
  2F1D  02021313458384	 db 2,2,13h,13h,45h,83h,84h,85h,8fh,0
  2F27  42110404040404	 db 42h,11h,4,4,4,4,4,83h,84h,85h,8fh,0
  2F33  02020202020211	 db 2,2,2,2,2,2,11h,83h,84h,85h,8fh,0
  2F3F  228384858F00  	 db 22h,83h,84h,85h,8fh,0
  2F45  118384858F00  	 db 11h,83h,84h,85h,8fh,0
  2F4B  46462424010183	 db 46h,46h,24h,24h,1,1,83h,84h,85h,8fh,0
  2F56  13130101010101	 db 13h,13h,1,1,1,1,1,1,83h,84h,85h,8fh,0
  2F63  01010101010101	 db 1,1,1,1,1,1,1,1,83h,84h,85h,8fh,0
  2F70  03030303030303	 db 3,3,3,3,3,3,3,83h,84h,85h,8fh,0
                      	;41
  2F7C  01010101010101	 db 1,1,1,1,1,1,1,1,83h,84h,85h,8fh,0
  2F89  02021313458384	 db 2,2,13h,13h,45h,83h,84h,85h,8fh,0
  2F93  01020304050683	 db 1,2,3,4,5,6,83h,84h,85h,8fh,0
  2F9E  11111311252583	 db 11h,11h,13h,11h,25h,25h,83h,84h,85h,8fh,0
  2FA9  21222324838485	 db 21h,22h,23h,24h,83h,84h,85h,86h,8fh,0
  2FB3  118384858F00  	 db 11h,83h,84h,85h,8fh,0
  2FB9  248384858F00  	 db 24h,83h,84h,85h,8fh,0
  2FBF  13130101010101	 db 13h,13h,1,1,1,1,1,1,83h,84h,85h,8fh,0
  2FCC  13131324248384	 db 13h,13h,13h,24h,24h,83h,84h,85h,8fh,0
  2FD6  03030303030303	 db 3,3,3,3,3,3,3,83h,84h,85h,8fh,0
                      	;51
  2FE2  13010101010101	 db 13h,1,1,1,1,1,1,1,83h,84h,85h,8fh,0
  2FEF  02021313458384	 db 2,2,13h,13h,45h,83h,84h,85h,8fh,0
  2FF9  01020304050683	 db 1,2,3,4,5,6,83h,84h,85h,8fh,0
  3004  11111311252583	 db 11h,11h,13h,11h,25h,25h,83h,84h,85h,8fh,0
  300F  21222324838485	 db 21h,22h,23h,24h,83h,84h,85h,86h,8fh,0
  3019  118384858F00  	 db 11h,83h,84h,85h,8fh,0
  301F  24878384858F00	 db 24h,87h,83h,84h,85h,8fh,0
  3026  14130101010101	 db 14h,13h,1,1,1,1,1,1,83h,84h,85h,8fh,0
  3033  27141414144481	 db 27h,14h,14h,14h,14h,44h,81h,84h,85h,8fh,0
  303E  8A8B8C8D8E8F00	 db 8ah,8bh,8ch,8dh,8eh,8fh,0
                      	 
                      	
  3045                	Map_data:;96+105=201byte
                      	;1 
  3045  00008080800000	 db f,f,t,t,t,f,f,f,f,f,f,t,f,t,f,f
  3055  00000080008000	 db f,f,f,t,f,t,f,t,f,t,t,f,t,t,f,t
  3065  80008080000080	 db t,f,t,t,f,f,t,f,f,f,f,f,t,f,f,t
  3075  00008080808000	 db f,f,t,t,t,t,f,t,f,t,f,f,f,t,f,f
  3085  00008080808000	 db f,f,t,t,t,t,f,t,t,f,f,t,f,t,f,t
  3095  80008000008000	 db t,f,t,f,f,t,f,f,t,t,f,t,t,t,f,t
                      	
  30A5  80000000000080	 db t,f,f,f,f,f,t,f,t,t,f,f,f,f,t
  30B4  00800000808000	 db f,t,f,f,t,t,f,t,f,f,f,t,f,t,f
  30C3  80800080800000	 db t,t,f,t,t,f,f,t,t,t,t,f,t,t,f
  30D2  80800000008080	 db t,t,f,f,f,t,t,t,f,f,t,t,f,t,f
  30E1  80000000800080	 db t,f,f,f,t,f,t,f,t,t,t,t,t,f,t
  30F0  00008000000000	 db f,f,t,f,f,f,f,f,f,t,f,f,t,f,f
  30FF  00800080008080	 db f,t,f,t,f,t,t,f,f,f,f,f,t,f,f
                      	;2
  310E  00808080008080	 db f,t,t,t,f,t,t,t,f,t,t,t,t,t,f,f
  311E  00008000000000	 db f,f,t,f,f,f,f,f,t,f,f,t,t,t,t,t
  312E  00008000808000	 db f,f,t,f,t,t,f,f,t,f,t,t,f,f,f,t
  313E  00000080000080	 db f,f,f,t,f,f,t,t,f,t,t,t,t,f,t,f
  314E  80800080808000	 db t,t,f,t,t,t,f,t,t,t,f,f,f,f,f,f
  315E  00808080800080	 db f,t,t,t,t,f,t,f,t,t,t,f,t,t,f,f
                      	 
  316E  00000080000000	 db f,f,f,t,f,f,f,t,f,f,f,f,f,f,f
  317D  80000000808080	 db t,f,f,f,t,t,t,f,t,f,f,f,f,t,t
  318C  00800080000080	 db f,t,f,t,f,f,t,t,f,t,t,f,t,t,f
  319B  80808080000000	 db t,t,t,t,f,f,f,f,f,f,f,f,f,f,f
  31AA  80000080800080	 db t,f,f,t,t,f,t,f,t,f,f,t,f,f,t
  31B9  00008000000080	 db f,f,t,f,f,f,t,t,f,f,t,t,t,t,t
  31C8  00000000800000	 db f,f,f,f,t,f,f,f,f,f,f,f,t,f,t
                      	;3
  31D7  80800080008080	 db t,t,f,t,f,t,t,f,f,t,t,t,t,f,f,t
  31E7  00000080000080	 db f,f,f,t,f,f,t,f,t,f,f,t,t,t,f,t
  31F7  00800000008000	 db f,t,f,f,f,t,f,t,f,f,t,f,t,t,f,t
  3207  80000080008000	 db t,f,f,t,f,t,f,f,t,t,f,f,t,f,f,f
  3217  80800080808000	 db t,t,f,t,t,t,f,t,f,f,f,f,f,f,f,f
  3227  00000080000080	 db f,f,f,t,f,f,t,t,t,f,t,f,t,t,f,f
                      	 
  3237  00000000800000	 db f,f,f,f,t,f,f,f,f,f,f,t,f,f,f
  3246  80008000000000	 db t,f,t,f,f,f,f,t,t,t,t,f,f,t,f
  3255  80800080808080	 db t,t,f,t,t,t,t,f,t,t,f,f,t,f,f
  3264  00808080000080	 db f,t,t,t,f,f,t,f,t,f,t,f,t,t,t
  3273  00008000008080	 db f,f,t,f,f,t,t,t,f,f,t,t,f,f,t
  3282  80008000008000	 db t,f,t,f,f,t,f,f,t,t,f,f,t,t,f
  3291  00800000808000	 db f,t,f,f,t,t,f,f,f,f,t,f,f,t,t
                      	;4
  32A0  00008000008000	 db n,n,m,n,n,m,n,m,m,n,m,n,m,n,m,n
  32B0  00008080000000	 db n,n,m,m,n,n,n,n,m,m,m,m,m,n,n,n
  32C0  00008000808080	 db n,n,m,n,m,m,m,m,m,m,n,n,n,m,n,n
  32D0  00800080008000	 db n,m,n,m,n,m,n,m,m,m,n,n,n,m,m,n
  32E0  00808000008000	 db n,m,m,n,n,m,n,n,n,m,m,n,m,m,n,n
  32F0  00808080000080	 db n,m,m,m,n,n,m,n,m,m,n,m,m,m,n,m
                      	 
  3300  00008000800000	 db n,n,m,n,m,n,n,m,n,n,m,n,n,n,n
  330F  80008080000000	 db m,n,m,m,n,n,n,n,n,n,n,n,m,m,n
  331E  80008000808080	 db m,n,m,n,m,m,m,n,n,m,m,m,n,m,m
  332D  80808000008080	 db m,m,m,n,n,m,m,n,n,n,m,m,m,n,m
  333C  00000000800000	 db n,n,n,n,m,n,n,m,n,n,n,n,n,m,n
  334B  00800080800080	 db n,m,n,m,m,n,m,m,m,n,m,n,n,m,m
  335A  00000080008000	 db n,n,n,m,n,m,n,n,m,n,n,n,n,n,n
                      	;5
  3369  00008000808000	 db n,n,m,n,m,m,n,n,m,m,n,n,m,m,n,n
  3379  00800000808000	 db n,m,n,n,m,m,n,n,n,m,m,n,n,n,m,n
  3389  00000080008000	 db n,n,n,m,n,m,n,m,n,n,m,m,n,m,m,m
  3399  00000000808000	 db n,n,n,n,m,m,n,m,n,m,n,m,n,m,n,m
  33A9  80000080800000	 db m,n,n,m,m,n,n,m,n,m,n,m,n,n,m,n
  33B9  80008000800000	 db m,n,m,n,m,n,n,n,m,n,n,n,n,m,m,m
                      	 
  33C9  00000000008080	 db n,n,n,n,n,m,m,m,n,n,m,m,n,n,n
  33D8  80808000000000	 db m,m,m,n,n,n,n,n,n,n,n,m,n,m,m
  33E7  80808080008080	 db m,m,m,m,n,m,m,m,m,n,m,m,m,n,n
  33F6  80808000800000	 db m,m,m,n,m,n,n,m,n,m,n,n,m,n,n
  3405  00000080000000	 db n,n,n,m,n,n,n,m,n,n,m,n,m,n,n
  3414  00808080008080	 db n,m,m,m,n,m,m,m,m,m,m,m,n,m,n
  3423  00000080008080	 db n,n,n,m,n,m,m,n,n,n,m,n,n,n,n
                      	;6
  3432  80000000800000	 db m,n,n,n,m,n,n,n,m,m,m,n,m,n,n,n
  3442  00008000008000	 db n,n,m,n,n,m,n,m,m,m,m,m,n,m,n,n
  3452  00800000008080	 db n,m,n,n,n,m,m,m,m,n,n,n,m,n,m,n
  3462  00800080800000	 db n,m,n,m,m,n,n,n,m,n,m,m,n,n,m,n
  3472  00808080800080	 db n,m,m,m,m,n,m,n,m,m,m,n,m,m,m,n,
  3482  80800000800080	 db m,m,n,n,m,n,m,n,n,n,n,m,m,m,n,n
                      	 
  3492  00808000800080	 db n,m,m,n,m,n,m,n,n,n,n,n,n,m,n
  34A1  00800080008000	 db n,m,n,m,n,m,n,m,n,n,n,m,m,n,m
  34B0  80008080800080	 db m,n,m,m,m,n,m,n,n,m,n,n,m,m,m
  34BF  00808000000080	 db n,m,m,n,n,n,m,m,n,m,m,n,m,n,n
  34CE  80000080008080	 db m,n,n,m,n,m,m,n,n,n,m,n,n,m,n
  34DD  00000000000000	 db n,n,n,n,n,n,n,m,n,m,n,n,n,m,n
  34EC  00008000808000	 db n,n,m,n,m,m,n,m,m,n,n,n,n,m,m
                      	;7
  34FB  00800000008080	 db n,m,n,n,n,m,m,n,m,n,m,n,m,n,m,n
  350B  00800080808080	 db n,m,n,m,m,m,m,n,m,m,m,n,n,n,n,m
  351B  00800000808080	 db n,m,n,n,m,m,m,m,m,n,m,m,n,n,n,n
  352B  80008080008000	 db m,n,m,m,n,m,n,m,n,m,m,m,m,m,m,n
  353B  00808000000000	 db n,m,m,n,n,n,n,m,m,n,m,n,m,n,n,n
  354B  80000080008080	 db m,n,n,m,n,m,m,m,n,m,m,m,n,m,m,n
                      	 
  355B  00808080000000	 db n,m,m,m,n,n,n,n,m,n,n,n,n,n,n
  356A  00008000008000	 db n,n,m,n,n,m,n,n,n,n,m,m,m,m,m
  3579  00800000000000	 db n,m,n,n,n,n,n,m,n,n,n,m,n,n,n
  3588  00808000800000	 db n,m,m,n,m,n,n,n,n,n,m,n,m,m,m
  3597  80000080008000	 db m,n,n,m,n,m,n,m,n,n,m,m,n,n,n
  35A6  00808080808080	 db n,m,m,m,m,m,m,n,m,n,n,m,n,m,m
  35B5  00000000000080	 db n,n,n,n,n,n,m,n,n,n,n,n,n,n,m
                      	;8
  35C4  00008000800080	 db n,n,m,n,m,n,m,n,n,n,m,n,m,m,m,n
  35D4  00008080008080	 db n,n,m,m,n,m,m,n,m,m,m,n,n,m,n,n
  35E4  00800080008000	 db n,m,n,m,n,m,n,m,n,n,n,m,n,m,n,n
  35F4  00008080800080	 db n,n,m,m,m,n,m,n,n,m,m,m,m,n,n,m
  3604  00800080808000	 db n,m,n,m,m,m,n,n,m,n,n,n,n,n,n,n
  3614  00000080808000	 db n,n,n,m,m,m,n,m,m,n,n,m,n,n,n,n
                      	 
  3624  80000000000000	 db m,n,n,n,n,n,n,m,n,m,n,n,n,n,n
  3633  80008000800080	 db m,n,m,n,m,n,m,n,m,n,n,m,m,n,m
  3642  80800080008080	 db m,m,n,m,n,m,m,m,m,m,n,m,n,n,m
  3651  00008000000080	 db n,n,m,n,n,n,m,n,n,n,m,n,m,m,m
  3660  80800000008000	 db m,m,n,n,n,m,n,m,n,m,n,m,n,m,m
  366F  00800000008080	 db n,m,n,n,n,m,m,n,m,n,m,m,m,m,m
  367E  80000000008000	 db m,n,n,n,n,m,n,n,m,m,n,n,m,n,n
                      	;9
  368D  00008000808080	 db n,n,m,n,m,m,m,n,m,n,m,m,n,m,m,n
  369D  80008080800080	 db m,n,m,m,m,n,m,n,m,m,m,m,m,n,m,n
  36AD  00808080808080	 db n,m,m,m,m,m,m,n,n,m,m,n,m,n,m,n
  36BD  00808000000080	 db n,m,m,n,n,n,m,m,n,m,m,n,m,m,n,n
  36CD  80008080800000	 db m,n,m,m,m,n,n,n,m,m,n,n,n,m,n,n
  36DD  80008000008000	 db m,n,m,n,n,m,n,m,n,m,n,m,m,n,m,n
                      	 
  36ED  00000000800000	 db n,n,n,n,m,n,n,n,n,n,n,m,n,n,n
  36FC  80008000008000	 db m,n,m,n,n,m,n,m,n,n,m,n,n,n,m
  370B  00000000800080	 db n,n,n,n,m,n,m,n,n,n,m,n,n,n,m
  371A  80000080000000	 db m,n,n,m,n,n,n,m,m,n,n,m,n,m,m
  3729  00000000800000	 db n,n,n,n,m,n,n,m,n,m,m,n,m,n,n
  3738  00000080808080	 db n,n,n,m,m,m,m,n,n,n,m,m,n,m,m
  3747  00008000800080	 db n,n,m,n,m,n,m,n,m,n,n,n,n,m,n
                      	;10
  3756  00808080008000	 db n,m,m,m,n,m,n,m,n,n,m,n,m,m,m,n
  3766  00000080800000	 db n,n,n,m,m,n,n,m,m,m,n,m,n,m,n,n
  3776  00008000808000	 db n,n,m,n,m,m,n,m,m,n,m,m,m,m,n,m
  3786  00000080008000	 db n,n,n,m,n,m,n,m,n,n,m,m,n,m,m,m
  3796  80008080808080	 db m,n,m,m,m,m,m,m,n,m,n,n,m,n,m,m
  37A6  00808080800000	 db n,m,m,m,m,n,n,m,n,n,m,n,m,n,m,n
                      	 
  37B6  00800000000000	 db n,m,n,n,n,n,n,m,m,m,n,n,m,n,n
  37C5  80800000800000	 db m,m,n,n,m,n,n,n,n,n,n,n,m,n,n
  37D4  00800080008000	 db n,m,n,m,n,m,n,n,m,n,n,m,n,n,m
  37E3  80800000008000	 db m,m,n,n,n,m,n,m,m,n,m,n,n,m,n
  37F2  80000080008080	 db m,n,n,m,n,m,m,n,n,n,n,n,n,n,n
  3801  00000000000000	 db n,n,n,n,n,n,n,m,m,n,m,n,m,m,n
  3810  00000000808000	 db n,n,n,n,m,m,n,m,m,m,n,n,m,n,n
                      	;11
  381F  80008000000080	 db m,n,m,n,n,n,m,m,n,n,n,n,m,n,n,m
  382F  00000080808000	 db n,n,n,m,m,m,n,m,m,m,n,n,m,n,m,n
  383F  00008080008000	 db n,n,m,m,n,m,n,n,m,m,n,n,m,n,n,n
  384F  00808000008000	 db n,m,m,n,n,m,n,m,m,n,n,m,m,n,n,m
  385F  80000000000000	 db m,n,n,n,n,n,n,m,n,n,m,n,n,m,n,n
  386F  00808080800080	 db n,m,m,m,m,n,m,n,n,n,m,n,m,m,n,n
                      	 
  387F  00000000800000	 db n,n,n,n,m,n,n,n,m,m,m,n,m,n,n
  388E  00808080008080	 db n,m,m,m,n,m,m,n,m,n,m,m,n,m,n
  389D  80800000000080	 db m,m,n,n,n,n,m,n,n,n,n,m,n,n,m
  38AC  80008080800000	 db m,n,m,m,m,n,n,n,m,m,m,n,m,m,m
  38BB  00000000808000	 db n,n,n,n,m,m,n,m,n,m,n,n,n,m,m
  38CA  00808080008080	 db n,m,m,m,n,m,m,m,m,n,m,m,n,m,n
  38D9  00800000000000	 db n,m,n,n,n,n,n,n,m,n,m,n,m,n,m
                      	;12
  38E8  00000000808000	 db n,n,n,n,m,m,n,n,n,n,m,n,m,n,m,n
  38F8  00808080008080	 db n,m,m,m,n,m,m,n,n,n,n,n,m,m,m,n
  3908  00000080008080	 db n,n,n,m,n,m,m,m,m,n,n,n,n,m,n,n
  3918  00800000808000	 db n,m,n,n,m,m,n,n,n,m,n,m,n,m,m,n
  3928  00000080008080	 db n,n,n,m,n,m,m,n,m,n,m,n,n,m,n,n
  3938  00008000800080	 db n,n,m,n,m,n,m,m,n,n,n,m,n,n,n,m
                      	 
  3948  00008000000080	 db n,n,m,n,n,n,m,m,m,n,m,n,n,n,m
  3957  80800080800080	 db m,m,n,m,m,n,m,n,n,m,m,m,n,n,n
  3966  00000000800000	 db n,n,n,n,m,n,n,m,m,m,n,n,m,n,n
  3975  80808080800080	 db m,m,m,m,m,n,m,n,n,n,m,m,m,n,m
  3984  00800080000080	 db n,m,n,m,n,n,m,m,m,m,n,m,n,m,m
  3993  80808000000000	 db m,m,m,n,n,n,n,m,n,m,m,m,m,n,m
  39A2  80000000800000	 db m,n,n,n,m,n,n,m,m,n,n,n,n,m,n
                      	;13
  39B1  00000080000000	 db n,n,n,m,n,n,n,m,m,m,n,m,n,n,n,n
  39C1  80000000800080	 db m,n,n,n,m,n,m,m,m,m,m,n,m,n,n,m
  39D1  00800080808000	 db n,m,n,m,m,m,n,m,m,n,m,n,n,m,n,n
  39E1  80008000808000	 db m,n,m,n,m,m,n,n,m,m,n,m,n,n,m,n
  39F1  80000000000000	 db m,n,n,n,n,n,n,m,m,m,n,m,m,n,m,n
  3A01  00808000808000	 db n,m,m,n,m,m,n,n,n,n,m,m,m,m,n,n
                      	 
  3A11  80800080008000	 db m,m,n,m,n,m,n,n,n,n,n,n,m,n,n
  3A20  00000000800080	 db n,n,n,n,m,n,m,n,n,n,m,m,n,m,m
  3A2F  80808080008000	 db m,m,m,m,n,m,n,n,m,m,n,m,m,m,m
  3A3E  00000000800000	 db n,n,n,n,m,n,n,n,m,n,m,n,m,m,n
  3A4D  00808000800080	 db n,m,m,n,m,n,m,n,n,m,n,n,n,n,n
  3A5C  00008080008080	 db n,n,m,m,n,m,m,n,m,n,n,n,m,m,n
  3A6B  80000080000080	 db m,n,n,m,n,n,m,m,n,n,n,n,n,m,m
                      	;14
  3A7A  00808080008080	 db n,m,m,m,n,m,m,n,m,m,n,m,m,n,m,m
  3A8A  00808080800080	 db n,m,m,m,m,n,m,m,m,n,m,m,n,m,m,n
  3A9A  00000000000080	 db n,n,n,n,n,n,m,n,n,m,n,m,m,n,n,m
  3AAA  80008000008080	 db m,n,m,n,n,m,m,m,n,n,m,m,m,m,n,m
  3ABA  80008000008000	 db m,n,m,n,n,m,n,n,m,n,m,m,n,n,m,n
  3ACA  00000000808080	 db n,n,n,n,m,m,m,m,m,n,n,n,n,n,n,n
                      	 
  3ADA  00000080000000	 db n,n,n,m,n,n,n,n,n,m,n,n,n,n,n
  3AE9  00000000008000	 db n,n,n,n,n,m,n,n,m,n,n,n,m,n,n
  3AF8  80008000808000	 db m,n,m,n,m,m,n,n,n,m,m,n,m,n,n
  3B07  00808080800080	 db n,m,m,m,m,n,m,m,n,n,n,m,n,m,n
  3B16  00008080800000	 db n,n,m,m,m,n,n,n,m,n,m,n,n,n,n
  3B25  00000080008080	 db n,n,n,m,n,m,m,m,n,n,n,m,m,m,m
  3B34  80808000000000	 db m,m,m,n,n,n,n,n,n,m,m,m,m,m,n
                      	;15
  3B43  00800080808080	 db n,m,n,m,m,m,m,m,m,n,m,m,n,m,n,n
  3B53  80008080808000	 db m,n,m,m,m,m,n,n,m,n,m,m,m,m,n,m
  3B63  00008080800080	 db n,n,m,m,m,n,m,n,m,n,m,m,m,n,m,n
  3B73  80008000000000	 db m,n,m,n,n,n,n,n,n,m,n,m,m,n,m,n
  3B83  80800080008000	 db m,m,n,m,n,m,n,n,m,n,m,m,m,m,n,m
  3B93  00000080808080	 db n,n,n,m,m,m,m,n,n,m,n,m,n,m,n,n
                      	 
  3BA3  00000000000000	 db n,n,n,n,n,n,n,n,m,n,n,n,n,n,n
  3BB2  00800000008080	 db n,m,n,n,n,m,m,n,n,n,n,m,m,n,m
  3BC1  80000000000000	 db m,n,n,n,n,n,n,n,m,n,n,n,n,m,n
  3BD0  00000080808000	 db n,n,n,m,m,m,n,m,n,m,n,n,m,m,n
  3BDF  00800080808080	 db n,m,n,m,m,m,m,m,m,n,n,n,m,n,m
  3BEE  80000000008080	 db m,n,n,n,n,m,m,m,n,m,n,n,m,n,m
  3BFD  00808000000000	 db n,m,m,n,n,n,n,n,m,n,n,m,n,n,n
                      	;16
  3C0C  00808000008000	 db n,m,m,n,n,m,n,m,m,m,n,n,m,n,n,m
  3C1C  00808000000080	 db n,m,m,n,n,n,m,m,n,n,n,m,n,n,m,n
  3C2C  00000080000080	 db n,n,n,m,n,n,m,n,m,m,m,n,m,n,n,m
  3C3C  00808080000000	 db n,m,m,m,n,n,n,n,n,n,n,n,n,m,m,n
  3C4C  00800080000000	 db n,m,n,m,n,n,n,m,m,n,m,n,n,n,m,n
  3C5C  80808080008080	 db m,m,m,m,n,m,m,n,m,n,n,m,m,m,n,m
                      	 
  3C6C  80000080800000	 db m,n,n,m,m,n,n,n,n,m,m,n,n,n,n
  3C7B  00800080800000	 db n,m,n,m,m,n,n,n,n,n,n,m,n,m,n
  3C8A  00000080800080	 db n,n,n,m,m,n,m,m,m,m,n,m,m,m,n
  3C99  80800000808080	 db m,m,n,n,m,m,m,n,n,n,m,m,m,m,m
  3CA8  00800080808080	 db n,m,n,m,m,m,m,m,m,m,m,m,m,n,n
  3CB7  00008000808000	 db n,n,m,n,m,m,n,n,n,m,n,n,n,m,m
  3CC6  00000000000000	 db n,n,n,n,n,n,n,n,m,n,n,n,n,n,n
                      	
                      	 
                      	 
                      	
                      	
  3CD5                	 ds 201*44
                      	;60
  5F61  80808080808080	 db t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,f
  5F71  80808080808080	 db t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,f
  5F81  80808080808080	 db t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,f
  5F91  80808080808080	 db t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,f
  5FA1  80808080808080	 db t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,f
  5FB1  80808080808080	 db t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,f
                      	 
  5FC1  00000000000000	 db f,f,f,f,f,f,f,f,f,f,f,f,f,f,f
  5FD0  00000000000000	 db f,f,f,f,f,f,f,f,f,f,f,f,f,f,f
  5FDF  00000000000000	 db f,f,f,f,f,f,f,f,f,f,f,f,f,f,f
  5FEE  00000000000000	 db f,f,f,f,f,f,f,f,f,f,f,f,f,f,f
  5FFD  00000000000000	 db f,f,f,f,f,f,f,f,f,f,f,f,f,f,f
  600C  00000000000000	 db f,f,f,f,f,f,f,f,f,f,f,f,f,f,f
  601B  00000000000000	 db f,f,f,f,f,f,f,f,f,f,f,f,f,f,f
                      	 
  602A                	hp_table1:
  602A  01010101010101	 db 1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1
  603A                	hp_table2:
  603A  01010101181818	 db 1,1,1,1,24,24,24,1,1
  6043                	hp_table3:
  6043  18303060609060	 db 24,48,48,96,96,144,96
  604A                	hp_table4:
  604A  30507001080808	 db 48,80,112,1,8,8,8,96
  6052                	hp_table5:
  6052  B4010101010101	 db 180,1,1,1,1,1,1,1,1,1,1,1,1,1,1,10110000b
                      	 
                      	;**********************************Variable**************************************
  6062  00            	floor:db 0
  6063  0000          	pdoor_xy:dw 0		;83h
  6065  0000          	pkey_xy:dw 0		;85h
  6067  0000          	pgil_xy:dw 0		;84h,8fh
  6069                	obj:ds 48
  6099                	obj_hp:ds 48
  60C9                	obj_wp:ds 48
  60F9                	obj_st:ds 48
  6129                	obj_xy:ds 96;(x,y&d)
  6189                	obj_st2:ds 48
  61B9                	obj_st3:ds 48
                      	
  61E9  00            	gil_button:db 0
  61EA  00            	gil_hp:db 0
  61EB  00            	gil_wp:db 0
  61EC  00            	gil_st1:db 0	;00 or ffh:right foot or left foot
  61ED  00            	gil_st2:db 0	;bit 0-6:counter,bit 7:sword set,if bit 7 enable and bit 0-6 > 0 dec (st2)
                      			;
  61EE  00            	gil_matk:db 0	;1:c,2:s,3:g,0:none
  61EF  00            	gil_matk_count:db 0	;matk use count.it is deced when use a matk.
  61F0  00            	gil_bt:db 0	;0ffh is dash enable.
  61F1  00            	gil_sword:db 0	;1:dragon,2:ex
  61F2  00            	gil_armor:db 0	;1 is hyper.
  61F3  00            	gil_gunt:db 0	;1 is hyper.
  61F4  00            	gil_shield:db 0	;1 is hyper.
  61F5  00            	gil_neck:db 0	;1:g,2:r,3:b.
                      	
  61F6                	gil_xy:ds 2
  61F8                	gil_dblock:ds 2
                      	
  61FA                	Item:
  61FA                	matk:
  61FA  00            	 db 0
  61FB                	boot:
  61FB  00            	 db 0
  61FC                	sword:
  61FC  00            	 db 0:
  61FD                	armor:
  61FD  00            	 db 0:
  61FE                	gnt:
  61FE  00            	 db 0:
  61FF                	shield:
  61FF  00            	 db 0
  6200                	hlmt:
  6200  00            	 db 0
  6201                	rod:
  6201  00            	 db 0
  6202                	book:
  6202  00            	 db 0
  6203                	kndl:
  6203  00            	 db 0
  6204                	brns:
  6204  00            	 db 0
  6205                	posion:
  6205  00            	 db 0
  6206                	key:
  6206  00            	 db 0
  6207                	nec:
  6207  00            	 db 0
  6208                	meis
  6208  00            	 db 0
                      	
  6209                	end
