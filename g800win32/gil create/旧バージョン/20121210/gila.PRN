			  Z80 ASSEMBLER - ZASM VER 1.6
  0100                	org 0100h
                      	
  0000                	overwrite:equ 0
  001E                	x0:equ 30
  008C                	xm:equ 140
  0000                	y0:equ 0
  002F                	ym:equ 47
  0080                	t:equ 80h
  0000                	f:equ 0
                      	
  BFD0                	grp:equ 0bfd0h
  BFF1                	msp:equ 0bff1h
  BCFD                	kwait:equ 0bcfdh
  BE53                	kscan:equ 0be53h
                      	
                      	
                      	
                      	;*******************Title graph********************
  0100                	start:
  0100  210000        	 ld HL,0
  0103  39            	 add HL,SP
  0104  22EF0B        	 ld (retP+1),HL
  0107  CD770C        	 call cls 
  010A  211716        	 ld HL,graph_title
  010D  110800        	 ld DE,0008h
  0110  0632          	 ld B,50
  0112  CDC20C        	 call grp_open
  0115                	start_l:
  0115  3E01          	 ld A,1
  0117  32DE47        	 ld (floor),A
  011A  CDD10C        	 call keysc		;left,right,on,0,/,space,down,up
  011D  CB57          	 bit 2,A
  011F  C0            	 ret nz
  0120  CB5F          	 bit 3,A
  0122  2006          	 jr nz,before_game_c
  0124  CB6F          	 bit 5,A
  0126  2052          	 jr nz,Stating_before
  0128  18EB          	 jr start_l
                      	;*****************Continue*******************
  012A                	before_game_c:
  012A  CB6F          	 bit 5,A
  012C  28E7          	 jr z,start_l
  012E  CD770C        	 call cls
  0131  215B03        	 ld HL,continue_ms
  0134  110201        	 ld DE,0102h
  0137  0612          	 ld B,18
  0139  CDF1BF        	 call msp
  013C  2ADE47        	 ld HL,(floor)
  013F  2600          	 ld H,0
  0141  CD310C        	 call ascn
  0144                	before_game_c_floor:
  0144  2ADE47        	 ld HL,(floor)
  0147  2600          	 ld H,0
  0149  CD310C        	 call ascn
  014C  212F0C        	 ld HL,nmemry+3
  014F  110B03        	 ld DE,030bh
  0152  0602          	 ld B,2
  0154  CDF1BF        	 call msp
  0157  CDFDBC        	 call kwait
  015A  21DE47        	 ld HL,floor
  015D  FE1E          	 cp 1eh
  015F  2819          	 jr z,Stating_before
  0161  FE20          	 cp 20h
  0163  280C          	 jr z,before_game_c_u
  0165  FE1F          	 cp 1fh
  0167  20DB          	 jr nz,before_game_c_floor
  0169                	before_game_c_d:
  0169  35            	 dec (HL)
  016A  AF            	 xor A
  016B  BE            	 cp (HL)
  016C  20D6          	 jr nz,before_game_c_floor
  016E  34            	 inc (HL)
  016F  18D3          	 jr before_game_c_floor
  0171                	before_game_c_u:
  0171  34            	 inc (HL)
  0172  3E3D          	 ld A,61
  0174  BE            	 cp (HL)
  0175  20CD          	 jr nz,before_game_c_floor
  0177  35            	 dec (HL)
  0178  18CA          	 jr before_game_c_floor
                      	;***************Starting game****************
                      	;***************massage*********************
  017A                	Stating_before:
  017A  CD770C        	 call cls
  017D  214303        	 ld HL,stating_ms1
  0180  110801        	 ld DE,0108h
  0183  0609          	 ld B,9
  0185  CDF1BF        	 call msp
  0188  214C03        	 ld HL,stating_ms2
  018B  110802        	 ld De,0208h
  018E  060A          	 ld B,10
  0190  CDF1BF        	 call msp
  0193  215603        	 ld HL,stating_msf
  0196  110804        	 ld De,0408h
  0199  0605          	 ld B,5
  019B  CDF1BF        	 call msp
  019E  2ADE47        	 ld HL,(floor)
  01A1  2600          	 ld H,0
  01A3  CD310C        	 call ascn
  01A6  212F0C        	 ld HL,nmemry+3
  01A9  110E04        	 ld DE,040eh
  01AC  0602          	 ld B,2
  01AE  CDF1BF        	 call msp
  01B1  CDFA0B        	 call tim255
  01B4  CDFDBC        	 call kwait
                      	
                      	;***********************map set************************
  01B7  CDFF0E        	 call Map_make
                      	
                      	
                      	;**********************left right wall***********************
  01BA  0E02          	 ld c,2
  01BC  3E1B          	 ld A,27
  01BE  32C601        	 ld (Stating_before_mkwall1+1),A
  01C1                	Stating_before_mkwall2
  01C1  1600          	 ld D,0
  01C3  0606          	 ld B,6
  01C5                	Stating_before_mkwall1:
  01C5  1E00          	 ld E,overwrite
  01C7  C5            	 push BC
  01C8  D5            	 push DE
  01C9  216D03        	 ld HL,wall_grp
  01CC  0603          	 ld B,3
  01CE  CD9C10        	 call grp_set+2
  01D1  D1            	 pop DE
  01D2  C1            	 pop BC
  01D3  3E08          	 ld A,8
  01D5  82            	 add A,D
  01D6  57            	 ld D,A
  01D7  10EC          	 djnz Stating_before_mkwall1
  01D9  3E8D          	 ld A,141
  01DB  32C601        	 ld (Stating_before_mkwall1+1),A
  01DE  0D            	 dec C
  01DF  20E0          	 jr nz,Stating_before_mkwall2
                      	
                      	;**************************wall dot set***********************
                      	
  01E1  0E0F          	 ld c,15
  01E3  3E24          	 ld A,36
  01E5  32ED01        	 ld (Stating_before_mkwall11+1),A
  01E8                	Stating_before_mkwall21
  01E8  1606          	 ld D,6
  01EA  0606          	 ld B,6
  01EC                	Stating_before_mkwall11:
  01EC  1E00          	 ld E,overwrite
  01EE  C5            	 push BC
  01EF  D5            	 push DE
  01F0  217003        	 ld HL,pole_grp
  01F3  0601          	 ld B,1
  01F5  CD9C10        	 call grp_set+2
  01F8  D1            	 pop DE
  01F9  C1            	 pop BC
  01FA  3E07          	 ld A,7
  01FC  82            	 add A,D
  01FD  57            	 ld D,A
  01FE  10EC          	 djnz Stating_before_mkwall11
  0200  3AED01        	 ld A,(Stating_before_mkwall11+1)
  0203  C607          	 add A,7
  0205  32ED01        	 ld (Stating_before_mkwall11+1),A
  0208  0D            	 dec C
  0209  20DD          	 jr nz,Stating_before_mkwall21
                      	
                      	
                      	;********************************obj set***************************
                      	
                      	;***********************init************************
  020B                	stating_obj:
  020B  21E547        	 ld HL,obj
  020E  3600          	 ld (HL),0
  0210  11E647        	 ld DE,obj+1
  0213  015001        	 ld BC,48+48+48+96+48+48
  0216  EDB0          	 ldir
                      	;***********************obj countor**************
  0218  217B18        	 ld HL,obj_1
  021B  3ADE47        	 ld A,(floor)
  021E  3D            	 dec A
  021F  280B          	 jr Z,stating_obj_1
                      	
  0221  57            	 ld D,A
                      	;*********************0=end sign****next floor data***ldi loop**********
  0222                	stating_obj_2:
  0222  010000        	 ld BC,0
  0225  3E00          	 ld A,0
  0227  EDB1          	 cpir
  0229  15            	 dec D
  022A  20F6          	 jr nz,stating_obj_2
  022C                	stating_obj_1:
  022C  11E547        	 ld DE,obj
  022F                	stating_obj_3:
  022F  7E            	 ld A,(HL)
  0230  B7            	 or A
  0231  2804          	 jr z,stating_obj_7
  0233  EDA0          	 ldi
  0235  18F8          	 jr stating_obj_3
                      	
                      	;*********************obj cp= then goto mainbefore***************
                      	
  0237                	stating_obj_7:
  0237  21E547        	 ld HL,obj
  023A  110000        	 ld DE,0
  023D                	stating_obj_4:
  023D  AF            	 xor A
  023E  BE            	 cp (HL)
  023F  CABF02        	 jp z,main_before		;stating_obj_hp
  0242  E5            	 push HL
  0243  D5            	 push DE
                      	
                      	;x=x+7*A
  0244  ED5F          	 ld A,R;call rand
  0246  E60F          	 and 0fh		;a=0~15
  0248  211E00        	 ld HL,001eh	;30
  024B  110700        	 ld DE,0007h
  024E  CD250C        	 call xsan
                      	
                      	
                      	;y=y+7*A
  0251  CD0A0C        	 call rand
  0254                	stating_obj_5:
  0254  D606          	 sub 6
  0256  30FC          	 jr nc,stating_obj_5
  0258  C606          	 add A,6
  025A  110007        	 ld DE,0700h
  025D  CD250C        	 call xsan
                      	
  0260  D1            	 pop DE
  0261  E5            	 push HL		;xy
                      	
  0262  21A548        	 ld HL,obj_xy		;address
  0265  19            	 add HL,DE		;address+
                      	
  0266  CD7902        	 call stating_obj_hp_wp
                      	
  0269  19            	 add HL,DE		;address++
  026A  227002        	 ld (stating_obj_6+1),HL
                      	; add HL,DE		;address++(direction)
  026D  13            	 inc DE
                      	
  026E  E1            	 pop HL
                      	
                      	; ld HL,151eh;(30,0)
                      	
  026F                	stating_obj_6:
  026F  220000        	 ld (overwrite),HL
  0272  227249        	 ld (gil_xy),HL
  0275  E1            	 pop  HL
  0276  23            	 inc HL
  0277  18C4          	 jr stating_obj_4
                      	
                      	;*********************obs  hp  wp set*********************
  0279                	stating_obj_hp_wp:
  0279  E5            	 push HL
  027A  D5            	 push DE
  027B  21AA02        	 ld HL,stating_obj_hp_wp6
  027E  E5            	 push HL
                      	
  027F  21E547        	 ld HL,obj
  0282  19            	 add HL,DE
  0283  7E            	 ld A,(HL)
  0284  E60F          	 and 0fh
  0286  CB7E          	 bit 7,(HL)
  0288  201C          	 jr nz,stating_obj_hp_wp5
  028A  CB76          	 bit 6,(HL)
  028C  2014          	 jr nz,stating_obj_hp_wp4
  028E  CB6E          	 bit 5,(HL)
  0290  200C          	 jr nz,stating_obj_hp_wp3
  0292  CB66          	 bit 4,(HL)
  0294  2004          	 jr nz,stating_obj_hp_wp2
  0296                	stating_obj_hp_wp1:
  0296  21A647        	 ld HL,hp_table1
  0299  C9            	 ret
  029A                	stating_obj_hp_wp2:
  029A  21B647        	 ld HL,hp_table2
  029D  C9            	 ret
  029E                	stating_obj_hp_wp3:
  029E  21BF47        	 ld HL,hp_table3
  02A1  C9            	 ret
  02A2                	stating_obj_hp_wp4:
  02A2  21C647        	 ld HL,hp_table4
  02A5  C9            	 ret
  02A6                	stating_obj_hp_wp5:
  02A6  21CE47        	 ld HL,hp_table5
  02A9  C9            	 ret
  02AA                	stating_obj_hp_wp6:
  02AA  5F            	 ld E,A
  02AB  1D            	 dec E
  02AC  1600          	 ld D,0
  02AE  19            	 add HL,DE
  02AF  7E            	 ld A,(HL)
  02B0  D1            	 pop DE
  02B1  211548        	 ld HL,obj_hp
  02B4  19            	 add HL,DE
  02B5  77            	 ld (HL),A
  02B6  E1            	 pop HL
  02B7  E67F          	 and 01111111b
                      	 ;********************************************************HP*******************************
  02B9  3E38          	 ld A,00111000b
  02BB  326649        	 ld (gil_hp),A
  02BE  C9            	 ret	;gil is end of data.
                      	
                      	
                      	
                      	;wall
                      	
                      	
                      	
                      	
                      	;****************before farse***pgil_xy set**************
                      	
  02BF                	main_before:
  02BF  2A7249        	 ld HL,(gil_xy)
  02C2  22E347        	 ld (pgil_xy),HL 
  02C5  217B18        	 ld HL,obj_1
  02C8  3ADE47        	 ld A,(floor)
  02CB  3D            	 dec A
  02CC  2810          	 jr z,main_before_15
  02CE  57            	 ld D,A
  02CF  AF            	 xor A
  02D0  010000        	 ld BC,0
  02D3                	main_before_1:
  02D3  EDB1          	 cpir
  02D5  15            	 dec D
  02D6  20FB          	 jr nz,main_before_1
  02D8  21E547        	 ld HL,obj
  02DB  B7            	 or A
  02DC  ED42          	 sbc HL,BC		;it's start pointa**obj++
                      	
                      	
                      	;******************door set****************************
  02DE                	main_before_15:
  02DE  E5            	 push HL		;obj
  02DF  3E83          	 ld A,83h
  02E1  010000        	 ld BC,0
                      	;main_before_2:
  02E4  EDB1          	 cpir
  02E6  03            	 inc BC
  02E7  21A548        	 ld HL,obj_xy
  02EA  B7            	 or A
  02EB  ED42          	 sbc HL,BC
  02ED  B7            	 or A
  02EE  ED42          	 sbc HL,BC
  02F0  5E            	 ld E,(HL)
  02F1  23            	 inc HL
  02F2  56            	 ld D,(HL)
  02F3  ED53DF47      	 ld (pdoor_xy),DE
                      	
                      	;*****************key set*******************************
                      	
  02F7  E1            	 pop HL
  02F8  3E85          	 ld A,85h
  02FA  010000        	 ld BC,0
                      	;main_before_3:
  02FD  EDB1          	 cpir
  02FF  03            	 inc BC
  0300  21A548        	 ld HL,obj_xy
  0303  B7            	 or A
  0304  ED42          	 sbc HL,BC
  0306  B7            	 or A
  0307  ED42          	 sbc HL,BC
  0309  5E            	 ld E,(HL)
  030A  23            	 inc HL
  030B  56            	 ld D,(HL)
  030C  ED53E147      	 ld (pkey_xy),DE
                      	
                      	;*********************obj cross gil********************
                      	
  0310  2A7249        	 ld HL,(gil_xy)
  0313  4D            	 ld C,L
  0314  44            	 ld B,H
  0315  21A548        	 ld HL,obj_xy
  0318                	main_before_gil:
  0318  E5            	 push HL
  0319  5E            	 ld E,(HL)
  031A  23            	 inc HL
  031B  56            	 ld D,(HL)
  031C  EB            	 ex DE,HL
  031D  B7            	 or A
  031E  ED42          	 sbc HL,BC
  0320  E1            	 pop HL
  0321  2804          	 jr z,main_before_gil_z
  0323  23            	 inc HL
  0324  23            	 inc HL
  0325  18F1          	 jr main_before_gil
  0327                	main_before_gil_z:
  0327  23            	 inc HL
  0328  23            	 inc HL
  0329  7E            	 ld A,(HL)
  032A  B7            	 or A
  032B  C20B02        	 jp nz,stating_obj
                      	 
  032E  3A7002        	 ld A,(stating_obj_6+1)
  0331  6F            	 ld L,A
  0332  3A7102        	 ld A,(stating_obj_6+2)
  0335  67            	 ld H,A
  0336  3E15          	 ld A,21
  0338  77            	 ld (HL),A
  0339  23            	 inc HL
  033A  3E2A          	 ld A,42
  033C  77            	 ld (HL),A
  033D  22F000        	 ld (0f0h),HL
                      	
  0340  C37103        	 jp main
                      	
                      	
                      	
                      	
                      	
                      	
                      	
  0343                	stating_ms1:
  0343  47455420524541	 db "GET READY"
  034C                	stating_ms2:
  034C  504C4159455220	 db "PLAYER ONE"
  0356                	stating_msf:
  0356  464C4F4F52    	 db "FLOOR"
  035B                	continue_ms:
  035B  53454C45435420	 db "SELECT START FLOOR"
  036D                	wall_grp:
  036D  FFFFFF        	 db 0ffh,0ffh,0ffh
  0370                	pole_grp:
  0370  01            	 db 1h
                      	;**************************************************************************************
                      	;************************************Main*********************************************
                      	;**************************************************************************************
  0371                	main:
  0371  CDAB0C        	 call grp_o
                      	; call tim30
  0374  3E30          	 ld A,48
  0376  328503        	 ld (count+1),A
  0379  21A548        	 ld HL,obj_xy
  037C  DD211548      	 ld IX,obj_hp
  0380  FD210549      	 ld IY,obj_st2
  0384                	mains:
                      	
  0384                	count:
  0384  3E00          	 ld A,overwrite
  0386  B7            	 or A
  0387  CA7103        	 jp z,main
                      	;unknown_ID_throght(0)
  038A  DD7ED0        	 ld A,(IX-48)
  038D  B7            	 or A
  038E  CAD60B        	 jp z,mains_end
                      	;count out then main
                      	
                      	;graph_delete
                      	
  0391  E5            	 push HL		;>
  0392  5E            	 ld E,(HL)
  0393  23            	 inc HL
  0394  56            	 ld D,(HL)
  0395  CD2611        	 call grp_del
  0398  E1            	 pop HL		;<
                      	;hp_zero_throght
                      	
  0399  DD7E00        	 ld A,(IX)
  039C  B7            	 or A
  039D  CAD60B        	 jp z,mains_end
                      	
                      	
                      	
                      	
                      	;******************************ivent action **********************
                      	 
  03A0  DD7ED0        	 ld A,(IX-48)
  03A3  47            	 ld B,A
  03A4  E6E0          	 and 0e0h
  03A6  C22604        	 jp nz,st_action
  03A9  78            	 ld A,B
  03AA  FE0A          	 cp 0ah
  03AC  CA1507        	 jp z,spells_action
  03AF  FE0B          	 cp 0bh
  03B1  CA1507        	 jp z,spells_action
                      	
                      	;wp
  03B4  DD7E30        	 ld A,(IX+48)
  03B7  B7            	 or A
                      	
                      	;wp=0
  03B8  CACA03        	 jp z,st_check
                      	
                      	
                      	
                      	;wp>0
  03BB  3D            	 dec A
  03BC  DD7730        	 ld (IX+48),A
  03BF  DD7ED0        	 ld A,(IX-48);(Syubetsu)
  03C2  CB67          	 bit 4,A
  03C4  CAD504        	 jp z,sraim_move3_e;(suraimuGPRINT)
  03C7  C36F05        	 jp wizard_move_e_wpp
                      	; jp wizard_act_e
                      	; jp nz,mains_end
                      	; jp st_check
  03CA                	st_check:
  03CA  DD7E60        	 ld A,(IX+96)
  03CD  B7            	 or A
  03CE  C21F04        	 jp nz,st_dec
                      	
                      	;wp=0,st=0
                      	;wp setting((di)=move lutin)
                      	
  03D1  DD7ED0        	 ld A,(IX-48);(Syurui)
  03D4  CB67          	 bit 4,A
  03D6  2808          	 jr z,wp_str_b
  03D8  ED5F          	 ld A,R;		(wizard)
  03DA  E61F          	 and 00011111b
  03DC  CBEF          	 set 5,A
  03DE  182A          	 jr wp_str
  03E0                	wp_str_b:
  03E0  F5            	 push AF
  03E1  ED5F          	 ld A,R
  03E3  E67F          	 and 7fh
  03E5  47            	 ld B,A
  03E6  ED5F          	 ld A,R
  03E8  E67F          	 and 7fh
  03EA  80            	 add A,B
  03EB  47            	 ld B,A
  03EC  F1            	 pop AF
  03ED  FE02          	 cp 2
  03EF  3816          	 jr c,wp_G
  03F1  280F          	 jr z,wp_B
  03F3  FE04          	 cp 4
  03F5  78            	 ld A,B
  03F6  3806          	 jr c,wp_R
  03F8  2804          	 jr z,wp_BL
  03FA                	wp_D:
  03FA                	wp_DY:
  03FA  E608          	 and 8
  03FC  180C          	 jr wp_str
  03FE                	wp_BL:
  03FE                	wp_R:
  03FE  E610          	 and 16
  0400  1808          	 jr wp_str
  0402                	wp_B:
  0402  78            	 ld A,B
  0403  E608          	 and 8
  0405  1803          	 jr wp_str
  0407                	wp_G:
  0407  78            	 ld A,B
  0408  E610          	 and 16
  040A                	wp_str:
  040A  C608          	 add A,8
  040C  DD7730        	 ld (IX+48),A
  040F  3E19          	 ld A,25
  0411  DD7760        	 ld (IX+96),A
                      	
  0414  DD7ED0        	 ld A,(IX-48);(Syubetsu)
  0417  CB67          	 bit 4,A
  0419  CAD504        	 jp z,sraim_move3_e;(suraimuGPRINT)
  041C  C36F05        	 jp wizard_move_e_wpp;(wizard not print)mains_end
                      	; jp Egraph;
                      	
                      	
                      	
                      	;wp=0,st=x
  041F                	st_dec:
  041F  3D            	 dec A
  0420  DD7760        	 ld (IX+96),A
  0423  C35E04        	 jp sraim_or_wiz_action
                      	 
                      	 
                      	;***********************************knight,quox,ivent*********************************
  0426                	st_action:;Individual action
                      	; call bls
  0426  DD7ED0        	 ld A,(IX-48)
  0429  FE45          	 cp 45h
  042B  CAEF05        	 jp z,goast_action
  042E  FE46          	 cp 46h
  0430  CAEF05        	 jp z,goast_action
  0433  CB6F          	 bit 5,A
  0435  C21508        	 jp nz,knight_action
  0438  FE8F          	 cp 8fh
  043A  CA490A        	 jp z,gil_action
  043D  C3D60B        	 jp mains_end
                      	
  0440  32F000        	 ld (0f0h),A
  0443  DD7ED0        	 ld A,(IX-48)
  0446  32F400        	 ld (0f4h),A
  0449  DD7E00        	 ld A,(IX-0)
  044C  32F500        	 ld (0f5h),A
  044F  DD7E30        	 ld A,(IX+48)
  0452  32F600        	 ld (0f6h),A
  0455  DD7E60        	 ld A,(IX+96)
  0458  32F700        	 ld (0f7h),A
  045B  C3EE0B        	 jp retP
                      	
                      	
                      	
                      	
                      	
                      	
                      	
                      	
                      	
                      	
                      	
                      	
                      	
                      	
                      	
                      	
                      	
                      	
                      	
                      	;****************************************************************************
                      	;*********************************sraim or wiz*******************************
                      	
  045E                	sraim_or_wiz_action:;HL=obj_xy++
  045E  DDCBD066      	 bit 4,(IX-48);(NO.)
  0462  C20A05        	 jp nz,wiz_action
                      	
                      	 ;;;;
                      	 ;;;;
  0465  DD7E60        	 ld A,(IX+96);(st)
                      	 
                      	; ld (0f0h),A
                      	; jp retP
                      	
  0468  FE09          	 cp 9
  046A  280B          	 jr z,sraim_move1_B
  046C  FE05          	 cp 5
  046E  2823          	 jr z,sraim_move1
  0470  FE01          	 cp 1
  0472  283F          	 jr z,sraim_move3
  0474  C3D504        	 jp sraim_move3_e;mains_end
                      	
                      	
  0477                	sraim_move1_B:
  0477  CDE50D        	 call wall_ck
  047A  2817          	 jr z,sraim_move1
  047C  23            	 inc HL
  047D  CBBE          	 res 7,(HL)
  047F  CBB6          	 res 6,(HL)
  0481  ED5F          	 ld A,R
                      	; rla
  0483  1F            	 rra
  0484  1F            	 rra
  0485  1F            	 rra
  0486  E6C0          	 and 0c0h
  0488  B6            	 or (HL)
  0489  77            	 ld (HL),A
  048A  2B            	 dec HL
  048B  3E50          	 ld A,80
  048D  DD7760        	 ld (IX+96),A
  0490  C3D504        	 jp sraim_move3_e
  0493                	sraim_move1:
                      	;graph_delete
                      	
                      	; push HL		;>
                      	; call bls
                      	; ld E,(HL)
                      	; inc HL
                      	; ld D,(HL)
                      	; call grp_del
                      	; pop HL		;<
                      	
                      	
  0493  23            	 inc HL
  0494  7E            	 ld A,(HL)
  0495  E6C0          	 and 0c0h
  0497  280B          	 jr z,sraim_move1_u
  0499  FE80          	 cp 80h
  049B  380C          	 jr c,sraim_move1_r
  049D  280F          	 jr z,sraim_move1_d
  049F                	sraim_move1_l:
  049F  2B            	 dec HL
  04A0  35            	 dec (HL)
  04A1  35            	 dec (HL)
  04A2  1831          	 jr sraim_move3_e
  04A4                	sraim_move1_u:
  04A4  35            	 dec (HL)
  04A5  35            	 dec (HL)
  04A6  2B            	 dec HL
  04A7  182C          	 jr sraim_move3_e
  04A9                	sraim_move1_r:
  04A9  2B            	 dec HL
  04AA  34            	 inc (HL)
  04AB  34            	 inc (HL)
  04AC  1827          	 jr sraim_move3_e
  04AE                	sraim_move1_d:
  04AE  34            	 inc (HL)
  04AF  34            	 inc (HL)
  04B0  2B            	 dec HL
                      	
  04B1  1822          	 jr sraim_move3_e
                      	
                      	
  04B3                	sraim_move3:
                      	
  04B3  23            	 inc HL
  04B4  7E            	 ld A,(HL)
  04B5  E6C0          	 and 0c0h
  04B7  280C          	 jr z,sraim_move3_u
  04B9  FE80          	 cp 80h
  04BB  380E          	 jr c,sraim_move3_r
  04BD  2812          	 jr z,sraim_move3_d
  04BF                	sraim_move3_l:
  04BF  2B            	 dec HL
  04C0  35            	 dec (HL)
  04C1  35            	 dec (HL)
  04C2  35            	 dec (HL)
  04C3  1810          	 jr sraim_move3_e
  04C5                	sraim_move3_u:
  04C5  35            	 dec (HL)
  04C6  35            	 dec (HL)
  04C7  35            	 dec (HL)
  04C8  2B            	 dec HL
  04C9  180A          	 jr sraim_move3_e
  04CB                	sraim_move3_r:
  04CB  2B            	 dec HL
  04CC  34            	 inc (HL)
  04CD  34            	 inc (HL)
  04CE  34            	 inc (HL)
  04CF  1804          	 jr sraim_move3_e
  04D1                	sraim_move3_d:
  04D1  34            	 inc (HL)
  04D2  34            	 inc (HL)
  04D3  34            	 inc (HL)
  04D4  2B            	 dec HL
  04D5                	sraim_move3_e:
  04D5  11D317        	 ld DE,graph_sraimd
  04D8                	Egraph:;(DE=)
  04D8  ED53E104      	 ld (Egraph_put+1),DE
  04DC  E5            	 push HL		;>
  04DD  5E            	 ld E,(HL)
  04DE  23            	 inc HL
  04DF  56            	 ld D,(HL)
  04E0                	Egraph_put:
  04E0  210000        	 ld HL,overwrite
  04E3  CD9A10        	 call grp_set
  04E6  E1            	 pop HL			;<
  04E7  DD7ED0        	 ld A,(IX-48)
  04EA  E6F8          	 and 11111000b
  04EC  CAF004        	 jp z,sraim_cross_ck;
  04EF  C9            	 ret
                      	 
  04F0                	sraim_cross_ck:
  04F0  3A6949        	 ld A,(gil_st2)
  04F3  CB7F          	 bit 7,A		;(gil sworud MIRU)
  04F5  2808          	 jr z,s1
  04F7  CDB60D        	 call cross_ck_a;s
  04FA  DCD80D        	 call c,cha_kill;(suraim HP=0)
  04FD  1808          	 jr s2
  04FF                	s1:;(gil_st=0-x)
  04FF  CDB60D        	 call cross_ck_a
  0502  3003          	 jr nc,s2
  0504  C3B40B        	 jp gil_killing
                      	 
  0507                	s2:
                      	; jp c,retP
  0507  C3D60B        	 jp mains_end
                      	
                      	
                      	;******************wiz actions**Main***********************
  050A                	wiz_action:
  050A  DD7E60        	 ld A,(IX+96)
  050D  FE18          	 cp 24
  050F  CA3B05        	 jp z,wiz_ap
  0512  FE0C          	 cp 12
  0514  CA5D05        	 jp z,wiz_sp
  0517  FD7E00        	 ld A,(IY)
  051A  B7            	 or A
  051B  C26305        	 jp nz,wiz_dec
  051E                	wiz_dec2:
  051E  11EB17        	 ld DE,magic
  0521  CDD804        	 call Egraph
                      	;********************cross chack wiz*******************
  0524                	wizard_cross_ck;
  0524  3A6949        	 ld A,(gil_st2)
  0527  CB7F          	 bit 7,A		;(gil sworud MIRU)
  0529  2808          	 jr z,ss1
  052B  CDB60D        	 call cross_ck_a;s
  052E  DCD80D        	 call c,cha_kill;(suraim HP=0)
  0531  1805          	 jr ss2
  0533                	ss1:;(gil_st=0-x)
  0533  CDB60D        	 call cross_ck_a
  0536  3000          	 jr nc,wizard_end
                      	; jp gil_killing
  0538                	ss2:
  0538                	wizard_end:
                      	;********************wiz end***************************
  0538  C3D60B        	 jp mains_end
                      	
  053B                	wiz_ap:
                      	
  053B                	gil_notaction_f:
  053B  3A6549        	 ld A,(gil_button)
  053E  DD3430        	 inc (IX+48)
  0541  DD3460        	 inc (IX+96)
  0544  E6C3          	 and 11000011b
  0546  CA3805        	 jp z,wizard_end
  0549  DD3530        	 dec (IX+48)
  054C  DD3560        	 dec (IX+96)
                      	 
  054F  DD7E60        	 ld A,(IX+96)
  0552  3E0A          	 ld A,10
  0554  FD7700        	 ld (IY),A
  0557  CD7205        	 call wiz_locate
  055A  C31E05        	 jp wiz_dec2
  055D                	wiz_sp:
  055D  CDCF06        	 call spell_create
  0560  C31E05        	 jp wiz_dec2
  0563                	wiz_dec:
  0563  DD3460        	 inc (IX+96)
  0566  FD3500        	 dec (IY)
  0569  FD7E00        	 ld A,(IY)
  056C  C31E05        	 jp wiz_dec2
                      	
                      	;***********************wp>0 then noting*********************
  056F                	wizard_move_e_wpp;wp>0
  056F  C3D60B        	 jp mains_end
                      	
                      	;***********************wiz_locate**************************
  0572                	wiz_locate:
                      	
  0572  E5            	 push HL	;>
  0573  217249        	 ld HL,gil_xy
  0576  5E            	 ld E,(HL);x
  0577  23            	 inc HL
  0578  56            	 ld D,(HL);y
                      	
                      	; ld A,E
                      	; ld (0f0h),A
                      	; ld A,D
                      	; ld (0f1h),A
                      	 
  0579  E1            	 pop HL		;<
  057A  ED5F          	 ld A,R
  057C  4F            	 ld C,A
  057D  ED5F          	 ld A,R
  057F  E603          	 and 00000011b
  0581  B7            	 or A
  0582  CAA005        	 jp z,wiz_locate_left
  0585  FE02          	 cp 2
  0587  DAB705        	 jp c,wiz_locate_down
  058A  CACB05        	 jp z,wiz_locate_right
  058D                	wiz_locate_up:
  058D  7A            	 ld A,D
  058E  E63F          	 and 00111111b
  0590  D60E          	 sub 14
  0592  38DE          	 jr c,wiz_locate
  0594  F680          	 or 10000000b
  0596  57            	 ld D,A
                      	 
  0597  7B            	 ld A,E
  0598  77            	 ld (HL),A
  0599  23            	 inc HL
  059A  7A            	 ld A,D
  059B  77            	 ld (HL),A
  059C  2B            	 dec HL
                      	 
  059D  C3E305        	 jp wiz_locate_end
  05A0                	wiz_locate_left;
  05A0  7B            	 ld A,E
  05A1  D60E          	 sub 14
  05A3  FE1E          	 cp 30
  05A5  38CB          	 jr c,wiz_locate
  05A7  5F            	 ld E,A
                      	 
  05A8  7A            	 ld A,D
  05A9  E63F          	 and 00111111b
  05AB  F640          	 or 01000000b
  05AD  57            	 ld D,A
                      	 
  05AE  7B            	 ld A,E
  05AF  77            	 ld (HL),A
  05B0  23            	 inc HL
  05B1  7A            	 ld A,D
  05B2  77            	 ld (HL),A
  05B3  2B            	 dec HL
                      	 
  05B4  C3E305        	 jp wiz_locate_end
  05B7                	wiz_locate_down;
  05B7  7A            	 ld A,D
  05B8  E63F          	 and 00111111b
  05BA  7A            	 ld A,D
  05BB  C60E          	 add A,14
  05BD  FE30          	 cp 47+1
  05BF  30B1          	 jr nc,wiz_locate
  05C1  57            	 ld D,A
                      	 
  05C2  7B            	 ld A,E
  05C3  77            	 ld (HL),A
  05C4  23            	 inc HL
  05C5  7A            	 ld A,D
  05C6  77            	 ld (HL),A
  05C7  2B            	 dec HL
                      	 
  05C8  C3E305        	 jp wiz_locate_end
  05CB                	wiz_locate_right;
  05CB  7B            	 ld A,E
  05CC  C60E          	 add A,14
  05CE  FE88          	 cp 135+1
  05D0  D27205        	 jp nc,wiz_locate
  05D3  5F            	 ld E,A
                      	 
  05D4  7A            	 ld A,D
  05D5  E63F          	 and 00111111b
  05D7  F6C0          	 or 11000000b
  05D9  57            	 ld D,A
                      	 
  05DA  7B            	 ld A,E
  05DB  77            	 ld (HL),A
  05DC  23            	 inc HL
  05DD  7A            	 ld A,D
  05DE  77            	 ld (HL),A
  05DF  2B            	 dec HL
                      	 
  05E0  C3E305        	 jp wiz_locate_end
                      	 
                      	;
  05E3                	wiz_locate_end:
  05E3  CD780E        	 call wall_mod
  05E6  7E            	 ld A,(HL)
  05E7  91            	 sub C
  05E8  77            	 ld (HL),A 
  05E9  23            	 inc HL		;>
  05EA  7E            	 ld A,(HL)
  05EB  90            	 sub B
  05EC  77            	 ld (HL),A
  05ED  2B            	 dec HL		;<
  05EE  C9            	 ret
                      	 
                      	;******************************goast action***************************
  05EF                	goast_action:
  05EF  DD7E60        	 ld A,(IX+96)
  05F2  47            	 ld B,A
  05F3  DD7E00        	 ld A,(IX)
  05F6  B8            	 cp B
  05F7  3803          	 jr c,goast_action_b
  05F9  DD7760        	 ld (IX+96),A
  05FC                	goast_action_b:
  05FC  DD7E30        	 ld A,(IX+48)
  05FF  B7            	 or A
  0600  CA0D06        	 jp z,goast_action_a
  0603  3D            	 dec A
  0604  DD7730        	 ld (IX+48),A
  0607  CAA306        	 jp z,goast_warp_ap
  060A  C37A06        	 jp goast_end
  060D                	goast_action_a:
  060D  CD780E        	 call wall_mod
  0610  79            	 ld A,C
  0611  B7            	 or A
  0612  C27706        	 jp nz,goast_move
  0615  78            	 ld A,B
  0616  B7            	 or A
  0617  C27706        	 jp nz,goast_move 
                      	 
  061A                	goast_action_0:
  061A  CD1F0C        	 call rand4
  061D  FE80          	 cp 80h
  061F  3803          	 jr c,goast_action_1
  0621  CDCF06        	 call spell_create
  0624                	goast_action_1:
  0624  CDD609        	 call xyload
  0627  3A7249        	 ld A,(gil_xy)
  062A  93            	 sub E
  062B  3004          	 jr nc,goast_cp1
  062D  2812          	 jr z,goast_y
  062F  ED44          	 neg
  0631                	goast_cp1:
  0631  4F            	 ld C,A
  0632  3A7349        	 ld A,(gil_xy+1)
  0635  E63F          	 and 00111111b
  0637  92            	 sub D
  0638  3004          	 jr nc,goast_cp2
  063A  280C          	 jr z,goast_x
  063C  ED44          	 neg
  063E                	goast_cp2:
  063E  B9            	 cp C
  063F  3807          	 jr c,goast_x 
  0641                	goast_y:
  0641  CDC909        	 call y_ck
  0644  3819          	 jr c,goast_up
  0646  181F          	 jr goast_do
  0648                	goast_x:
  0648  CDC109        	 call x_ck
  064B  3802          	 jr c,goast_le
  064D  1808          	 jr goast_ri
  064F                	goast_le:
  064F  23            	 inc HL
  0650  CBFE          	 set 7,(HL)
  0652  CBF6          	 set 6,(HL)
  0654  2B            	 dec HL
  0655  1818          	 jr goast_wc
  0657                	goast_ri:
  0657  23            	 inc HL
  0658  CBBE          	 res 7,(HL)
  065A  CBF6          	 set 6,(HL)
  065C  2B            	 dec HL
  065D  1810          	 jr goast_wc
  065F                	goast_up:
  065F  23            	 inc HL
  0660  CBBE          	 res 7,(HL)
  0662  CBB6          	 res 6,(HL)
  0664  2B            	 dec HL
  0665  1808          	 jr goast_wc
  0667                	goast_do:
  0667  23            	 inc HL
  0668  CBFE          	 set 7,(HL)
  066A  CBB6          	 res 6,(HL)
  066C  2B            	 dec HL
  066D  1800          	 jr goast_wc
  066F                	goast_wc:
  066F  CDE50D        	 call wall_ck
  0672  2803          	 jr z,goast_move
  0674  C39B06        	 jp goast_warp
  0677                	goast_move:
  0677  CDD708        	 call empty_move
  067A                	goast_end:
                      	 
  067A  3A6949        	 ld A,(gil_st2)
  067D  FEFF          	 cp 0ffh
  067F  2811          	 jr z,sssss1
  0681  CB7F          	 bit 7,A
  0683  2808          	 jr z,sssss0
  0685  CDB60D        	 call cross_ck_a;s
  0688  DC140A        	 call c,HP_decB;
  068B  2805          	 jr z,sssss2
  068D                	sssss0:
  068D  CDB60D        	 call cross_ck_a;
  0690  1800          	 jr sssss2
  0692                	sssss1:;(gil_st=0-x)
  0692                	sssss2:
                      	 
  0692  110318        	 ld DE,graph_goast
  0695  CDD804        	 call Egraph
  0698  C3D60B        	 jp mains_end
                      	 
                      	;****************************goast sub*********************************** 
  069B                	goast_warp:
  069B  3E12          	 ld A,18
  069D  DD7730        	 ld (IX+48),A
  06A0  C37A06        	 jp goast_end
                      	 
  06A3                	goast_warp_ap:
  06A3  23            	 inc HL
  06A4  7E            	 ld A,(HL)
  06A5  2B            	 dec HL
  06A6  E6C0          	 and 11000000b
  06A8  280C          	 jr z,goast_warp_ap_u
  06AA  FE80          	 cp 80h
  06AC  3810          	 jr c,goast_warp_ap_r
  06AE  2814          	 jr z,goast_warp_ap_d
  06B0                	goast_warp_ap_l:
  06B0  7E            	 ld A,(HL)
  06B1  D607          	 sub 7
  06B3  77            	 ld (HL),A
  06B4  1816          	 jr goast_warp_ap_e
  06B6                	goast_warp_ap_u:
  06B6  23            	 inc HL
  06B7  7E            	 ld A,(HL)
  06B8  D607          	 sub 7
  06BA  77            	 ld (HL),A
  06BB  2B            	 dec HL
  06BC  180E          	 jr goast_warp_ap_e
  06BE                	goast_warp_ap_r:
  06BE  7E            	 ld A,(HL)
  06BF  C607          	 add A,7
  06C1  77            	 ld (HL),A
  06C2  1808          	 jr goast_warp_ap_e
  06C4                	goast_warp_ap_d:
  06C4  23            	 inc HL
  06C5  7E            	 ld A,(HL)
  06C6  C607          	 add A,7
  06C8  77            	 ld (HL),A
  06C9  2B            	 dec HL
  06CA  1800          	 jr goast_warp_ap_e
  06CC                	goast_warp_ap_e:
  06CC  C37A06        	 jp goast_end
                      	 
                      	;******************************spell create*************************** 
                      	;******************************spell create*************************** 
  06CF                	spell_create:
  06CF  E5            	 push HL
  06D0  AF            	 xor A
  06D1  21E547        	 ld HL,obj
  06D4  AF            	 xor A
  06D5  010000        	 ld BC,0
  06D8  EDB1          	 cpir		;BC<0
  06DA  03            	 inc BC
                      	 
                      	 
                      	; ld (HL),0	;chr clr
  06DB  2B            	 dec HL		;spell address
  06DC  DD7ED0        	 ld A,(IX-48)
  06DF  FE13          	 cp 13h
  06E1  2808          	 jr z,spellB
  06E3  FE46          	 cp 46h
  06E5  2804          	 jr z,spellB
  06E7  360A          	 ld (HL),0Ah
  06E9  1802          	 jr spellsetok
  06EB                	spellB:
  06EB  360B          	 ld (HL),0Bh
  06ED                	spellsetok:
                      			;hp
  06ED  113000        	 ld DE,48
  06F0  19            	 add HL,DE
  06F1  3601          	 ld (HL),1
                      	 		;st2
  06F3  11F000        	 ld DE,48*5
  06F6  19            	 add HL,DE
  06F7  3600          	 ld (HL),0
                      	 
  06F9  E1            	 pop HL
                      	 
                      	; ld (0f4h),HL
                      	
  06FA  7E            	 ld A,(HL)
  06FB  5F            	 ld E,A
  06FC  23            	 inc HL
  06FD  7E            	 ld A,(HL)
  06FE  57            	 ld D,A
  06FF  2B            	 dec HL
                      	 
  0700  E5            	 push HL
  0701  210000        	 ld HL,0
  0704  B7            	 or A
  0705  ED42          	 sbc HL,BC;xy_countor
  0707  B7            	 or A
  0708  ED42          	 sbc HL,BC
  070A  01A548        	 ld BC,obj_xy
  070D  09            	 add HL,BC
                      	 
                      	 
  070E  7B            	 ld A,E
  070F  77            	 ld (HL),A
  0710  23            	 inc HL
  0711  7A            	 ld A,D
  0712  77            	 ld (HL),A
                      	 
                      	; ld (0f0h),HL
                      	; ld (0f2h),BC
                      	 
                      	 
  0713  E1            	 pop HL
  0714  C9            	 ret
                      	;******************************spell action****************************
  0715                	spells_action:
  0715  FD7E00        	 ld A,(IY)
  0718  FE01          	 cp 1
  071A  CA5E07        	 jp z,spells_action1
  071D  FE02          	 cp 2
  071F  CA8707        	 jp z,spells_action2
                      	
  0722  CD780E        	 call wall_mod
  0725  78            	 ld A,B
  0726  B7            	 or A
  0727  C20208        	 jp nz,spells_action_delete
  072A  79            	 ld A,C
  072B  B7            	 or A
  072C  C20208        	 jp nz,spells_action_delete
                      	 
  072F  CDE50D        	 call wall_ck
  0732  C2B407        	 jp nz,spells_action_dol
  0735                	spells_action_wiz:
  0735  23            	 inc HL
  0736  7E            	 ld A,(HL)
  0737  2B            	 dec HL
  0738  E6C0          	 and 11000000b
  073A  280A          	 jr z,spells_action_u
  073C  FE80          	 cp 80h
  073E  380C          	 jr c,spells_action_r
  0740  280E          	 jr z,spells_action_d
  0742                	spells_action_l:
  0742  35            	 dec (HL)
  0743  35            	 dec (HL)
  0744  1810          	 jr spells_action_urdl
  0746                	spells_action_u:
  0746  23            	 inc HL
  0747  35            	 dec (HL)
  0748  35            	 dec (HL)
  0749  2B            	 dec HL
  074A  180A          	 jr spells_action_urdl
  074C                	spells_action_r:
  074C  34            	 inc (HL)
  074D  34            	 inc (HL)
  074E  1806          	 jr spells_action_urdl
  0750                	spells_action_d:
  0750  23            	 inc HL
  0751  34            	 inc (HL)
  0752  34            	 inc (HL)
  0753  2B            	 dec HL
  0754  1800          	 jr spells_action_urdl
  0756                	spells_action_urdl:
  0756  3E01          	 ld A,1
  0758  FD7700        	 ld (IY),A
  075B  C3C107        	 jp spells_actionend
                      	 
                      	 
                      	 
  075E                	spells_action1:
  075E  23            	 inc HL
  075F  7E            	 ld A,(HL)
  0760  2B            	 dec HL
  0761  E6C0          	 and 11000000b
  0763  280A          	 jr z,spells_action1_u
  0765  FE80          	 cp 80h
  0767  380C          	 jr c,spells_action1_r
  0769  280E          	 jr z,spells_action1_d
  076B                	spells_action1_l:
  076B  35            	 dec (HL)
  076C  35            	 dec (HL)
  076D  1810          	 jr spells_action1_urdl
  076F                	spells_action1_u:
  076F  23            	 inc HL
  0770  35            	 dec (HL)
  0771  35            	 dec (HL)
  0772  2B            	 dec HL
  0773  180A          	 jr spells_action1_urdl
  0775                	spells_action1_r:
  0775  34            	 inc (HL)
  0776  34            	 inc (HL)
  0777  1806          	 jr spells_action1_urdl
  0779                	spells_action1_d:
  0779  23            	 inc HL
  077A  34            	 inc (HL)
  077B  34            	 inc (HL)
  077C  2B            	 dec HL
  077D  1800          	 jr spells_action1_urdl
  077F                	spells_action1_urdl:
  077F  3E02          	 ld A,2
  0781  FD7700        	 ld (IY),A
  0784  C3C107        	 jp spells_actionend
                      	 
                      	 
                      	
  0787                	spells_action2:
  0787  23            	 inc HL
  0788  7E            	 ld A,(HL)
  0789  2B            	 dec HL
  078A  E6C0          	 and 11000000b
  078C  280B          	 jr z,spells_action2_u
  078E  FE80          	 cp 80h
  0790  380E          	 jr c,spells_action2_r
  0792  2811          	 jr z,spells_action2_d
  0794                	spells_action2_l:
  0794  35            	 dec (HL)
  0795  35            	 dec (HL)
  0796  35            	 dec (HL)
  0797  1813          	 jr spells_action2_urdl
  0799                	spells_action2_u:
  0799  23            	 inc HL
  079A  35            	 dec (HL)
  079B  35            	 dec (HL)
  079C  35            	 dec (HL)
  079D  2B            	 dec HL
  079E  180C          	 jr spells_action2_urdl
  07A0                	spells_action2_r:
  07A0  34            	 inc (HL)
  07A1  34            	 inc (HL)
  07A2  34            	 inc (HL)
  07A3  1807          	 jr spells_action2_urdl
  07A5                	spells_action2_d:
  07A5  23            	 inc HL
  07A6  34            	 inc (HL)
  07A7  34            	 inc (HL)
  07A8  34            	 inc (HL)
  07A9  2B            	 dec HL
  07AA  1800          	 jr spells_action2_urdl
  07AC                	spells_action2_urdl:
  07AC  3E00          	 ld A,0
  07AE  FD7700        	 ld (IY),A
  07B1  C3C107        	 jp spells_actionend
  07B4                	spells_action_dol:
  07B4  DD7ED0        	 ld A,(IX-48)
  07B7  FE0B          	 cp 0bh
  07B9  E5            	 push HL
  07BA  CCA70E        	 call z,matk_action
  07BD  E1            	 pop HL
  07BE  C30208        	 jp spells_action_delete
                      	 
  07C1                	spells_actionend:
  07C1                	spells_action_cross
                      	 
                      	
                      	;********************cross chack spell*******************
  07C1                	spell_cross_ck;
  07C1  CDB60D        	 call cross_ck_a;s
  07C4  3033          	 jr nc,spell_cross_ck_end
  07C6                	spell_cross_ck_1:
                      	
  07C6  3A7349        	 ld A,(gil_xy+1)
  07C9  E6C0          	 and 11000000b
  07CB  17            	 rla
  07CC  17            	 rla
  07CD  17            	 rla
  07CE  47            	 ld B,A
  07CF  23            	 inc HL
  07D0  7E            	 ld A,(HL)
  07D1  2B            	 dec HL
  07D2  E6C0          	 and 11000000b
  07D4  17            	 rla
  07D5  17            	 rla
  07D6  17            	 rla
  07D7  3C            	 inc A
  07D8  3C            	 inc A
  07D9  E603          	 and 00000011b
  07DB  4F            	 ld C,A
  07DC  C5            	 push BC
                      	
  07DD  3A6949        	 ld A,(gil_st2)
  07E0  CB7F          	 bit 7,A		;(gil sworud MIRU)
  07E2  2009          	 jr nz,spell_cross_ck_s
  07E4                	spell_cross_ck_n:
  07E4  C1            	 pop BC
  07E5  79            	 ld A,C
  07E6  A8            	 xor B				;urdl = turdl
  07E7  CA0208        	 jp z,spells_action_delete
  07EA  C3B40B        	 jp gil_killing
  07ED                	spell_cross_ck_s:
  07ED  C1            	 pop BC
  07EE  79            	 ld A,C
  07EF  3C            	 inc A
  07F0  E603          	 and 00000011b
  07F2  A8            	 xor B				;urdl = turdl
  07F3  CA0208        	 jp z,spells_action_delete
  07F6  C3B40B        	 jp gil_killing
  07F9                	spell_cross_ck_end:
  07F9  111B18        	 ld DE,graph_spell
  07FC  CDD804        	 call Egraph;call Egraph
  07FF  C3D60B        	 jp mains_end
                      	 
  0802                	spells_action_delete:
  0802  AF            	 xor A
  0803  DD77D0        	 ld (IX-48),A
  0806  DD7700        	 ld (IX),A
  0809  FD7700        	 ld (IY),A
  080C  3600          	 ld (HL),0
  080E  23            	 inc HL
  080F  3600          	 ld (HL),0
  0811  2B            	 dec HL
  0812  C3D60B        	 jp mains_end
                      	 
                      	 
                      	
                      	 
                      	;***************************************************************
                      	;**************************knight action************************
  0815                	knight_action:;HL=obj_xy++
                      	;******************ricaba*******************
  0815  DD7E60        	 ld A,(IX+96)
  0818  47            	 ld B,A
  0819  DD7E00        	 ld A,(IX)
  081C  B8            	 cp B
  081D  3803          	 jr c,knight_actiona
  081F  DD7760        	 ld (IX+96),A
  0822                	knight_actiona:
  0822  DD7ED0        	 ld A,(IX-48)
  0825  FE23          	 cp 23h
  0827  2807          	 jr z,knight_action1
  0829  DD7E30        	 ld A,(IX+48)
  082C  B7            	 or A
  082D  CAF008        	 jp z,knight_action_end
                      	
  0830                	knight_action1:
  0830  CD780E        	 call wall_mod
  0833  78            	 ld A,B
  0834  B7            	 or A
  0835  C2D308        	 jp nz,knight_move
  0838  79            	 ld A,C
  0839  B7            	 or A
  083A  C2D308        	 jp nz,knight_move
                      	 
  083D  CDB209        	 call xy_ck
  0840  CA8C08        	 jp z,knight_xy
  0843  CDC109        	 call x_ck
  0846  CA9B08        	 jp z,knight_x
  0849  CDC909        	 call y_ck
  084C  CAB708        	 jp z,knight_y
  084F                	kight_accel:
                      	
  084F  CDE50D        	 call wall_ck
  0852  C37908        	 jp kight_accel_2 
                      	 
  0855  CDB209        	 call xy_ck
  0858  CDDE09        	 call right_turn
  085B  CDE50D        	 call wall_ck
  085E  CA3409        	 jp z,knight_front_ck
  0861  CDEC09        	 call left_turn
  0864  CDE50D        	 call wall_ck
  0867  CAD308        	 jp z,knight_move
  086A  CD1F0C        	 call rand4
  086D  FE02          	 cp 2
  086F  3805          	 jr c,kight_accel_1
  0871  CDDE09        	 call right_turn
  0874  1803          	 jr kight_accel_2
  0876                	kight_accel_1:
  0876  CDEC09        	 call left_turn
  0879                	kight_accel_2:
  0879  CDE50D        	 call wall_ck
  087C  CAD308        	 jp z,knight_move
                      	 
  087F  CD1F0C        	 call rand4
  0882  47            	 ld B,A
  0883  23            	 inc HL
  0884  7E            	 ld A,(HL)
  0885  E63F          	 and 00111111b
  0887  B0            	 or B
  0888  77            	 ld (HL),A
  0889  2B            	 dec HL
                      	 
                      	 
  088A  18ED          	 jr kight_accel_2
                      	
                      	
  088C                	knight_xy:
  088C  23            	 inc HL
  088D  7E            	 ld A,(HL)
  088E  F6C0          	 or 11000000b
  0890  77            	 ld (HL),A
  0891  2B            	 dec HL
  0892  CDE50D        	 call wall_ck
  0895  CAD308        	 jp z,knight_move
  0898  C37908        	 jp kight_accel_2 
                      	 
  089B                	knight_x:
  089B  CDC909        	 call y_ck
  089E  3808          	 jr c,knight_x_1
  08A0  23            	 inc HL
  08A1  CBFE          	 set 7,(HL)
  08A3  CBB6          	 res 6,(HL)
  08A5  2B            	 dec HL
  08A6  1806          	 jr knight_x_2
  08A8                	knight_x_1:
  08A8  23            	 inc HL
  08A9  CBBE          	 res 7,(HL)
  08AB  CBB6          	 res 6,(HL)
  08AD  2B            	 dec HL
  08AE                	knight_x_2:
  08AE  CDE50D        	 call wall_ck
  08B1  CAD308        	 jp z,knight_move
  08B4  C37908        	 jp kight_accel_2 
                      	 
  08B7                	knight_y:
  08B7  CDC109        	 call x_ck
  08BA  3808          	 jr c,knight_y_1
  08BC  23            	 inc HL
  08BD  CBBE          	 res 7,(HL)
  08BF  CBF6          	 set 6,(HL)
  08C1  2B            	 dec HL
  08C2  1806          	 jr knight_y_2
  08C4                	knight_y_1:
  08C4  23            	 inc HL
  08C5  CBFE          	 set 7,(HL)
  08C7  CBF6          	 set 6,(HL)
  08C9  2B            	 dec HL
  08CA                	knight_y_2:
  08CA  CDE50D        	 call wall_ck
  08CD  CAD308        	 jp z,knight_move
  08D0  C37908        	 jp kight_accel_2 
                      	 
                      	
                      	
                      	
                      	
                      	
                      	
  08D3                	knight_move:;a=0~3
  08D3  11F008        	 ld DE, knight_action_end
  08D6  D5            	 push DE
  08D7                	empty_move:
  08D7  23            	 inc HL
  08D8  7E            	 ld A,(HL)
  08D9  2B            	 dec HL
  08DA  E6C0          	 and 11000000b
  08DC  2808          	 jr z,knight_action_up
  08DE  FE80          	 cp 80h
  08E0  3808          	 jr c,knight_action_ri
  08E2  2808          	 jr z,knight_action_do
  08E4                	knight_action_le:
  08E4  35            	 dec (HL)
  08E5  C9            	 ret
  08E6                	knight_action_up:
  08E6  23            	 inc HL
  08E7  35            	 dec (HL)
  08E8  2B            	 dec HL
  08E9  C9            	 ret
  08EA                	knight_action_ri:
  08EA  34            	 inc (HL)
  08EB  C9            	 ret
  08EC                	knight_action_do:
  08EC  23            	 inc HL
  08ED  34            	 inc (HL)
  08EE  2B            	 dec HL
  08EF  C9            	 ret
                      	
                      	 
                      	 
                      	
                      	
  08F0                	knight_action_end:
  08F0  FD7E30        	 ld A,(IY+48)
  08F3  EE01          	 xor 1
  08F5  FD7730        	 ld (IY+48),A
  08F8  B7            	 or A
  08F9  2805          	 jr z,knight_action_end2
                      	 
  08FB  113318        	 ld DE,graph_n_knightu
  08FE  1803          	 jr knight_action_end3
  0900                	knight_action_end2:
  0900  114B18        	 ld DE,graph_n_knightu+24
  0903                	knight_action_end3:
  0903  CDD804        	 call Egraph
                      	 
                      	 
                      	;********************cross chack kight*******************
                      	; call kwait
                      	
  0906  3A6949        	 ld A,(gil_st2)
  0909  FEFF          	 cp 0ffh
  090B  2814          	 jr z,ssss1
  090D  CB7F          	 bit 7,A	;(gil sworud MIRU) 
  090F  2808          	 jr z,ssss0
  0911  CDB60D        	 call cross_ck_a;s
  0914  DCF609        	 call c,HP_dec;(suraim HP=0)
  0917  1810          	 jr ssss2
  0919                	ssss0:
  0919  CDB60D        	 call cross_ck_a;s
  091C  DC090A        	 call c,HP_dec_swdbc
  091F  1808          	 jr ssss2
  0921                	ssss1:;(gil_st=0-x)
  0921  CDB60D        	 call cross_ck_a
  0924  3003          	 jr nc,ssss2
  0926  C3B40B        	 jp gil_killing
  0929                	ssss2:
  0929  DD7E30        	 ld A,(IX+48)
  092C  EEFF          	 xor 0ffh
  092E  DD7730        	 ld (IX+48),A
  0931  C3D60B        	 jp mains_end
                      	 
                      	
                      	
  0934                	knight_front_ck:
  0934  CDD609        	 call xyload
  0937  F5            	 push AF
  0938  32A509        	 ld (knight_front_ck_end+3),A
  093B  7B            	 ld A,E
  093C  32A309        	 ld (knight_front_ck_end+1),A 
  093F  F1            	 pop AF
  0940  E6C0          	 and 11000000b
  0942  2810          	 jr z,knight_front_ck_u
  0944  FE02          	 cp 2
  0946  3814          	 jr c,knight_front_ck_r
  0948  281C          	 jr z,knight_front_ck_d
  094A                	knight_front_ck_l:
  094A  7B            	 ld A,E
  094B  D607          	 sub 7
  094D  FE1E          	 cp 30
  094F  DAAF09        	 jp c,knight_front_outerwall
  0952  181C          	 jr knight_front_ck_e
  0954                	knight_front_ck_u:
  0954  7A            	 ld A,D
  0955  D607          	 sub 7
  0957  DAAF09        	 jp c,knight_front_outerwall
  095A  1814          	 jr knight_front_ck_e
  095C                	knight_front_ck_r:
  095C  7B            	 ld A,E
  095D  C607          	 add A,7
  095F  FE88          	 cp 136
  0961  D2AF09        	 jp nc,knight_front_outerwall
  0964  180A          	 jr knight_front_ck_e
  0966                	knight_front_ck_d:
  0966  7A            	 ld A,D
  0967  C607          	 add A,7
  0969  FE2B          	 cp 43
  096B  D2AF09        	 jp nc,knight_front_outerwall
  096E  1800          	 jr knight_front_ck_e
  0970                	knight_front_ck_e:
  0970  CDDE09        	 call right_turn
  0973  CDE50D        	 call wall_ck
  0976  CAA209        	 jp z,knight_front_ck_end
                      	
  0979  CDEC09        	 call left_turn
  097C  CDE50D        	 call wall_ck
  097F  CAA209        	 jp z,knight_front_ck_end
                      	
  0982  CDEC09        	 call left_turn
  0985  CDE50D        	 call wall_ck
  0988  CAA209        	 jp z,knight_front_ck_end
                      	 
  098B  CDDE09        	 call right_turn
  098E  CDDE09        	 call right_turn
                      	 
  0991  23            	 inc HL
  0992  7E            	 ld A,(HL)
  0993  E6C0          	 and 11000000b
  0995  47            	 ld B,A
  0996  3AA509        	 ld A,(knight_front_ck_end+3)
  0999  E63F          	 and 00111111b
  099B  B0            	 or B
  099C  32A509        	 ld (knight_front_ck_end+3),A
  099F  2B            	 dec HL
                      	 
  09A0  18CE          	 jr knight_front_ck_e
                      	 
  09A2                	knight_front_ck_end:
  09A2  1E00          	 ld E,overwrite
  09A4  1600          	 ld D,overwrite
  09A6  7B            	 ld A,E
  09A7  77            	 ld (HL),A
  09A8  23            	 inc HL
  09A9  7A            	 ld A,D
  09AA  77            	 ld (HL),A
  09AB  2B            	 dec HL
  09AC  C3D308        	 jp knight_move
                      	
  09AF                	knight_front_outerwall:
  09AF  C37908        	 jp kight_accel_2
                      	
                      	
                      	
                      	;***************************ckeck sub****************************
                      	
  09B2                	xy_ck:;chr cp
  09B2  CDD609        	 call xyload
  09B5  E5            	 push HL		;>
  09B6  2A7249        	 ld HL,(gil_xy)
  09B9  7C            	 ld A,H
  09BA  E63F          	 and 00111111b
  09BC  67            	 ld H,A
  09BD  ED52          	 sbc HL,DE
  09BF  E1            	 pop HL			;<
  09C0  C9            	 ret
  09C1                	x_ck:
  09C1  CDD609        	 call xyload
  09C4  3A7249        	 ld A,(gil_xy)
  09C7  93            	 sub E
  09C8  C9            	 ret
  09C9                	y_ck:
  09C9  CDD609        	 call xyload
  09CC  7A            	 ld A,D
  09CD  E63F          	 and 00111111b
  09CF  3A7349        	 ld A,(gil_xy+1)
  09D2  E63F          	 and 00111111b
  09D4  92            	 sub D
  09D5  C9            	 ret
                      	
                      	
  09D6                	xyload:;A=urdl D=none
  09D6  5E            	 ld E,(HL)
  09D7  23            	 inc HL
  09D8  7E            	 ld A,(HL)
  09D9  E63F          	 and 00111111b
  09DB  57            	 ld D,A
  09DC  2B            	 dec HL
  09DD  C9            	 ret
                      	
  09DE                	right_turn:
  09DE  23            	 inc HL
  09DF  7E            	 ld A,(HL)
  09E0  E6C0          	 and 11000000b
  09E2  C640          	 add A,40H
  09E4  47            	 ld B,A
  09E5  7E            	 ld A,(HL)
  09E6  E63F          	 and 00111111b
  09E8  B0            	 or B
  09E9  77            	 ld (HL),A
  09EA  2B            	 dec HL
  09EB  C9            	 ret
                      	 
  09EC                	left_turn:
  09EC  CDDE09        	 call right_turn
  09EF  CDDE09        	 call right_turn
  09F2  CDDE09        	 call right_turn
  09F5  C9            	 ret
                      	
                      	;*************************hp dec*****************************
  09F6                	HP_dec:
  09F6  3A6D49        	 ld A,(gil_sword)
  09F9  FE02          	 cp 2
  09FB  DD7E00        	 ld A,(IX)
  09FE  2003          	 jr nz,HP_dec1
  0A00  3D            	 dec A
  0A01  2801          	 jr z,HP_dec2
  0A03                	HP_dec1:
  0A03  3D            	 dec A
  0A04                	HP_dec2:
  0A04  DD7700        	 ld (IX),A
  0A07  281F          	 jr z,HP_rec
  0A09                	HP_dec_swdbc:
  0A09                	gil_HP_dec:
  0A09  3A6649        	 ld A,(gil_hp)
  0A0C  3D            	 dec A
  0A0D  326649        	 ld (gil_hp),A
  0A10  CAB40B        	 jp z,gil_killing
  0A13  C9            	 ret
                      	 
  0A14                	HP_decB:
  0A14  3A6D49        	 ld A,(gil_sword)
  0A17  FE02          	 cp 2
  0A19  DD7E00        	 ld A,(IX)
  0A1C  2003          	 jr nz,HP_decb1
  0A1E  3D            	 dec A
  0A1F  2801          	 jr z,HP_decb2
  0A21                	HP_decb1:
  0A21  3D            	 dec A
  0A22                	HP_decb2:
  0A22  DD7700        	 ld (IX),A
  0A25  2814          	 jr z,HP_rec2
  0A27  C9            	 ret
                      	
                      	 
  0A28                	HP_rec:
  0A28  DD7E60        	 ld A,(IX+96)
  0A2B  47            	 ld B,A
  0A2C  AF            	 xor A
  0A2D  DD7760        	 ld (IX+96),A
  0A30  3A6649        	 ld A,(gil_HP)
  0A33  80            	 add A,B
  0A34  3002          	 jr nc,H_recP2
  0A36  3EFF          	 ld A,255
  0A38                	H_recP2:
  0A38  326649        	 ld (gil_HP),A
  0A3B                	HP_rec2:
  0A3B  AF            	 xor A
  0A3C  DD7700        	 ld (IX),A
  0A3F  DD7730        	 ld (IX+48),A
  0A42  DD7760        	 ld (IX+96),A
  0A45  FD7700        	 ld (IY),A
  0A48  C9            	 ret
                      	
                      	
                      	;*************************gil actions*************************
  0A49                	gil_action:
  0A49  E5            	 push HL
                      	
                      	
  0A4A  3A7249        	 ld A,(gil_xy)
  0A4D  5F            	 ld E,A
  0A4E  3A7349        	 ld A,(gil_xy+1)
  0A51  57            	 ld D,A
  0A52  CD2611        	 call grp_del
                      	; call kwait
                      	
                      	;*************************key scanf**************************
  0A55  CDD10C        	 call keysc
  0A58  326549        	 ld (gil_button),A
  0A5B  08            	 ex AF,AF'
                      	
                      	;************************sword back***************************
  0A5C  3A6949        	 ld A,(gil_st2)
  0A5F  B7            	 or A
  0A60  C27D0B        	 jp nz,gil_sword_f2
                      	;***********************sword atack****************************
  0A63                	gil_action_l_b:
  0A63  08            	 ex AF,AF'
  0A64  CB6F          	 bit 5,A
  0A66  C2440B        	 jp nz,gil_sword_f
  0A69  CD670B        	 call gil_sword_reset
                      	
  0A6C  214317        	 ld HL,graph_gil_ulf
  0A6F  22160B        	 ld (gil_action_end-2),HL
                      	;************************urdl move*****************************
  0A72                	gil_action_l:
  0A72  CB47          	 bit 0,A
  0A74  200F          	 jr nz,gil_left
  0A76  CB4F          	 bit 1,A
  0A78  202D          	 jr nz,gil_right
  0A7A  CB77          	 bit 6,A
  0A7C  204C          	 jr nz,gil_down
  0A7E  CB7F          	 bit 7,A
  0A80  206C          	 jr nz,gil_up
                      	;*****************************noting************************
  0A82  C3150B        	 jp gil_action_end-3
                      	 ;************************move farse*************************
  0A85                	gil_left:
  0A85  3A7349        	 ld A,(gil_xy+1);y
  0A88  E63F          	 and 00111111b
  0A8A  CA940A        	 jp z,gil_left_l
  0A8D                	gil_left_s:
  0A8D  D607          	 sub 7
  0A8F  DA310B        	 jp c,direction_p
  0A92  20F9          	 jr nz,gil_left_s
  0A94                	gil_left_l:
  0A94  3EC0          	 ld A,11000000b
  0A96  217349        	 ld HL,gil_xy+1
  0A99  B6            	 or (HL)
  0A9A  77            	 ld (HL),A
  0A9B  2B            	 dec HL;ld HL,gil_xy
  0A9C  CDE50D        	 call wall_ck
  0A9F  B7            	 or A;
  0AA0  C2150B        	 jp nz,gil_action_end-3
                      	
                      	; ld HL,gil_xy
  0AA3  35            	 dec (HL)
  0AA4  C30E0B        	 jp gil_walk
                      	
  0AA7                	gil_right:
  0AA7  3A7349        	 ld A,(gil_xy+1);y
  0AAA  E63F          	 and 00111111b
  0AAC  CAB60A        	 jp z,gil_right_l
  0AAF                	gil_right_s:
  0AAF  D607          	 sub 7
  0AB1  DA310B        	 jp c,direction_p
  0AB4  20F9          	 jr nz,gil_right_s
  0AB6                	gil_right_l:
  0AB6  3E3F          	 ld A,00111111b
  0AB8  217349        	 ld HL,gil_xy+1
  0ABB  A6            	 and (HL)
  0ABC  77            	 ld (HL),A
  0ABD  CBF6          	 set 6,(HL)
  0ABF  2B            	 dec HL;ld HL,gil_xy
  0AC0  CDE50D        	 call wall_ck
  0AC3  B7            	 or A;
  0AC4  C2150B        	 jp nz,gil_action_end-3
                      	
                      	; ld HL,gil_xy
  0AC7  34            	 inc (HL)
  0AC8  1844          	 jr gil_walk
                      	
  0ACA                	gil_down:
  0ACA  3A7249        	 ld A,(gil_xy);x
  0ACD  D61E          	 sub 30
  0ACF  CAD90A        	 jp z,gil_down_l
  0AD2                	gil_down_s:
  0AD2  D607          	 sub 7
  0AD4  DA310B        	 jp c,direction_p
  0AD7  20F9          	 jr nz,gil_down_s
  0AD9                	gil_down_l:
  0AD9  3E3F          	 ld A,00111111b
  0ADB  217349        	 ld HL,gil_xy+1
  0ADE  A6            	 and (HL)
  0ADF  77            	 ld (HL),A
  0AE0  CBFE          	 set 7,(HL)
  0AE2  2B            	 dec HL;ld HL,gil_xy
  0AE3  CDE50D        	 call wall_ck
  0AE6  B7            	 or A;
  0AE7  C2150B        	 jp nz,gil_action_end-3
                      	
                      	; ld HL,gil_xy
  0AEA  23            	 inc HL
  0AEB  34            	 inc (HL)
  0AEC  1820          	 jr gil_walk
                      	
  0AEE                	gil_up:
  0AEE  3A7249        	 ld A,(gil_xy);x
  0AF1  D61E          	 sub 30
  0AF3  CAFD0A        	 jp z,gil_up_l
  0AF6                	gil_up_s:
  0AF6  D607          	 sub 7
  0AF8  DA310B        	 jp c,direction_p
  0AFB  20F9          	 jr nz,gil_up_s
  0AFD                	gil_up_l:
  0AFD  3E3F          	 ld A,00111111b
  0AFF  217349        	 ld HL,gil_xy+1
  0B02  A6            	 and (HL)
  0B03  77            	 ld (HL),A
  0B04  2B            	 dec HL;ld HL,gil_xy
  0B05  CDE50D        	 call wall_ck
  0B08  B7            	 or A;
  0B09  C2150B        	 jp nz,gil_action_end-3
                      	
                      	; ld HL,gil_xy
  0B0C  23            	 inc HL
  0B0D  35            	 dec (HL)
                      	; jr gil_walk
                      	
                      	
  0B0E                	gil_walk:
  0B0E  216849        	 ld HL,gil_st1
  0B11  3EFF          	 ld A,0ffh
  0B13  AE            	 xor (HL)
  0B14  77            	 ld (HL),A
                      	
  0B15  214317        	 ld HL,graph_gil_ulf
  0B18                	gil_action_end:
  0B18  3A6849        	 ld A,(gil_st1)
  0B1B  3C            	 inc A
  0B1C  111800        	 ld DE,24
  0B1F  CD250C        	 call xsan
  0B22                	gil_action_end_l:
  0B22  3A7249        	 ld A,(gil_xy)
  0B25  5F            	 ld E,A
  0B26  3A7349        	 ld A,(gil_xy+1)
  0B29  57            	 ld D,A
  0B2A  CD9A10        	 call grp_set
  0B2D  E1            	 pop HL
  0B2E  C3D60B        	 jp mains_end
                      	
  0B31                	direction_p:
  0B31  3A7349        	 ld A,(gil_xy+1)
  0B34  E6C0          	 and 11000000b
  0B36  CAFD0A        	 jp z,gil_up_l
  0B39  FE80          	 cp 80h
  0B3B  DAB60A        	 jp c,gil_right_l
  0B3E  CAD90A        	 jp z,gil_down_l
  0B41  C3850A        	 jp gil_left
                      	
  0B44                	gil_sword_f:;key_action
  0B44  08            	 ex AF,AF'
  0B45  B7            	 or A
  0B46  C25C0B        	 jp nz,gil_sword_set 
                      	;************************sword atack***************************
  0B49  3E0A          	 ld A,10		;back flame
  0B4B  326949        	 ld (gil_st2),A
                      	;***********************matk action****************************
  0B4E  CD9B0E        	 call matk_action_gil
                      	;*************************************************************
  0B51  117317        	 ld DE,graph_gilsw_ulf	;gil_sw
  0B54  ED53160B      	 ld (gil_action_end-2),DE
  0B58  08            	 ex AF,AF'
  0B59  C3720A        	 jp gil_action_l
  0B5C                	gil_sword_set:
  0B5C  11A317        	 ld DE,graph_gilsword_ulf	;gil_swd
  0B5F  ED53160B      	 ld (gil_action_end-2),DE
  0B63                	gil_sword_set_l:
  0B63  08            	 ex AF,AF'
  0B64  C3720A        	 jp gil_action_l
  0B67                	gil_sword_reset:
  0B67  08            	 ex AF,AF'
  0B68  3A6949        	 ld A,(gil_st2)
  0B6B  47            	 ld B,A
  0B6C  08            	 ex AF,AF'
  0B6D  CB78          	 bit 7,B
  0B6F  C8            	 ret z
  0B70  08            	 ex AF,AF'
  0B71  E1            	 pop HL
  0B72  3E80          	 ld A,10000000b
                      	;************************sword back***************************
  0B74  F60A          	 or 10			;back flame
  0B76  326949        	 ld (gil_st2),A
  0B79  08            	 ex AF,AF'
  0B7A  C3720A        	 jp gil_action_l
  0B7D                	gil_sword_f2:;auto_action
  0B7D  FE80          	 cp 80h
  0B7F  CA630A        	 jp z,gil_action_l_b
  0B82  E680          	 and 10000000b
  0B84  C29C0B        	 jp nz,gil_sword_f_decB;A=1nnnnnnnb
  0B87                	gil_sword_f_decA:;A=0nnnnnnnb
  0B87  216949        	 ld HL,gil_st2
  0B8A  7E            	 ld A,(HL)
  0B8B  3D            	 dec A
  0B8C  77            	 ld (HL),A
  0B8D  117317        	 ld DE,graph_gilsw_ulf	;gil_sw
  0B90  ED53160B      	 ld (gil_action_end-2),DE
  0B94  C2B00B        	 jp nz,gil_action_l_r
  0B97  CBFE          	 set 7,(HL)
  0B99  C3B00B        	 jp gil_action_l_r
  0B9C                	gil_sword_f_decB:;A=1nnnnnnnb
  0B9C  216949        	 ld HL,gil_st2
  0B9F  7E            	 ld A,(HL)
  0BA0  3D            	 dec A
  0BA1  77            	 ld (HL),A
  0BA2  E67F          	 and 01111111b
  0BA4  117317        	 ld DE,graph_gilsw_ulf	;gil_sw
  0BA7  ED53160B      	 ld (gil_action_end-2),DE
  0BAB  C2B00B        	 jp nz,gil_action_l_r
  0BAE  CBBE          	 res 7,(HL)
  0BB0                	gil_action_l_r:
  0BB0  08            	 ex AF,AF'
  0BB1  C3720A        	 jp gil_action_l
                      	
                      	
  0BB4                	gil_killing:
  0BB4  CDAB0C        	 call grp_o
  0BB7  21CB0B        	 ld HL,killingm
  0BBA  110000        	 ld DE,0
  0BBD  060B          	 ld B,11
  0BBF  CDF1BF        	 call msp
  0BC2  DD7ED0        	 ld A,(IX-48)
  0BC5  32F000        	 ld (0f0h),A
  0BC8  C3EE0B        	 jp retP
                      	
                      	
                      	
  0BCB                	killingm:
  0BCB  6265656E206B69	 db "been killed"
                      	
                      	
  0BD6                	mains_end:
                      	; ld A,(IX+48)
                      	; ld (0f0h),A
                      	; ld (0f2h),IX
                      	
  0BD6  3A8503        	 ld A,(count+1)
  0BD9  3D            	 dec A
  0BDA  328503        	 ld (count+1),A
  0BDD  23            	 inc HL
  0BDE  23            	 inc HL
  0BDF  DD23          	 inc IX
  0BE1  FD23          	 inc IY
  0BE3  D9            	 exx
  0BE4  CDD10C        	 call keysc
  0BE7  CB57          	 bit 2,A
  0BE9  C0            	 ret nz
  0BEA  D9            	 exx
  0BEB  C38403        	 jp mains
                      	
                      	
  0BEE                	retP:
  0BEE  310000        	 ld SP,0
  0BF1  C9            	 ret
                      	
                      	
                      	
                      	
                      	
                      	
                      	
                      	;*********************************************************
  0BF2                	TIMBTL:
  0BF2  3E32          	 LD A,50
  0BF4  1806          	 JR TIMER
  0BF6                	TIM30:
  0BF6  3E25          	 LD A,37
  0BF8  1802          	 JR TIMER
  0BFA                	TIM255:
  0BFA  3EFF          	 LD A,255
  0BFC                	TIMER:
  0BFC  010000        	 LD BC,0
  0BFF  03            	 INC BC;LOOP
  0C00  000000000000  	 DB 0,0,0,0,0,0
  0C06  A8            	 XOR B
  0C07  C8            	 RET Z
  0C08  18F5          	 JR TIMER+3
  0C0A                	RAND:;A
  0C0A  E5            	 PUSH HL
  0C0B  D5            	 push DE
  0C0C  210000        	 LD HL,0
  0C0F  54            	 LD D,H
  0C10  5D            	 LD E,L
  0C11  29            	 ADD HL,HL
  0C12  29            	 ADD HL,HL
  0C13  19            	 ADD HL,DE
  0C14  11475D        	 LD DE,5D47H
  0C17  19            	 ADD HL,DE
  0C18  220D0C        	 LD (RAND+3),HL
  0C1B  7C            	 LD A,H
  0C1C  D1            	 pop DE
  0C1D  E1            	 POP HL
  0C1E  C9            	 RET
  0C1F                	RAND4:
                      	; ld A,R
                      	; rra
                      	; rra
                      	; rra
                      	; and 11000000b
                      	; ret
  0C1F  CD0A0C        	 CALL RAND
  0C22  E6C0          	 AND 11000000b
  0C24  C9            	 RET
  0C25                	XSAN:
  0C25  B7            	 OR A
  0C26  C8            	 RET Z
  0C27                	XSANL:
  0C27  19            	 ADD HL,DE
  0C28  3D            	 DEC A
  0C29  20FC          	 JR NZ,XSANL
  0C2B  C9            	 RET
  0C2C                	NMEMRY:
  0C2C  0000000000    	 DB 0,0,0,0,0
  0C31                	ASCN:;HL=l(2byte)DE
  0C31  112C0C        	 LD DE,NMEMRY
  0C34  011027        	 LD BC,10000
  0C37  CD6B0C        	 CALL WARIS
  0C3A  01E803        	 LD BC,1000
  0C3D  CD6B0C        	 CALL WARIS
  0C40  016400        	 LD BC,100
  0C43  CD6B0C        	 CALL WARIS
  0C46  010A00        	 LD BC,10
  0C49  CD6B0C        	 CALL WARIS
  0C4C  7D            	 LD A,L
  0C4D  12            	 LD (DE),A
  0C4E  0605          	 LD B,5
  0C50  112C0C        	 LD DE,NMEMRY
  0C53                	ASCL:
  0C53  1A            	 LD A,(DE)
  0C54  FE00          	 CP 0
  0C56  2802          	 JR Z,ASCL2
  0C58  1808          	 JR ASC2
  0C5A                	ASCL2:
  0C5A  13            	 INC DE
  0C5B  10F6          	 DJNZ ASCL
  0C5D  0601          	 LD B,1
  0C5F  11300C        	 LD DE,NMEMRY+4
  0C62                	ASC2:
  0C62  1A            	 LD A,(DE)
  0C63  0E30          	 LD C,30H
  0C65  81            	 ADD A,C
  0C66  12            	 LD (DE),A
  0C67  13            	 INC DE
  0C68  10F8          	 DJNZ ASC2
  0C6A  C9            	 RET
  0C6B                	WARIS:
  0C6B  AF            	 XOR A
                      	;WARI1:
  0C6C  ED42          	 SBC HL,BC
  0C6E  3803          	 JR C,WARI2
  0C70  3C            	 INC A
  0C71  18F9          	 JR WARIS+1
  0C73                	WARI2:
  0C73  09            	 ADD HL,BC
  0C74  12            	 LD (DE),A
  0C75  13            	 INC DE		;
  0C76  C9            	 RET
  0C77                	cls:
  0C77  F5            	 push AF
  0C78  D5            	 push DE
  0C79  E5            	 push HL
  0C7A  C5            	 push BC
  0C7B  3E00          	 ld A,0
  0C7D  212712        	 ld HL,grapu_area
  0C80  112812        	 ld DE,grapu_area+1
  0C83  77            	 ld (HL),A
  0C84  015F03        	 ld BC,144*6-1
  0C87  EDB0          	 ldir
  0C89  CDAB0C        	 call grp_o
  0C8C  C1            	 pop BC
  0C8D  E1            	 pop HL
  0C8E  D1            	 pop DE
  0C8F  F1            	 pop AF
  0C90  C9            	 ret
                      	
  0C91                	bls:
  0C91  F5            	 push AF
  0C92  D5            	 push DE
  0C93  E5            	 push HL
  0C94  C5            	 push BC
  0C95  212712        	 LD HL,grapu_area
  0C98  36FF          	 LD (HL),0FFH
  0C9A  112812        	 LD DE,grapu_area+1
  0C9D  015F03        	 LD BC,863
  0CA0  EDB0          	 LDIR
  0CA2  CDAB0C        	 CALL grp_o
  0CA5  D9            	 EXX
  0CA6  C1            	 pop BC
  0CA7  E1            	 pop HL
  0CA8  D1            	 pop DE
  0CA9  F1            	 pop AF
  0CAA  C9            	 RET
  0CAB                	grp_o:
  0CAB  3E06          	 ld A,6
  0CAD  110000        	 ld DE,0
  0CB0  212712        	 ld HL,grapu_area
  0CB3                	grp_o_l:
  0CB3  D5            	 push DE
  0CB4  F5            	 push AF
  0CB5  0690          	 ld B,144
  0CB7  CDD0BF        	 call grp
  0CBA  23            	 inc HL
  0CBB  F1            	 pop AF
  0CBC  D1            	 pop DE
  0CBD  14            	 inc D
  0CBE  3D            	 dec A
  0CBF  20F2          	 jr nz,grp_o_l
  0CC1  C9            	 ret
                      	
  0CC2                	grp_open:
  0CC2  0E06          	 ld C,6
  0CC4                	grp_open_l
  0CC4  C5            	 push BC
  0CC5  D5            	 push DE
  0CC6  CDD0BF        	 call grp
  0CC9  D1            	 pop DE
  0CCA  14            	 inc D
  0CCB  23            	 inc HL
  0CCC  C1            	 pop BC
  0CCD  0D            	 dec C
  0CCE  20F4          	 jr nz,grp_open_l
  0CD0  C9            	 ret
                      	
  0CD1                	keysc:
  0CD1  F3            	 di
  0CD2  AF            	 xor A
  0CD3  D311          	 out (11h),A
  0CD5  3E08          	 ld A,08h
  0CD7  D311          	 out (11h),A
  0CD9  CDAD8A        	 call 8aadh
  0CDC  DB10          	 in A,(10h)
  0CDE  E6E0          	 and 0e0h
  0CE0  47            	 ld B,A
  0CE1  AF            	 xor A
  0CE2  D311          	 out (11h),A
  0CE4  3E10          	 ld A,10h
  0CE6  D311          	 out (11h),A
  0CE8  CDAD8A        	 call 8aadh
  0CEB  DB10          	 in A,(10h)
  0CED  E60F          	 and 0fh
  0CEF  B0            	 or B
  0CF0  FB            	 ei
  0CF1  C9            	 ret
                      	
                      	
                      	
  0CF2                	charReput:;HL=obj_xy++
  0CF2                	charReput_x:
  0CF2  7E            	 ld A,(HL);x
  0CF3  4F            	 ld C,A
  0CF4  D61E          	 sub 30
  0CF6  CA0E0D        	 jp z,charReput_y
  0CF9                	charReput_x_lp:
  0CF9  D607          	 sub 7
  0CFB  CA0E0D        	 jp z,charReput_y
  0CFE  30F9          	 jr nc,charReput_x_lp
  0D00  FEFD          	 cp 0fch+1;cy=-4~-6 left
  0D02  3804          	 jr c,charReput_x_1
  0D04  ED44          	 neg;(right+)
  0D06  1804          	 jr charReput_x_2
  0D08                	charReput_x_1:
  0D08  C607          	 add A,7
  0D0A  ED44          	 neg;(left-)
  0D0C                	charReput_x_2:
  0D0C  81            	 add A,C
  0D0D  77            	 ld (HL),A
                      	
  0D0E                	charReput_y:
  0D0E  23            	 inc HL
  0D0F  7E            	 ld A,(HL)
  0D10  2B            	 dec HL
  0D11  4F            	 ld C,A
  0D12  E63F          	 and 00111111b
  0D14  C8            	 ret z
  0D15                	charReput_y_lp:
  0D15  D607          	 sub 7
  0D17  C8            	 ret z
  0D18  30FB          	 jr nc,charReput_y_lp
  0D1A  FEFD          	 cp 0fch+1;cy=-4~-6 up
  0D1C  3804          	 jr c,charReput_y_1
  0D1E  ED44          	 neg;(down+)
  0D20  1804          	 jr charReput_y_2
  0D22                	charReput_y_1:
  0D22  C607          	 add A,7
  0D24  ED44          	 neg;(up-)
  0D26                	charReput_y_2:
  0D26  81            	 add A,C
  0D27  23            	 inc HL
  0D28  77            	 ld (HL),A
  0D29  2B            	 dec HL
  0D2A  C9            	 ret 
                      	
                      	
  0D2B                	cross_ck_s:;HL=obj_xy+
  0D2B  5E            	 ld E,(HL)
  0D2C  23            	 inc HL
  0D2D  56            	 ld D,(HL)
  0D2E  2B            	 dec HL
  0D2F  3A7349        	 ld A,(gil_xy+1)
  0D32  E6C0          	 and 11000000b
  0D34  CA5D0D        	 jp z,cross_ck_s_up
  0D37  FE80          	 cp 80h
  0D39  DA7B0D        	 jp c,cross_ck_s_right
  0D3C  CA980D        	 jp z,cross_ck_s_down
  0D3F                	cross_ck_s_left:
  0D3F  3A7349        	 ld A,(gil_xy+1)
  0D42  E63F          	 and 3fh
  0D44  92            	 sub D	;x-x1
  0D45  FE03          	 cp 3
  0D47  3805          	 jr c,cross_ck_s_left_2
  0D49  2F            	 cpl
  0D4A  3C            	 inc A
  0D4B  FE03          	 cp 3
  0D4D  D0            	 ret nc
  0D4E                	cross_ck_s_left_2:
  0D4E  3A7249        	 ld A,(gil_xy)
  0D51  93            	 sub E
  0D52  FE06          	 cp 6		;when (a-d)>0 is that empty at left.
  0D54  D8            	 ret c
  0D55  2F            	 cpl
  0D56  3C            	 inc A
  0D57  FE03          	 cp 3
  0D59  DAB40B        	 jp c,gil_killing
  0D5C  C9            	 ret
  0D5D                	cross_ck_s_up:
  0D5D  3A7249        	 ld A,(gil_xy)
  0D60  93            	 sub E	;x-x1
  0D61  FE03          	 cp 3
  0D63  3805          	 jr c,cross_ck_s_up_2
  0D65  2F            	 cpl
  0D66  3C            	 inc A
  0D67  FE03          	 cp 3
  0D69  D0            	 ret nc
  0D6A                	cross_ck_s_up_2:
  0D6A  3A7349        	 ld A,(gil_xy+1)
  0D6D  E63F          	 and 3fh
  0D6F  92            	 sub D
  0D70  FE03          	 cp 3		;when (a-d)>0 is that empty at up.
  0D72  D8            	 ret c
  0D73  2F            	 cpl
  0D74  3C            	 inc A
  0D75  FE03          	 cp 3
  0D77  DAB40B        	 jp c,gil_killing
  0D7A  C9            	 ret
  0D7B                	cross_ck_s_right:
  0D7B  3A7349        	 ld A,(gil_xy+1)
  0D7E  E63F          	 and 3fh
  0D80  92            	 sub D	;x-x1
  0D81  FE03          	 cp 3
  0D83  3805          	 jr c,cross_ck_s_right_2
  0D85  2F            	 cpl
  0D86  3C            	 inc A
  0D87  FE03          	 cp 3
  0D89  C9            	 ret ;c or nc
  0D8A                	cross_ck_s_right_2:
  0D8A  3A7249        	 ld A,(gil_xy)
  0D8D  93            	 sub E
  0D8E  FE03          	 cp 3		;when (a-d)<0 is that empty at right.
  0D90  DAB40B        	 jp c,gil_killing
  0D93  2F            	 cpl
  0D94  3C            	 inc A
  0D95  FE06          	 cp 6
  0D97  C9            	 ret ;c or nc
  0D98                	cross_ck_s_down:
  0D98  3A7249        	 ld A,(gil_xy)
  0D9B  93            	 sub E	;x-x1
  0D9C  FE03          	 cp 3
  0D9E  3805          	 jr c,cross_ck_s_down_2
  0DA0  2F            	 cpl
  0DA1  3C            	 inc A
  0DA2  FE03          	 cp 3
  0DA4  D0            	 ret nc
  0DA5                	cross_ck_s_down_2:
  0DA5  3A7349        	 ld A,(gil_xy+1)
  0DA8  E63F          	 and 3fh
  0DAA  92            	 sub D
  0DAB  FE03          	 cp 3		;when (a-d)<0 is that empty at down.
  0DAD  DAB40B        	 jp c,gil_killing
  0DB0  D8            	 ret c
  0DB1  2F            	 cpl
  0DB2  3C            	 inc A
  0DB3  FE06          	 cp 6
  0DB5  C9            	 ret
                      	
                      	
  0DB6                	cross_ck_a:;HL=obj_xy+
  0DB6  5E            	 ld E,(HL);x
  0DB7  23            	 inc HL
  0DB8  7E            	 ld A,(HL)
  0DB9  2B            	 dec HL
  0DBA  E63F          	 and 3fh
  0DBC  57            	 ld D,A	;y
                      	; ld HL,(gil_xy)
  0DBD  3A7249        	 ld A,(gil_xy)
  0DC0  93            	 sub E	;x-x1
  0DC1  FE03          	 cp 3
  0DC3  3805          	 jr c,cross_ck_al
  0DC5  2F            	 cpl
  0DC6  3C            	 inc A
  0DC7  FE03          	 cp 3
  0DC9  D0            	 ret nc
  0DCA                	cross_ck_al:
  0DCA  3A7349        	 ld A,(gil_xy+1)
  0DCD  E63F          	 and 3fh
  0DCF  92            	 sub D
  0DD0  FE03          	 cp 3
  0DD2  D8            	 ret c
  0DD3  2F            	 cpl
  0DD4  3C            	 inc A
  0DD5  FE03          	 cp 3
  0DD7  C9            	 ret ;nc or cy
                      	;cy is crosses.
                      	
  0DD8                	cha_kill:;HL=obj_xy++,IX=obj_hp
  0DD8  E5            	 push HL
  0DD9  5E            	 ld E,(HL)
  0DDA  23            	 inc HL
  0DDB  56            	 ld D,(HL)
  0DDC  CD2611        	 call grp_del
  0DDF  E1            	 pop HL
  0DE0  AF            	 xor A
  0DE1  DD7700        	 ld (IX),A
  0DE4  C9            	 ret
                      	
                      	
  0DE5                	wall_ck:
  0DE5  E5            	 push HL
  0DE6  CDEB0D        	 call wall_cks
  0DE9  E1            	 pop HL
  0DEA  C9            	 ret
                      	
  0DEB                	wall_cks:;HL,obj_xy+;non zero=don't pass, zero=pass and A=0, cy=not block
  0DEB  E5            	 push HL
                      	;HL=(y,x)
  0DEC  5E            	 ld E,(HL);x
  0DED  23            	 inc HL
  0DEE  56            	 ld D,(HL);y
  0DEF  2B            	 dec HL
  0DF0  EB            	 ex DE,HL
  0DF1  3E3F          	 ld A,00111111b
  0DF3  A4            	 and H
  0DF4  010000        	 ld BC,0
  0DF7  2808          	 jr z,wall_ck_lc
  0DF9                	wall_ck_lb:
  0DF9  04            	 inc B
  0DFA  D607          	 sub 7
  0DFC  DA750E        	 jp c,wall_ck_end
  0DFF  20F8          	 jr nz,wall_ck_lb
  0E01                	wall_ck_lc:
  0E01  7D            	 ld A,L
  0E02  D61E          	 sub 30
  0E04  2808          	 jr z,wall_ck_le
  0E06                	wall_ck_ld:
  0E06  0C            	 inc C
  0E07  D607          	 sub 7
  0E09  DA750E        	 jp c,wall_ck_end
  0E0C  20F8          	 jr nz,wall_ck_ld
  0E0E                	wall_ck_le:
  0E0E  7C            	 ld A,H
  0E0F  E6C0          	 and 11000000b
  0E11  CA5F0E        	 jp z,wall_ck_lu
  0E14  FE80          	 cp 80h
  0E16  DA480E        	 jp c,wall_ck_lr
  0E19  CA320E        	 jp z,wall_ck_ldd
                      	
  0E1C                	wall_ck_ll:
  0E1C  21F50F        	 ld HL,map_memry_left-17
                      	;x+C
  0E1F  59            	 ld E,C
  0E20  1600          	 ld D,0
  0E22  19            	 add HL,DE
                      	;y+17*B
  0E23  111100        	 ld DE,17
  0E26  04            	 inc B
  0E27                	wall_ck_ll_2:
  0E27  19            	 add HL,DE
  0E28  10FD          	 djnz wall_ck_ll_2
                      	; or A
                      	; sbc HL,DE
  0E2A  22B80E        	 ld (block_pointaP+1),HL
  0E2D  7E            	 ld A,(HL)
  0E2E  E680          	 and t;t(80h) or f(0)
  0E30  E1            	 pop HL
                      	
                      	; ld A,"l"
                      	; ld DE,0
                      	; call 0be62h
                      	; pop HL
                      	
  0E31  C9            	 ret
                      	
                      	
  0E32                	wall_ck_ldd:
  0E32  21760F        	 ld HL,map_memry_top-16
                      	;x+C
  0E35  59            	 ld E,C
  0E36  1600          	 ld D,0
  0E38  19            	 add HL,DE
                      	;y+16*B
  0E39  111000        	 ld DE,16
  0E3C  04            	 inc B
  0E3D                	wall_ck_ld2:
  0E3D  19            	 add HL,DE
  0E3E  10FD          	 djnz wall_ck_ld2
                      	; sub HL,DE
  0E40  22B80E        	 ld (block_pointaP+1),HL
  0E43  7E            	 ld A,(HL)
  0E44  E680          	 and t;t(80h) or f(0)
  0E46  E1            	 pop HL
                      	
                      	; ld A,"d"
                      	; ld DE,0
                      	; call 0be62h
                      	; pop HL
                      	
  0E47  C9            	 ret
                      	
                      	
  0E48                	wall_ck_lr:
  0E48  21F50F        	 ld HL,map_memry_left-17
                      	;x+C
  0E4B  59            	 ld E,C
  0E4C  1600          	 ld D,0
  0E4E  19            	 add HL,DE
  0E4F  23            	 inc HL
                      	;y+17*B
  0E50  111100        	 ld DE,17
  0E53  04            	 inc B
  0E54                	wall_ck_lr_2:
  0E54  19            	 add HL,DE
  0E55  10FD          	 djnz wall_ck_lr_2
                      	; or A
                      	; sbc HL,DE
  0E57  22B80E        	 ld (block_pointaP+1),HL
  0E5A  7E            	 ld A,(HL)
  0E5B  E680          	 and t;t(80h) or f(0)
  0E5D  E1            	 pop HL
                      	
                      	; ld A,"r"
                      	; ld DE,0
                      	; call 0be62h
                      	; pop HL
                      	
  0E5E  C9            	 ret
                      	
                      	
                      	
                      	
  0E5F                	wall_ck_lu:
  0E5F  21660F        	 ld HL,map_memry_top-16-16
                      	;x+C
  0E62  59            	 ld E,C
  0E63  1600          	 ld D,0
  0E65  19            	 add HL,DE
                      	;y+16*B
  0E66  111000        	 ld DE,16
  0E69  04            	 inc B
  0E6A                	wall_ck_lu2:
  0E6A  19            	 add HL,DE
  0E6B  10FD          	 djnz wall_ck_lu2
                      	; or A
                      	; sbc HL,DE
  0E6D  22B80E        	 ld (block_pointaP+1),HL
  0E70  7E            	 ld A,(HL)
  0E71  E680          	 and t;t(80h) or f(0)
  0E73  E1            	 pop HL
                      	
                      	; ld A,"u"
                      	; ld DE,0
                      	; call 0be62h
                      	; pop HL
                      	
  0E74  C9            	 ret
  0E75                	wall_ck_end:
  0E75  E1            	 pop HL
  0E76  AF            	 xor A
  0E77  C9            	 ret
                      	
                      	
                      	;******************************wall mod block**************************
                      	;********************wall mod****HL=obj_xy************************
  0E78                	wall_mod:
  0E78  010000        	 ld BC,0
  0E7B  7E            	 ld A,(HL) 
  0E7C  5F            	 ld E,A
  0E7D  23            	 inc HL
  0E7E  7E            	 ld A,(HL)
  0E7F  E63F          	 and 00111111b
  0E81  57            	 ld D,A
  0E82  2B            	 dec HL
                      	 
  0E83  7B            	 ld A,E
  0E84  D61E          	 sub 30
  0E86  2807          	 jr z,wall_mod_l2
  0E88                	wall_mod_l1:
  0E88  D607          	 sub 7
  0E8A  2803          	 jr z,wall_mod_l2
  0E8C  30FA          	 jr nc,wall_mod_l1
  0E8E  4F            	 ld C,A
                      	
  0E8F                	wall_mod_l2
  0E8F  7A            	 ld A,D
  0E90  B7            	 or A
  0E91  2807          	 jr z,wall_mod_l4
  0E93                	wall_mod_l3:
  0E93  D607          	 sub 7
  0E95  2803          	 jr z,wall_mod_l4
  0E97  30FA          	 jr nc,wall_mod_l3
  0E99  47            	 ld B,A
  0E9A                	wall_mod_l4
                      	; ld A,E
                      	; ld (0f0h),A
                      	; ld A,D
                      	; ld (0f1h),A
                      	; ld A,C
                      	; ld (0f4h),A
                      	; ld A,B
                      	; ld (0f5h),A
  0E9A  C9            	 ret
                      	 
                      	 
                      	 
                      	;*************************************matk action******************************
                      	
  0E9B                	matk_action_gil:
  0E9B  216B49        	 ld HL,gil_matk_count
  0E9E  5E            	 ld E,(HL)
  0E9F  1C            	 inc E
  0EA0  1D            	 dec E
  0EA1  C8            	 ret z
  0EA2  1D            	 dec E
  0EA3  73            	 ld (HL),E
                      	
  0EA4  217249        	 ld HL,gil_xy
  0EA7                	matk_action:;HL=obj address+ let push pop
  0EA7  08            	 ex AF,AF'
  0EA8  32F90E        	 ld (matk_action_gil_ret+1),A
  0EAB  22C20E        	 ld (matk_action_HLP+1),HL
  0EAE  CDE50D        	 call wall_ck
  0EB1  DAF80E        	 jp c,matk_action_gil_ret
  0EB4  CAF80E        	 jp z,matk_action_gil_ret
  0EB7                	block_pointaP:
  0EB7  210000        	 ld HL,overwrite		;block address
  0EBA  4E            	 ld C,(HL)
  0EBB  0C            	 inc C
  0EBC  CAED0E        	 jp z,gil_matk_break 
  0EBF  3600          	 ld (HL),0
                      	 
                      	; call bls
                      	
  0EC1                	matk_action_HLP:
  0EC1  210000        	 ld HL,overwrite
  0EC4  22FB0E        	 ld (matk_action_gil_ret+3),HL
                      	
  0EC7  5E            	 ld E,(HL)
  0EC8  23            	 inc HL
  0EC9  56            	 ld D,(HL)
  0ECA  7A            	 ld A,D
  0ECB  E6C0          	 and 11000000b
  0ECD  2818          	 jr z,matk_action_u
  0ECF  FE80          	 cp 80h
  0ED1  380E          	 jr c,matk_action_r
  0ED3  2806          	 jr z,matk_action_d
  0ED5                	matk_action_l:
  0ED5  1D            	 dec E
  0ED6  CD2611        	 call grp_del
  0ED9  181D          	 jr matk_action_gil_ret
  0EDB                	matk_action_d:
  0EDB  14            	 inc D
  0EDC  CD2611        	 call grp_del
  0EDF  1817          	 jr matk_action_gil_ret
  0EE1                	matk_action_r:
  0EE1  1C            	 inc E
  0EE2  CD2611        	 call grp_del
  0EE5  1811          	 jr matk_action_gil_ret
  0EE7                	matk_action_u:
  0EE7  15            	 dec D
  0EE8  CD2611        	 call grp_del
  0EEB  180B          	 jr matk_action_gil_ret
                      	
  0EED                	gil_matk_break:
  0EED  DD7ED0        	 ld A,(IX-48)
  0EF0  FE8F          	 cp 8fh
  0EF2  2004          	 jr nz,matk_action_gil_ret
  0EF4  AF            	 xor A
  0EF5  326B49        	 ld (gil_matk_count),A
  0EF8                	matk_action_gil_ret:
  0EF8  3E00          	 ld A,overwrite
  0EFA  210000        	 ld HL,overwrite
  0EFD  08            	 ex AF,AF'
  0EFE  C9            	 ret
                      	
                      	
                      	
  0EFF                	Map_make:
  0EFF  CD770C        	 call cls
  0F02  218A18        	 ld HL,Map_data
  0F05  3ADE47        	 ld A,(floor)
  0F08  3D            	 dec A
  0F09  11C900        	 ld DE,96+105
  0F0C  CD250C        	 call xsan
  0F0F  11860F        	 ld DE,map_memry_top
  0F12  016000        	 ld BC,96
  0F15  EDB0          	 ldir
  0F17  110610        	 ld DE,map_memry_left
  0F1A  3E07          	 ld A,7
  0F1C  13            	 inc DE
  0F1D                	map_make_l:
  0F1D  F5            	 push AF
  0F1E  010F00        	 ld BC,15
  0F21  EDB0          	 ldir
  0F23  13            	 inc DE
  0F24  13            	 inc DE
  0F25  F1            	 pop AF
  0F26  3D            	 dec A
  0F27  20F4          	 jr nz,map_make_l
  0F29  111E06        	 ld DE,061eh
  0F2C  DD21860F      	 ld IX,map_memry_top
  0F30  FD210610      	 ld IY,map_memry_left
                      	
  0F34                	map_make_l_l:
  0F34  DD7E00        	 ld A,(IX)
  0F37  E680          	 and t
  0F39  2808          	 jr z,map_make_Xe
  0F3B  D5            	 push DE
  0F3C  218E10        	 ld HL,graph_wall+0
  0F3F  CD9A10        	 call grp_set
  0F42  D1            	 pop DE
  0F43                	map_make_Xe:
  0F43  DD23          	 inc IX
                      	
  0F45  FD7E00        	 ld A,(IY)
  0F48  E680          	 and t
  0F4A  280F          	 jr z,map_make_Ye
  0F4C  D5            	 push DE
  0F4D  219410        	 ld HL,graph_wall+6
  0F50  15            	 dec D
  0F51  15            	 dec D
  0F52  15            	 dec D
  0F53  15            	 dec D
  0F54  15            	 dec D
  0F55  15            	 dec D
  0F56  1D            	 dec E
  0F57  CD9A10        	 call grp_set
  0F5A  D1            	 pop DE
  0F5B                	map_make_Ye:
  0F5B  FD23          	 inc IY
                      	
  0F5D  3E07          	 ld A,7
  0F5F  83            	 add A,E
  0F60  5F            	 ld E,A
  0F61  FE8E          	 cp 142
  0F63  C2340F        	 jp nz,map_make_l_l
                      	 
  0F66  3E07          	 ld A,7
  0F68  82            	 add A,D
  0F69  57            	 ld D,A
  0F6A  FE37          	 cp 55
  0F6C  2807          	 jr z,map_make_end
  0F6E  1E1E          	 ld E,1eh
  0F70  FD23          	 inc IY
  0F72  C3340F        	 jp map_make_l_l
  0F75                	map_make_end:
  0F75  C9            	 ret
                      	
                      	
                      	
                      	
  0F76  FFFFFFFFFFFFFF	 db 0ffh,0ffh,0ffh,0ffh,0ffh,0ffh,0ffh,0ffh,0ffh,0ffh,0ffh,0ffh,0ffh,0ffh,0ffh,0ffh;16
  0F86                	map_memry_top:;1(ture or false)0000000(loop count,7fh=Outer wall)b
  0F86                	 ds 16
  0F96                	 ds 16
  0FA6                	 ds 16
  0FB6                	 ds 16
  0FC6                	 ds 16
  0FD6                	 ds 16
  0FE6  FFFFFFFFFFFFFF	 db 0ffh,0ffh,0ffh,0ffh,0ffh,0ffh,0ffh,0ffh,0ffh,0ffh,0ffh,0ffh,0ffh,0ffh,0ffh,0ffh;16
  0FF6  FFFFFFFFFFFFFF	 db 0ffh,0ffh,0ffh,0ffh,0ffh,0ffh,0ffh,0ffh,0ffh,0ffh,0ffh,0ffh,0ffh,0ffh,0ffh,0ffh;16
                      	
                      	
                      	
  1006                	map_memry_left:;1(ture or false)0000000(loop count,7fh=Outer wall)b
  1006  FF            	 db 0ffh
  1007                	 ds 15
  1016  FF            	 db 0ffh
  1017  FF            	 db 0ffh
  1018                	 ds 15
  1027  FF            	 db 0ffh
  1028  FF            	 db 0ffh
  1029                	 ds 15
  1038  FF            	 db 0ffh
  1039  FF            	 db 0ffh
  103A                	 ds 15
  1049  FF            	 db 0ffh
  104A  FF            	 db 0ffh
  104B                	 ds 15
  105A  FF            	 db 0ffh
  105B  FF            	 db 0ffh
  105C                	 ds 15
  106B  FF            	 db 0ffh
  106C  FF            	 db 0ffh
  106D                	 ds 15
  107C  FF            	 db 0ffh
  107D  FF            	 db 0ffh
                      	 
  107E                	 ds 15
  108D  FF            	 db 0ffh
  108E                	graph_wall:
  108E  010101010101  	 db 1,1,1,1,1,1
  1094  3F0000000000  	 db 3fh,0,0,0,0,0
                      	
                      	
                      	
  109A                	grp_set:;HL_data,DE_(y,x),B_databit
  109A  0606          	 ld B,6
                      	;
                      	
  109C  7A            	 ld A,D
  109D  E6C0          	 and 11000000b
  109F  281F          	 jr z,grp_set_0
  10A1  FE80          	 cp 80h
  10A3  3814          	 jr c,grp_set_1
  10A5  2809          	 jr z,grp_set_2
                      	;left
  10A7  3E12          	 ld A,18
  10A9  85            	 add A,L
  10AA  6F            	 ld L,A
  10AB  3013          	 jr nc,grp_set_0
  10AD  24            	 inc H
  10AE  1810          	 jr grp_set_0
                      	;dowm
  10B0                	grp_set_2:
  10B0  3E0C          	 ld A,12
  10B2  85            	 add A,L
  10B3  6F            	 ld L,A
  10B4  300A          	 jr nc,grp_set_0
  10B6  24            	 inc H
  10B7  1807          	 jr grp_set_0
                      	;right
  10B9                	grp_set_1:
  10B9  3E06          	 ld A,6
  10BB  85            	 add A,L
  10BC  6F            	 ld L,A
  10BD  3001          	 jr nc,grp_set_0
  10BF  24            	 inc H
                      	
                      	;up,non direction
  10C0                	grp_set_0:
  10C0  7B            	 ld A,E
  10C1  32E710        	 ld (grp_set_or1+1),A
  10C4  7A            	 ld A,D
  10C5  E63F          	 and 3fh
  10C7  1600          	 ld D,0
  10C9                	grp_set_set1:
  10C9  14            	 inc D
  10CA  D608          	 sub 8
  10CC  30FB          	 jr nc,grp_set_set1
  10CE  15            	 dec D
  10CF  C608          	 add A,8
  10D1                	grp_set_set2:
  10D1  32F010        	 ld (grp_set_shiftd_bit+1),A
  10D4  4F            	 ld C,A
  10D5  3E08          	 ld A,8
  10D7  91            	 sub C
  10D8  321611        	 ld (grp_set_shiftu_bit+1),A
                      	
  10DB                	grp_set_shiftd:
  10DB  7A            	 ld A,D			;line number
  10DC  E5            	 push HL					;HL
  10DD  212712        	 ld HL,grapu_area
  10E0  119000        	 ld DE,144
  10E3  CD250C        	 call xsan		;y+
  10E6                	grp_set_or1:
  10E6  1E00          	 ld E,overwrite
  10E8  1600          	 ld D,0
  10EA  19            	 add HL,DE		;x+
  10EB  EB            	 ex DE,HL
  10EC  E1            	 pop HL			;data
  10ED  E5            	 push HL					;HL
  10EE  C5            	 push BC						;BC
  10EF                	grp_set_shiftd_bit:
  10EF  0E00          	 ld C,overwrite		;shift bit count
  10F1  7E            	 ld A,(HL)
  10F2  08            	 ex AF,AF'
  10F3  79            	 ld A,C
  10F4  B7            	 or A
  10F5  2807          	 jr z,grp_set_shiftd_bit_2
  10F7  08            	 ex AF,AF'
  10F8                	grp_set_shiftd_bit_l:
  10F8  CB27          	 sla A
  10FA  0D            	 dec C
  10FB  20FB          	 jr nz,grp_set_shiftd_bit_l
  10FD  08            	 ex AF,AF'
  10FE                	grp_set_shiftd_bit_2:
  10FE  08            	 ex AF,AF'
  10FF  4F            	 ld C,A
  1100  1A            	 ld A,(DE)
  1101                	grp_set_change1:
  1101  B1            	 or C
  1102  12            	 ld (DE),A
  1103                	grp_set_shiftd_l:
  1103  23            	 inc HL
  1104  13            	 inc DE
  1105  10E8          	 djnz grp_set_shiftd_bit
                      	
                      	; dec DE
                      	
  1107  EB            	 ex DE,HL
  1108  119000        	 ld DE,144
  110B  19            	 add HL,DE
                      	
                      	
  110C  C1            	 pop BC						;HL
  110D  7D            	 ld A,L
  110E  90            	 sub B
  110F  3001          	 jr nc,grp_set_shiftu_bit_b
  1111  25            	 dec H
  1112                	grp_set_shiftu_bit_b:
  1112  6F            	 ld L,A
  1113  EB            	 ex DE,HL
                      	
  1114  E1            	 pop HL			;data2
  1115                	grp_set_shiftu_bit:
  1115  0E00          	 ld C,overwrite		;shift bit count
  1117  7E            	 ld A,(HL)
  1118                	grp_set_shiftu_bit_l
  1118  CB3F          	 srl A
  111A  0D            	 dec C
  111B  20FB          	 jr nz,grp_set_shiftu_bit_l
  111D  4F            	 ld C,A
  111E  1A            	 ld A,(DE)
  111F                	grp_set_change2:
  111F  B1            	 or C
  1120  12            	 ld (DE),A
  1121                	grp_set_shiftu_l:
  1121  23            	 inc HL
  1122  13            	 inc DE
  1123  10F0          	 djnz grp_set_shiftu_bit
                      	
                      	; call grp_o
  1125  C9            	 ret
                      	
                      	
                      	
                      	
                      	
                      	
                      	
                      	
                      	
  1126                	grp_del:;HL_data,DE_(y,x),B_databit
  1126  219111        	 ld HL,del_graph
  1129  0606          	 ld B,6
  112B  7B            	 ld A,E
  112C  325211        	 ld (grp_set_or1d+1),A
  112F  7A            	 ld A,D
  1130  E63F          	 and 3fh
  1132  1600          	 ld D,0
  1134                	grp_set_set1d:
  1134  14            	 inc D
  1135  D608          	 sub 8
  1137  30FB          	 jr nc,grp_set_set1d
  1139  15            	 dec D
  113A  C608          	 add A,8
  113C                	grp_set_set2d:
  113C  325B11        	 ld (grp_set_shiftd_bitd+1),A
  113F  4F            	 ld C,A
  1140  3E08          	 ld A,8
  1142  91            	 sub C
  1143  328111        	 ld (grp_set_shiftu_bitd+1),A
                      	
  1146                	grp_set_shiftdd:
  1146  7A            	 ld A,D			;line number
  1147  E5            	 push HL					;HL
  1148  212712        	 ld HL,grapu_area
  114B  119000        	 ld DE,144
  114E  CD250C        	 call xsan		;y+
  1151                	grp_set_or1d:
  1151  1E00          	 ld E,overwrite
  1153  1600          	 ld D,0
  1155  19            	 add HL,DE		;x+
  1156  EB            	 ex DE,HL
  1157  E1            	 pop HL			;data
  1158  E5            	 push HL					;HL
  1159  C5            	 push BC						;BC
  115A                	grp_set_shiftd_bitd:
  115A  0E00          	 ld C,overwrite		;shift bit count
  115C  7E            	 ld A,(HL)
  115D  08            	 ex AF,AF'
  115E  79            	 ld A,C
  115F  B7            	 or A
  1160  2807          	 jr z,grp_set_shiftd_bit_2d
  1162  08            	 ex AF,AF'
  1163                	grp_set_shiftd_bit_ld:
  1163  37            	 scf
  1164  17            	 rla
  1165  0D            	 dec C
  1166  20FB          	 jr nz,grp_set_shiftd_bit_ld
  1168  08            	 ex AF,AF'
  1169                	grp_set_shiftd_bit_2d:
  1169  08            	 ex AF,AF'
  116A  4F            	 ld C,A
  116B  1A            	 ld A,(DE)
  116C                	grp_set_change1d:
  116C  A1            	 and C
  116D  12            	 ld (DE),A
  116E                	grp_set_shiftd_ld:
  116E  23            	 inc HL
  116F  13            	 inc DE
  1170  10E8          	 djnz grp_set_shiftd_bitd
                      	
                      	; dec DE
                      	
  1172  EB            	 ex DE,HL
  1173  119000        	 ld DE,144
  1176  19            	 add HL,DE
                      	
                      	
  1177  C1            	 pop BC						;HL
  1178  7D            	 ld A,L
  1179  90            	 sub B
  117A  3001          	 jr nc,grp_set_shiftu_bit_bd
  117C  25            	 dec H
  117D                	grp_set_shiftu_bit_bd:
  117D  6F            	 ld L,A
  117E  EB            	 ex DE,HL
                      	
  117F  E1            	 pop HL			;data2
  1180                	grp_set_shiftu_bitd:
  1180  0E00          	 ld C,overwrite		;shift bit count
  1182  7E            	 ld A,(HL)
  1183                	grp_set_shiftu_bit_ld
  1183  37            	 scf
  1184  1F            	 rra
  1185  0D            	 dec C
  1186  20FB          	 jr nz,grp_set_shiftu_bit_ld
  1188  4F            	 ld C,A
  1189  1A            	 ld A,(DE)
  118A                	grp_set_change2d:
  118A  A1            	 and C
  118B  12            	 ld (DE),A
  118C                	grp_set_shiftu_ld:
  118C  23            	 inc HL
  118D  13            	 inc DE
  118E  10F0          	 djnz grp_set_shiftu_bitd
  1190  C9            	 ret
                      	
  1191                	del_graph:
  1191  C0C0C0C0C0C0  	 db 0c0h,0c0h,0c0h,0c0h,0c0h,0c0h
                      	
                      	
                      	; ds 144
                      	; ds 144
                      	
  1197                	 ds 144
  1227                	grapu_area:
  1227                	 ds 144*6
  1587                	 ds 144
                      	 
                      	; ds 144
                      	; ds 144
                      	;********************************Graphics**********************************
  1617                	graph_title:
  1617  00000000000000	 db 00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,80h,60h,80h,00,00,0C0h,30h,0Ch,08h,30h,0C0h,0C0h,30h,08h,10h,0E0h,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00
  1649  00000000000000	 db 00,00,00,00,00,00,00,00,00,80h,0C0h,00,00,80h,60h,10h,18h,06h,01h,00h,01h,0Eh,03h,00,00,00,00,00,00,01,00,00,00,03,0Ch,30h,40h,080h,00,80h,0E0h,00,00,00,00,00,00,00,00,00
  167B  000000000000C0	 db 00,00,00,00,00,00,0C0h,30h,0Eh,01h,4Fh,66h,0F1h,0E0h,0F0h,58h,58h,40h,20h,80h,0E0h,0F8h,80h,0F0h,0C0h,0E0h,0F0h,0D8h,68h,0A9h,0C3h,42h,82h,86h,84h,0Ch,18h,79h,0F6h,0E1h,0C1h,86h,38h,0C0h,00,00,00,00,00,00
  16AD  00804020180601	 db 00,80h,40h,20h,18h,06h,01h,00,00,00,00,0Fh,3Fh,7Fh,0FEh,0F8h,0F8h,0F0h,0FEh,0FFh,0FFh,0FFh,0FFh,0FFh,0FFh,0FFh,0FFh,0FFh,0FFh,0FFh,0FFh,0FFh,0FFh,7Eh,7Eh,7Dh,7Dh,78h,7Dh,3Fh,1Fh,0Fh,00,00,03h,0Ch,70h,80h,00,00
  16DF  00FF0000000000	 db 00,0FFh,00,00,00,00,00,00,00,0F8h,08,08,0F0h,00,0FCh,02Eh,06Fh,0D7h,07,7Fh,80h,00,0F8h,00,0F0h,50h,4Ch,4Eh,0FFh,07,0F7h,0Fh,4Eh,4Ch,0D4h,00,0F0h,50h,48h,48h,0F8h,00,00,00,00,00,00,0Fh,30h,0C0h
  1711  78474040404044	 db 78h,47h,40h,40h,40h,40h,44h,44h,44h,45h,45h,45h,44h,44h,45h,44h,44h,45h,44h,44h,45h,45h,45h,44h,45h,44h,44h,44h,45h,44h,44h,45h,45h,45h,45h,44h,45h,44h,44h,44h,45h,44h,44h,44h,40h,40h,40h,40h,40h,7Fh
                      	
  1743                	graph_gil_ulf:
  1743  000C3F1F0C00  	 db 00,0Ch,3Fh,1Fh,0Ch,00
  1749                	graph_gil_rlf:
  1749  00003F3F0C00  	 db 00,00,3Fh,3Fh,0Ch,00
  174F                	graph_gil_dlf:
  174F  000C1F370C00  	 db 00,0Ch,1Fh,37h,0Ch,00
  1755                	graph_gil_llf:
  1755  000C3F3F0000  	 db 00,0Ch,3Fh,3Fh,00,00
                      	
  175B                	graph_gil_urf:
  175B  000C1F3F0C00  	 db 00,0Ch,1Fh,3Fh,0Ch,00
  1761                	graph_gil_rrf:
  1761  00201F1F2C00  	 db 00,20h,1Fh,1Fh,2Ch,00
  1767                	graph_gil_drf:
  1767  000C3F170C00  	 db 00,0Ch,3Fh,17h,0Ch,00
  176D                	graph_gil_lrf:
  176D  002C1F1F2000  	 db 00,2Ch,1Fh,1Fh,20h,00
                      	
  1773                	graph_gilsw_ulf:
  1773  000C3F1F0C08  	 db 00,0Ch,3Fh,1Fh,0Ch,08
  1779  080C3F3F0C00  	 db 08h,0Ch,3Fh,3Fh,0Ch,00
  177F  080C1F370C00  	 db 08,0Ch,1Fh,37h,0Ch,00
  1785  000C3F3F0C08  	 db 00,0Ch,3Fh,3Fh,0Ch,08
                      	;graph_gilsw_urf:
  178B  000C1F3F0C08  	 db 00,0Ch,1Fh,3Fh,0Ch,08
  1791  082C1F1F2C00  	 db 08,2Ch,1Fh,1Fh,2Ch,00
  1797  080C3F170C00  	 db 08,0Ch,3Fh,17h,0Ch,00
  179D  002C1F1F2C08  	 db 00,2Ch,1Fh,1Fh,2Ch,08
                      	
  17A3                	graph_gilsword_ulf:
  17A3  1E0C3F1F0407  	 db 1Eh,0Ch,3Fh,1Fh,04h,07h
  17A9  000E3F3F0808  	 db 00,0Eh,3Fh,3Fh,08,08
  17AF  38041F3F0C1E  	 db 38h,04h,1Fh,3Fh,0Ch,1Eh
  17B5  08083F3F0E00  	 db 08,08,3Fh,3Fh,0Eh,00
                      	;graph_gilsword_ulf:
  17BB  1E0C1F3F0407  	 db 1Eh,0Ch,1Fh,3Fh,04,07
  17C1  002E1F1F2808  	 db 00,2Eh,1Fh,1Fh,28h,08
  17C7  38043F1F0C1E  	 db 38h,04h,3Fh,1Fh,0Ch,1Eh
  17CD  08281F1F2E00  	 db 08,28h,1Fh,1Fh,2Eh,00
                      	
                      	
  17D3                	graph_sraimd:
  17D3  00181C1C1800  	 db 00,18h,1Ch,1Ch,18h,00
  17D9                	graph_sraimu:
  17D9  00181C1C1800  	 db 00,18h,1Ch,1Ch,18h,00
  17DF                	graph_sraimd1:
  17DF  000C1A1E0C00  	 db 00,0Ch,1Ah,1Eh,0Ch,00
  17E5                	graph_sraimu2:
  17E5  000C1A1E0C00  	 db 00,0Ch,1Ah,1Eh,0Ch,00
                      	
  17EB                	magic:
  17EB  032E3F3F2E03  	 db 03,2Eh,3Fh,3Fh,2Eh,03
  17F1                	magicr:
  17F1  00203F3F2E18  	 db 00,20h,3Fh,3Fh,2Eh,18h
  17F7                	magic3:
  17F7  182E3F3F2E18  	 db 18h,2Eh,3Fh,3Fh,2Eh,18h
  17FD                	magic4:
  17FD  182E3F3F2000  	 db 18h,2Eh,3Fh,3Fh,20h,00
                      	 
  1803                	graph_goast:
  1803  030E1F1F0E03  	 db 03,0Eh,1Fh,1Fh,0Eh,03
  1809  10181E1F0F1A  	 db 10h,18h,1Eh,1Fh,0Fh,1Ah
  180F  180E1F1F0E18  	 db 18h,0Eh,1Fh,1Fh,0Eh,18h
  1815  1A0F1F1E1810  	 db 1Ah,0Fh,1Fh,1Eh,18h,10h
                      	 
  181B                	graph_spell:
  181B  000018180000  	 db 00,00,18h,18h,00,00
  1821  000018180000  	 db 00,00,18h,18h,00,00
  1827  000018180000  	 db 00,00,18h,18h,00,00
  182D  000018180000  	 db 00,00,18h,18h,00,00
                      	 
                      	
  1833                	graph_n_knightu:;r foot
  1833  000C1F3F0407  	 db 00,0Ch,1Fh,3Fh,04,07
  1839                	graph_n_knightr:
  1839  00201F1F2808  	 db 00,20h,1Fh,1Fh,28h,08
  183F                	graph_n_knightd:
  183F  38043F1F0C00  	 db 38h,04h,3Fh,1Fh,0Ch,00
  1845                	graph_n_knightl:
  1845  08281F1F2000  	 db 08,28h,1Fh,1Fh,20h,00
                      	 
                      	;graph_n_knightu:;l foot
  184B  000C3F1F0407  	 db 00,0Ch,3Fh,1Fh,04h,07h
                      	;graph_n_knightr:
  1851  00003F3F0808  	 db 00,00,3Fh,3Fh,08h,08
                      	;graph_n_knightd:
  1857  38041F3F0C00  	 db 38h,04h,1Fh,3Fh,0Ch,00
                      	;graph_n_knightl:
  185D  08083F3F0000  	 db 08,08,3Fh,3Fh,00,00
                      	
                      	
  1863                	dammy:
  1863  000000000000  	 db 0,0,0,0,0,0
  1869  000000000000  	 db 0,0,0,0,0,0
  186F  000000000000  	 db 0,0,0,0,0,0
  1875  000000000000  	 db 0,0,0,0,0,0
                      	;************************************Data**************************************
  187B  46468F00838485	obj_1:db 46h,46h,8fh,0,83h,84h,85h,1,1,1,1,1,0,8fh,0
                      	
                      	
  188A                	Map_data:;96+105=201byte
                      	; db f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f;d
                      	; db f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f
                      	; db f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f
                      	; db f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f
                      	; db f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f
                      	; db f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f
                      	
                      	; db f,f,f,f,f,f,f,f,f,f,f,f,f,f,f
                      	; db f,f,f,f,f,f,f,f,f,f,f,f,f,f,f
                      	; db f,f,f,f,f,f,f,f,f,f,f,f,f,f,f
                      	; db f,f,f,f,f,f,f,f,f,f,f,f,f,f,f
                      	; db f,f,f,f,f,f,f,f,f,f,f,f,f,f,f
                      	; db f,f,f,f,f,f,f,f,f,f,f,f,f,f,f
                      	; db f,f,f,f,f,f,f,f,f,f,f,f,f,f,f
                      	 
                      	 
  188A  00008080800000	 db f,f,t,t,t,f,f,f,f,f,f,t,f,t,f,f
  189A  00000080008000	 db f,f,f,t,f,t,f,t,f,t,t,f,t,t,f,t
  18AA  80008080000080	 db t,f,t,t,f,f,t,f,f,f,f,f,t,f,f,t
  18BA  00008080808000	 db f,f,t,t,t,t,f,t,f,t,f,f,f,t,f,f
  18CA  00008080808000	 db f,f,t,t,t,t,f,t,t,f,f,t,f,t,f,t
  18DA  80008000008000	 db t,f,t,f,f,t,f,f,t,t,f,t,t,t,f,t
                      	
  18EA  80000000000080	 db t,f,f,f,f,f,t,f,t,t,f,f,f,f,t
  18F9  00800000808000	 db f,t,f,f,t,t,f,t,f,f,f,t,f,t,f
  1908  80800080800000	 db t,t,f,t,t,f,f,t,t,t,t,f,t,t,f
  1917  80800000008080	 db t,t,f,f,f,t,t,t,f,f,t,t,f,t,f
  1926  80000000800080	 db t,f,f,f,t,f,t,f,t,t,t,t,t,f,t
  1935  00008000000000	 db f,f,t,f,f,f,f,f,f,t,f,f,t,f,f
  1944  00800080008080	 db f,t,f,t,f,t,t,f,f,f,f,f,t,f,f
                      	 
  1953                	 ds 201*59
                      	 
  47A6                	hp_table1:
  47A6  01010101010101	 db 1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1
  47B6                	hp_table2:
  47B6  01010101181818	 db 1,1,1,1,24,24,24,1,1
  47BF                	hp_table3:
  47BF  18303060609060	 db 24,48,48,96,96,144,96
  47C6                	hp_table4:
  47C6  30507001181818	 db 48,80,112,1,24,24,24,96
  47CE                	hp_table5:
  47CE  01010101010101	 db 1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,10110000b
                      	 
                      	;**********************************Variable**************************************
  47DE  00            	floor:db 0
  47DF  0000          	pdoor_xy:dw 0		;83h
  47E1  0000          	pkey_xy:dw 0		;85h
  47E3  0000          	pgil_xy:dw 0		;84h,8fh
  47E5                	obj:ds 48
  4815                	obj_hp:ds 48
  4845                	obj_wp:ds 48
  4875                	obj_st:ds 48
  48A5                	obj_xy:ds 96;(x,y&d)
  4905                	obj_st2:ds 48
  4935                	obj_st3:ds 48
                      	
  4965  00            	gil_button:db 0
  4966  00            	gil_hp:db 0
  4967  00            	gil_wp:db 0
  4968  00            	gil_st1:db 0	;00 or ffh:right foot or left foot
  4969  00            	gil_st2:db 0	;bit 0-6:counter,bit 7:sword set,if bit 7 enable and bit 0-6 > 0 dec (st2)
                      			;
  496A  00            	gil_matk:db 0	;1:c,2:s,3:g,0:none
  496B  FF            	gil_matk_count:db 255	;matk use count.it is deced when use a matk.
  496C  00            	gil_bt:db 0	;1 is dash enable.
  496D  00            	gil_sword:db 0	;1:dragon,2:ex
  496E  00            	gil_armor:db 0	;1 is hyper.
  496F  00            	gil_gunt:db 0	;1 is hyper.
  4970  00            	gil_shield:db 0	;1 is hyper.
  4971  00            	gil_neck:db 0	;1:g,2:r,3:b.
                      	
  4972                	gil_xy:ds 2
  4974                	gil_dblock:ds 2
  4976                	end
