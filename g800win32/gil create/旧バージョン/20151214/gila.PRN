			  Z80 ASSEMBLER - ZASM VER 1.6
  0100                	org 0100h
                      	
  0000                	overwrite:equ 0
  001E                	x0:equ 30
  008C                	xm:equ 140
  0000                	y0:equ 0
  002F                	ym:equ 47
  0080                	t:equ 80h
  0000                	f:equ 0
                      	
  BFD0                	grp:equ 0bfd0h
  BFF1                	msp:equ 0bff1h
  BCFD                	kwait:equ 0bcfdh
  BE53                	kscan:equ 0be53h
                      	
                      	
                      	
                      	;*******************Title graph********************
  0100                	start:
  0100  210000        	 ld HL,0
  0103  39            	 add HL,SP
  0104  222F0F        	 ld (retP+1),HL
  0107  CDB70F        	 call cls 
  010A  21AE19        	 ld HL,graph_title
  010D  110800        	 ld DE,0008h
  0110  0632          	 ld B,50
  0112  CD0210        	 call grp_open
  0115                	start_l:
  0115  3E01          	 ld A,1
  0117  32C24C        	 ld (floor),A
  011A  CD1110        	 call keysc		;left,right,on,0,/,space,down,up
  011D  CB57          	 bit 2,A
  011F  C0            	 ret nz
  0120  CB5F          	 bit 3,A
  0122  2006          	 jr nz,before_game_c
  0124  CB6F          	 bit 5,A
  0126  2052          	 jr nz,init
  0128  18EB          	 jr start_l
                      	;*****************Continue*******************
  012A                	before_game_c:
  012A  CB6F          	 bit 5,A
  012C  28E7          	 jr z,start_l
  012E  CDB70F        	 call cls
  0131  21AF03        	 ld HL,continue_ms
  0134  110201        	 ld DE,0102h
  0137  0612          	 ld B,18
  0139  CDF1BF        	 call msp
  013C  2AC24C        	 ld HL,(floor)
  013F  2600          	 ld H,0
  0141  CD710F        	 call ascn
  0144                	before_game_c_floor:
  0144  2AC24C        	 ld HL,(floor)
  0147  2600          	 ld H,0
  0149  CD710F        	 call ascn
  014C  216F0F        	 ld HL,nmemry+3
  014F  110B03        	 ld DE,030bh
  0152  0602          	 ld B,2
  0154  CDF1BF        	 call msp
  0157  CDFDBC        	 call kwait
  015A  21C24C        	 ld HL,floor
  015D  FE1E          	 cp 1eh
  015F  281C          	 jr z,Stating_before
  0161  FE20          	 cp 20h
  0163  280C          	 jr z,before_game_c_u
  0165  FE1F          	 cp 1fh
  0167  20DB          	 jr nz,before_game_c_floor
  0169                	before_game_c_d:
  0169  35            	 dec (HL)
  016A  AF            	 xor A
  016B  BE            	 cp (HL)
  016C  20D6          	 jr nz,before_game_c_floor
  016E  34            	 inc (HL)
  016F  18D3          	 jr before_game_c_floor
  0171                	before_game_c_u:
  0171  34            	 inc (HL)
  0172  3E3D          	 ld A,61
  0174  BE            	 cp (HL)
  0175  20CD          	 jr nz,before_game_c_floor
  0177  35            	 dec (HL)
  0178  18CA          	 jr before_game_c_floor
                      	 
                      	 
                      	 
                      	;***************init************************** 
  017A                	init:
  017A  CD0002        	 call init_c
                      	 
                      	;***************Starting game****************
                      	;***************massage*********************
                      	
  017D                	Stating_before:
  017D  CD0F02        	 call stating_before_c
                      	
                      	;***********************free aria cleen****************
                      	
  0180  CD4D02        	 call freecls
                      	
                      	;***********************map set************************
  0183  CD4512        	 call Map_make
                      	
                      	;********************************obj set***************************
                      	
  0186  CDE102        	 call nextck
                      	
                      	;***********************obj init************************
  0189                	stating_obj:
  0189  21C94C        	 ld HL,obj
  018C  3600          	 ld (HL),0
  018E  11CA4C        	 ld DE,obj+1
  0191  015001        	 ld BC,48+48+48+96+48+48
  0194  EDB0          	 ldir
                      	;***********************obj countor**************
  0196  21661C        	 ld HL,obj_1
  0199  3AC24C        	 ld A,(floor)
  019C  3D            	 dec A
  019D  280B          	 jr Z,stating_obj_1
                      	
  019F  57            	 ld D,A
                      	;*********************0=end sign****next floor data***ldi loop**********
  01A0                	stating_obj_2:
  01A0  010000        	 ld BC,0
  01A3  3E00          	 ld A,0
  01A5  EDB1          	 cpir
  01A7  15            	 dec D
  01A8  20F6          	 jr nz,stating_obj_2
  01AA                	stating_obj_1:
  01AA  11C94C        	 ld DE,obj
  01AD                	stating_obj_3:
  01AD  7E            	 ld A,(HL)
  01AE  B7            	 or A
  01AF  2804          	 jr z,stating_obj_7
  01B1  EDA0          	 ldi
  01B3  18F8          	 jr stating_obj_3
                      	
                      	;*********************obj cp= then goto mainbefore***************
                      	
  01B5                	stating_obj_7:
  01B5  21C94C        	 ld HL,obj
  01B8  110000        	 ld DE,0
  01BB                	stating_obj_4:
  01BB  AF            	 xor A
  01BC  BE            	 cp (HL)
  01BD  CAF701        	 jp z,main_before		;stating_obj_hp
  01C0  E5            	 push HL
  01C1  D5            	 push DE
                      	
                      	;x=x+7*A
  01C2  ED5F          	 ld A,R;call rand
  01C4  E60F          	 and 0fh		;a=0~15
  01C6  211E00        	 ld HL,001eh	;30
  01C9  110700        	 ld DE,0007h
  01CC  CD650F        	 call xsan
                      	
                      	
                      	;y=y+7*A
  01CF  CD4A0F        	 call rand
  01D2                	stating_obj_5:
  01D2  D606          	 sub 6
  01D4  30FC          	 jr nc,stating_obj_5
  01D6  C606          	 add A,6
  01D8  110007        	 ld DE,0700h
  01DB  CD650F        	 call xsan
                      	
  01DE  D1            	 pop DE
  01DF  E5            	 push HL		;xy
                      	
  01E0  21894D        	 ld HL,obj_xy		;address
  01E3  19            	 add HL,DE		;address+
                      	
  01E4  CDE602        	 call stating_obj_hp_wp
                      	
  01E7  19            	 add HL,DE		;address++
  01E8  22EE01        	 ld (stating_obj_6+1),HL
                      	; add HL,DE		;address++(direction)
  01EB  13            	 inc DE
                      	
  01EC  E1            	 pop HL
                      	
                      	; ld HL,151eh;(30,0)
                      	
  01ED                	stating_obj_6:
  01ED  220000        	 ld (overwrite),HL
  01F0  22564E        	 ld (gil_xy),HL
  01F3  E1            	 pop  HL
  01F4  23            	 inc HL
  01F5  18C4          	 jr stating_obj_4
                      	
                      	
                      	;****************before farse***pgil_xy set**************
                      	
  01F7                	main_before:
  01F7  CD5B02        	 call main_before_c
  01FA  CD3703        	 call itemprint
  01FD  C33804        	 jp main
                      	
                      	
                      	;**************************************************************************
                      	;***************************init sub****************************************
                      	;**************************************************************************
                      	
  0200                	init_c:
  0200  214E4E        	 ld HL,gil_matk
  0203  114F4E        	 ld DE,gil_matk+1
  0206  011600        	 ld BC,22
  0209  3E00          	 ld A,0
  020B  77            	 ld (HL),A
  020C  EDB0          	 ldir
  020E  C9            	 ret
                      	 
                      	 
  020F                	Stating_before_c:
  020F  CDB70F        	 call cls
  0212  219703        	 ld HL,stating_ms1
  0215  110801        	 ld DE,0108h
  0218  0609          	 ld B,9
  021A  CDF1BF        	 call msp
  021D  21A003        	 ld HL,stating_ms2
  0220  110802        	 ld De,0208h
  0223  060A          	 ld B,10
  0225  CDF1BF        	 call msp
  0228  21AA03        	 ld HL,stating_msf
  022B  110804        	 ld De,0408h
  022E  0605          	 ld B,5
  0230  CDF1BF        	 call msp
  0233  2AC24C        	 ld HL,(floor)
  0236  2600          	 ld H,0
  0238  CD710F        	 call ascn
  023B  216F0F        	 ld HL,nmemry+3
  023E  110E04        	 ld DE,040eh
  0241  0602          	 ld B,2
  0243  CDF1BF        	 call msp
  0246  CD3A0F        	 call tim255
  0249  CDFDBC        	 call kwait
  024C  C9            	 ret
                      	 
  024D                	freecls:
  024D  214E1C        	 ld HL,dammy
  0250  AF            	 xor A
  0251  77            	 ld (HL),A
  0252  114F1C        	 ld DE,dammy+1
  0255  011700        	 ld BC,23
  0258  EDB0          	 ldir
  025A  C9            	 ret
                      	
  025B                	main_before_c:
  025B  2A564E        	 ld HL,(gil_xy)
  025E  22C74C        	 ld (pgil_xy),HL 
  0261  21661C        	 ld HL,obj_1
  0264  3AC24C        	 ld A,(floor)
  0267  3D            	 dec A
  0268  2810          	 jr z,main_before_15
  026A  57            	 ld D,A
  026B  AF            	 xor A
  026C  010000        	 ld BC,0
  026F                	main_before_1:
  026F  EDB1          	 cpir
  0271  15            	 dec D
  0272  20FB          	 jr nz,main_before_1
  0274  21C94C        	 ld HL,obj
  0277  B7            	 or A
  0278  ED42          	 sbc HL,BC		;it's start pointa**obj++
                      	
                      	
                      	;******************door set****************************
  027A                	main_before_15:
  027A  E5            	 push HL		;obj
  027B  3E83          	 ld A,83h
  027D  010000        	 ld BC,0
                      	;main_before_2:
  0280  EDB1          	 cpir
  0282  03            	 inc BC
  0283  21894D        	 ld HL,obj_xy
  0286  B7            	 or A
  0287  ED42          	 sbc HL,BC
  0289  B7            	 or A
  028A  ED42          	 sbc HL,BC
  028C  5E            	 ld E,(HL)
  028D  23            	 inc HL
  028E  56            	 ld D,(HL)
  028F  ED53C34C      	 ld (pdoor_xy),DE
                      	
                      	;*****************key set*******************************
                      	
  0293  E1            	 pop HL
  0294  3E85          	 ld A,85h
  0296  010000        	 ld BC,0
                      	;main_before_3:
  0299  EDB1          	 cpir
  029B  03            	 inc BC
  029C  21894D        	 ld HL,obj_xy
  029F  B7            	 or A
  02A0  ED42          	 sbc HL,BC
  02A2  B7            	 or A
  02A3  ED42          	 sbc HL,BC
  02A5  5E            	 ld E,(HL)
  02A6  23            	 inc HL
  02A7  56            	 ld D,(HL)
  02A8  ED53C54C      	 ld (pkey_xy),DE
  02AC  AF            	 xor A
  02AD  32664E        	 ld (key),A
                      	
                      	;*********************obj cross gil********************
                      	
  02B0  2A564E        	 ld HL,(gil_xy)
  02B3  4D            	 ld C,L
  02B4  44            	 ld B,H
  02B5  21894D        	 ld HL,obj_xy
  02B8                	main_before_gil:
  02B8  E5            	 push HL
  02B9  5E            	 ld E,(HL)
  02BA  23            	 inc HL
  02BB  56            	 ld D,(HL)
  02BC  EB            	 ex DE,HL
  02BD  B7            	 or A
  02BE  ED42          	 sbc HL,BC
  02C0  E1            	 pop HL
  02C1  2804          	 jr z,main_before_gil_z
  02C3  23            	 inc HL
  02C4  23            	 inc HL
  02C5  18F1          	 jr main_before_gil
  02C7                	main_before_gil_z:
  02C7  23            	 inc HL
  02C8  23            	 inc HL
  02C9  7E            	 ld A,(HL)
  02CA  B7            	 or A
  02CB  C28901        	 jp nz,stating_obj
                      	 
  02CE  3AEE01        	 ld A,(stating_obj_6+1)
  02D1  6F            	 ld L,A
  02D2  3AEF01        	 ld A,(stating_obj_6+2)
  02D5  67            	 ld H,A
  02D6  3E15          	 ld A,21
  02D8  77            	 ld (HL),A
  02D9  23            	 inc HL
  02DA  3E2A          	 ld A,42
  02DC  77            	 ld (HL),A
  02DD  22F000        	 ld (0f0h),HL
  02E0  C9            	 ret
                      	 
                      	 
  02E1                	nextck:
  02E1  AF            	 xor A
  02E2  32664E        	 ld (key),A
  02E5  C9            	 ret
                      	
                      	 
                      	;*********************obs  hp  wp set*********************
  02E6                	stating_obj_hp_wp:
  02E6  E5            	 push HL
  02E7  D5            	 push DE
                      	
  02E8  21C94C        	 ld HL,obj
  02EB  19            	 add HL,DE
  02EC  7E            	 ld A,(HL)
  02ED  E60F          	 and 0fh
  02EF  CB7E          	 bit 7,(HL)
  02F1  2028          	 jr nz,stating_obj_hp_wp5
  02F3  CB76          	 bit 6,(HL)
  02F5  201D          	 jr nz,stating_obj_hp_wp4
  02F7  CB6E          	 bit 5,(HL)
  02F9  2012          	 jr nz,stating_obj_hp_wp3
  02FB  CB66          	 bit 4,(HL)
  02FD  2007          	 jr nz,stating_obj_hp_wp2
  02FF                	stating_obj_hp_wp1:
  02FF  218A4C        	 ld HL,hp_table1
  0302  C32203        	 jp stating_obj_hp_wp6
  0305  C9            	 ret
  0306                	stating_obj_hp_wp2:
  0306  219A4C        	 ld HL,hp_table2
  0309  C32203        	 jp stating_obj_hp_wp6
  030C  C9            	 ret
  030D                	stating_obj_hp_wp3:
  030D  21A34C        	 ld HL,hp_table3
  0310  C32203        	 jp stating_obj_hp_wp6
  0313  C9            	 ret
  0314                	stating_obj_hp_wp4:
  0314  21AA4C        	 ld HL,hp_table4
  0317  C32203        	 jp stating_obj_hp_wp6
  031A  C9            	 ret
  031B                	stating_obj_hp_wp5:
  031B  21B24C        	 ld HL,hp_table5
  031E  C32203        	 jp stating_obj_hp_wp6
  0321  C9            	 ret
  0322                	stating_obj_hp_wp6:
  0322  5F            	 ld E,A
  0323  1D            	 dec E
  0324  1600          	 ld D,0
  0326  19            	 add HL,DE
  0327  7E            	 ld A,(HL)
  0328  D1            	 pop DE
  0329  21F94C        	 ld HL,obj_hp
  032C  19            	 add HL,DE
  032D  77            	 ld (HL),A
                      	 
  032E  E1            	 pop HL
  032F  E67F          	 and 01111111b
                      	 ;********************************************************HP*******************************
  0331  3E38          	 ld A,00111000b
  0333  324A4E        	 ld (gil_hp),A
  0336  C9            	 ret	;gil is end of data.
                      	 
                      	 
                      	;************************item print1*******************************************
                      	 
  0337                	itemprint:
  0337  E5            	 push HL
  0338  3A664E        	 ld A,(key)
  033B  B7            	 or A
  033C  2809          	 jr z,itemprint_matk
  033E  21FA1B        	 ld HL,graph_key
  0341  110000        	 ld DE,0000h
  0344  CD3114        	 call grp_set
  0347                	itemprint_matk:
  0347  3A5A4E        	 ld A,(matk)
  034A  B7            	 or A
  034B  2809          	 jr z,itemprint_boot
  034D  21121C        	 ld HL,graph_matk
  0350  110007        	 ld DE,0700h
  0353  CD3114        	 call grp_set
  0356                	itemprint_boot:
  0356  3A5B4E        	 ld A,(boot)
  0359  B7            	 or A
  035A  2809          	 jr z,itemprint_po
  035C  21181C        	 ld HL,graph_boot
  035F  110707        	 ld DE,0707h
  0362  CD3114        	 call grp_set
  0365                	itemprint_po:
  0365  3A654E        	 ld A,(posion)
  0368  B7            	 or A
  0369  2809          	 jr z,itemprint_sword
  036B  211E1C        	 ld HL,graph_po
  036E  110E07        	 ld DE,070eh
  0371  CD3114        	 call grp_set
  0374                	itemprint_sword:
  0374  3A5C4E        	 ld A,(sword)
  0377  B7            	 or A
  0378  2809          	 jr z,itemprint_kndl
  037A  213C1C        	 ld HL,graph_sword
  037D  11000E        	 ld DE,0e00h
  0380  CD3114        	 call grp_set
  0383                	itemprint_kndl:
  0383  3A634E        	 ld A,(kndl)
  0386  B7            	 or A
  0387  2809          	 jr z,itemprint_gnt
  0389  21301C        	 ld HL,graph_kndl
  038C  110015        	 ld DE,1500h
  038F  CD3114        	 call grp_set
  0392                	itemprint_gnt
                      	 
  0392  CDEB0F        	 call grp_o
  0395  E1            	 pop HL
  0396  C9            	 ret
                      	 
                      	 
                      	 
                      	 
  0397                	stating_ms1:
  0397  47455420524541	 db "GET READY"
  03A0                	stating_ms2:
  03A0  504C4159455220	 db "PLAYER ONE"
  03AA                	stating_msf:
  03AA  464C4F4F52    	 db "FLOOR"
  03AF                	continue_ms:
  03AF  53454C45435420	 db "SELECT START FLOOR"
  03C1                	wall_grp:
  03C1  FFFFFF        	 db 0ffh,0ffh,0ffh
  03C4                	pole_grp:
  03C4  01            	 db 1h
                      	 
                      	 
                      	;*************************************************************************************
                      	;********************************recover**********************************************
  03C5                	stating_rec:
  03C5  CD0F02        	 call Stating_before_c
  03C8  CD4512        	 call map_make
  03CB  CD4D02        	 call freecls
  03CE  AF            	 xor A
  03CF  32664E        	 ld (key),A
  03D2  AF            	 xor A
  03D3  32654E        	 ld (posion),A
  03D6  ED5BC74C      	 ld DE,(pgil_xy)
  03DA  ED53564E      	 ld (gil_xy),DE
  03DE                	stating_rec1:
  03DE  DD21F94C      	 ld IX,obj_hp
  03E2  21894D        	 ld HL,obj_xy
  03E5  110000        	 ld DE,0
  03E8                	stating_rec2:
  03E8  DD7ED0        	 ld A,(IX-48)
  03EB  FE8F          	 cp 8fh
  03ED  CA2E04        	 jp z,stating_rec3
  03F0  D5            	 push DE
  03F1  CDE602        	 call stating_obj_hp_wp
  03F4  CDF610        	 call cross_ck_a
  03F7  DA0204        	 jp c,obj_of
  03FA  D1            	 pop DE
  03FB  23            	 inc HL
  03FC  23            	 inc HL
  03FD  13            	 inc DE
  03FE  DD23          	 inc IX
  0400  18E6          	 jr  stating_rec2
                      	 
  0402                	obj_of:
  0402  E5            	 push HL
  0403  110700        	 ld DE,7
  0406  210000        	 ld HL,0
  0409  CD4A0F        	 call rand
  040C  E60E          	 and 0eh
  040E  CD650F        	 call xsan
  0411  111E00        	 ld DE,30
  0414  19            	 add HL,DE
  0415  7D            	 ld A,L
  0416  E1            	 pop HL
  0417  77            	 ld (HL),A
  0418  E5            	 push HL
  0419  110700        	 ld DE,7
  041C  210000        	 ld HL,0
  041F  ED5F          	 ld A,R
  0421  E606          	 and 06
  0423  CD650F        	 call xsan
  0426  7D            	 ld A,L
  0427  E1            	 pop HL
  0428  23            	 inc HL
  0429  77            	 ld (HL),A
  042A  2B            	 dec HL
  042B  C3DE03        	 jp stating_rec1
                      	 
  042E                	stating_rec3:
  042E  AF            	 xor A
  042F  DD772E        	 ld (IX+46),A
  0432  CD3703        	 call itemprint
  0435  C33804        	 jp main
                      	 
                      	 
                      	;**************************************************************************************
                      	;************************************Main*********************************************
                      	;**************************************************************************************
  0438                	main:
  0438  CDEB0F        	 call grp_o
                      	; call tim30
  043B  3E30          	 ld A,48
  043D  324C04        	 ld (count+1),A
  0440  21894D        	 ld HL,obj_xy
  0443  DD21F94C      	 ld IX,obj_hp
  0447  FD21E94D      	 ld IY,obj_st2
  044B                	mains:
                      	
  044B                	count:
  044B  3E00          	 ld A,overwrite
  044D  B7            	 or A
  044E  CA3804        	 jp z,main
                      	;unknown_ID_throght(0)
  0451  DD7ED0        	 ld A,(IX-48)
  0454  B7            	 or A
  0455  CA160F        	 jp z,mains_end
                      	;count out then main
                      	
                      	;graph_delete
                      	
  0458  E5            	 push HL		;>
  0459  5E            	 ld E,(HL)
  045A  23            	 inc HL
  045B  56            	 ld D,(HL)
  045C  CDBD14        	 call grp_del
  045F  E1            	 pop HL		;<
                      	;hp_zero_throght
                      	
  0460  DD7E00        	 ld A,(IX)
  0463  B7            	 or A
  0464  CA160F        	 jp z,mains_end
                      	
                      	
                      	
                      	
                      	;******************************ivent action **********************
                      	 
  0467  DD7ED0        	 ld A,(IX-48)
  046A  47            	 ld B,A
  046B  E6E0          	 and 0e0h
  046D  C2ED04        	 jp nz,st_action
  0470  78            	 ld A,B
  0471  FE0A          	 cp 0ah
  0473  CAF207        	 jp z,spells_action
  0476  FE0B          	 cp 0bh
  0478  CAF207        	 jp z,spells_action
                      	
                      	;wp
  047B  DD7E30        	 ld A,(IX+48)
  047E  B7            	 or A
                      	
                      	;wp=0
  047F  CA9104        	 jp z,st_check
                      	
                      	
                      	
                      	;wp>0
  0482  3D            	 dec A
  0483  DD7730        	 ld (IX+48),A
  0486  DD7ED0        	 ld A,(IX-48);(Syubetsu)
  0489  CB67          	 bit 4,A
  048B  CAAB05        	 jp z,sraim_move3_e;(suraimuGPRINT)
  048E  C34506        	 jp wizard_move_e_wpp
                      	; jp wizard_act_e
                      	; jp nz,mains_end
                      	; jp st_check
  0491                	st_check:
  0491  DD7E60        	 ld A,(IX+96)
  0494  B7            	 or A
  0495  C2E604        	 jp nz,st_dec
                      	
                      	;wp=0,st=0
                      	;wp setting((di)=move lutin)
                      	
  0498  DD7ED0        	 ld A,(IX-48);(Syurui)
  049B  CB67          	 bit 4,A
  049D  2808          	 jr z,wp_str_b
  049F  ED5F          	 ld A,R;		(wizard)
  04A1  E61F          	 and 00011111b
  04A3  CBEF          	 set 5,A
  04A5  182A          	 jr wp_str
  04A7                	wp_str_b:
  04A7  F5            	 push AF
  04A8  ED5F          	 ld A,R
  04AA  E67F          	 and 7fh
  04AC  47            	 ld B,A
  04AD  ED5F          	 ld A,R
  04AF  E67F          	 and 7fh
  04B1  80            	 add A,B
  04B2  47            	 ld B,A
  04B3  F1            	 pop AF
  04B4  FE02          	 cp 2
  04B6  3816          	 jr c,wp_G
  04B8  280F          	 jr z,wp_B
  04BA  FE04          	 cp 4
  04BC  78            	 ld A,B
  04BD  3806          	 jr c,wp_R
  04BF  2804          	 jr z,wp_BL
  04C1                	wp_D:
  04C1                	wp_DY:
  04C1  E608          	 and 8
  04C3  180C          	 jr wp_str
  04C5                	wp_BL:
  04C5                	wp_R:
  04C5  E610          	 and 16
  04C7  1808          	 jr wp_str
  04C9                	wp_B:
  04C9  78            	 ld A,B
  04CA  E608          	 and 8
  04CC  1803          	 jr wp_str
  04CE                	wp_G:
  04CE  78            	 ld A,B
  04CF  E610          	 and 16
  04D1                	wp_str:
  04D1  C608          	 add A,8
  04D3  DD7730        	 ld (IX+48),A
  04D6  3E19          	 ld A,25
  04D8  DD7760        	 ld (IX+96),A
                      	
  04DB  DD7ED0        	 ld A,(IX-48);(Syubetsu)
  04DE  CB67          	 bit 4,A
  04E0  CAAB05        	 jp z,sraim_move3_e;(suraimuGPRINT)
  04E3  C34506        	 jp wizard_move_e_wpp;(wizard not print)mains_end
                      	; jp Egraph;
                      	
                      	
                      	
                      	;wp=0,st=x
  04E6                	st_dec:
  04E6  3D            	 dec A
  04E7  DD7760        	 ld (IX+96),A
  04EA  C33405        	 jp sraim_or_wiz_action
                      	 
                      	 
                      	;***********************************knight,quox,ivent*********************************
  04ED                	st_action:;Individual action
                      	; call bls
  04ED  DD7ED0        	 ld A,(IX-48)
  04F0  FE45          	 cp 45h
  04F2  CAC506        	 jp z,goast_action
  04F5  FE46          	 cp 46h
  04F7  CAC506        	 jp z,goast_action
  04FA  CB6F          	 bit 5,A
  04FC  C2F908        	 jp nz,knight_action
  04FF  FE83          	 cp 83h
  0501  CA170D        	 jp z,door_action
  0504  FE84          	 cp 84h
  0506  CA440B        	 jp z,box_action
  0509  FE85          	 cp 85h
  050B  CA1F0B        	 jp z,key_action
  050E  FE8F          	 cp 8fh
  0510  CA7C0D        	 jp z,gil_action
  0513  C3160F        	 jp mains_end
                      	
  0516  32F000        	 ld (0f0h),A
  0519  DD7ED0        	 ld A,(IX-48)
  051C  32F400        	 ld (0f4h),A
  051F  DD7E00        	 ld A,(IX-0)
  0522  32F500        	 ld (0f5h),A
  0525  DD7E30        	 ld A,(IX+48)
  0528  32F600        	 ld (0f6h),A
  052B  DD7E60        	 ld A,(IX+96)
  052E  32F700        	 ld (0f7h),A
  0531  C32E0F        	 jp retP
                      	
                      	
                      	
                      	
                      	
                      	
                      	
                      	
                      	
                      	
                      	
                      	
                      	
                      	
                      	
                      	
                      	
                      	
                      	
                      	;****************************************************************************
                      	;*********************************sraim or wiz*******************************
                      	
  0534                	sraim_or_wiz_action:;HL=obj_xy++
  0534  DDCBD066      	 bit 4,(IX-48);(NO.)
  0538  C2E005        	 jp nz,wiz_action
                      	
                      	 ;;;;
                      	 ;;;;
  053B  DD7E60        	 ld A,(IX+96);(st)
                      	 
                      	; ld (0f0h),A
                      	; jp retP
                      	
  053E  FE09          	 cp 9
  0540  280B          	 jr z,sraim_move1_B
  0542  FE05          	 cp 5
  0544  2823          	 jr z,sraim_move1
  0546  FE01          	 cp 1
  0548  283F          	 jr z,sraim_move3
  054A  C3AB05        	 jp sraim_move3_e;mains_end
                      	
                      	
  054D                	sraim_move1_B:
  054D  CD2B11        	 call wall_ck
  0550  2817          	 jr z,sraim_move1
  0552  23            	 inc HL
  0553  CBBE          	 res 7,(HL)
  0555  CBB6          	 res 6,(HL)
  0557  ED5F          	 ld A,R
                      	; rla
  0559  1F            	 rra
  055A  1F            	 rra
  055B  1F            	 rra
  055C  E6C0          	 and 0c0h
  055E  B6            	 or (HL)
  055F  77            	 ld (HL),A
  0560  2B            	 dec HL
  0561  3E50          	 ld A,80
  0563  DD7760        	 ld (IX+96),A
  0566  C3AB05        	 jp sraim_move3_e
  0569                	sraim_move1:
                      	;graph_delete
                      	
                      	; push HL		;>
                      	; call bls
                      	; ld E,(HL)
                      	; inc HL
                      	; ld D,(HL)
                      	; call grp_del
                      	; pop HL		;<
                      	
                      	
  0569  23            	 inc HL
  056A  7E            	 ld A,(HL)
  056B  E6C0          	 and 0c0h
  056D  280B          	 jr z,sraim_move1_u
  056F  FE80          	 cp 80h
  0571  380C          	 jr c,sraim_move1_r
  0573  280F          	 jr z,sraim_move1_d
  0575                	sraim_move1_l:
  0575  2B            	 dec HL
  0576  35            	 dec (HL)
  0577  35            	 dec (HL)
  0578  1831          	 jr sraim_move3_e
  057A                	sraim_move1_u:
  057A  35            	 dec (HL)
  057B  35            	 dec (HL)
  057C  2B            	 dec HL
  057D  182C          	 jr sraim_move3_e
  057F                	sraim_move1_r:
  057F  2B            	 dec HL
  0580  34            	 inc (HL)
  0581  34            	 inc (HL)
  0582  1827          	 jr sraim_move3_e
  0584                	sraim_move1_d:
  0584  34            	 inc (HL)
  0585  34            	 inc (HL)
  0586  2B            	 dec HL
                      	
  0587  1822          	 jr sraim_move3_e
                      	
                      	
  0589                	sraim_move3:
                      	
  0589  23            	 inc HL
  058A  7E            	 ld A,(HL)
  058B  E6C0          	 and 0c0h
  058D  280C          	 jr z,sraim_move3_u
  058F  FE80          	 cp 80h
  0591  380E          	 jr c,sraim_move3_r
  0593  2812          	 jr z,sraim_move3_d
  0595                	sraim_move3_l:
  0595  2B            	 dec HL
  0596  35            	 dec (HL)
  0597  35            	 dec (HL)
  0598  35            	 dec (HL)
  0599  1810          	 jr sraim_move3_e
  059B                	sraim_move3_u:
  059B  35            	 dec (HL)
  059C  35            	 dec (HL)
  059D  35            	 dec (HL)
  059E  2B            	 dec HL
  059F  180A          	 jr sraim_move3_e
  05A1                	sraim_move3_r:
  05A1  2B            	 dec HL
  05A2  34            	 inc (HL)
  05A3  34            	 inc (HL)
  05A4  34            	 inc (HL)
  05A5  1804          	 jr sraim_move3_e
  05A7                	sraim_move3_d:
  05A7  34            	 inc (HL)
  05A8  34            	 inc (HL)
  05A9  34            	 inc (HL)
  05AA  2B            	 dec HL
  05AB                	sraim_move3_e:
  05AB  116A1B        	 ld DE,graph_sraimd
  05AE                	Egraph:;(DE=)
  05AE  ED53B705      	 ld (Egraph_put+1),DE
  05B2  E5            	 push HL		;>
  05B3  5E            	 ld E,(HL)
  05B4  23            	 inc HL
  05B5  56            	 ld D,(HL)
  05B6                	Egraph_put:
  05B6  210000        	 ld HL,overwrite
  05B9  CD3114        	 call grp_set
  05BC  E1            	 pop HL			;<
  05BD  DD7ED0        	 ld A,(IX-48)
  05C0  E6F8          	 and 11111000b
  05C2  CAC605        	 jp z,sraim_cross_ck;
  05C5  C9            	 ret
                      	 
  05C6                	sraim_cross_ck:
  05C6  3A4D4E        	 ld A,(gil_st2)
  05C9  CB7F          	 bit 7,A		;(gil sworud MIRU)
  05CB  2808          	 jr z,s1
  05CD  CDF610        	 call cross_ck_a;s
  05D0  DC1811        	 call c,cha_kill;(suraim HP=0)
  05D3  1808          	 jr s2
  05D5                	s1:;(gil_st=0-x)
  05D5  CDF610        	 call cross_ck_a
  05D8  3003          	 jr nc,s2
  05DA  C3FA0E        	 jp gil_killing
                      	 
  05DD                	s2:
                      	; jp c,retP
  05DD  C3160F        	 jp mains_end
                      	
                      	
                      	;******************wiz actions**Main***********************
  05E0                	wiz_action:
  05E0  DD7E60        	 ld A,(IX+96)
  05E3  FE18          	 cp 24
  05E5  CA1106        	 jp z,wiz_ap
  05E8  FE0C          	 cp 12
  05EA  CA3306        	 jp z,wiz_sp
  05ED  FD7E00        	 ld A,(IY)
  05F0  B7            	 or A
  05F1  C23906        	 jp nz,wiz_dec
  05F4                	wiz_dec2:
  05F4  11821B        	 ld DE,magic
  05F7  CDAE05        	 call Egraph
                      	;********************cross chack wiz*******************
  05FA                	wizard_cross_ck;
  05FA  3A4D4E        	 ld A,(gil_st2)
  05FD  CB7F          	 bit 7,A		;(gil sworud MIRU)
  05FF  2808          	 jr z,ss1
  0601  CDF610        	 call cross_ck_a;s
  0604  DC1811        	 call c,cha_kill;(suraim HP=0)
  0607  1805          	 jr ss2
  0609                	ss1:;(gil_st=0-x)
  0609  CDF610        	 call cross_ck_a
  060C  3000          	 jr nc,wizard_end
                      	; jp gil_killing
  060E                	ss2:
  060E                	wizard_end:
                      	;********************wiz end***************************
  060E  C3160F        	 jp mains_end
                      	
  0611                	wiz_ap:
                      	
  0611                	gil_notaction_f:
  0611  3A494E        	 ld A,(gil_button)
  0614  DD3430        	 inc (IX+48)
  0617  DD3460        	 inc (IX+96)
  061A  E6C3          	 and 11000011b
  061C  CA0E06        	 jp z,wizard_end
  061F  DD3530        	 dec (IX+48)
  0622  DD3560        	 dec (IX+96)
                      	 
  0625  DD7E60        	 ld A,(IX+96)
  0628  3E0A          	 ld A,10
  062A  FD7700        	 ld (IY),A
  062D  CD4806        	 call wiz_locate
  0630  C3F405        	 jp wiz_dec2
  0633                	wiz_sp:
  0633  CDAC07        	 call spell_create
  0636  C3F405        	 jp wiz_dec2
  0639                	wiz_dec:
  0639  DD3460        	 inc (IX+96)
  063C  FD3500        	 dec (IY)
  063F  FD7E00        	 ld A,(IY)
  0642  C3F405        	 jp wiz_dec2
                      	
                      	;***********************wp>0 then noting*********************
  0645                	wizard_move_e_wpp;wp>0
  0645  C3160F        	 jp mains_end
                      	
                      	;***********************wiz_locate**************************
  0648                	wiz_locate:
                      	
  0648  E5            	 push HL	;>
  0649  21564E        	 ld HL,gil_xy
  064C  5E            	 ld E,(HL);x
  064D  23            	 inc HL
  064E  56            	 ld D,(HL);y
                      	
                      	; ld A,E
                      	; ld (0f0h),A
                      	; ld A,D
                      	; ld (0f1h),A
                      	 
  064F  E1            	 pop HL		;<
  0650  ED5F          	 ld A,R
  0652  4F            	 ld C,A
  0653  ED5F          	 ld A,R
  0655  E603          	 and 00000011b
  0657  B7            	 or A
  0658  CA7606        	 jp z,wiz_locate_left
  065B  FE02          	 cp 2
  065D  DA8D06        	 jp c,wiz_locate_down
  0660  CAA106        	 jp z,wiz_locate_right
  0663                	wiz_locate_up:
  0663  7A            	 ld A,D
  0664  E63F          	 and 00111111b
  0666  D60E          	 sub 14
  0668  38DE          	 jr c,wiz_locate
  066A  F680          	 or 10000000b
  066C  57            	 ld D,A
                      	 
  066D  7B            	 ld A,E
  066E  77            	 ld (HL),A
  066F  23            	 inc HL
  0670  7A            	 ld A,D
  0671  77            	 ld (HL),A
  0672  2B            	 dec HL
                      	 
  0673  C3B906        	 jp wiz_locate_end
  0676                	wiz_locate_left;
  0676  7B            	 ld A,E
  0677  D60E          	 sub 14
  0679  FE1E          	 cp 30
  067B  38CB          	 jr c,wiz_locate
  067D  5F            	 ld E,A
                      	 
  067E  7A            	 ld A,D
  067F  E63F          	 and 00111111b
  0681  F640          	 or 01000000b
  0683  57            	 ld D,A
                      	 
  0684  7B            	 ld A,E
  0685  77            	 ld (HL),A
  0686  23            	 inc HL
  0687  7A            	 ld A,D
  0688  77            	 ld (HL),A
  0689  2B            	 dec HL
                      	 
  068A  C3B906        	 jp wiz_locate_end
  068D                	wiz_locate_down;
  068D  7A            	 ld A,D
  068E  E63F          	 and 00111111b
  0690  7A            	 ld A,D
  0691  C60E          	 add A,14
  0693  FE30          	 cp 47+1
  0695  30B1          	 jr nc,wiz_locate
  0697  57            	 ld D,A
                      	 
  0698  7B            	 ld A,E
  0699  77            	 ld (HL),A
  069A  23            	 inc HL
  069B  7A            	 ld A,D
  069C  77            	 ld (HL),A
  069D  2B            	 dec HL
                      	 
  069E  C3B906        	 jp wiz_locate_end
  06A1                	wiz_locate_right;
  06A1  7B            	 ld A,E
  06A2  C60E          	 add A,14
  06A4  FE88          	 cp 135+1
  06A6  D24806        	 jp nc,wiz_locate
  06A9  5F            	 ld E,A
                      	 
  06AA  7A            	 ld A,D
  06AB  E63F          	 and 00111111b
  06AD  F6C0          	 or 11000000b
  06AF  57            	 ld D,A
                      	 
  06B0  7B            	 ld A,E
  06B1  77            	 ld (HL),A
  06B2  23            	 inc HL
  06B3  7A            	 ld A,D
  06B4  77            	 ld (HL),A
  06B5  2B            	 dec HL
                      	 
  06B6  C3B906        	 jp wiz_locate_end
                      	 
                      	;
  06B9                	wiz_locate_end:
  06B9  CDBE11        	 call wall_mod
  06BC  7E            	 ld A,(HL)
  06BD  91            	 sub C
  06BE  77            	 ld (HL),A 
  06BF  23            	 inc HL		;>
  06C0  7E            	 ld A,(HL)
  06C1  90            	 sub B
  06C2  77            	 ld (HL),A
  06C3  2B            	 dec HL		;<
  06C4  C9            	 ret
                      	 
                      	;******************************goast action***************************
  06C5                	goast_action:
  06C5  DD7E60        	 ld A,(IX+96)
  06C8  47            	 ld B,A
  06C9  DD7E00        	 ld A,(IX)
  06CC  B8            	 cp B
  06CD  3803          	 jr c,goast_action_b
  06CF  DD7760        	 ld (IX+96),A
  06D2                	goast_action_b:
  06D2  DD7E30        	 ld A,(IX+48)
  06D5  B7            	 or A
  06D6  CAE306        	 jp z,goast_action_a
  06D9  3D            	 dec A
  06DA  DD7730        	 ld (IX+48),A
  06DD  CA8007        	 jp z,goast_warp_ap
  06E0  C35007        	 jp goast_end
  06E3                	goast_action_a:
  06E3  CDBE11        	 call wall_mod
  06E6  79            	 ld A,C
  06E7  B7            	 or A
  06E8  C24D07        	 jp nz,goast_move
  06EB  78            	 ld A,B
  06EC  B7            	 or A
  06ED  C24D07        	 jp nz,goast_move 
                      	 
  06F0                	goast_action_0:
  06F0  CD5F0F        	 call rand4
  06F3  FE80          	 cp 80h
  06F5  3803          	 jr c,goast_action_1
  06F7  CDAC07        	 call spell_create
  06FA                	goast_action_1:
  06FA  CDAC0A        	 call xyload
  06FD  3A564E        	 ld A,(gil_xy)
  0700  93            	 sub E
  0701  3004          	 jr nc,goast_cp1
  0703  2812          	 jr z,goast_y
  0705  ED44          	 neg
  0707                	goast_cp1:
  0707  4F            	 ld C,A
  0708  3A574E        	 ld A,(gil_xy+1)
  070B  E63F          	 and 00111111b
  070D  92            	 sub D
  070E  3004          	 jr nc,goast_cp2
  0710  280C          	 jr z,goast_x
  0712  ED44          	 neg
  0714                	goast_cp2:
  0714  B9            	 cp C
  0715  3807          	 jr c,goast_x 
  0717                	goast_y:
  0717  CD9F0A        	 call y_ck
  071A  3819          	 jr c,goast_up
  071C  181F          	 jr goast_do
  071E                	goast_x:
  071E  CD970A        	 call x_ck
  0721  3802          	 jr c,goast_le
  0723  1808          	 jr goast_ri
  0725                	goast_le:
  0725  23            	 inc HL
  0726  CBFE          	 set 7,(HL)
  0728  CBF6          	 set 6,(HL)
  072A  2B            	 dec HL
  072B  1818          	 jr goast_wc
  072D                	goast_ri:
  072D  23            	 inc HL
  072E  CBBE          	 res 7,(HL)
  0730  CBF6          	 set 6,(HL)
  0732  2B            	 dec HL
  0733  1810          	 jr goast_wc
  0735                	goast_up:
  0735  23            	 inc HL
  0736  CBBE          	 res 7,(HL)
  0738  CBB6          	 res 6,(HL)
  073A  2B            	 dec HL
  073B  1808          	 jr goast_wc
  073D                	goast_do:
  073D  23            	 inc HL
  073E  CBFE          	 set 7,(HL)
  0740  CBB6          	 res 6,(HL)
  0742  2B            	 dec HL
  0743  1800          	 jr goast_wc
  0745                	goast_wc:
  0745  CD2B11        	 call wall_ck
  0748  2803          	 jr z,goast_move
  074A  C37807        	 jp goast_warp
  074D                	goast_move:
  074D  CDAE09        	 call empty_move
  0750                	goast_end:
                      	 
                      	;*****************************cross ck goast*****************************
  0750  3A4D4E        	 ld A,(gil_st2)
  0753  B7            	 or A
  0754  2811          	 jr z,sssss1
  0756  CB7F          	 bit 7,A
  0758  2808          	 jr z,sssss0
  075A  CDF610        	 call cross_ck_a;s
  075D  DCEA0A        	 call c,HP_decB;
  0760  280D          	 jr z,sssss2
  0762                	sssss0:
  0762  CDF610        	 call cross_ck_a;
  0765  1808          	 jr sssss2
  0767                	sssss1:;(gil_st=0-x)
  0767  CDF610        	 call cross_ck_a
  076A  3003          	 jr nc,sssss2
  076C  C3FA0E        	 jp gil_killing
  076F                	sssss2:
                      	 
  076F  119A1B        	 ld DE,graph_goast
  0772  CDAE05        	 call Egraph
  0775  C3160F        	 jp mains_end
                      	 
                      	;****************************goast sub*********************************** 
  0778                	goast_warp:
  0778  3E12          	 ld A,18
  077A  DD7730        	 ld (IX+48),A
  077D  C35007        	 jp goast_end
                      	 
  0780                	goast_warp_ap:
  0780  23            	 inc HL
  0781  7E            	 ld A,(HL)
  0782  2B            	 dec HL
  0783  E6C0          	 and 11000000b
  0785  280C          	 jr z,goast_warp_ap_u
  0787  FE80          	 cp 80h
  0789  3810          	 jr c,goast_warp_ap_r
  078B  2814          	 jr z,goast_warp_ap_d
  078D                	goast_warp_ap_l:
  078D  7E            	 ld A,(HL)
  078E  D607          	 sub 7
  0790  77            	 ld (HL),A
  0791  1816          	 jr goast_warp_ap_e
  0793                	goast_warp_ap_u:
  0793  23            	 inc HL
  0794  7E            	 ld A,(HL)
  0795  D607          	 sub 7
  0797  77            	 ld (HL),A
  0798  2B            	 dec HL
  0799  180E          	 jr goast_warp_ap_e
  079B                	goast_warp_ap_r:
  079B  7E            	 ld A,(HL)
  079C  C607          	 add A,7
  079E  77            	 ld (HL),A
  079F  1808          	 jr goast_warp_ap_e
  07A1                	goast_warp_ap_d:
  07A1  23            	 inc HL
  07A2  7E            	 ld A,(HL)
  07A3  C607          	 add A,7
  07A5  77            	 ld (HL),A
  07A6  2B            	 dec HL
  07A7  1800          	 jr goast_warp_ap_e
  07A9                	goast_warp_ap_e:
  07A9  C35007        	 jp goast_end
                      	 
                      	;******************************spell create*************************** 
                      	;******************************spell create*************************** 
  07AC                	spell_create:
  07AC  E5            	 push HL
  07AD  AF            	 xor A
  07AE  21C94C        	 ld HL,obj
  07B1  AF            	 xor A
  07B2  010000        	 ld BC,0
  07B5  EDB1          	 cpir		;BC<0
  07B7  03            	 inc BC
                      	 
                      	 
                      	; ld (HL),0	;chr clr
  07B8  2B            	 dec HL		;spell address
  07B9  DD7ED0        	 ld A,(IX-48)
  07BC  FE13          	 cp 13h
  07BE  2808          	 jr z,spellB
  07C0  FE46          	 cp 46h
  07C2  2804          	 jr z,spellB
  07C4  360A          	 ld (HL),0Ah
  07C6  1802          	 jr spellsetok
  07C8                	spellB:
  07C8  360B          	 ld (HL),0Bh
  07CA                	spellsetok:
                      			;hp
  07CA  113000        	 ld DE,48
  07CD  19            	 add HL,DE
  07CE  3601          	 ld (HL),1
                      	 		;st2
  07D0  11F000        	 ld DE,48*5
  07D3  19            	 add HL,DE
  07D4  3600          	 ld (HL),0
                      	 
  07D6  E1            	 pop HL
                      	 
                      	; ld (0f4h),HL
                      	
  07D7  7E            	 ld A,(HL)
  07D8  5F            	 ld E,A
  07D9  23            	 inc HL
  07DA  7E            	 ld A,(HL)
  07DB  57            	 ld D,A
  07DC  2B            	 dec HL
                      	 
  07DD  E5            	 push HL
  07DE  210000        	 ld HL,0
  07E1  B7            	 or A
  07E2  ED42          	 sbc HL,BC;xy_countor
  07E4  B7            	 or A
  07E5  ED42          	 sbc HL,BC
  07E7  01894D        	 ld BC,obj_xy
  07EA  09            	 add HL,BC
                      	 
                      	 
  07EB  7B            	 ld A,E
  07EC  77            	 ld (HL),A
  07ED  23            	 inc HL
  07EE  7A            	 ld A,D
  07EF  77            	 ld (HL),A
                      	 
                      	; ld (0f0h),HL
                      	; ld (0f2h),BC
                      	 
                      	 
  07F0  E1            	 pop HL
  07F1  C9            	 ret
                      	;******************************spell action****************************
  07F2                	spells_action:
  07F2  FD7E00        	 ld A,(IY)
  07F5  FE01          	 cp 1
  07F7  CA3B08        	 jp z,spells_action1
  07FA  FE02          	 cp 2
  07FC  CA6408        	 jp z,spells_action2
                      	
  07FF  CDBE11        	 call wall_mod
  0802  78            	 ld A,B
  0803  B7            	 or A
  0804  C2E608        	 jp nz,spells_action_delete
  0807  79            	 ld A,C
  0808  B7            	 or A
  0809  C2E608        	 jp nz,spells_action_delete
                      	 
  080C  CD2B11        	 call wall_ck
  080F  C29108        	 jp nz,spells_action_dol
  0812                	spells_action_wiz:
  0812  23            	 inc HL
  0813  7E            	 ld A,(HL)
  0814  2B            	 dec HL
  0815  E6C0          	 and 11000000b
  0817  280A          	 jr z,spells_action_u
  0819  FE80          	 cp 80h
  081B  380C          	 jr c,spells_action_r
  081D  280E          	 jr z,spells_action_d
  081F                	spells_action_l:
  081F  35            	 dec (HL)
  0820  35            	 dec (HL)
  0821  1810          	 jr spells_action_urdl
  0823                	spells_action_u:
  0823  23            	 inc HL
  0824  35            	 dec (HL)
  0825  35            	 dec (HL)
  0826  2B            	 dec HL
  0827  180A          	 jr spells_action_urdl
  0829                	spells_action_r:
  0829  34            	 inc (HL)
  082A  34            	 inc (HL)
  082B  1806          	 jr spells_action_urdl
  082D                	spells_action_d:
  082D  23            	 inc HL
  082E  34            	 inc (HL)
  082F  34            	 inc (HL)
  0830  2B            	 dec HL
  0831  1800          	 jr spells_action_urdl
  0833                	spells_action_urdl:
  0833  3E01          	 ld A,1
  0835  FD7700        	 ld (IY),A
  0838  C39E08        	 jp spells_actionend
                      	 
                      	 
                      	 
  083B                	spells_action1:
  083B  23            	 inc HL
  083C  7E            	 ld A,(HL)
  083D  2B            	 dec HL
  083E  E6C0          	 and 11000000b
  0840  280A          	 jr z,spells_action1_u
  0842  FE80          	 cp 80h
  0844  380C          	 jr c,spells_action1_r
  0846  280E          	 jr z,spells_action1_d
  0848                	spells_action1_l:
  0848  35            	 dec (HL)
  0849  35            	 dec (HL)
  084A  1810          	 jr spells_action1_urdl
  084C                	spells_action1_u:
  084C  23            	 inc HL
  084D  35            	 dec (HL)
  084E  35            	 dec (HL)
  084F  2B            	 dec HL
  0850  180A          	 jr spells_action1_urdl
  0852                	spells_action1_r:
  0852  34            	 inc (HL)
  0853  34            	 inc (HL)
  0854  1806          	 jr spells_action1_urdl
  0856                	spells_action1_d:
  0856  23            	 inc HL
  0857  34            	 inc (HL)
  0858  34            	 inc (HL)
  0859  2B            	 dec HL
  085A  1800          	 jr spells_action1_urdl
  085C                	spells_action1_urdl:
  085C  3E02          	 ld A,2
  085E  FD7700        	 ld (IY),A
  0861  C39E08        	 jp spells_actionend
                      	 
                      	 
                      	
  0864                	spells_action2:
  0864  23            	 inc HL
  0865  7E            	 ld A,(HL)
  0866  2B            	 dec HL
  0867  E6C0          	 and 11000000b
  0869  280B          	 jr z,spells_action2_u
  086B  FE80          	 cp 80h
  086D  380E          	 jr c,spells_action2_r
  086F  2811          	 jr z,spells_action2_d
  0871                	spells_action2_l:
  0871  35            	 dec (HL)
  0872  35            	 dec (HL)
  0873  35            	 dec (HL)
  0874  1813          	 jr spells_action2_urdl
  0876                	spells_action2_u:
  0876  23            	 inc HL
  0877  35            	 dec (HL)
  0878  35            	 dec (HL)
  0879  35            	 dec (HL)
  087A  2B            	 dec HL
  087B  180C          	 jr spells_action2_urdl
  087D                	spells_action2_r:
  087D  34            	 inc (HL)
  087E  34            	 inc (HL)
  087F  34            	 inc (HL)
  0880  1807          	 jr spells_action2_urdl
  0882                	spells_action2_d:
  0882  23            	 inc HL
  0883  34            	 inc (HL)
  0884  34            	 inc (HL)
  0885  34            	 inc (HL)
  0886  2B            	 dec HL
  0887  1800          	 jr spells_action2_urdl
  0889                	spells_action2_urdl:
  0889  3E00          	 ld A,0
  088B  FD7700        	 ld (IY),A
  088E  C39E08        	 jp spells_actionend
  0891                	spells_action_dol:
  0891  DD7ED0        	 ld A,(IX-48)
  0894  FE0B          	 cp 0bh
  0896  E5            	 push HL
  0897  CCED11        	 call z,matk_action
  089A  E1            	 pop HL
  089B  C3E608        	 jp spells_action_delete
                      	 
  089E                	spells_actionend:
  089E                	spells_action_cross
                      	 
                      	
                      	;********************cross chack spell*******************
  089E                	spell_cross_ck;
  089E  CDF610        	 call cross_ck_a;s
  08A1  3033          	 jr nc,spell_cross_ck_end
  08A3                	spell_cross_ck_1:
                      	
  08A3  3A574E        	 ld A,(gil_xy+1)
  08A6  E6C0          	 and 11000000b
  08A8  17            	 rla
  08A9  17            	 rla
  08AA  17            	 rla
  08AB  47            	 ld B,A
  08AC  23            	 inc HL
  08AD  7E            	 ld A,(HL)
  08AE  2B            	 dec HL
  08AF  E6C0          	 and 11000000b
  08B1  17            	 rla
  08B2  17            	 rla
  08B3  17            	 rla
  08B4  3C            	 inc A
  08B5  3C            	 inc A
  08B6  E603          	 and 00000011b
  08B8  4F            	 ld C,A
  08B9  C5            	 push BC
                      	
  08BA  3A4D4E        	 ld A,(gil_st2)
  08BD  CB7F          	 bit 7,A		;(gil sworud MIRU)
  08BF  2009          	 jr nz,spell_cross_ck_s
  08C1                	spell_cross_ck_n:
  08C1  C1            	 pop BC
  08C2  79            	 ld A,C
  08C3  A8            	 xor B				;urdl = turdl
  08C4  CADF08        	 jp z,spells_action_delete_g
  08C7  C3FA0E        	 jp gil_killing
  08CA                	spell_cross_ck_s:
  08CA  C1            	 pop BC
  08CB  79            	 ld A,C
  08CC  3C            	 inc A
  08CD  E603          	 and 00000011b
  08CF  A8            	 xor B				;urdl = turdl
  08D0  CADF08        	 jp z,spells_action_delete_g
  08D3  C3FA0E        	 jp gil_killing
  08D6                	spell_cross_ck_end:
  08D6  11B21B        	 ld DE,graph_spell
  08D9  CDAE05        	 call Egraph;call Egraph
  08DC  C3160F        	 jp mains_end
                      	 
  08DF                	spells_action_delete_g
  08DF  3A4F1C        	 ld A,(dammy+1)
  08E2  3C            	 inc A
  08E3  324F1C        	 ld (dammy+1),A
  08E6                	spells_action_delete:
  08E6  AF            	 xor A
  08E7  DD77D0        	 ld (IX-48),A
  08EA  DD7700        	 ld (IX),A
  08ED  FD7700        	 ld (IY),A
  08F0  3600          	 ld (HL),0
  08F2  23            	 inc HL
  08F3  3600          	 ld (HL),0
  08F5  2B            	 dec HL
  08F6  C3160F        	 jp mains_end
                      	 
                      	 
                      	
                      	 
                      	;***************************************************************
                      	;**************************knight action************************
  08F9                	knight_action:;HL=obj_xy++
                      	;******************ricaba*******************
  08F9  DD7E60        	 ld A,(IX+96)
  08FC  47            	 ld B,A
  08FD  DD7E00        	 ld A,(IX)
  0900  B8            	 cp B
  0901  3803          	 jr c,knight_actiona
  0903  DD7760        	 ld (IX+96),A
  0906                	knight_actiona:
  0906  DD7ED0        	 ld A,(IX-48)
  0909  FE23          	 cp 23h
  090B  2807          	 jr z,knight_action1
  090D  DD7E30        	 ld A,(IX+48)
  0910  B7            	 or A
  0911  CAC709        	 jp z,knight_action_end
                      	
  0914                	knight_action1:
  0914  CDBE11        	 call wall_mod
  0917  78            	 ld A,B
  0918  B7            	 or A
  0919  C2AA09        	 jp nz,knight_move
  091C  79            	 ld A,C
  091D  B7            	 or A
  091E  C2AA09        	 jp nz,knight_move
                      	 
  0921  CD880A        	 call xy_ck
  0924  CA6309        	 jp z,knight_xy
  0927  CD970A        	 call x_ck
  092A  CA7209        	 jp z,knight_x
  092D  CD9F0A        	 call y_ck
  0930  CA8E09        	 jp z,knight_y
  0933                	kight_accel:
                      	
                      	 
  0933  CDB40A        	 call right_turn
  0936  CD2B11        	 call wall_ck
                      	; call z,48381
  0939  CAAA09        	 jp z,knight_move
  093C  CDC20A        	 call left_turn
                      	 
  093F  CD2B11        	 call wall_ck
  0942  C24809        	 jp nz,rndurdl
  0945  C3AA09        	 jp knight_move
  0948                	kight_accel_2:
  0948                	rndurdl:
  0948  CDB40A        	 call right_turn
  094B  CD2B11        	 call wall_ck
  094E  CAAA09        	 jp z,knight_move
                      	
  0951  CDB40A        	 call right_turn 
  0954  CDB40A        	 call right_turn
  0957  CD2B11        	 call wall_ck
  095A  CAAA09        	 jp z,knight_move
                      	 
  095D  CDC20A        	 call left_turn 
  0960  C3AA09        	 jp knight_move
                      	
                      	
  0963                	knight_xy:
  0963  23            	 inc HL
  0964  7E            	 ld A,(HL)
  0965  F6C0          	 or 11000000b
  0967  77            	 ld (HL),A
  0968  2B            	 dec HL
  0969  CD2B11        	 call wall_ck
  096C  CAAA09        	 jp z,knight_move
  096F  C34809        	 jp kight_accel_2 
                      	 
  0972                	knight_x:
  0972  CD9F0A        	 call y_ck
  0975  3808          	 jr c,knight_x_1
  0977  23            	 inc HL
  0978  CBFE          	 set 7,(HL)
  097A  CBB6          	 res 6,(HL)
  097C  2B            	 dec HL
  097D  1806          	 jr knight_x_2
  097F                	knight_x_1:
  097F  23            	 inc HL
  0980  CBBE          	 res 7,(HL)
  0982  CBB6          	 res 6,(HL)
  0984  2B            	 dec HL
  0985                	knight_x_2:
  0985  CD2B11        	 call wall_ck
  0988  CAAA09        	 jp z,knight_move
  098B  C34809        	 jp kight_accel_2 
                      	 
  098E                	knight_y:
  098E  CD970A        	 call x_ck
  0991  3808          	 jr c,knight_y_1
  0993  23            	 inc HL
  0994  CBBE          	 res 7,(HL)
  0996  CBF6          	 set 6,(HL)
  0998  2B            	 dec HL
  0999  1806          	 jr knight_y_2
  099B                	knight_y_1:
  099B  23            	 inc HL
  099C  CBFE          	 set 7,(HL)
  099E  CBF6          	 set 6,(HL)
  09A0  2B            	 dec HL
  09A1                	knight_y_2:
  09A1  CD2B11        	 call wall_ck
  09A4  CAAA09        	 jp z,knight_move
  09A7  C34809        	 jp kight_accel_2 
                      	 
                      	
                      	
                      	
                      	
                      	
                      	
  09AA                	knight_move:;a=0~3
  09AA  11C709        	 ld DE, knight_action_end
  09AD  D5            	 push DE
  09AE                	empty_move:
  09AE  23            	 inc HL
  09AF  7E            	 ld A,(HL)
  09B0  2B            	 dec HL
  09B1  E6C0          	 and 11000000b
  09B3  2808          	 jr z,knight_action_up
  09B5  FE80          	 cp 80h
  09B7  3808          	 jr c,knight_action_ri
  09B9  2808          	 jr z,knight_action_do
  09BB                	knight_action_le:
  09BB  35            	 dec (HL)
  09BC  C9            	 ret
  09BD                	knight_action_up:
  09BD  23            	 inc HL
  09BE  35            	 dec (HL)
  09BF  2B            	 dec HL
  09C0  C9            	 ret
  09C1                	knight_action_ri:
  09C1  34            	 inc (HL)
  09C2  C9            	 ret
  09C3                	knight_action_do:
  09C3  23            	 inc HL
  09C4  34            	 inc (HL)
  09C5  2B            	 dec HL
  09C6  C9            	 ret
                      	
                      	 
                      	 
                      	
                      	
  09C7                	knight_action_end:
  09C7  FD7E30        	 ld A,(IY+48)
  09CA  EE01          	 xor 1
  09CC  FD7730        	 ld (IY+48),A
  09CF  B7            	 or A
  09D0  2805          	 jr z,knight_action_end2
                      	 
  09D2  11CA1B        	 ld DE,graph_n_knightu
  09D5  1803          	 jr knight_action_end3
  09D7                	knight_action_end2:
  09D7  11E21B        	 ld DE,graph_n_knightu+24
  09DA                	knight_action_end3:
  09DA  CDAE05        	 call Egraph
                      	 
                      	 
                      	;********************cross chack kight*******************
                      	; call kwait
                      	
  09DD  3A4D4E        	 ld A,(gil_st2)
  09E0  B7            	 or A
  09E1  2814          	 jr z,ssss1
  09E3  CB7F          	 bit 7,A	;(gil sworud MIRU) 
  09E5  2808          	 jr z,ssss0
  09E7  CDF610        	 call cross_ck_a;s
  09EA  DCCC0A        	 call c,HP_dec;(suraim HP=0)
  09ED  1810          	 jr ssss2
  09EF                	ssss0:
  09EF  CDF610        	 call cross_ck_a;s
  09F2  DCDF0A        	 call c,HP_dec_swdbc
  09F5  1808          	 jr ssss2
  09F7                	ssss1:;(gil_st=0-x)
  09F7  CDF610        	 call cross_ck_a
  09FA  3003          	 jr nc,ssss2
  09FC  C3FA0E        	 jp gil_killing
  09FF                	ssss2:
  09FF  DD7E30        	 ld A,(IX+48)
  0A02  EEFF          	 xor 0ffh
  0A04  DD7730        	 ld (IX+48),A
  0A07  C3160F        	 jp mains_end
                      	 
                      	
                      	
  0A0A                	knight_front_ck:
  0A0A  CDAC0A        	 call xyload
  0A0D  F5            	 push AF
  0A0E  327B0A        	 ld (knight_front_ck_end+3),A
  0A11  7B            	 ld A,E
  0A12  32790A        	 ld (knight_front_ck_end+1),A 
  0A15  F1            	 pop AF
  0A16  E6C0          	 and 11000000b
  0A18  2810          	 jr z,knight_front_ck_u
  0A1A  FE02          	 cp 2
  0A1C  3814          	 jr c,knight_front_ck_r
  0A1E  281C          	 jr z,knight_front_ck_d
  0A20                	knight_front_ck_l:
  0A20  7B            	 ld A,E
  0A21  D607          	 sub 7
  0A23  FE1E          	 cp 30
  0A25  DA850A        	 jp c,knight_front_outerwall
  0A28  181C          	 jr knight_front_ck_e
  0A2A                	knight_front_ck_u:
  0A2A  7A            	 ld A,D
  0A2B  D607          	 sub 7
  0A2D  DA850A        	 jp c,knight_front_outerwall
  0A30  1814          	 jr knight_front_ck_e
  0A32                	knight_front_ck_r:
  0A32  7B            	 ld A,E
  0A33  C607          	 add A,7
  0A35  FE88          	 cp 136
  0A37  D2850A        	 jp nc,knight_front_outerwall
  0A3A  180A          	 jr knight_front_ck_e
  0A3C                	knight_front_ck_d:
  0A3C  7A            	 ld A,D
  0A3D  C607          	 add A,7
  0A3F  FE2B          	 cp 43
  0A41  D2850A        	 jp nc,knight_front_outerwall
  0A44  1800          	 jr knight_front_ck_e
  0A46                	knight_front_ck_e:
  0A46  CDB40A        	 call right_turn
  0A49  CD2B11        	 call wall_ck
  0A4C  CA780A        	 jp z,knight_front_ck_end
                      	
  0A4F  CDC20A        	 call left_turn
  0A52  CD2B11        	 call wall_ck
  0A55  CA780A        	 jp z,knight_front_ck_end
                      	
  0A58  CDC20A        	 call left_turn
  0A5B  CD2B11        	 call wall_ck
  0A5E  CA780A        	 jp z,knight_front_ck_end
                      	 
  0A61  CDB40A        	 call right_turn
  0A64  CDB40A        	 call right_turn
                      	 
  0A67  23            	 inc HL
  0A68  7E            	 ld A,(HL)
  0A69  E6C0          	 and 11000000b
  0A6B  47            	 ld B,A
  0A6C  3A7B0A        	 ld A,(knight_front_ck_end+3)
  0A6F  E63F          	 and 00111111b
  0A71  B0            	 or B
  0A72  327B0A        	 ld (knight_front_ck_end+3),A
  0A75  2B            	 dec HL
                      	 
  0A76  18CE          	 jr knight_front_ck_e
                      	 
  0A78                	knight_front_ck_end:
  0A78  1E00          	 ld E,overwrite
  0A7A  1600          	 ld D,overwrite
  0A7C  7B            	 ld A,E
  0A7D  77            	 ld (HL),A
  0A7E  23            	 inc HL
  0A7F  7A            	 ld A,D
  0A80  77            	 ld (HL),A
  0A81  2B            	 dec HL
  0A82  C3AA09        	 jp knight_move
                      	
  0A85                	knight_front_outerwall:
  0A85  C34809        	 jp kight_accel_2
                      	
                      	
                      	
                      	;***************************ckeck sub****************************
                      	
  0A88                	xy_ck:;chr cp
  0A88  CDAC0A        	 call xyload
  0A8B  E5            	 push HL		;>
  0A8C  2A564E        	 ld HL,(gil_xy)
  0A8F  7C            	 ld A,H
  0A90  E63F          	 and 00111111b
  0A92  67            	 ld H,A
  0A93  ED52          	 sbc HL,DE
  0A95  E1            	 pop HL			;<
  0A96  C9            	 ret
  0A97                	x_ck:
  0A97  CDAC0A        	 call xyload
  0A9A  3A564E        	 ld A,(gil_xy)
  0A9D  93            	 sub E
  0A9E  C9            	 ret
  0A9F                	y_ck:
  0A9F  CDAC0A        	 call xyload
  0AA2  7A            	 ld A,D
  0AA3  E63F          	 and 00111111b
  0AA5  3A574E        	 ld A,(gil_xy+1)
  0AA8  E63F          	 and 00111111b
  0AAA  92            	 sub D
  0AAB  C9            	 ret
                      	
                      	
  0AAC                	xyload:;A=urdl D=none
  0AAC  5E            	 ld E,(HL)
  0AAD  23            	 inc HL
  0AAE  7E            	 ld A,(HL)
  0AAF  E63F          	 and 00111111b
  0AB1  57            	 ld D,A
  0AB2  2B            	 dec HL
  0AB3  C9            	 ret
                      	
  0AB4                	right_turn:
  0AB4  23            	 inc HL
  0AB5  7E            	 ld A,(HL)
  0AB6  E6C0          	 and 11000000b
  0AB8  C640          	 add A,40H
  0ABA  47            	 ld B,A
  0ABB  7E            	 ld A,(HL)
  0ABC  E63F          	 and 00111111b
  0ABE  B0            	 or B
  0ABF  77            	 ld (HL),A
  0AC0  2B            	 dec HL
  0AC1  C9            	 ret
                      	 
  0AC2                	left_turn:
  0AC2  CDB40A        	 call right_turn
  0AC5  CDB40A        	 call right_turn
  0AC8  CDB40A        	 call right_turn
  0ACB  C9            	 ret
                      	
                      	;*************************hp dec*****************************
  0ACC                	HP_dec:
  0ACC  3A514E        	 ld A,(gil_sword)
  0ACF  FE02          	 cp 2
  0AD1  DD7E00        	 ld A,(IX)
  0AD4  2003          	 jr nz,HP_dec1
  0AD6  3D            	 dec A
  0AD7  2801          	 jr z,HP_dec2
  0AD9                	HP_dec1:
  0AD9  3D            	 dec A
  0ADA                	HP_dec2:
  0ADA  DD7700        	 ld (IX),A
  0ADD  281F          	 jr z,HP_rec
  0ADF                	HP_dec_swdbc:
  0ADF                	gil_HP_dec:
  0ADF  3A4A4E        	 ld A,(gil_hp)
  0AE2  3D            	 dec A
  0AE3  324A4E        	 ld (gil_hp),A
  0AE6  CAFA0E        	 jp z,gil_killing
  0AE9  C9            	 ret
                      	 
  0AEA                	HP_decB:
  0AEA  3A514E        	 ld A,(gil_sword)
  0AED  FE02          	 cp 2
  0AEF  DD7E00        	 ld A,(IX)
  0AF2  2003          	 jr nz,HP_decb1
  0AF4  3D            	 dec A
  0AF5  2801          	 jr z,HP_decb2
  0AF7                	HP_decb1:
  0AF7  3D            	 dec A
  0AF8                	HP_decb2:
  0AF8  DD7700        	 ld (IX),A
  0AFB  2814          	 jr z,HP_rec2
  0AFD  C9            	 ret
                      	
                      	 
  0AFE                	HP_rec:
  0AFE  DD7E60        	 ld A,(IX+96)
  0B01  47            	 ld B,A
  0B02  AF            	 xor A
  0B03  DD7760        	 ld (IX+96),A
  0B06  3A4A4E        	 ld A,(gil_HP)
  0B09  80            	 add A,B
  0B0A  3002          	 jr nc,H_recP2
  0B0C  3EFF          	 ld A,255
  0B0E                	H_recP2:
  0B0E  324A4E        	 ld (gil_HP),A
  0B11                	HP_rec2:
  0B11  AF            	 xor A
  0B12  DD7700        	 ld (IX),A
  0B15  DD7730        	 ld (IX+48),A
  0B18  DD7760        	 ld (IX+96),A
  0B1B  FD7700        	 ld (IY),A
  0B1E  C9            	 ret
                      	
                      	;*************************key actions************************
  0B1F                	key_action:
  0B1F  3A664E        	 ld A,(key)
  0B22  B7            	 or A
  0B23  280A          	 jr z,key_action_1
  0B25  CD3703        	 call itemprint
  0B28  AF            	 xor A
  0B29  DD7700        	 ld (IX),A
  0B2C  C3160F        	 jp mains_end
  0B2F                	key_action_1:
  0B2F  E5            	 push HL
  0B30  CDF610        	 call cross_ck_a
  0B33  E1            	 pop HL
  0B34  3005          	 jr nc,key_action_end
  0B36  3E01          	 ld A,1
  0B38  32664E        	 ld (key),A
  0B3B                	key_action_end:
  0B3B  11FA1B        	 ld DE,graph_key
  0B3E  CDAE05        	 call Egraph
  0B41  C3160F        	 jp mains_end
                      	
                      	;**************************box action*************************
  0B44                	box_action:
                      	
  0B44  DD7E30        	 ld A,(IX+48)
  0B47  B7            	 or A
  0B48  3AC24C        	 ld A,(floor)
  0B4B  2012          	 jr nz,box_actiont
                      	 
  0B4D  3D            	 dec A
  0B4E  D9            	 exx
  0B4F  87            	 add A,A
  0B50  5F            	 ld E,A
  0B51  1600          	 ld D,0
  0B53  216A0B        	 ld HL,box_action_table_farse
  0B56                	box_action2:
  0B56  19            	 add HL,DE
  0B57  5E            	 ld E,(HL)
  0B58  23            	 inc HL
  0B59  56            	 ld D,(HL)
  0B5A  EB            	 ex DE,HL
                      	 
  0B5B  22F000        	 ld (0f0h),HL
                      	; ret
                      	 
  0B5E  E9            	 jp (HL)
  0B5F                	box_actiont:
  0B5F  3D            	 dec A
  0B60  D9            	 exx
  0B61  87            	 add A,A
  0B62  5F            	 ld E,A
  0B63  1600          	 ld D,0
  0B65  21E00B        	 ld HL,box_action_table_true
  0B68  18EC          	 jr box_action2
  0B6A                	box_action_table_farse:
  0B6A  560C850CAF0CDA	 dw floor1,floor2,floor3,floor4,floor5,floor6,floor7,floor8,floor9,floor10
  0B7E  0E0D0E0D0E0D0E	 dw floor11,floor12,floor13,floor14,floor15,floor16,floor17,floor18,floor19,floor20
  0B92  0E0D0E0D0E0D0E	 dw floor21,floor22,floor23,floor24,floor25,floor26,floor27,floor28,floor29,floor30
  0BA6  0E0D0E0D0E0D0E	 dw floor31,floor32,floor33,floor34,floor35,floor36,floor37,floor38,floor39,floor40
  0BBA  0E0D0E0D0E0D0E	 dw floor41,floor42,floor43,floor44,floor45,floor46,floor47,floor48,floor49,floor50
  0BCE  0E0D0E0D0E0D0E	 dw floor51,floor52,floor53,floor54,floor55,floor56,floor57,floor58,floor59
  0BE0                	box_action_table_true:
  0BE0  650C940CBF0CDE	 dw floor1t,floor2t,floor3t,floor4t,floor5t,floor6t,floor7t,floor8t,floor9t,floor10t
  0BF4  0E0D0E0D0E0D0E	 dw floor11t,floor12t,floor13t,floor14t,floor15t,floor16t,floor17t,floor18t,floor19t,floor20t
  0C08  0E0D0E0D0E0D0E	 dw floor21t,floor22t,floor23t,floor24t,floor25t,floor26t,floor27t,floor28t,floor29t,floor30t
  0C1C  0E0D0E0D0E0D0E	 dw floor31t,floor32t,floor33t,floor34t,floor35t,floor36t,floor37t,floor38t,floor39t,floor40t
  0C30  0E0D0E0D0E0D0E	 dw floor41t,floor42t,floor43t,floor44t,floor45t,floor46t,floor47t,floor48t,floor49t,floor50t
  0C44  0E0D0E0D0E0D0E	 dw floor51t,floor52t,floor53t,floor54t,floor55t,floor56t,floor57t,floor58t,floor59t
                      	
                      	
                      	;***********************floor1******************************
  0C56                	floor1:
  0C56  D9            	 exx
                      	 
  0C57  3A4E1C        	 ld A,(dammy)
  0C5A  FE03          	 cp 3
  0C5C  DA160F        	 jp c,mains_end
  0C5F  DD7730        	 ld (IX+48),A
  0C62  C3160F        	 jp mains_end
  0C65                	floor1t
  0C65  D9            	 exx
  0C66  3A5A4E        	 ld A,(matk)
  0C69  B7            	 or A
  0C6A  C2160F        	 jp nz,mains_end
  0C6D  E5            	 push HL
  0C6E  CDF610        	 call cross_ck_a
  0C71  E1            	 pop HL
  0C72  D20E0D        	 jp nc,box_action_end
  0C75  3E01          	 ld A,1
  0C77  325A4E        	 ld (matk),A
  0C7A  3E02          	 ld A,2
  0C7C  324F4E        	 ld (gil_matk_count),A
  0C7F  CD3703        	 call itemprint
  0C82  C3160F        	 jp mains_end
                      	 
                      	 
                      	
                      	;***********************floor2******************************
  0C85                	floor2:
  0C85  D9            	 exx
                      	 
  0C86  3A4E1C        	 ld A,(dammy)
  0C89  FE02          	 cp 2
  0C8B  DA160F        	 jp c,mains_end
  0C8E  DD7730        	 ld (IX+48),A
  0C91  C3160F        	 jp mains_end
  0C94                	floor2t
  0C94  D9            	 exx
  0C95  3A5B4E        	 ld A,(boot)
  0C98  B7            	 or A
  0C99  C2160F        	 jp nz,mains_end
  0C9C  E5            	 push HL
  0C9D  CDF610        	 call cross_ck_a
  0CA0  E1            	 pop HL
  0CA1  D20E0D        	 jp nc,box_action_end
  0CA4  3E01          	 ld A,1
  0CA6  325B4E        	 ld (boot),A
  0CA9  CD3703        	 call itemprint
  0CAC  C3160F        	 jp mains_end
                      	
                      	
                      	;***********************floor3******************************
  0CAF                	floor3:
  0CAF  D9            	 exx
  0CB0  3AF94C        	 ld A,(obj_hp)
  0CB3  B7            	 or A
  0CB4  C2160F        	 jp nz,mains_end
  0CB7  3E01          	 ld A,1
  0CB9  DD7730        	 ld (IX+48),A
  0CBC  C3160F        	 jp mains_end
  0CBF                	floor3t:
  0CBF  D9            	 exx
  0CC0  3A654E        	 ld A,(posion)
  0CC3  B7            	 or A
  0CC4  C2160F        	 jp nz,mains_end
  0CC7  E5            	 push HL
  0CC8  CDF610        	 call cross_ck_a
  0CCB  E1            	 pop HL
  0CCC  D20E0D        	 jp nc,box_action_end
  0CCF  3E01          	 ld A,1
  0CD1  32654E        	 ld (posion),A
  0CD4  CD3703        	 call itemprint
  0CD7  C3160F        	 jp mains_end
                      	 
                      	;***********************floor4*****************************
  0CDA                	floor4:
  0CDA  D9            	 exx
  0CDB  C3160F        	 jp mains_end
  0CDE                	floor4t:
  0CDE  D9            	 exx
  0CDF  C3160F        	 jp mains_end
                      	 
  0CE2                	floor5:
  0CE2  D9            	 exx
  0CE3  3A4F1C        	 ld A,(dammy+1)
  0CE6  FE04          	 cp 4
  0CE8  DA160F        	 jp c,mains_end
  0CEB  3E01          	 ld A,1
  0CED  DD7730        	 ld (IX+48),A
  0CF0  C3160F        	 jp mains_end
  0CF3                	floor5t:
  0CF3  D9            	 exx
  0CF4  3A5C4E        	 ld A,(sword)
  0CF7  B7            	 or A
  0CF8  C2160F        	 jp nz,mains_end
  0CFB  E5            	 push HL
  0CFC  CDF610        	 call cross_ck_a
  0CFF  E1            	 pop HL
  0D00  D20E0D        	 jp nc,box_action_end
  0D03  3E01          	 ld A,1
  0D05  325C4E        	 ld (sword),A
  0D08  CD3703        	 call itemprint
                      	 
                      	 
  0D0B  C3160F        	 jp mains_end
                      	 
  0D0E                	floor6:
  0D0E                	floor6t:
  0D0E                	floor7:
  0D0E                	floor7t
  0D0E                	floor8:
  0D0E                	floor8t
  0D0E                	floor9:
  0D0E                	floor9t
  0D0E                	floor10:
  0D0E                	floor10t
  0D0E                	floor11:
  0D0E                	floor11t
  0D0E                	floor12:
  0D0E                	floor12t:
  0D0E                	floor13:
  0D0E                	floor13t:
  0D0E                	floor14:
  0D0E                	floor14t:
  0D0E                	floor15:
  0D0E                	floor15t:
  0D0E                	floor16:
  0D0E                	floor16t:
  0D0E                	floor17:
  0D0E                	floor17t
  0D0E                	floor18:
  0D0E                	floor18t
  0D0E                	floor19:
  0D0E                	floor19t
  0D0E                	floor20:
  0D0E                	floor20t
  0D0E                	floor21:
  0D0E                	floor21t:
  0D0E                	floor22:
  0D0E                	floor22t:
  0D0E                	floor23:
  0D0E                	floor23t:
  0D0E                	floor24:
  0D0E                	floor24t:
  0D0E                	floor25:
  0D0E                	floor25t:
  0D0E                	floor26:
  0D0E                	floor26t:
  0D0E                	floor27:
  0D0E                	floor27t
  0D0E                	floor28:
  0D0E                	floor28t
  0D0E                	floor29:
  0D0E                	floor29t
  0D0E                	floor30:
  0D0E                	floor30t
  0D0E                	floor31:
  0D0E                	floor31t:
  0D0E                	floor32:
  0D0E                	floor32t:
  0D0E                	floor33:
  0D0E                	floor33t:
  0D0E                	floor34:
  0D0E                	floor34t:
  0D0E                	floor35:
  0D0E                	floor35t:
  0D0E                	floor36:
  0D0E                	floor36t:
  0D0E                	floor37:
  0D0E                	floor37t
  0D0E                	floor38:
  0D0E                	floor38t
  0D0E                	floor39:
  0D0E                	floor39t
  0D0E                	floor40:
  0D0E                	floor40t
  0D0E                	floor41:
  0D0E                	floor41t:
  0D0E                	floor42:
  0D0E                	floor42t:
  0D0E                	floor43:
  0D0E                	floor43t:
  0D0E                	floor44:
  0D0E                	floor44t:
  0D0E                	floor45:
  0D0E                	floor45t:
  0D0E                	floor46:
  0D0E                	floor46t:
  0D0E                	floor47:
  0D0E                	floor47t
  0D0E                	floor48:
  0D0E                	floor48t
  0D0E                	floor49:
  0D0E                	floor49t
  0D0E                	floor50:
  0D0E                	floor50t
  0D0E                	floor51:
  0D0E                	floor51t:
  0D0E                	floor52:
  0D0E                	floor52t:
  0D0E                	floor53:
  0D0E                	floor53t:
  0D0E                	floor54:
  0D0E                	floor54t:
  0D0E                	floor55:
  0D0E                	floor55t:
  0D0E                	floor56:
  0D0E                	floor56t:
  0D0E                	floor57:
  0D0E                	floor57t
  0D0E                	floor58:
  0D0E                	floor58t
  0D0E                	floor59:
  0D0E                	floor59t
                      	
                      	
                      	
                      	
                      	
  0D0E                	box_action_end:
  0D0E  110C1C        	 ld DE,graph_box
  0D11  CDAE05        	 call Egraph
  0D14  C3160F        	 jp mains_end
                      	
                      	
                      	;*************************door actions************************
  0D17                	door_action:
  0D17  3A664E        	 ld A,(key)
  0D1A  B7            	 or A
  0D1B  2002          	 jr nz,door_action_1
  0D1D  1812          	 jr door_action_end
  0D1F                	door_action_1:
  0D1F  11061C        	 ld DE,graph_door+6
  0D22  CDAE05        	 call Egraph
  0D25  CDF610        	 call cross_ck_a
  0D28  CD880A        	 call xy_ck
  0D2B  CA3A0D        	 jp z,next_floor
  0D2E  C3160F        	 jp mains_end
  0D31                	door_action_end:
  0D31  11001C        	 ld DE,graph_door
  0D34  CDAE05        	 call Egraph
  0D37  C3160F        	 jp mains_end
                      	
  0D3A                	next_floor:
  0D3A  AF            	 xor A
  0D3B  32664E        	 ld (key),A
  0D3E  CD3703        	 call itemprint
  0D41  CDEB0F        	 call grp_o
                      	 
  0D44  110601        	 ld DE,0106h
  0D47  060B          	 ld B,11
  0D49  21670D        	 ld HL,next_floorms
  0D4C  CDF1BF        	 call msp
  0D4F  110802        	 ld DE,0208h
  0D52  060A          	 ld B,10
  0D54  21720D        	 ld HL,next_floorms+11
  0D57  CDF1BF        	 call msp
  0D5A  CD3A0F        	 call tim255
  0D5D  CDFDBC        	 call kwait
  0D60  21C24C        	 ld HL,floor
  0D63  34            	 inc (HL)
  0D64  C37D01        	 jp Stating_before
  0D67                	next_floorms:
  0D67  464C4F4F522043	 db "FLOOR CLEAR"
  0D72  4E45585420464C	 db "NEXT FLOOR"
                      	
                      	;*************************gil actions*************************
  0D7C                	gil_action:
  0D7C  E5            	 push HL
                      	
                      	
  0D7D  3A564E        	 ld A,(gil_xy)
  0D80  5F            	 ld E,A
  0D81  3A574E        	 ld A,(gil_xy+1)
  0D84  57            	 ld D,A
  0D85  CDBD14        	 call grp_del
                      	; call kwait
                      	
                      	;*************************key scanf**************************
  0D88  CD1110        	 call keysc
  0D8B  32494E        	 ld (gil_button),A
  0D8E  08            	 ex AF,AF'
                      	
                      	;************************sword back***************************
  0D8F  3A4D4E        	 ld A,(gil_st2)
  0D92  B7            	 or A
  0D93  C2C30E        	 jp nz,gil_sword_f2
                      	;***********************sword atack****************************
  0D96                	gil_action_l_b:
  0D96  08            	 ex AF,AF'
  0D97  CB6F          	 bit 5,A
  0D99  C28A0E        	 jp nz,gil_sword_f
  0D9C  CDAD0E        	 call gil_sword_reset
                      	
  0D9F  21DA1A        	 ld HL,graph_gil_ulf
  0DA2  225C0E        	 ld (gil_action_end-2),HL
                      	;************************urdl move*****************************
  0DA5                	gil_action_l:
  0DA5  08            	 ex AF,AF'
  0DA6  3A5B4E        	 ld A,(boot)
  0DA9  B7            	 or A
  0DAA  200B          	 jr nz,gil_action_l2
  0DAC  3A504E        	 ld A,(gil_bt)
  0DAF  EEFF          	 xor 0ffh
  0DB1  32504E        	 ld (gil_bt),A
  0DB4  CA5B0E        	 jp z,gil_action_end-3
  0DB7                	gil_action_l2:
  0DB7  08            	 ex AF,AF'
  0DB8  CB47          	 bit 0,A
  0DBA  200F          	 jr nz,gil_left
  0DBC  CB4F          	 bit 1,A
  0DBE  202D          	 jr nz,gil_right
  0DC0  CB77          	 bit 6,A
  0DC2  204C          	 jr nz,gil_down
  0DC4  CB7F          	 bit 7,A
  0DC6  206C          	 jr nz,gil_up
                      	;*****************************noting************************
  0DC8  C35B0E        	 jp gil_action_end-3
                      	 ;************************move farse*************************
  0DCB                	gil_left:
  0DCB  3A574E        	 ld A,(gil_xy+1);y
  0DCE  E63F          	 and 00111111b
  0DD0  CADA0D        	 jp z,gil_left_l
  0DD3                	gil_left_s:
  0DD3  D607          	 sub 7
  0DD5  DA770E        	 jp c,direction_p
  0DD8  20F9          	 jr nz,gil_left_s
  0DDA                	gil_left_l:
  0DDA  3EC0          	 ld A,11000000b
  0DDC  21574E        	 ld HL,gil_xy+1
  0DDF  B6            	 or (HL)
  0DE0  77            	 ld (HL),A
  0DE1  2B            	 dec HL;ld HL,gil_xy
  0DE2  CD2B11        	 call wall_ck
  0DE5  B7            	 or A;
  0DE6  C25B0E        	 jp nz,gil_action_end-3
                      	
                      	; ld HL,gil_xy
  0DE9  35            	 dec (HL)
  0DEA  C3540E        	 jp gil_walk
                      	
  0DED                	gil_right:
  0DED  3A574E        	 ld A,(gil_xy+1);y
  0DF0  E63F          	 and 00111111b
  0DF2  CAFC0D        	 jp z,gil_right_l
  0DF5                	gil_right_s:
  0DF5  D607          	 sub 7
  0DF7  DA770E        	 jp c,direction_p
  0DFA  20F9          	 jr nz,gil_right_s
  0DFC                	gil_right_l:
  0DFC  3E3F          	 ld A,00111111b
  0DFE  21574E        	 ld HL,gil_xy+1
  0E01  A6            	 and (HL)
  0E02  77            	 ld (HL),A
  0E03  CBF6          	 set 6,(HL)
  0E05  2B            	 dec HL;ld HL,gil_xy
  0E06  CD2B11        	 call wall_ck
  0E09  B7            	 or A;
  0E0A  C25B0E        	 jp nz,gil_action_end-3
                      	
                      	; ld HL,gil_xy
  0E0D  34            	 inc (HL)
  0E0E  1844          	 jr gil_walk
                      	
  0E10                	gil_down:
  0E10  3A564E        	 ld A,(gil_xy);x
  0E13  D61E          	 sub 30
  0E15  CA1F0E        	 jp z,gil_down_l
  0E18                	gil_down_s:
  0E18  D607          	 sub 7
  0E1A  DA770E        	 jp c,direction_p
  0E1D  20F9          	 jr nz,gil_down_s
  0E1F                	gil_down_l:
  0E1F  3E3F          	 ld A,00111111b
  0E21  21574E        	 ld HL,gil_xy+1
  0E24  A6            	 and (HL)
  0E25  77            	 ld (HL),A
  0E26  CBFE          	 set 7,(HL)
  0E28  2B            	 dec HL;ld HL,gil_xy
  0E29  CD2B11        	 call wall_ck
  0E2C  B7            	 or A;
  0E2D  C25B0E        	 jp nz,gil_action_end-3
                      	
                      	; ld HL,gil_xy
  0E30  23            	 inc HL
  0E31  34            	 inc (HL)
  0E32  1820          	 jr gil_walk
                      	
  0E34                	gil_up:
  0E34  3A564E        	 ld A,(gil_xy);x
  0E37  D61E          	 sub 30
  0E39  CA430E        	 jp z,gil_up_l
  0E3C                	gil_up_s:
  0E3C  D607          	 sub 7
  0E3E  DA770E        	 jp c,direction_p
  0E41  20F9          	 jr nz,gil_up_s
  0E43                	gil_up_l:
  0E43  3E3F          	 ld A,00111111b
  0E45  21574E        	 ld HL,gil_xy+1
  0E48  A6            	 and (HL)
  0E49  77            	 ld (HL),A
  0E4A  2B            	 dec HL;ld HL,gil_xy
  0E4B  CD2B11        	 call wall_ck
  0E4E  B7            	 or A;
  0E4F  C25B0E        	 jp nz,gil_action_end-3
                      	
                      	; ld HL,gil_xy
  0E52  23            	 inc HL
  0E53  35            	 dec (HL)
                      	; jr gil_walk
                      	
                      	
  0E54                	gil_walk:
  0E54  214C4E        	 ld HL,gil_st1
  0E57  3EFF          	 ld A,0ffh
  0E59  AE            	 xor (HL)
  0E5A  77            	 ld (HL),A
                      	
  0E5B  21DA1A        	 ld HL,graph_gil_ulf
  0E5E                	gil_action_end:
  0E5E  3A4C4E        	 ld A,(gil_st1)
  0E61  3C            	 inc A
  0E62  111800        	 ld DE,24
  0E65  CD650F        	 call xsan
  0E68                	gil_action_end_l:
  0E68  3A564E        	 ld A,(gil_xy)
  0E6B  5F            	 ld E,A
  0E6C  3A574E        	 ld A,(gil_xy+1)
  0E6F  57            	 ld D,A
  0E70  CD3114        	 call grp_set
  0E73  E1            	 pop HL
  0E74  C3160F        	 jp mains_end
                      	
  0E77                	direction_p:
  0E77  3A574E        	 ld A,(gil_xy+1)
  0E7A  E6C0          	 and 11000000b
  0E7C  CA430E        	 jp z,gil_up_l
  0E7F  FE80          	 cp 80h
  0E81  DAFC0D        	 jp c,gil_right_l
  0E84  CA1F0E        	 jp z,gil_down_l
  0E87  C3CB0D        	 jp gil_left
                      	
  0E8A                	gil_sword_f:;key_action
  0E8A  08            	 ex AF,AF'
  0E8B  B7            	 or A
  0E8C  C2A20E        	 jp nz,gil_sword_set 
                      	;************************sword atack***************************
  0E8F  3E0A          	 ld A,10		;back flame
  0E91  324D4E        	 ld (gil_st2),A
                      	;***********************matk action****************************
  0E94  CDE111        	 call matk_action_gil
                      	;*************************************************************
  0E97  110A1B        	 ld DE,graph_gilsw_ulf	;gil_sw
  0E9A  ED535C0E      	 ld (gil_action_end-2),DE
  0E9E  08            	 ex AF,AF'
  0E9F  C3A50D        	 jp gil_action_l
  0EA2                	gil_sword_set:
  0EA2  113A1B        	 ld DE,graph_gilsword_ulf	;gil_swd
  0EA5  ED535C0E      	 ld (gil_action_end-2),DE
  0EA9                	gil_sword_set_l:
  0EA9  08            	 ex AF,AF'
  0EAA  C3A50D        	 jp gil_action_l
  0EAD                	gil_sword_reset:
  0EAD  08            	 ex AF,AF'
  0EAE  3A4D4E        	 ld A,(gil_st2)
  0EB1  47            	 ld B,A
  0EB2  08            	 ex AF,AF'
  0EB3  CB78          	 bit 7,B
  0EB5  C8            	 ret z
  0EB6  08            	 ex AF,AF'
  0EB7  E1            	 pop HL
  0EB8  3E80          	 ld A,10000000b
                      	;************************sword back***************************
  0EBA  F60A          	 or 10			;back flame
  0EBC  324D4E        	 ld (gil_st2),A
  0EBF  08            	 ex AF,AF'
  0EC0  C3A50D        	 jp gil_action_l
  0EC3                	gil_sword_f2:;auto_action
  0EC3  FE80          	 cp 80h
  0EC5  CA960D        	 jp z,gil_action_l_b
  0EC8  E680          	 and 10000000b
  0ECA  C2E20E        	 jp nz,gil_sword_f_decB;A=1nnnnnnnb
  0ECD                	gil_sword_f_decA:;A=0nnnnnnnb
  0ECD  214D4E        	 ld HL,gil_st2
  0ED0  7E            	 ld A,(HL)
  0ED1  3D            	 dec A
  0ED2  77            	 ld (HL),A
  0ED3  110A1B        	 ld DE,graph_gilsw_ulf	;gil_sw
  0ED6  ED535C0E      	 ld (gil_action_end-2),DE
  0EDA  C2F60E        	 jp nz,gil_action_l_r
  0EDD  CBFE          	 set 7,(HL)
  0EDF  C3F60E        	 jp gil_action_l_r
  0EE2                	gil_sword_f_decB:;A=1nnnnnnnb
  0EE2  214D4E        	 ld HL,gil_st2
  0EE5  7E            	 ld A,(HL)
  0EE6  3D            	 dec A
  0EE7  77            	 ld (HL),A
  0EE8  E67F          	 and 01111111b
  0EEA  110A1B        	 ld DE,graph_gilsw_ulf	;gil_sw
  0EED  ED535C0E      	 ld (gil_action_end-2),DE
  0EF1  C2F60E        	 jp nz,gil_action_l_r
  0EF4  CBBE          	 res 7,(HL)
  0EF6                	gil_action_l_r:
  0EF6  08            	 ex AF,AF'
  0EF7  C3A50D        	 jp gil_action_l
                      	
                      	
  0EFA                	gil_killing:
  0EFA  CDEB0F        	 call grp_o
  0EFD  210B0F        	 ld HL,killingm
  0F00  110000        	 ld DE,0
  0F03  060B          	 ld B,11
  0F05  CDF1BF        	 call msp
  0F08  C3C503        	 jp stating_rec
                      	
                      	
                      	
  0F0B                	killingm:
  0F0B  6265656E206B69	 db "been killed"
                      	
                      	
  0F16                	mains_end:
                      	; ld A,(IX+48)
                      	; ld (0f0h),A
                      	; ld (0f2h),IX
                      	
  0F16  3A4C04        	 ld A,(count+1)
  0F19  3D            	 dec A
  0F1A  324C04        	 ld (count+1),A
  0F1D  23            	 inc HL
  0F1E  23            	 inc HL
  0F1F  DD23          	 inc IX
  0F21  FD23          	 inc IY
  0F23  D9            	 exx
  0F24  CD1110        	 call keysc
  0F27  CB57          	 bit 2,A
  0F29  C0            	 ret nz
  0F2A  D9            	 exx
  0F2B  C34B04        	 jp mains
                      	
                      	
  0F2E                	retP:
  0F2E  310000        	 ld SP,0
  0F31  C9            	 ret
                      	
                      	
                      	
                      	
                      	
                      	
                      	
                      	;*********************************************************
  0F32                	TIMBTL:
  0F32  3E32          	 LD A,50
  0F34  1806          	 JR TIMER
  0F36                	TIM30:
  0F36  3E25          	 LD A,37
  0F38  1802          	 JR TIMER
  0F3A                	TIM255:
  0F3A  3EFF          	 LD A,255
  0F3C                	TIMER:
  0F3C  010000        	 LD BC,0
  0F3F  03            	 INC BC;LOOP
  0F40  000000000000  	 DB 0,0,0,0,0,0
  0F46  A8            	 XOR B
  0F47  C8            	 RET Z
  0F48  18F5          	 JR TIMER+3
  0F4A                	RAND:;A
  0F4A  E5            	 PUSH HL
  0F4B  D5            	 push DE
  0F4C  210000        	 LD HL,0
  0F4F  54            	 LD D,H
  0F50  5D            	 LD E,L
  0F51  29            	 ADD HL,HL
  0F52  29            	 ADD HL,HL
  0F53  19            	 ADD HL,DE
  0F54  11475D        	 LD DE,5D47H
  0F57  19            	 ADD HL,DE
  0F58  224D0F        	 LD (RAND+3),HL
  0F5B  7C            	 LD A,H
  0F5C  D1            	 pop DE
  0F5D  E1            	 POP HL
  0F5E  C9            	 RET
  0F5F                	RAND4:
                      	; ld A,R
                      	; rra
                      	; rra
                      	; rra
                      	; and 11000000b
                      	; ret
  0F5F  CD4A0F        	 CALL RAND
  0F62  E6C0          	 AND 11000000b
  0F64  C9            	 RET
  0F65                	XSAN:
  0F65  B7            	 OR A
  0F66  C8            	 RET Z
  0F67                	XSANL:
  0F67  19            	 ADD HL,DE
  0F68  3D            	 DEC A
  0F69  20FC          	 JR NZ,XSANL
  0F6B  C9            	 RET
  0F6C                	NMEMRY:
  0F6C  0000000000    	 DB 0,0,0,0,0
  0F71                	ASCN:;HL=l(2byte)DE
  0F71  116C0F        	 LD DE,NMEMRY
  0F74  011027        	 LD BC,10000
  0F77  CDAB0F        	 CALL WARIS
  0F7A  01E803        	 LD BC,1000
  0F7D  CDAB0F        	 CALL WARIS
  0F80  016400        	 LD BC,100
  0F83  CDAB0F        	 CALL WARIS
  0F86  010A00        	 LD BC,10
  0F89  CDAB0F        	 CALL WARIS
  0F8C  7D            	 LD A,L
  0F8D  12            	 LD (DE),A
  0F8E  0605          	 LD B,5
  0F90  116C0F        	 LD DE,NMEMRY
  0F93                	ASCL:
  0F93  1A            	 LD A,(DE)
  0F94  FE00          	 CP 0
  0F96  2802          	 JR Z,ASCL2
  0F98  1808          	 JR ASC2
  0F9A                	ASCL2:
  0F9A  13            	 INC DE
  0F9B  10F6          	 DJNZ ASCL
  0F9D  0601          	 LD B,1
  0F9F  11700F        	 LD DE,NMEMRY+4
  0FA2                	ASC2:
  0FA2  1A            	 LD A,(DE)
  0FA3  0E30          	 LD C,30H
  0FA5  81            	 ADD A,C
  0FA6  12            	 LD (DE),A
  0FA7  13            	 INC DE
  0FA8  10F8          	 DJNZ ASC2
  0FAA  C9            	 RET
  0FAB                	WARIS:
  0FAB  AF            	 XOR A
                      	;WARI1:
  0FAC  ED42          	 SBC HL,BC
  0FAE  3803          	 JR C,WARI2
  0FB0  3C            	 INC A
  0FB1  18F9          	 JR WARIS+1
  0FB3                	WARI2:
  0FB3  09            	 ADD HL,BC
  0FB4  12            	 LD (DE),A
  0FB5  13            	 INC DE		;
  0FB6  C9            	 RET
  0FB7                	cls:
  0FB7  F5            	 push AF
  0FB8  D5            	 push DE
  0FB9  E5            	 push HL
  0FBA  C5            	 push BC
  0FBB  3E00          	 ld A,0
  0FBD  21BE15        	 ld HL,grapu_area
  0FC0  11BF15        	 ld DE,grapu_area+1
  0FC3  77            	 ld (HL),A
  0FC4  015F03        	 ld BC,144*6-1
  0FC7  EDB0          	 ldir
  0FC9  CDEB0F        	 call grp_o
  0FCC  C1            	 pop BC
  0FCD  E1            	 pop HL
  0FCE  D1            	 pop DE
  0FCF  F1            	 pop AF
  0FD0  C9            	 ret
                      	
  0FD1                	bls:
  0FD1  F5            	 push AF
  0FD2  D5            	 push DE
  0FD3  E5            	 push HL
  0FD4  C5            	 push BC
  0FD5  21BE15        	 LD HL,grapu_area
  0FD8  36FF          	 LD (HL),0FFH
  0FDA  11BF15        	 LD DE,grapu_area+1
  0FDD  015F03        	 LD BC,863
  0FE0  EDB0          	 LDIR
  0FE2  CDEB0F        	 CALL grp_o
  0FE5  D9            	 EXX
  0FE6  C1            	 pop BC
  0FE7  E1            	 pop HL
  0FE8  D1            	 pop DE
  0FE9  F1            	 pop AF
  0FEA  C9            	 RET
  0FEB                	grp_o:
  0FEB  3E06          	 ld A,6
  0FED  110000        	 ld DE,0
  0FF0  21BE15        	 ld HL,grapu_area
  0FF3                	grp_o_l:
  0FF3  D5            	 push DE
  0FF4  F5            	 push AF
  0FF5  0690          	 ld B,144
  0FF7  CDD0BF        	 call grp
  0FFA  23            	 inc HL
  0FFB  F1            	 pop AF
  0FFC  D1            	 pop DE
  0FFD  14            	 inc D
  0FFE  3D            	 dec A
  0FFF  20F2          	 jr nz,grp_o_l
  1001  C9            	 ret
                      	
  1002                	grp_open:
  1002  0E06          	 ld C,6
  1004                	grp_open_l
  1004  C5            	 push BC
  1005  D5            	 push DE
  1006  CDD0BF        	 call grp
  1009  D1            	 pop DE
  100A  14            	 inc D
  100B  23            	 inc HL
  100C  C1            	 pop BC
  100D  0D            	 dec C
  100E  20F4          	 jr nz,grp_open_l
  1010  C9            	 ret
                      	
  1011                	keysc:
  1011  F3            	 di
  1012  AF            	 xor A
  1013  D311          	 out (11h),A
  1015  3E08          	 ld A,08h
  1017  D311          	 out (11h),A
  1019  CDAD8A        	 call 8aadh
  101C  DB10          	 in A,(10h)
  101E  E6E0          	 and 0e0h
  1020  47            	 ld B,A
  1021  AF            	 xor A
  1022  D311          	 out (11h),A
  1024  3E10          	 ld A,10h
  1026  D311          	 out (11h),A
  1028  CDAD8A        	 call 8aadh
  102B  DB10          	 in A,(10h)
  102D  E60F          	 and 0fh
  102F  B0            	 or B
  1030  FB            	 ei
  1031  C9            	 ret
                      	
                      	
                      	
  1032                	charReput:;HL=obj_xy++
  1032                	charReput_x:
  1032  7E            	 ld A,(HL);x
  1033  4F            	 ld C,A
  1034  D61E          	 sub 30
  1036  CA4E10        	 jp z,charReput_y
  1039                	charReput_x_lp:
  1039  D607          	 sub 7
  103B  CA4E10        	 jp z,charReput_y
  103E  30F9          	 jr nc,charReput_x_lp
  1040  FEFD          	 cp 0fch+1;cy=-4~-6 left
  1042  3804          	 jr c,charReput_x_1
  1044  ED44          	 neg;(right+)
  1046  1804          	 jr charReput_x_2
  1048                	charReput_x_1:
  1048  C607          	 add A,7
  104A  ED44          	 neg;(left-)
  104C                	charReput_x_2:
  104C  81            	 add A,C
  104D  77            	 ld (HL),A
                      	
  104E                	charReput_y:
  104E  23            	 inc HL
  104F  7E            	 ld A,(HL)
  1050  2B            	 dec HL
  1051  4F            	 ld C,A
  1052  E63F          	 and 00111111b
  1054  C8            	 ret z
  1055                	charReput_y_lp:
  1055  D607          	 sub 7
  1057  C8            	 ret z
  1058  30FB          	 jr nc,charReput_y_lp
  105A  FEFD          	 cp 0fch+1;cy=-4~-6 up
  105C  3804          	 jr c,charReput_y_1
  105E  ED44          	 neg;(down+)
  1060  1804          	 jr charReput_y_2
  1062                	charReput_y_1:
  1062  C607          	 add A,7
  1064  ED44          	 neg;(up-)
  1066                	charReput_y_2:
  1066  81            	 add A,C
  1067  23            	 inc HL
  1068  77            	 ld (HL),A
  1069  2B            	 dec HL
  106A  C9            	 ret 
                      	
                      	
  106B                	cross_ck_s:;HL=obj_xy+
  106B  5E            	 ld E,(HL)
  106C  23            	 inc HL
  106D  56            	 ld D,(HL)
  106E  2B            	 dec HL
  106F  3A574E        	 ld A,(gil_xy+1)
  1072  E6C0          	 and 11000000b
  1074  CA9D10        	 jp z,cross_ck_s_up
  1077  FE80          	 cp 80h
  1079  DABB10        	 jp c,cross_ck_s_right
  107C  CAD810        	 jp z,cross_ck_s_down
  107F                	cross_ck_s_left:
  107F  3A574E        	 ld A,(gil_xy+1)
  1082  E63F          	 and 3fh
  1084  92            	 sub D	;x-x1
  1085  FE03          	 cp 3
  1087  3805          	 jr c,cross_ck_s_left_2
  1089  2F            	 cpl
  108A  3C            	 inc A
  108B  FE03          	 cp 3
  108D  D0            	 ret nc
  108E                	cross_ck_s_left_2:
  108E  3A564E        	 ld A,(gil_xy)
  1091  93            	 sub E
  1092  FE06          	 cp 6		;when (a-d)>0 is that empty at left.
  1094  D8            	 ret c
  1095  2F            	 cpl
  1096  3C            	 inc A
  1097  FE03          	 cp 3
  1099  DAFA0E        	 jp c,gil_killing
  109C  C9            	 ret
  109D                	cross_ck_s_up:
  109D  3A564E        	 ld A,(gil_xy)
  10A0  93            	 sub E	;x-x1
  10A1  FE03          	 cp 3
  10A3  3805          	 jr c,cross_ck_s_up_2
  10A5  2F            	 cpl
  10A6  3C            	 inc A
  10A7  FE03          	 cp 3
  10A9  D0            	 ret nc
  10AA                	cross_ck_s_up_2:
  10AA  3A574E        	 ld A,(gil_xy+1)
  10AD  E63F          	 and 3fh
  10AF  92            	 sub D
  10B0  FE03          	 cp 3		;when (a-d)>0 is that empty at up.
  10B2  D8            	 ret c
  10B3  2F            	 cpl
  10B4  3C            	 inc A
  10B5  FE03          	 cp 3
  10B7  DAFA0E        	 jp c,gil_killing
  10BA  C9            	 ret
  10BB                	cross_ck_s_right:
  10BB  3A574E        	 ld A,(gil_xy+1)
  10BE  E63F          	 and 3fh
  10C0  92            	 sub D	;x-x1
  10C1  FE03          	 cp 3
  10C3  3805          	 jr c,cross_ck_s_right_2
  10C5  2F            	 cpl
  10C6  3C            	 inc A
  10C7  FE03          	 cp 3
  10C9  C9            	 ret ;c or nc
  10CA                	cross_ck_s_right_2:
  10CA  3A564E        	 ld A,(gil_xy)
  10CD  93            	 sub E
  10CE  FE03          	 cp 3		;when (a-d)<0 is that empty at right.
  10D0  DAFA0E        	 jp c,gil_killing
  10D3  2F            	 cpl
  10D4  3C            	 inc A
  10D5  FE06          	 cp 6
  10D7  C9            	 ret ;c or nc
  10D8                	cross_ck_s_down:
  10D8  3A564E        	 ld A,(gil_xy)
  10DB  93            	 sub E	;x-x1
  10DC  FE03          	 cp 3
  10DE  3805          	 jr c,cross_ck_s_down_2
  10E0  2F            	 cpl
  10E1  3C            	 inc A
  10E2  FE03          	 cp 3
  10E4  D0            	 ret nc
  10E5                	cross_ck_s_down_2:
  10E5  3A574E        	 ld A,(gil_xy+1)
  10E8  E63F          	 and 3fh
  10EA  92            	 sub D
  10EB  FE03          	 cp 3		;when (a-d)<0 is that empty at down.
  10ED  DAFA0E        	 jp c,gil_killing
  10F0  D8            	 ret c
  10F1  2F            	 cpl
  10F2  3C            	 inc A
  10F3  FE06          	 cp 6
  10F5  C9            	 ret
                      	
                      	
  10F6                	cross_ck_a:;HL=obj_xy+
  10F6  5E            	 ld E,(HL);x
  10F7  23            	 inc HL
  10F8  7E            	 ld A,(HL)
  10F9  2B            	 dec HL
  10FA  E63F          	 and 3fh
  10FC  57            	 ld D,A	;y
                      	; ld HL,(gil_xy)
  10FD  3A564E        	 ld A,(gil_xy)
  1100  93            	 sub E	;x-x1
  1101  FE03          	 cp 3
  1103  3805          	 jr c,cross_ck_al
  1105  2F            	 cpl
  1106  3C            	 inc A
  1107  FE03          	 cp 3
  1109  D0            	 ret nc
  110A                	cross_ck_al:
  110A  3A574E        	 ld A,(gil_xy+1)
  110D  E63F          	 and 3fh
  110F  92            	 sub D
  1110  FE03          	 cp 3
  1112  D8            	 ret c
  1113  2F            	 cpl
  1114  3C            	 inc A
  1115  FE03          	 cp 3
  1117  C9            	 ret ;nc or cy
                      	;cy is crosses.
                      	
  1118                	cha_kill:;HL=obj_xy++,IX=obj_hp
  1118  E5            	 push HL
  1119  5E            	 ld E,(HL)
  111A  23            	 inc HL
  111B  56            	 ld D,(HL)
  111C  CDBD14        	 call grp_del
  111F  214E1C        	 ld HL,dammy
  1122  7E            	 ld A,(HL)
  1123  3C            	 inc A
  1124  77            	 ld (HL),A
  1125  E1            	 pop HL
  1126  AF            	 xor A
  1127  DD7700        	 ld (IX),A
  112A  C9            	 ret
                      	
                      	
  112B                	wall_ck:
  112B  E5            	 push HL
  112C  CD3111        	 call wall_cks
  112F  E1            	 pop HL
  1130  C9            	 ret
                      	
  1131                	wall_cks:;HL,obj_xy+;non zero=don't pass, zero=pass and A=0, cy=not block
  1131  E5            	 push HL
                      	;HL=(y,x)
  1132  5E            	 ld E,(HL);x
  1133  23            	 inc HL
  1134  56            	 ld D,(HL);y
  1135  2B            	 dec HL
  1136  EB            	 ex DE,HL
  1137  3E3F          	 ld A,00111111b
  1139  A4            	 and H
  113A  010000        	 ld BC,0
  113D  2808          	 jr z,wall_ck_lc
  113F                	wall_ck_lb:
  113F  04            	 inc B
  1140  D607          	 sub 7
  1142  DABB11        	 jp c,wall_ck_end
  1145  20F8          	 jr nz,wall_ck_lb
  1147                	wall_ck_lc:
  1147  7D            	 ld A,L
  1148  D61E          	 sub 30
  114A  2808          	 jr z,wall_ck_le
  114C                	wall_ck_ld:
  114C  0C            	 inc C
  114D  D607          	 sub 7
  114F  DABB11        	 jp c,wall_ck_end
  1152  20F8          	 jr nz,wall_ck_ld
  1154                	wall_ck_le:
  1154  7C            	 ld A,H
  1155  E6C0          	 and 11000000b
  1157  CAA511        	 jp z,wall_ck_lu
  115A  FE80          	 cp 80h
  115C  DA8E11        	 jp c,wall_ck_lr
  115F  CA7811        	 jp z,wall_ck_ldd
                      	
  1162                	wall_ck_ll:
  1162  218C13        	 ld HL,map_memry_left-17
                      	;x+C
  1165  59            	 ld E,C
  1166  1600          	 ld D,0
  1168  19            	 add HL,DE
                      	;y+17*B
  1169  111100        	 ld DE,17
  116C  04            	 inc B
  116D                	wall_ck_ll_2:
  116D  19            	 add HL,DE
  116E  10FD          	 djnz wall_ck_ll_2
                      	; or A
                      	; sbc HL,DE
  1170  22FE11        	 ld (block_pointaP+1),HL
  1173  7E            	 ld A,(HL)
  1174  E680          	 and t;t(80h) or f(0)
  1176  E1            	 pop HL
                      	
                      	; ld A,"l"
                      	; ld DE,0
                      	; call 0be62h
                      	; pop HL
                      	
  1177  C9            	 ret
                      	
                      	
  1178                	wall_ck_ldd:
  1178  210D13        	 ld HL,map_memry_top-16
                      	;x+C
  117B  59            	 ld E,C
  117C  1600          	 ld D,0
  117E  19            	 add HL,DE
                      	;y+16*B
  117F  111000        	 ld DE,16
  1182  04            	 inc B
  1183                	wall_ck_ld2:
  1183  19            	 add HL,DE
  1184  10FD          	 djnz wall_ck_ld2
                      	; sub HL,DE
  1186  22FE11        	 ld (block_pointaP+1),HL
  1189  7E            	 ld A,(HL)
  118A  E680          	 and t;t(80h) or f(0)
  118C  E1            	 pop HL
                      	
                      	; ld A,"d"
                      	; ld DE,0
                      	; call 0be62h
                      	; pop HL
                      	
  118D  C9            	 ret
                      	
                      	
  118E                	wall_ck_lr:
  118E  218C13        	 ld HL,map_memry_left-17
                      	;x+C
  1191  59            	 ld E,C
  1192  1600          	 ld D,0
  1194  19            	 add HL,DE
  1195  23            	 inc HL
                      	;y+17*B
  1196  111100        	 ld DE,17
  1199  04            	 inc B
  119A                	wall_ck_lr_2:
  119A  19            	 add HL,DE
  119B  10FD          	 djnz wall_ck_lr_2
                      	; or A
                      	; sbc HL,DE
  119D  22FE11        	 ld (block_pointaP+1),HL
  11A0  7E            	 ld A,(HL)
  11A1  E680          	 and t;t(80h) or f(0)
  11A3  E1            	 pop HL
                      	
                      	; ld A,"r"
                      	; ld DE,0
                      	; call 0be62h
                      	; pop HL
                      	
  11A4  C9            	 ret
                      	
                      	
                      	
                      	
  11A5                	wall_ck_lu:
  11A5  21FD12        	 ld HL,map_memry_top-16-16
                      	;x+C
  11A8  59            	 ld E,C
  11A9  1600          	 ld D,0
  11AB  19            	 add HL,DE
                      	;y+16*B
  11AC  111000        	 ld DE,16
  11AF  04            	 inc B
  11B0                	wall_ck_lu2:
  11B0  19            	 add HL,DE
  11B1  10FD          	 djnz wall_ck_lu2
                      	; or A
                      	; sbc HL,DE
  11B3  22FE11        	 ld (block_pointaP+1),HL
  11B6  7E            	 ld A,(HL)
  11B7  E680          	 and t;t(80h) or f(0)
  11B9  E1            	 pop HL
                      	
                      	; ld A,"u"
                      	; ld DE,0
                      	; call 0be62h
                      	; pop HL
                      	
  11BA  C9            	 ret
  11BB                	wall_ck_end:
  11BB  E1            	 pop HL
  11BC  AF            	 xor A
  11BD  C9            	 ret
                      	
                      	
                      	;******************************wall mod block**************************
                      	;********************wall mod****HL=obj_xy************************
  11BE                	wall_mod:
  11BE  010000        	 ld BC,0
  11C1  7E            	 ld A,(HL) 
  11C2  5F            	 ld E,A
  11C3  23            	 inc HL
  11C4  7E            	 ld A,(HL)
  11C5  E63F          	 and 00111111b
  11C7  57            	 ld D,A
  11C8  2B            	 dec HL
                      	 
  11C9  7B            	 ld A,E
  11CA  D61E          	 sub 30
  11CC  2807          	 jr z,wall_mod_l2
  11CE                	wall_mod_l1:
  11CE  D607          	 sub 7
  11D0  2803          	 jr z,wall_mod_l2
  11D2  30FA          	 jr nc,wall_mod_l1
  11D4  4F            	 ld C,A
                      	
  11D5                	wall_mod_l2
  11D5  7A            	 ld A,D
  11D6  B7            	 or A
  11D7  2807          	 jr z,wall_mod_l4
  11D9                	wall_mod_l3:
  11D9  D607          	 sub 7
  11DB  2803          	 jr z,wall_mod_l4
  11DD  30FA          	 jr nc,wall_mod_l3
  11DF  47            	 ld B,A
  11E0                	wall_mod_l4
                      	; ld A,E
                      	; ld (0f0h),A
                      	; ld A,D
                      	; ld (0f1h),A
                      	; ld A,C
                      	; ld (0f4h),A
                      	; ld A,B
                      	; ld (0f5h),A
  11E0  C9            	 ret
                      	 
                      	 
                      	 
                      	;*************************************matk action******************************
                      	
  11E1                	matk_action_gil:
  11E1  214F4E        	 ld HL,gil_matk_count
  11E4  5E            	 ld E,(HL)
  11E5  1C            	 inc E
  11E6  1D            	 dec E
  11E7  C8            	 ret z
  11E8  1D            	 dec E
  11E9  73            	 ld (HL),E
                      	
  11EA  21564E        	 ld HL,gil_xy
  11ED                	matk_action:;HL=obj address+ let push pop
  11ED  08            	 ex AF,AF'
  11EE  323F12        	 ld (matk_action_gil_ret+1),A
  11F1  220812        	 ld (matk_action_HLP+1),HL
  11F4  CD2B11        	 call wall_ck
  11F7  DA3E12        	 jp c,matk_action_gil_ret
  11FA  CA3E12        	 jp z,matk_action_gil_ret
  11FD                	block_pointaP:
  11FD  210000        	 ld HL,overwrite		;block address
  1200  4E            	 ld C,(HL)
  1201  0C            	 inc C
  1202  CA3312        	 jp z,gil_matk_break 
  1205  3600          	 ld (HL),0
                      	 
                      	; call bls
                      	
  1207                	matk_action_HLP:
  1207  210000        	 ld HL,overwrite
  120A  224112        	 ld (matk_action_gil_ret+3),HL
                      	
  120D  5E            	 ld E,(HL)
  120E  23            	 inc HL
  120F  56            	 ld D,(HL)
  1210  7A            	 ld A,D
  1211  E6C0          	 and 11000000b
  1213  2818          	 jr z,matk_action_u
  1215  FE80          	 cp 80h
  1217  380E          	 jr c,matk_action_r
  1219  2806          	 jr z,matk_action_d
  121B                	matk_action_l:
  121B  1D            	 dec E
  121C  CDBD14        	 call grp_del
  121F  181D          	 jr matk_action_gil_ret
  1221                	matk_action_d:
  1221  14            	 inc D
  1222  CDBD14        	 call grp_del
  1225  1817          	 jr matk_action_gil_ret
  1227                	matk_action_r:
  1227  1C            	 inc E
  1228  CDBD14        	 call grp_del
  122B  1811          	 jr matk_action_gil_ret
  122D                	matk_action_u:
  122D  15            	 dec D
  122E  CDBD14        	 call grp_del
  1231  180B          	 jr matk_action_gil_ret
                      	
  1233                	gil_matk_break:
  1233  DD7ED0        	 ld A,(IX-48)
  1236  FE8F          	 cp 8fh
  1238  2004          	 jr nz,matk_action_gil_ret
  123A  AF            	 xor A
  123B  324F4E        	 ld (gil_matk_count),A
  123E                	matk_action_gil_ret:
  123E  3E00          	 ld A,overwrite
  1240  210000        	 ld HL,overwrite
  1243  08            	 ex AF,AF'
  1244  C9            	 ret
                      	
                      	
                      	
  1245                	Map_make:
  1245  CDB70F        	 call cls
  1248  21A51C        	 ld HL,Map_data
  124B  3AC24C        	 ld A,(floor)
  124E  3D            	 dec A
  124F  11C900        	 ld DE,96+105
  1252  CD650F        	 call xsan
  1255  111D13        	 ld DE,map_memry_top
  1258  016000        	 ld BC,96
  125B  EDB0          	 ldir
  125D  119D13        	 ld DE,map_memry_left
  1260  3E07          	 ld A,7
  1262  13            	 inc DE
  1263                	map_make_l:
  1263  F5            	 push AF
  1264  010F00        	 ld BC,15
  1267  EDB0          	 ldir
  1269  13            	 inc DE
  126A  13            	 inc DE
  126B  F1            	 pop AF
  126C  3D            	 dec A
  126D  20F4          	 jr nz,map_make_l
  126F  111E06        	 ld DE,061eh
  1272  DD211D13      	 ld IX,map_memry_top
  1276  FD219D13      	 ld IY,map_memry_left
                      	
  127A                	map_make_l_l:
  127A  DD7E00        	 ld A,(IX)
  127D  E680          	 and t
  127F  2808          	 jr z,map_make_Xe
  1281  D5            	 push DE
  1282  212514        	 ld HL,graph_wall+0
  1285  CD3114        	 call grp_set
  1288  D1            	 pop DE
  1289                	map_make_Xe:
  1289  DD23          	 inc IX
                      	
  128B  FD7E00        	 ld A,(IY)
  128E  E680          	 and t
  1290  280F          	 jr z,map_make_Ye
  1292  D5            	 push DE
  1293  212B14        	 ld HL,graph_wall+6
  1296  15            	 dec D
  1297  15            	 dec D
  1298  15            	 dec D
  1299  15            	 dec D
  129A  15            	 dec D
  129B  15            	 dec D
  129C  1D            	 dec E
  129D  CD3114        	 call grp_set
  12A0  D1            	 pop DE
  12A1                	map_make_Ye:
  12A1  FD23          	 inc IY
                      	
  12A3  3E07          	 ld A,7
  12A5  83            	 add A,E
  12A6  5F            	 ld E,A
  12A7  FE8E          	 cp 142
  12A9  C27A12        	 jp nz,map_make_l_l
                      	 
  12AC  3E07          	 ld A,7
  12AE  82            	 add A,D
  12AF  57            	 ld D,A
  12B0  FE37          	 cp 55
  12B2  2807          	 jr z,map_make_end
  12B4  1E1E          	 ld E,1eh
  12B6  FD23          	 inc IY
  12B8  C37A12        	 jp map_make_l_l
  12BB                	map_make_end:
                      	;**********************left right wall***********************
  12BB  0E02          	 ld c,2
  12BD  3E1B          	 ld A,27
  12BF  32C712        	 ld (Stating_before_mkwall1+1),A
  12C2                	Stating_before_mkwall2
  12C2  1600          	 ld D,0
  12C4  0606          	 ld B,6
  12C6                	Stating_before_mkwall1:
  12C6  1E00          	 ld E,overwrite
  12C8  C5            	 push BC
  12C9  D5            	 push DE
  12CA  21C103        	 ld HL,wall_grp
  12CD  0603          	 ld B,3
  12CF  CD3314        	 call grp_set+2
  12D2  D1            	 pop DE
  12D3  C1            	 pop BC
  12D4  3E08          	 ld A,8
  12D6  82            	 add A,D
  12D7  57            	 ld D,A
  12D8  10EC          	 djnz Stating_before_mkwall1
  12DA  3E8D          	 ld A,141
  12DC  32C712        	 ld (Stating_before_mkwall1+1),A
  12DF  0D            	 dec C
  12E0  20E0          	 jr nz,Stating_before_mkwall2
                      	
                      	;**************************wall dot set***********************
                      	
  12E2  0E0F          	 ld c,15
  12E4  3E24          	 ld A,36
  12E6  32EE12        	 ld (Stating_before_mkwall11+1),A
  12E9                	Stating_before_mkwall21
  12E9  1606          	 ld D,6
  12EB  0606          	 ld B,6
  12ED                	Stating_before_mkwall11:
  12ED  1E00          	 ld E,overwrite
  12EF  C5            	 push BC
  12F0  D5            	 push DE
  12F1  21C403        	 ld HL,pole_grp
  12F4  0601          	 ld B,1
  12F6  CD3314        	 call grp_set+2
  12F9  D1            	 pop DE
  12FA  C1            	 pop BC
  12FB  3E07          	 ld A,7
  12FD  82            	 add A,D
  12FE  57            	 ld D,A
  12FF  10EC          	 djnz Stating_before_mkwall11
  1301  3AEE12        	 ld A,(Stating_before_mkwall11+1)
  1304  C607          	 add A,7
  1306  32EE12        	 ld (Stating_before_mkwall11+1),A
  1309  0D            	 dec C
  130A  20DD          	 jr nz,Stating_before_mkwall21
  130C  C9            	 ret
                      	
                      	
                      	
                      	
  130D  FFFFFFFFFFFFFF	 db 0ffh,0ffh,0ffh,0ffh,0ffh,0ffh,0ffh,0ffh,0ffh,0ffh,0ffh,0ffh,0ffh,0ffh,0ffh,0ffh;16
  131D                	map_memry_top:;1(ture or false)0000000(loop count,7fh=Outer wall)b
  131D                	 ds 16
  132D                	 ds 16
  133D                	 ds 16
  134D                	 ds 16
  135D                	 ds 16
  136D                	 ds 16
  137D  FFFFFFFFFFFFFF	 db 0ffh,0ffh,0ffh,0ffh,0ffh,0ffh,0ffh,0ffh,0ffh,0ffh,0ffh,0ffh,0ffh,0ffh,0ffh,0ffh;16
  138D  FFFFFFFFFFFFFF	 db 0ffh,0ffh,0ffh,0ffh,0ffh,0ffh,0ffh,0ffh,0ffh,0ffh,0ffh,0ffh,0ffh,0ffh,0ffh,0ffh;16
                      	
                      	
                      	
  139D                	map_memry_left:;1(ture or false)0000000(loop count,7fh=Outer wall)b
  139D  FF            	 db 0ffh
  139E                	 ds 15
  13AD  FF            	 db 0ffh
  13AE  FF            	 db 0ffh
  13AF                	 ds 15
  13BE  FF            	 db 0ffh
  13BF  FF            	 db 0ffh
  13C0                	 ds 15
  13CF  FF            	 db 0ffh
  13D0  FF            	 db 0ffh
  13D1                	 ds 15
  13E0  FF            	 db 0ffh
  13E1  FF            	 db 0ffh
  13E2                	 ds 15
  13F1  FF            	 db 0ffh
  13F2  FF            	 db 0ffh
  13F3                	 ds 15
  1402  FF            	 db 0ffh
  1403  FF            	 db 0ffh
  1404                	 ds 15
  1413  FF            	 db 0ffh
  1414  FF            	 db 0ffh
                      	 
  1415                	 ds 15
  1424  FF            	 db 0ffh
  1425                	graph_wall:
  1425  010101010101  	 db 1,1,1,1,1,1
  142B  3F0000000000  	 db 3fh,0,0,0,0,0
                      	
                      	
                      	
  1431                	grp_set:;HL_data,DE_(y,x),B_databit
  1431  0606          	 ld B,6
                      	;
                      	
  1433  7A            	 ld A,D
  1434  E6C0          	 and 11000000b
  1436  281F          	 jr z,grp_set_0
  1438  FE80          	 cp 80h
  143A  3814          	 jr c,grp_set_1
  143C  2809          	 jr z,grp_set_2
                      	;left
  143E  3E12          	 ld A,18
  1440  85            	 add A,L
  1441  6F            	 ld L,A
  1442  3013          	 jr nc,grp_set_0
  1444  24            	 inc H
  1445  1810          	 jr grp_set_0
                      	;dowm
  1447                	grp_set_2:
  1447  3E0C          	 ld A,12
  1449  85            	 add A,L
  144A  6F            	 ld L,A
  144B  300A          	 jr nc,grp_set_0
  144D  24            	 inc H
  144E  1807          	 jr grp_set_0
                      	;right
  1450                	grp_set_1:
  1450  3E06          	 ld A,6
  1452  85            	 add A,L
  1453  6F            	 ld L,A
  1454  3001          	 jr nc,grp_set_0
  1456  24            	 inc H
                      	
                      	;up,non direction
  1457                	grp_set_0:
  1457  7B            	 ld A,E
  1458  327E14        	 ld (grp_set_or1+1),A
  145B  7A            	 ld A,D
  145C  E63F          	 and 3fh
  145E  1600          	 ld D,0
  1460                	grp_set_set1:
  1460  14            	 inc D
  1461  D608          	 sub 8
  1463  30FB          	 jr nc,grp_set_set1
  1465  15            	 dec D
  1466  C608          	 add A,8
  1468                	grp_set_set2:
  1468  328714        	 ld (grp_set_shiftd_bit+1),A
  146B  4F            	 ld C,A
  146C  3E08          	 ld A,8
  146E  91            	 sub C
  146F  32AD14        	 ld (grp_set_shiftu_bit+1),A
                      	
  1472                	grp_set_shiftd:
  1472  7A            	 ld A,D			;line number
  1473  E5            	 push HL					;HL
  1474  21BE15        	 ld HL,grapu_area
  1477  119000        	 ld DE,144
  147A  CD650F        	 call xsan		;y+
  147D                	grp_set_or1:
  147D  1E00          	 ld E,overwrite
  147F  1600          	 ld D,0
  1481  19            	 add HL,DE		;x+
  1482  EB            	 ex DE,HL
  1483  E1            	 pop HL			;data
  1484  E5            	 push HL					;HL
  1485  C5            	 push BC						;BC
  1486                	grp_set_shiftd_bit:
  1486  0E00          	 ld C,overwrite		;shift bit count
  1488  7E            	 ld A,(HL)
  1489  08            	 ex AF,AF'
  148A  79            	 ld A,C
  148B  B7            	 or A
  148C  2807          	 jr z,grp_set_shiftd_bit_2
  148E  08            	 ex AF,AF'
  148F                	grp_set_shiftd_bit_l:
  148F  CB27          	 sla A
  1491  0D            	 dec C
  1492  20FB          	 jr nz,grp_set_shiftd_bit_l
  1494  08            	 ex AF,AF'
  1495                	grp_set_shiftd_bit_2:
  1495  08            	 ex AF,AF'
  1496  4F            	 ld C,A
  1497  1A            	 ld A,(DE)
  1498                	grp_set_change1:
  1498  B1            	 or C
  1499  12            	 ld (DE),A
  149A                	grp_set_shiftd_l:
  149A  23            	 inc HL
  149B  13            	 inc DE
  149C  10E8          	 djnz grp_set_shiftd_bit
                      	
                      	; dec DE
                      	
  149E  EB            	 ex DE,HL
  149F  119000        	 ld DE,144
  14A2  19            	 add HL,DE
                      	
                      	
  14A3  C1            	 pop BC						;HL
  14A4  7D            	 ld A,L
  14A5  90            	 sub B
  14A6  3001          	 jr nc,grp_set_shiftu_bit_b
  14A8  25            	 dec H
  14A9                	grp_set_shiftu_bit_b:
  14A9  6F            	 ld L,A
  14AA  EB            	 ex DE,HL
                      	
  14AB  E1            	 pop HL			;data2
  14AC                	grp_set_shiftu_bit:
  14AC  0E00          	 ld C,overwrite		;shift bit count
  14AE  7E            	 ld A,(HL)
  14AF                	grp_set_shiftu_bit_l
  14AF  CB3F          	 srl A
  14B1  0D            	 dec C
  14B2  20FB          	 jr nz,grp_set_shiftu_bit_l
  14B4  4F            	 ld C,A
  14B5  1A            	 ld A,(DE)
  14B6                	grp_set_change2:
  14B6  B1            	 or C
  14B7  12            	 ld (DE),A
  14B8                	grp_set_shiftu_l:
  14B8  23            	 inc HL
  14B9  13            	 inc DE
  14BA  10F0          	 djnz grp_set_shiftu_bit
                      	
                      	; call grp_o;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
  14BC  C9            	 ret
                      	
                      	
                      	
                      	
                      	
                      	
                      	
                      	
                      	
  14BD                	grp_del:;HL_data,DE_(y,x),B_databit
  14BD  212815        	 ld HL,del_graph
  14C0  0606          	 ld B,6
  14C2  7B            	 ld A,E
  14C3  32E914        	 ld (grp_set_or1d+1),A
  14C6  7A            	 ld A,D
  14C7  E63F          	 and 3fh
  14C9  1600          	 ld D,0
  14CB                	grp_set_set1d:
  14CB  14            	 inc D
  14CC  D608          	 sub 8
  14CE  30FB          	 jr nc,grp_set_set1d
  14D0  15            	 dec D
  14D1  C608          	 add A,8
  14D3                	grp_set_set2d:
  14D3  32F214        	 ld (grp_set_shiftd_bitd+1),A
  14D6  4F            	 ld C,A
  14D7  3E08          	 ld A,8
  14D9  91            	 sub C
  14DA  321815        	 ld (grp_set_shiftu_bitd+1),A
                      	
  14DD                	grp_set_shiftdd:
  14DD  7A            	 ld A,D			;line number
  14DE  E5            	 push HL					;HL
  14DF  21BE15        	 ld HL,grapu_area
  14E2  119000        	 ld DE,144
  14E5  CD650F        	 call xsan		;y+
  14E8                	grp_set_or1d:
  14E8  1E00          	 ld E,overwrite
  14EA  1600          	 ld D,0
  14EC  19            	 add HL,DE		;x+
  14ED  EB            	 ex DE,HL
  14EE  E1            	 pop HL			;data
  14EF  E5            	 push HL					;HL
  14F0  C5            	 push BC						;BC
  14F1                	grp_set_shiftd_bitd:
  14F1  0E00          	 ld C,overwrite		;shift bit count
  14F3  7E            	 ld A,(HL)
  14F4  08            	 ex AF,AF'
  14F5  79            	 ld A,C
  14F6  B7            	 or A
  14F7  2807          	 jr z,grp_set_shiftd_bit_2d
  14F9  08            	 ex AF,AF'
  14FA                	grp_set_shiftd_bit_ld:
  14FA  37            	 scf
  14FB  17            	 rla
  14FC  0D            	 dec C
  14FD  20FB          	 jr nz,grp_set_shiftd_bit_ld
  14FF  08            	 ex AF,AF'
  1500                	grp_set_shiftd_bit_2d:
  1500  08            	 ex AF,AF'
  1501  4F            	 ld C,A
  1502  1A            	 ld A,(DE)
  1503                	grp_set_change1d:
  1503  A1            	 and C
  1504  12            	 ld (DE),A
  1505                	grp_set_shiftd_ld:
  1505  23            	 inc HL
  1506  13            	 inc DE
  1507  10E8          	 djnz grp_set_shiftd_bitd
                      	
                      	; dec DE
                      	
  1509  EB            	 ex DE,HL
  150A  119000        	 ld DE,144
  150D  19            	 add HL,DE
                      	
                      	
  150E  C1            	 pop BC						;HL
  150F  7D            	 ld A,L
  1510  90            	 sub B
  1511  3001          	 jr nc,grp_set_shiftu_bit_bd
  1513  25            	 dec H
  1514                	grp_set_shiftu_bit_bd:
  1514  6F            	 ld L,A
  1515  EB            	 ex DE,HL
                      	
  1516  E1            	 pop HL			;data2
  1517                	grp_set_shiftu_bitd:
  1517  0E00          	 ld C,overwrite		;shift bit count
  1519  7E            	 ld A,(HL)
  151A                	grp_set_shiftu_bit_ld
  151A  37            	 scf
  151B  1F            	 rra
  151C  0D            	 dec C
  151D  20FB          	 jr nz,grp_set_shiftu_bit_ld
  151F  4F            	 ld C,A
  1520  1A            	 ld A,(DE)
  1521                	grp_set_change2d:
  1521  A1            	 and C
  1522  12            	 ld (DE),A
  1523                	grp_set_shiftu_ld:
  1523  23            	 inc HL
  1524  13            	 inc DE
  1525  10F0          	 djnz grp_set_shiftu_bitd
  1527  C9            	 ret
                      	
  1528                	del_graph:
  1528  C0C0C0C0C0C0  	 db 0c0h,0c0h,0c0h,0c0h,0c0h,0c0h
                      	
                      	
                      	; ds 144
                      	; ds 144
                      	
  152E                	 ds 144
  15BE                	grapu_area:
  15BE                	 ds 144*6
  191E                	 ds 144
                      	 
                      	; ds 144
                      	; ds 144
                      	;********************************Graphics**********************************
  19AE                	graph_title:
  19AE  00000000000000	 db 00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,80h,60h,80h,00,00,0C0h,30h,0Ch,08h,30h,0C0h,0C0h,30h,08h,10h,0E0h,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00
  19E0  00000000000000	 db 00,00,00,00,00,00,00,00,00,80h,0C0h,00,00,80h,60h,10h,18h,06h,01h,00h,01h,0Eh,03h,00,00,00,00,00,00,01,00,00,00,03,0Ch,30h,40h,080h,00,80h,0E0h,00,00,00,00,00,00,00,00,00
  1A12  000000000000C0	 db 00,00,00,00,00,00,0C0h,30h,0Eh,01h,4Fh,66h,0F1h,0E0h,0F0h,58h,58h,40h,20h,80h,0E0h,0F8h,80h,0F0h,0C0h,0E0h,0F0h,0D8h,68h,0A9h,0C3h,42h,82h,86h,84h,0Ch,18h,79h,0F6h,0E1h,0C1h,86h,38h,0C0h,00,00,00,00,00,00
  1A44  00804020180601	 db 00,80h,40h,20h,18h,06h,01h,00,00,00,00,0Fh,3Fh,7Fh,0FEh,0F8h,0F8h,0F0h,0FEh,0FFh,0FFh,0FFh,0FFh,0FFh,0FFh,0FFh,0FFh,0FFh,0FFh,0FFh,0FFh,0FFh,0FFh,7Eh,7Eh,7Dh,7Dh,78h,7Dh,3Fh,1Fh,0Fh,00,00,03h,0Ch,70h,80h,00,00
  1A76  00FF0000000000	 db 00,0FFh,00,00,00,00,00,00,00,0F8h,08,08,0F0h,00,0FCh,02Eh,06Fh,0D7h,07,7Fh,80h,00,0F8h,00,0F0h,50h,4Ch,4Eh,0FFh,07,0F7h,0Fh,4Eh,4Ch,0D4h,00,0F0h,50h,48h,48h,0F8h,00,00,00,00,00,00,0Fh,30h,0C0h
  1AA8  78474040404044	 db 78h,47h,40h,40h,40h,40h,44h,44h,44h,45h,45h,45h,44h,44h,45h,44h,44h,45h,44h,44h,45h,45h,45h,44h,45h,44h,44h,44h,45h,44h,44h,45h,45h,45h,45h,44h,45h,44h,44h,44h,45h,44h,44h,44h,40h,40h,40h,40h,40h,7Fh
                      	
                      	;***********************gil graph***************************
                      	
  1ADA                	graph_gil_ulf:
  1ADA  000C3F1F0C00  	 db 00,0Ch,3Fh,1Fh,0Ch,00
  1AE0                	graph_gil_rlf:
  1AE0  00003F3F0C00  	 db 00,00,3Fh,3Fh,0Ch,00
  1AE6                	graph_gil_dlf:
  1AE6  000C1F370C00  	 db 00,0Ch,1Fh,37h,0Ch,00
  1AEC                	graph_gil_llf:
  1AEC  000C3F3F0000  	 db 00,0Ch,3Fh,3Fh,00,00
                      	
  1AF2                	graph_gil_urf:
  1AF2  000C1F3F0C00  	 db 00,0Ch,1Fh,3Fh,0Ch,00
  1AF8                	graph_gil_rrf:
  1AF8  00201F1F2C00  	 db 00,20h,1Fh,1Fh,2Ch,00
  1AFE                	graph_gil_drf:
  1AFE  000C3F170C00  	 db 00,0Ch,3Fh,17h,0Ch,00
  1B04                	graph_gil_lrf:
  1B04  002C1F1F2000  	 db 00,2Ch,1Fh,1Fh,20h,00
                      	
  1B0A                	graph_gilsw_ulf:
  1B0A  000C3F1F0C08  	 db 00,0Ch,3Fh,1Fh,0Ch,08
  1B10  080C3F3F0C00  	 db 08h,0Ch,3Fh,3Fh,0Ch,00
  1B16  080C1F370C00  	 db 08,0Ch,1Fh,37h,0Ch,00
  1B1C  000C3F3F0C08  	 db 00,0Ch,3Fh,3Fh,0Ch,08
                      	;graph_gilsw_urf:
  1B22  000C1F3F0C08  	 db 00,0Ch,1Fh,3Fh,0Ch,08
  1B28  082C1F1F2C00  	 db 08,2Ch,1Fh,1Fh,2Ch,00
  1B2E  080C3F170C00  	 db 08,0Ch,3Fh,17h,0Ch,00
  1B34  002C1F1F2C08  	 db 00,2Ch,1Fh,1Fh,2Ch,08
                      	
  1B3A                	graph_gilsword_ulf:
  1B3A  1E0C3F1F0407  	 db 1Eh,0Ch,3Fh,1Fh,04h,07h
  1B40  000E3F3F0808  	 db 00,0Eh,3Fh,3Fh,08,08
  1B46  38041F3F0C1E  	 db 38h,04h,1Fh,3Fh,0Ch,1Eh
  1B4C  08083F3F0E00  	 db 08,08,3Fh,3Fh,0Eh,00
                      	;graph_gilsword_ulf:
  1B52  1E0C1F3F0407  	 db 1Eh,0Ch,1Fh,3Fh,04,07
  1B58  002E1F1F2808  	 db 00,2Eh,1Fh,1Fh,28h,08
  1B5E  38043F1F0C1E  	 db 38h,04h,3Fh,1Fh,0Ch,1Eh
  1B64  08281F1F2E00  	 db 08,28h,1Fh,1Fh,2Eh,00
                      	
                      	;********************enemy graph*************************
                      	
  1B6A                	graph_sraimd:
  1B6A  00181C1C1800  	 db 00,18h,1Ch,1Ch,18h,00
  1B70                	graph_sraimu:
  1B70  00181C1C1800  	 db 00,18h,1Ch,1Ch,18h,00
  1B76                	graph_sraimd1:
  1B76  000C1A1E0C00  	 db 00,0Ch,1Ah,1Eh,0Ch,00
  1B7C                	graph_sraimu2:
  1B7C  000C1A1E0C00  	 db 00,0Ch,1Ah,1Eh,0Ch,00
                      	
  1B82                	magic:
  1B82  032E3F3F2E03  	 db 03,2Eh,3Fh,3Fh,2Eh,03
  1B88                	magicr:
  1B88  00203F3F2E18  	 db 00,20h,3Fh,3Fh,2Eh,18h
  1B8E                	magic3:
  1B8E  182E3F3F2E18  	 db 18h,2Eh,3Fh,3Fh,2Eh,18h
  1B94                	magic4:
  1B94  182E3F3F2000  	 db 18h,2Eh,3Fh,3Fh,20h,00
                      	 
  1B9A                	graph_goast:
  1B9A  030E1F1F0E03  	 db 03,0Eh,1Fh,1Fh,0Eh,03
  1BA0  10181E1F0F1A  	 db 10h,18h,1Eh,1Fh,0Fh,1Ah
  1BA6  180E1F1F0E18  	 db 18h,0Eh,1Fh,1Fh,0Eh,18h
  1BAC  1A0F1F1E1810  	 db 1Ah,0Fh,1Fh,1Eh,18h,10h
                      	 
  1BB2                	graph_spell:
  1BB2  000018180000  	 db 00,00,18h,18h,00,00
  1BB8  000018180000  	 db 00,00,18h,18h,00,00
  1BBE  000018180000  	 db 00,00,18h,18h,00,00
  1BC4  000018180000  	 db 00,00,18h,18h,00,00
                      	 
                      	
  1BCA                	graph_n_knightu:;r foot
  1BCA  000C1F3F0407  	 db 00,0Ch,1Fh,3Fh,04,07
  1BD0                	graph_n_knightr:
  1BD0  00201F1F2808  	 db 00,20h,1Fh,1Fh,28h,08
  1BD6                	graph_n_knightd:
  1BD6  38043F1F0C00  	 db 38h,04h,3Fh,1Fh,0Ch,00
  1BDC                	graph_n_knightl:
  1BDC  08281F1F2000  	 db 08,28h,1Fh,1Fh,20h,00
                      	 
                      	;graph_n_knightu:;l foot
  1BE2  000C3F1F0407  	 db 00,0Ch,3Fh,1Fh,04h,07h
                      	;graph_n_knightr:
  1BE8  00003F3F0808  	 db 00,00,3Fh,3Fh,08h,08
                      	;graph_n_knightd:
  1BEE  38041F3F0C00  	 db 38h,04h,1Fh,3Fh,0Ch,00
                      	;graph_n_knightl:
  1BF4  08083F3F0000  	 db 08,08,3Fh,3Fh,00,00
                      	
                      	
                      	;******************item graph*******************************
                      	
  1BFA                	graph_key:
  1BFA  20283A0D0200  	 db 20h,28h,3Ah,0Dh,02,00
  1C00                	graph_door:
  1C00  3E29293D293E  	 db 3Eh,29h,29h,3Dh,29h,3Eh
  1C06  3E3F3F3F3F3E  	 db 3Eh,3Fh,3Fh,3Fh,3Fh,3Eh
  1C0C                	graph_box:
  1C0C  1C161A161E0E  	 db 1Ch,16h,1Ah,16h,1Eh,0Eh
  1C12                	graph_matk:
  1C12  3D0E070B1121  	 db 3Dh,0Eh,07h,0Bh,11h,21h
  1C18                	graph_boot:
  1C18  20303E3E140A  	 db 20h,30h,3Eh,3Eh,14h,0Ah
  1C1E                	graph_po:
  1C1E  302827272830  	 db 30h,28h,27h,27h,28h,30h
  1C24                	graph_rod
  1C24  030304081020  	 db 03h,03h,04h,08h,10h,20h
  1C2A                	graph_brns:
  1C2A  30281C322A3C  	 db 30h,28h,1Ch,32h,2Ah,3Ch
  1C30                	graph_kndl:
  1C30  0020203A2020  	 db 00,20h,20h,3Ah,20h,20h
  1C36                	graph_armor:
  1C36  010F3A2E3A0F  	 db 01,0Fh,3Ah,2Eh,3Ah,0Fh
  1C3C                	graph_sword:
  1C3C  03072E3C182C  	 db 03,07h,2Eh,3Ch,18h,2Ch
  1C42                	graph_shield:
  1C42  1F33272D391F  	 db 1Fh,33h,27h,2Dh,39h,1Fh
  1C48                	graph__meis:
  1C48  1E1F0F1F3B30  	 db 1Eh,1Fh,0Fh,1Fh,3Bh,30h
                      	
                      	
                      	
  1C4E                	dammy:
                      	;1:sraim count
                      	;2:spell count
  1C4E  000000000000  	 db 0,0,0,0,0,0
  1C54  000000000000  	 db 0,0,0,0,0,0
  1C5A  000000000000  	 db 0,0,0,0,0,0
  1C60  000000000000  	 db 0,0,0,0,0,0
                      	;************************************Data**************************************
  1C66                	obj_1:
  1C66  01010101010101	 db 1,1,1,1,1,1,1,1,83h,84h,85h,8fh,0
  1C73  01010101010102	 db 1,1,1,1,1,1,2,2,83h,84h,85h,8fh,0
  1C80  21210101010183	 db 21h,21h,1,1,1,1,83h,84h,85h,8fh,0
  1C8B  02020202020211	 db 2,2,2,2,2,2,11h,83h,84h,85h,8fh,0
  1C97  01010101111111	 db 1,1,1,1,11h,11h,11h,11h,11h,83h,84h,85h,8fh,0
                      	
                      	
  1CA5                	Map_data:;96+105=201byte
                      	 
                      	 
  1CA5  00008080800000	 db f,f,t,t,t,f,f,f,f,f,f,t,f,t,f,f
  1CB5  00000080008000	 db f,f,f,t,f,t,f,t,f,t,t,f,t,t,f,t
  1CC5  80008080000080	 db t,f,t,t,f,f,t,f,f,f,f,f,t,f,f,t
  1CD5  00008080808000	 db f,f,t,t,t,t,f,t,f,t,f,f,f,t,f,f
  1CE5  00008080808000	 db f,f,t,t,t,t,f,t,t,f,f,t,f,t,f,t
  1CF5  80008000008000	 db t,f,t,f,f,t,f,f,t,t,f,t,t,t,f,t
                      	
  1D05  80000000000080	 db t,f,f,f,f,f,t,f,t,t,f,f,f,f,t
  1D14  00800000808000	 db f,t,f,f,t,t,f,t,f,f,f,t,f,t,f
  1D23  80800080800000	 db t,t,f,t,t,f,f,t,t,t,t,f,t,t,f
  1D32  80800000008080	 db t,t,f,f,f,t,t,t,f,f,t,t,f,t,f
  1D41  80000000800080	 db t,f,f,f,t,f,t,f,t,t,t,t,t,f,t
  1D50  00008000000000	 db f,f,t,f,f,f,f,f,f,t,f,f,t,f,f
  1D5F  00800080008080	 db f,t,f,t,f,t,t,f,f,f,f,f,t,f,f
                      	 
  1D6E  00000000000000	 db f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f;d
  1D7E  00000000000000	 db f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f
  1D8E  00000000000000	 db f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f
  1D9E  00000000000000	 db f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f
  1DAE  00000000000000	 db f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f
  1DBE  00000000000000	 db f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f
                      	
  1DCE  00000000000000	 db f,f,f,f,f,f,f,f,f,f,f,f,f,f,f
  1DDD  00000000000000	 db f,f,f,f,f,f,f,f,f,f,f,f,f,f,f
  1DEC  00000000000000	 db f,f,f,f,f,f,f,f,f,f,f,f,f,f,f
  1DFB  00000000000000	 db f,f,f,f,f,f,f,f,f,f,f,f,f,f,f
  1E0A  00000000000000	 db f,f,f,f,f,f,f,f,f,f,f,f,f,f,f
  1E19  00000000000000	 db f,f,f,f,f,f,f,f,f,f,f,f,f,f,f
  1E28  00000000000000	 db f,f,f,f,f,f,f,f,f,f,f,f,f,f,f
  1E37                	 ds 201*59
                      	 
  4C8A                	hp_table1:
  4C8A  01010101010101	 db 1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1
  4C9A                	hp_table2:
  4C9A  01010101181818	 db 1,1,1,1,24,24,24,1,1
  4CA3                	hp_table3:
  4CA3  18303060609060	 db 24,48,48,96,96,144,96
  4CAA                	hp_table4:
  4CAA  30507001181818	 db 48,80,112,1,24,24,24,96
  4CB2                	hp_table5:
  4CB2  01010101010101	 db 1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,10110000b
                      	 
                      	;**********************************Variable**************************************
  4CC2  00            	floor:db 0
  4CC3  0000          	pdoor_xy:dw 0		;83h
  4CC5  0000          	pkey_xy:dw 0		;85h
  4CC7  0000          	pgil_xy:dw 0		;84h,8fh
  4CC9                	obj:ds 48
  4CF9                	obj_hp:ds 48
  4D29                	obj_wp:ds 48
  4D59                	obj_st:ds 48
  4D89                	obj_xy:ds 96;(x,y&d)
  4DE9                	obj_st2:ds 48
  4E19                	obj_st3:ds 48
                      	
  4E49  00            	gil_button:db 0
  4E4A  00            	gil_hp:db 0
  4E4B  00            	gil_wp:db 0
  4E4C  00            	gil_st1:db 0	;00 or ffh:right foot or left foot
  4E4D  00            	gil_st2:db 0	;bit 0-6:counter,bit 7:sword set,if bit 7 enable and bit 0-6 > 0 dec (st2)
                      			;
  4E4E  00            	gil_matk:db 0	;1:c,2:s,3:g,0:none
  4E4F  00            	gil_matk_count:db 0	;matk use count.it is deced when use a matk.
  4E50  00            	gil_bt:db 0	;0ffh is dash enable.
  4E51  00            	gil_sword:db 0	;1:dragon,2:ex
  4E52  00            	gil_armor:db 0	;1 is hyper.
  4E53  00            	gil_gunt:db 0	;1 is hyper.
  4E54  00            	gil_shield:db 0	;1 is hyper.
  4E55  00            	gil_neck:db 0	;1:g,2:r,3:b.
                      	
  4E56                	gil_xy:ds 2
  4E58                	gil_dblock:ds 2
                      	
  4E5A                	Item:
  4E5A                	matk:
  4E5A  00            	 db 0
  4E5B                	boot:
  4E5B  00            	 db 0
  4E5C                	sword
  4E5C  00            	 db 0:
  4E5D                	armor
  4E5D  00            	 db 0:
  4E5E                	gntrt
  4E5E  00            	 db 0:
  4E5F                	shield:
  4E5F  00            	 db 0
  4E60                	hlmt:
  4E60  00            	 db 0
  4E61                	rod:
  4E61  00            	 db 0
  4E62                	book:
  4E62  00            	 db 0
  4E63                	kndl:
  4E63  00            	 db 0
  4E64                	brns:
  4E64  00            	 db 0
  4E65                	posion:
  4E65  00            	 db 0
  4E66                	key:
  4E66  00            	 db 0
                      	
                      	
  4E67                	end
