			  Z80 ASSEMBLER - ZASM VER 1.6
  0100                	org 0100h
                      	
  0000                	overwrite:equ 0
  001E                	x0:equ 30
  008C                	xm:equ 140
  0000                	y0:equ 0
  002F                	ym:equ 47
  0080                	t:equ 80h
  0000                	f:equ 0
                      	
  BFD0                	grp:equ 0bfd0h
  BFF1                	msp:equ 0bff1h
  BCFD                	kwait:equ 0bcfdh
  BE53                	kscan:equ 0be53h
                      	
                      	
                      	
                      	;*******************Title graph********************
  0100                	start:
  0100  210000        	 ld HL,0
  0103  39            	 add HL,SP
  0104  22C30A        	 ld (retP+1),HL
  0107  CD4B0B        	 call cls 
  010A  21EB14        	 ld HL,graph_title
  010D  110800        	 ld DE,0008h
  0110  0632          	 ld B,50
  0112  CD960B        	 call grp_open
  0115                	start_l:
  0115  3E01          	 ld A,1
  0117  329846        	 ld (floor),A
  011A  CDA50B        	 call keysc		;left,right,on,0,/,space,down,up
  011D  CB57          	 bit 2,A
  011F  C0            	 ret nz
  0120  CB5F          	 bit 3,A
  0122  2006          	 jr nz,before_game_c
  0124  CB6F          	 bit 5,A
  0126  2052          	 jr nz,Stating_before
  0128  18EB          	 jr start_l
                      	;*****************Continue*******************
  012A                	before_game_c:
  012A  CB6F          	 bit 5,A
  012C  28E7          	 jr z,start_l
  012E  CD4B0B        	 call cls
  0131  214903        	 ld HL,continue_ms
  0134  110201        	 ld DE,0102h
  0137  0612          	 ld B,18
  0139  CDF1BF        	 call msp
  013C  2A9846        	 ld HL,(floor)
  013F  2600          	 ld H,0
  0141  CD050B        	 call ascn
  0144                	before_game_c_floor:
  0144  2A9846        	 ld HL,(floor)
  0147  2600          	 ld H,0
  0149  CD050B        	 call ascn
  014C  21030B        	 ld HL,nmemry+3
  014F  110B03        	 ld DE,030bh
  0152  0602          	 ld B,2
  0154  CDF1BF        	 call msp
  0157  CDFDBC        	 call kwait
  015A  219846        	 ld HL,floor
  015D  FE1E          	 cp 1eh
  015F  2819          	 jr z,Stating_before
  0161  FE20          	 cp 20h
  0163  280C          	 jr z,before_game_c_u
  0165  FE1F          	 cp 1fh
  0167  20DB          	 jr nz,before_game_c_floor
  0169                	before_game_c_d:
  0169  35            	 dec (HL)
  016A  AF            	 xor A
  016B  BE            	 cp (HL)
  016C  20D6          	 jr nz,before_game_c_floor
  016E  34            	 inc (HL)
  016F  18D3          	 jr before_game_c_floor
  0171                	before_game_c_u:
  0171  34            	 inc (HL)
  0172  3E3D          	 ld A,61
  0174  BE            	 cp (HL)
  0175  20CD          	 jr nz,before_game_c_floor
  0177  35            	 dec (HL)
  0178  18CA          	 jr before_game_c_floor
                      	;***************Starting game****************
                      	;***************massage*********************
  017A                	Stating_before:
  017A  CD4B0B        	 call cls
  017D  213103        	 ld HL,stating_ms1
  0180  110801        	 ld DE,0108h
  0183  0609          	 ld B,9
  0185  CDF1BF        	 call msp
  0188  213A03        	 ld HL,stating_ms2
  018B  110802        	 ld De,0208h
  018E  060A          	 ld B,10
  0190  CDF1BF        	 call msp
  0193  214403        	 ld HL,stating_msf
  0196  110804        	 ld De,0408h
  0199  0605          	 ld B,5
  019B  CDF1BF        	 call msp
  019E  2A9846        	 ld HL,(floor)
  01A1  2600          	 ld H,0
  01A3  CD050B        	 call ascn
  01A6  21030B        	 ld HL,nmemry+3
  01A9  110E04        	 ld DE,040eh
  01AC  0602          	 ld B,2
  01AE  CDF1BF        	 call msp
  01B1  CDCE0A        	 call tim255
  01B4  CDFDBC        	 call kwait
                      	
                      	;***********************map set************************
  01B7  CDD30D        	 call Map_make
                      	
                      	
                      	;**********************left right wall***********************
  01BA  0E02          	 ld c,2
  01BC  3E1B          	 ld A,27
  01BE  32C601        	 ld (Stating_before_mkwall1+1),A
  01C1                	Stating_before_mkwall2
  01C1  1600          	 ld D,0
  01C3  0606          	 ld B,6
  01C5                	Stating_before_mkwall1:
  01C5  1E00          	 ld E,overwrite
  01C7  C5            	 push BC
  01C8  D5            	 push DE
  01C9  215B03        	 ld HL,wall_grp
  01CC  0603          	 ld B,3
  01CE  CD700F        	 call grp_set+2
  01D1  D1            	 pop DE
  01D2  C1            	 pop BC
  01D3  3E08          	 ld A,8
  01D5  82            	 add A,D
  01D6  57            	 ld D,A
  01D7  10EC          	 djnz Stating_before_mkwall1
  01D9  3E8D          	 ld A,141
  01DB  32C601        	 ld (Stating_before_mkwall1+1),A
  01DE  0D            	 dec C
  01DF  20E0          	 jr nz,Stating_before_mkwall2
                      	
                      	;**************************wall dot set***********************
                      	
  01E1  0E0F          	 ld c,15
  01E3  3E24          	 ld A,36
  01E5  32ED01        	 ld (Stating_before_mkwall11+1),A
  01E8                	Stating_before_mkwall21
  01E8  1606          	 ld D,6
  01EA  0606          	 ld B,6
  01EC                	Stating_before_mkwall11:
  01EC  1E00          	 ld E,overwrite
  01EE  C5            	 push BC
  01EF  D5            	 push DE
  01F0  215E03        	 ld HL,pole_grp
  01F3  0601          	 ld B,1
  01F5  CD700F        	 call grp_set+2
  01F8  D1            	 pop DE
  01F9  C1            	 pop BC
  01FA  3E07          	 ld A,7
  01FC  82            	 add A,D
  01FD  57            	 ld D,A
  01FE  10EC          	 djnz Stating_before_mkwall11
  0200  3AED01        	 ld A,(Stating_before_mkwall11+1)
  0203  C607          	 add A,7
  0205  32ED01        	 ld (Stating_before_mkwall11+1),A
  0208  0D            	 dec C
  0209  20DD          	 jr nz,Stating_before_mkwall21
                      	
                      	
                      	;********************************obj set***************************
                      	
                      	;***********************init************************
  020B                	stating_obj:
  020B  219F46        	 ld HL,obj
  020E  3600          	 ld (HL),0
  0210  11A046        	 ld DE,obj+1
  0213  012001        	 ld BC,48+48+48+96+48
  0216  EDB0          	 ldir
                      	;***********************obj countor**************
  0218  213717        	 ld HL,obj_1
  021B  3A9846        	 ld A,(floor)
  021E  3D            	 dec A
  021F  280B          	 jr Z,stating_obj_1
                      	
  0221  57            	 ld D,A
                      	;*********************0=end sign****next floor data***ldi loop**********
  0222                	stating_obj_2:
  0222  010000        	 ld BC,0
  0225  3E00          	 ld A,0
  0227  EDB1          	 cpir
  0229  15            	 dec D
  022A  20F6          	 jr nz,stating_obj_2
  022C                	stating_obj_1:
  022C  119F46        	 ld DE,obj
  022F                	stating_obj_3:
  022F  7E            	 ld A,(HL)
  0230  B7            	 or A
  0231  2804          	 jr z,stating_obj_7
  0233  EDA0          	 ldi
  0235  18F8          	 jr stating_obj_3
                      	
                      	;*********************obj cp= then goto mainbefore***************
                      	
  0237                	stating_obj_7:
  0237  219F46        	 ld HL,obj
  023A  110000        	 ld DE,0
  023D                	stating_obj_4:
  023D  AF            	 xor A
  023E  BE            	 cp (HL)
  023F  CABF02        	 jp z,main_before		;stating_obj_hp
  0242  E5            	 push HL
  0243  D5            	 push DE
                      	
                      	;x=x+7*A
  0244  ED5F          	 ld A,R;call rand
  0246  E60F          	 and 0fh		;a=0~15
  0248  211E00        	 ld HL,001eh	;30
  024B  110700        	 ld DE,0007h
  024E  CDF90A        	 call xsan
                      	
                      	
                      	;y=y+7*A
  0251  CDDE0A        	 call rand
  0254                	stating_obj_5:
  0254  D606          	 sub 6
  0256  30FC          	 jr nc,stating_obj_5
  0258  C606          	 add A,6
  025A  110007        	 ld DE,0700h
  025D  CDF90A        	 call xsan
                      	
  0260  D1            	 pop DE
  0261  E5            	 push HL		;xy
                      	
  0262  215F47        	 ld HL,obj_xy		;address
  0265  19            	 add HL,DE		;address+
                      	
  0266  CD7902        	 call stating_obj_hp_wp
                      	
  0269  19            	 add HL,DE		;address++
  026A  227002        	 ld (stating_obj_6+1),HL
                      	; add HL,DE		;address++(direction)
  026D  13            	 inc DE
                      	
  026E  E1            	 pop HL
                      	
                      	; ld HL,151eh;(30,0)
                      	
  026F                	stating_obj_6:
  026F  220000        	 ld (overwrite),HL
  0272  222C48        	 ld (gil_xy),HL
  0275  E1            	 pop  HL
  0276  23            	 inc HL
  0277  18C4          	 jr stating_obj_4
                      	
                      	;*********************obs  hp  wp set*********************
  0279                	stating_obj_hp_wp:
  0279  E5            	 push HL
  027A  D5            	 push DE
  027B  21AA02        	 ld HL,stating_obj_hp_wp6
  027E  E5            	 push HL
                      	
  027F  219F46        	 ld HL,obj
  0282  19            	 add HL,DE
  0283  7E            	 ld A,(HL)
  0284  E60F          	 and 0fh
  0286  CB7E          	 bit 7,(HL)
  0288  201C          	 jr nz,stating_obj_hp_wp5
  028A  CB76          	 bit 6,(HL)
  028C  2014          	 jr nz,stating_obj_hp_wp4
  028E  CB6E          	 bit 5,(HL)
  0290  200C          	 jr nz,stating_obj_hp_wp3
  0292  CB66          	 bit 4,(HL)
  0294  2004          	 jr nz,stating_obj_hp_wp2
  0296                	stating_obj_hp_wp1:
  0296  216346        	 ld HL,hp_table1
  0299  C9            	 ret
  029A                	stating_obj_hp_wp2:
  029A  217346        	 ld HL,hp_table2
  029D  C9            	 ret
  029E                	stating_obj_hp_wp3:
  029E  217C46        	 ld HL,hp_table3
  02A1  C9            	 ret
  02A2                	stating_obj_hp_wp4:
  02A2  218346        	 ld HL,hp_table4
  02A5  C9            	 ret
  02A6                	stating_obj_hp_wp5:
  02A6  218846        	 ld HL,hp_table5
  02A9  C9            	 ret
  02AA                	stating_obj_hp_wp6:
  02AA  5F            	 ld E,A
  02AB  1D            	 dec E
  02AC  1600          	 ld D,0
  02AE  19            	 add HL,DE
  02AF  7E            	 ld A,(HL)
  02B0  D1            	 pop DE
  02B1  21CF46        	 ld HL,obj_hp
  02B4  19            	 add HL,DE
  02B5  77            	 ld (HL),A
  02B6  E1            	 pop HL
  02B7  E67F          	 and 01111111b
                      	 ;********************************************************HP*******************************
  02B9  3E38          	 ld A,00111000b
  02BB  322048        	 ld (gil_hp),A
  02BE  C9            	 ret	;gil is end of data.
                      	
                      	
                      	
                      	;wall
                      	
                      	;****************before farse***pgil_xy set**************
                      	
  02BF                	main_before:
  02BF  2A2C48        	 ld HL,(gil_xy)
  02C2  229D46        	 ld (pgil_xy),HL 
  02C5  213717        	 ld HL,obj_1
  02C8  3A9846        	 ld A,(floor)
  02CB  3D            	 dec A
  02CC  2810          	 jr z,main_before_15
  02CE  57            	 ld D,A
  02CF  AF            	 xor A
  02D0  010000        	 ld BC,0
  02D3                	main_before_1:
  02D3  EDB1          	 cpir
  02D5  15            	 dec D
  02D6  20FB          	 jr nz,main_before_1
  02D8  219F46        	 ld HL,obj
  02DB  B7            	 or A
  02DC  ED42          	 sbc HL,BC		;it's start pointa**obj++
                      	
                      	
                      	;******************door set****************************
  02DE                	main_before_15:
  02DE  E5            	 push HL		;obj
  02DF  3E83          	 ld A,83h
  02E1  010000        	 ld BC,0
                      	;main_before_2:
  02E4  EDB1          	 cpir
  02E6  03            	 inc BC
  02E7  215F47        	 ld HL,obj_xy
  02EA  B7            	 or A
  02EB  ED42          	 sbc HL,BC
  02ED  B7            	 or A
  02EE  ED42          	 sbc HL,BC
  02F0  5E            	 ld E,(HL)
  02F1  23            	 inc HL
  02F2  56            	 ld D,(HL)
  02F3  ED539946      	 ld (pdoor_xy),DE
                      	
                      	;*****************key set*******************************
                      	
  02F7  E1            	 pop HL
  02F8  3E85          	 ld A,85h
  02FA  010000        	 ld BC,0
                      	;main_before_3:
  02FD  EDB1          	 cpir
  02FF  03            	 inc BC
  0300  215F47        	 ld HL,obj_xy
  0303  B7            	 or A
  0304  ED42          	 sbc HL,BC
  0306  B7            	 or A
  0307  ED42          	 sbc HL,BC
  0309  5E            	 ld E,(HL)
  030A  23            	 inc HL
  030B  56            	 ld D,(HL)
  030C  ED539B46      	 ld (pkey_xy),DE
                      	
                      	;*********************obj cross gil********************
                      	
  0310  2A2C48        	 ld HL,(gil_xy)
  0313  4D            	 ld C,L
  0314  44            	 ld B,H
  0315  215F47        	 ld HL,obj_xy
  0318                	main_before_gil:
  0318  E5            	 push HL
  0319  5E            	 ld E,(HL)
  031A  23            	 inc HL
  031B  56            	 ld D,(HL)
  031C  EB            	 ex DE,HL
  031D  B7            	 or A
  031E  ED42          	 sbc HL,BC
  0320  E1            	 pop HL
  0321  2804          	 jr z,main_before_gil_z
  0323  23            	 inc HL
  0324  23            	 inc HL
  0325  18F1          	 jr main_before_gil
  0327                	main_before_gil_z:
  0327  23            	 inc HL
  0328  23            	 inc HL
  0329  7E            	 ld A,(HL)
  032A  B7            	 or A
  032B  C20B02        	 jp nz,stating_obj
  032E  C35F03        	 jp main
                      	
                      	
                      	
                      	
                      	
                      	
                      	
  0331                	stating_ms1:
  0331  47455420524541	 db "GET READY"
  033A                	stating_ms2:
  033A  504C4159455220	 db "PLAYER ONE"
  0344                	stating_msf:
  0344  464C4F4F52    	 db "FLOOR"
  0349                	continue_ms:
  0349  53454C45435420	 db "SELECT START FLOOR"
  035B                	wall_grp:
  035B  FFFFFF        	 db 0ffh,0ffh,0ffh
  035E                	pole_grp:
  035E  01            	 db 1h
                      	;**************************************************************************************
                      	;************************************Main*********************************************
                      	;**************************************************************************************
  035F                	main:
  035F  CD7F0B        	 call grp_o
                      	; call tim30
  0362  3E30          	 ld A,48
  0364  327303        	 ld (count+1),A
  0367  215F47        	 ld HL,obj_xy
  036A  DD21CF46      	 ld IX,obj_hp
  036E  FD21BF47      	 ld IY,obj_st2
  0372                	mains:
                      	
  0372                	count:
  0372  3E00          	 ld A,overwrite
  0374  B7            	 or A
  0375  CA5F03        	 jp z,main
                      	;unknown_ID_throght(0)
  0378  DD7ED0        	 ld A,(IX-48)
  037B  B7            	 or A
  037C  CAAA0A        	 jp z,mains_end
                      	;count out then main
                      	
                      	;graph_delete
                      	
  037F  E5            	 push HL		;>
  0380  5E            	 ld E,(HL)
  0381  23            	 inc HL
  0382  56            	 ld D,(HL)
  0383  CDFA0F        	 call grp_del
  0386  E1            	 pop HL		;<
                      	;hp_zero_throght
                      	
  0387  DD7E00        	 ld A,(IX)
  038A  B7            	 or A
  038B  CAAA0A        	 jp z,mains_end
                      	
                      	
                      	
                      	
                      	;******************************ivent action **********************
                      	 
  038E  DD7ED0        	 ld A,(IX-48)
  0391  47            	 ld B,A
  0392  E6E0          	 and 0e0h
  0394  C21404        	 jp nz,st_action
  0397  78            	 ld A,B
  0398  FE0A          	 cp 0ah
  039A  CA1206        	 jp z,spells_action
  039D  FE0B          	 cp 0bh
  039F  CA1206        	 jp z,spells_action
                      	
                      	;wp
  03A2  DD7E30        	 ld A,(IX+48)
  03A5  B7            	 or A
                      	
                      	;wp=0
  03A6  CAB803        	 jp z,st_check
                      	
                      	
                      	
                      	;wp>0
  03A9  3D            	 dec A
  03AA  DD7730        	 ld (IX+48),A
  03AD  DD7ED0        	 ld A,(IX-48);(Syubetsu)
  03B0  CB67          	 bit 4,A
  03B2  CAB904        	 jp z,sraim_move3_e;(suraimuGPRINT)
  03B5  C35005        	 jp wizard_move_e_wpp
                      	; jp wizard_act_e
                      	; jp nz,mains_end
                      	; jp st_check
  03B8                	st_check:
  03B8  DD7E60        	 ld A,(IX+96)
  03BB  B7            	 or A
  03BC  C20D04        	 jp nz,st_dec
                      	
                      	;wp=0,st=0
                      	;wp setting((di)=move lutin)
                      	
  03BF  DD7ED0        	 ld A,(IX-48);(Syurui)
  03C2  CB67          	 bit 4,A
  03C4  2808          	 jr z,wp_str_b
  03C6  ED5F          	 ld A,R;		(wizard)
  03C8  E61F          	 and 00011111b
  03CA  CBEF          	 set 5,A
  03CC  182A          	 jr wp_str
  03CE                	wp_str_b:
  03CE  F5            	 push AF
  03CF  ED5F          	 ld A,R
  03D1  E67F          	 and 7fh
  03D3  47            	 ld B,A
  03D4  ED5F          	 ld A,R
  03D6  E67F          	 and 7fh
  03D8  80            	 add A,B
  03D9  47            	 ld B,A
  03DA  F1            	 pop AF
  03DB  FE02          	 cp 2
  03DD  3816          	 jr c,wp_G
  03DF  280F          	 jr z,wp_B
  03E1  FE04          	 cp 4
  03E3  78            	 ld A,B
  03E4  3806          	 jr c,wp_R
  03E6  2804          	 jr z,wp_BL
  03E8                	wp_D:
  03E8                	wp_DY:
  03E8  E608          	 and 8
  03EA  180C          	 jr wp_str
  03EC                	wp_BL:
  03EC                	wp_R:
  03EC  E610          	 and 16
  03EE  1808          	 jr wp_str
  03F0                	wp_B:
  03F0  78            	 ld A,B
  03F1  E608          	 and 8
  03F3  1803          	 jr wp_str
  03F5                	wp_G:
  03F5  78            	 ld A,B
  03F6  E610          	 and 16
  03F8                	wp_str:
  03F8  C608          	 add A,8
  03FA  DD7730        	 ld (IX+48),A
  03FD  3E19          	 ld A,25
  03FF  DD7760        	 ld (IX+96),A
                      	
  0402  DD7ED0        	 ld A,(IX-48);(Syubetsu)
  0405  CB67          	 bit 4,A
  0407  CAB904        	 jp z,sraim_move3_e;(suraimuGPRINT)
  040A  C35005        	 jp wizard_move_e_wpp;(wizard not print)mains_end
                      	; jp Egraph;
                      	
                      	
                      	
                      	;wp=0,st=x
  040D                	st_dec:
  040D  3D            	 dec A
  040E  DD7760        	 ld (IX+96),A
  0411  C34204        	 jp sraim_or_wiz_action
                      	 
                      	 
                      	;***********************************knight,quox,ivent*********************************
  0414                	st_action:;Individual action
                      	; call bls
  0414  DD7ED0        	 ld A,(IX-48)
  0417  CB6F          	 bit 5,A
  0419  C21207        	 jp nz,knight_action
  041C  FE8F          	 cp 8fh
  041E  CA1D09        	 jp z,gil_action
  0421  C3AA0A        	 jp mains_end
                      	
  0424  32F000        	 ld (0f0h),A
  0427  DD7ED0        	 ld A,(IX-48)
  042A  32F400        	 ld (0f4h),A
  042D  DD7E00        	 ld A,(IX-0)
  0430  32F500        	 ld (0f5h),A
  0433  DD7E30        	 ld A,(IX+48)
  0436  32F600        	 ld (0f6h),A
  0439  DD7E60        	 ld A,(IX+96)
  043C  32F700        	 ld (0f7h),A
  043F  C3C20A        	 jp retP
                      	
                      	
                      	
                      	
                      	
                      	
                      	
                      	
                      	
                      	
                      	
                      	
                      	
                      	
                      	
                      	
                      	
                      	
                      	
                      	;****************************************************************************
                      	;*********************************sraim or wiz*******************************
                      	
  0442                	sraim_or_wiz_action:;HL=obj_xy++
  0442  DDCBD066      	 bit 4,(IX-48);(NO.)
  0446  C2EE04        	 jp nz,wiz_action
                      	
                      	 ;;;;
                      	 ;;;;
  0449  DD7E60        	 ld A,(IX+96);(st)
                      	 
                      	; ld (0f0h),A
                      	; jp retP
                      	
  044C  FE09          	 cp 9
  044E  280B          	 jr z,sraim_move1_B
  0450  FE05          	 cp 5
  0452  2823          	 jr z,sraim_move1
  0454  FE01          	 cp 1
  0456  283F          	 jr z,sraim_move3
  0458  C3B904        	 jp sraim_move3_e;mains_end
                      	
                      	
  045B                	sraim_move1_B:
  045B  CDB90C        	 call wall_ck
  045E  2817          	 jr z,sraim_move1
  0460  23            	 inc HL
  0461  CBBE          	 res 7,(HL)
  0463  CBB6          	 res 6,(HL)
  0465  ED5F          	 ld A,R
                      	; rla
  0467  1F            	 rra
  0468  1F            	 rra
  0469  1F            	 rra
  046A  E6C0          	 and 0c0h
  046C  B6            	 or (HL)
  046D  77            	 ld (HL),A
  046E  2B            	 dec HL
  046F  3E50          	 ld A,80
  0471  DD7760        	 ld (IX+96),A
  0474  C3B904        	 jp sraim_move3_e
  0477                	sraim_move1:
                      	;graph_delete
                      	
                      	; push HL		;>
                      	; call bls
                      	; ld E,(HL)
                      	; inc HL
                      	; ld D,(HL)
                      	; call grp_del
                      	; pop HL		;<
                      	
                      	
  0477  23            	 inc HL
  0478  7E            	 ld A,(HL)
  0479  E6C0          	 and 0c0h
  047B  280B          	 jr z,sraim_move1_u
  047D  FE80          	 cp 80h
  047F  380C          	 jr c,sraim_move1_r
  0481  280F          	 jr z,sraim_move1_d
  0483                	sraim_move1_l:
  0483  2B            	 dec HL
  0484  35            	 dec (HL)
  0485  35            	 dec (HL)
  0486  1831          	 jr sraim_move3_e
  0488                	sraim_move1_u:
  0488  35            	 dec (HL)
  0489  35            	 dec (HL)
  048A  2B            	 dec HL
  048B  182C          	 jr sraim_move3_e
  048D                	sraim_move1_r:
  048D  2B            	 dec HL
  048E  34            	 inc (HL)
  048F  34            	 inc (HL)
  0490  1827          	 jr sraim_move3_e
  0492                	sraim_move1_d:
  0492  34            	 inc (HL)
  0493  34            	 inc (HL)
  0494  2B            	 dec HL
                      	
  0495  1822          	 jr sraim_move3_e
                      	
                      	
  0497                	sraim_move3:
                      	
  0497  23            	 inc HL
  0498  7E            	 ld A,(HL)
  0499  E6C0          	 and 0c0h
  049B  280C          	 jr z,sraim_move3_u
  049D  FE80          	 cp 80h
  049F  380E          	 jr c,sraim_move3_r
  04A1  2812          	 jr z,sraim_move3_d
  04A3                	sraim_move3_l:
  04A3  2B            	 dec HL
  04A4  35            	 dec (HL)
  04A5  35            	 dec (HL)
  04A6  35            	 dec (HL)
  04A7  1810          	 jr sraim_move3_e
  04A9                	sraim_move3_u:
  04A9  35            	 dec (HL)
  04AA  35            	 dec (HL)
  04AB  35            	 dec (HL)
  04AC  2B            	 dec HL
  04AD  180A          	 jr sraim_move3_e
  04AF                	sraim_move3_r:
  04AF  2B            	 dec HL
  04B0  34            	 inc (HL)
  04B1  34            	 inc (HL)
  04B2  34            	 inc (HL)
  04B3  1804          	 jr sraim_move3_e
  04B5                	sraim_move3_d:
  04B5  34            	 inc (HL)
  04B6  34            	 inc (HL)
  04B7  34            	 inc (HL)
  04B8  2B            	 dec HL
  04B9                	sraim_move3_e:
  04B9  11A716        	 ld DE,graph_sraimd
  04BC                	Egraph:;(DE=)
  04BC  ED53C504      	 ld (Egraph_put+1),DE
  04C0  E5            	 push HL		;>
  04C1  5E            	 ld E,(HL)
  04C2  23            	 inc HL
  04C3  56            	 ld D,(HL)
  04C4                	Egraph_put:
  04C4  210000        	 ld HL,overwrite
  04C7  CD6E0F        	 call grp_set
  04CA  E1            	 pop HL			;<
  04CB  DD7ED0        	 ld A,(IX-48)
  04CE  E6F8          	 and 11111000b
  04D0  CAD404        	 jp z,sraim_cross_ck;
  04D3  C9            	 ret
                      	 
  04D4                	sraim_cross_ck:
  04D4  3A2348        	 ld A,(gil_st2)
  04D7  CB7F          	 bit 7,A		;(gil sworud MIRU)
  04D9  2808          	 jr z,s1
  04DB  CD8A0C        	 call cross_ck_a;s
  04DE  DCAC0C        	 call c,cha_kill;(suraim HP=0)
  04E1  1808          	 jr s2
  04E3                	s1:;(gil_st=0-x)
  04E3  CD8A0C        	 call cross_ck_a
  04E6  3003          	 jr nc,s2
  04E8  C3880A        	 jp gil_killing
                      	 
  04EB                	s2:
                      	; jp c,retP
  04EB  C3AA0A        	 jp mains_end
                      	
                      	
                      	;******************wiz actions**Main***********************
  04EE                	wiz_action:
  04EE  FE18          	 cp 24
  04F0  CA1C05        	 jp z,wiz_ap
  04F3  FE0C          	 cp 12
  04F5  CA3E05        	 jp z,wiz_sp
  04F8  FD7E00        	 ld A,(IY)
  04FB  B7            	 or A
  04FC  C24405        	 jp nz,wiz_dec
  04FF                	wiz_dec2:
  04FF  11BF16        	 ld DE,magic
  0502  CDBC04        	 call Egraph
                      	;********************cross chack wiz*******************
  0505                	wizard_cross_ck;
  0505  3A2348        	 ld A,(gil_st2)
  0508  CB7F          	 bit 7,A		;(gil sworud MIRU)
  050A  2808          	 jr z,ss1
  050C  CD8A0C        	 call cross_ck_a;s
  050F  DCAC0C        	 call c,cha_kill;(suraim HP=0)
  0512  1805          	 jr ss2
  0514                	ss1:;(gil_st=0-x)
  0514  CD8A0C        	 call cross_ck_a
  0517  3000          	 jr nc,wizard_end
                      	; jp gil_killing
  0519                	ss2:
  0519                	wizard_end:
                      	;********************wiz end***************************
  0519  C3AA0A        	 jp mains_end
                      	
  051C                	wiz_ap:
                      	
  051C                	gil_notaction_f:
  051C  3A1F48        	 ld A,(gil_button)
  051F  DD3430        	 inc (IX+48)
  0522  DD3460        	 inc (IX+96)
  0525  E6C3          	 and 11000011b
  0527  CA1905        	 jp z,wizard_end
  052A  DD3530        	 dec (IX+48)
  052D  DD3560        	 dec (IX+96)
                      	 
  0530  DD7E60        	 ld A,(IX+96)
  0533  3E0A          	 ld A,10
  0535  FD7700        	 ld (IY),A
  0538  CD5305        	 call wiz_locate
  053B  C3FF04        	 jp wiz_dec2
  053E                	wiz_sp:
  053E  CDD005        	 call spell_create
  0541  C3FF04        	 jp wiz_dec2
  0544                	wiz_dec:
  0544  DD3460        	 inc (IX+96)
  0547  FD3500        	 dec (IY)
  054A  FD7E00        	 ld A,(IY)
  054D  C3FF04        	 jp wiz_dec2
                      	
                      	;***********************wp>0 then noting*********************
  0550                	wizard_move_e_wpp;wp>0
  0550  C3AA0A        	 jp mains_end
                      	
                      	;***********************wiz_locate**************************
  0553                	wiz_locate:
  0553  E5            	 push HL	;>
  0554  212C48        	 ld HL,gil_xy
  0557  5E            	 ld E,(HL);x
  0558  23            	 inc HL
  0559  56            	 ld D,(HL);y
                      	
                      	; ld A,E
                      	; ld (0f0h),A
                      	; ld A,D
                      	; ld (0f1h),A
                      	 
  055A  E1            	 pop HL		;<
  055B  ED5F          	 ld A,R
  055D  4F            	 ld C,A
  055E  ED5F          	 ld A,R
  0560  E603          	 and 00000011b
  0562  B7            	 or A
  0563  CA8105        	 jp z,wiz_locate_left
  0566  FE02          	 cp 2
  0568  DA9805        	 jp c,wiz_locate_down
  056B  CAAC05        	 jp z,wiz_locate_right
  056E                	wiz_locate_up:
  056E  7A            	 ld A,D
  056F  E63F          	 and 00111111b
  0571  D60E          	 sub 14
  0573  38DE          	 jr c,wiz_locate
  0575  F680          	 or 10000000b
  0577  57            	 ld D,A
                      	 
  0578  7B            	 ld A,E
  0579  77            	 ld (HL),A
  057A  23            	 inc HL
  057B  7A            	 ld A,D
  057C  77            	 ld (HL),A
  057D  2B            	 dec HL
                      	 
  057E  C3C405        	 jp wiz_locate_end
  0581                	wiz_locate_left;
  0581  7B            	 ld A,E
  0582  D60E          	 sub 14
  0584  FE1E          	 cp 30
  0586  38CB          	 jr c,wiz_locate
  0588  5F            	 ld E,A
                      	 
  0589  7A            	 ld A,D
  058A  E63F          	 and 00111111b
  058C  F640          	 or 01000000b
  058E  57            	 ld D,A
                      	 
  058F  7B            	 ld A,E
  0590  77            	 ld (HL),A
  0591  23            	 inc HL
  0592  7A            	 ld A,D
  0593  77            	 ld (HL),A
  0594  2B            	 dec HL
                      	 
  0595  C3C405        	 jp wiz_locate_end
  0598                	wiz_locate_down;
  0598  7A            	 ld A,D
  0599  E63F          	 and 00111111b
  059B  7A            	 ld A,D
  059C  C60E          	 add A,14
  059E  FE30          	 cp 47+1
  05A0  30B1          	 jr nc,wiz_locate
  05A2  57            	 ld D,A
                      	 
  05A3  7B            	 ld A,E
  05A4  77            	 ld (HL),A
  05A5  23            	 inc HL
  05A6  7A            	 ld A,D
  05A7  77            	 ld (HL),A
  05A8  2B            	 dec HL
                      	 
  05A9  C3C405        	 jp wiz_locate_end
  05AC                	wiz_locate_right;
  05AC  7B            	 ld A,E
  05AD  C60E          	 add A,14
  05AF  FE88          	 cp 135+1
  05B1  D25305        	 jp nc,wiz_locate
  05B4  5F            	 ld E,A
                      	 
  05B5  7A            	 ld A,D
  05B6  E63F          	 and 00111111b
  05B8  F6C0          	 or 11000000b
  05BA  57            	 ld D,A
                      	 
  05BB  7B            	 ld A,E
  05BC  77            	 ld (HL),A
  05BD  23            	 inc HL
  05BE  7A            	 ld A,D
  05BF  77            	 ld (HL),A
  05C0  2B            	 dec HL
                      	 
  05C1  C3C405        	 jp wiz_locate_end
                      	 
                      	;
  05C4                	wiz_locate_end:
  05C4  CD4C0D        	 call wall_mod
  05C7  7E            	 ld A,(HL)
  05C8  91            	 sub C
  05C9  77            	 ld (HL),A 
  05CA  23            	 inc HL		;>
  05CB  7E            	 ld A,(HL)
  05CC  90            	 sub B
  05CD  77            	 ld (HL),A
  05CE  2B            	 dec HL		;<
  05CF  C9            	 ret
                      	 
                      	;******************************spell create*************************** 
                      	;******************************spell create*************************** 
  05D0                	spell_create:
  05D0  E5            	 push HL
  05D1  AF            	 xor A
  05D2  219F46        	 ld HL,obj
  05D5  AF            	 xor A
  05D6  010000        	 ld BC,0
  05D9  EDB1          	 cpir		;BC<0
  05DB  03            	 inc BC
                      	 
                      	 
                      	; ld (HL),0	;chr clr
  05DC  2B            	 dec HL		;spell address
  05DD  DD7ED0        	 ld A,(IX-48)
  05E0  FE13          	 cp 13h
  05E2  2804          	 jr z,spellB
  05E4  360A          	 ld (HL),0Ah
  05E6  1802          	 jr spellsetok
  05E8                	spellB:
  05E8  360B          	 ld (HL),0Bh
  05EA                	spellsetok:
                      			;hp
  05EA  113000        	 ld DE,48
  05ED  19            	 add HL,DE
  05EE  3601          	 ld (HL),1
                      	 		;st2
  05F0  11F000        	 ld DE,48*5
  05F3  19            	 add HL,DE
  05F4  3600          	 ld (HL),0
                      	 
  05F6  E1            	 pop HL
                      	 
                      	; ld (0f4h),HL
                      	
  05F7  7E            	 ld A,(HL)
  05F8  5F            	 ld E,A
  05F9  23            	 inc HL
  05FA  7E            	 ld A,(HL)
  05FB  57            	 ld D,A
  05FC  2B            	 dec HL
                      	 
  05FD  E5            	 push HL
  05FE  210000        	 ld HL,0
  0601  B7            	 or A
  0602  ED42          	 sbc HL,BC;xy_countor
  0604  B7            	 or A
  0605  ED42          	 sbc HL,BC
  0607  015F47        	 ld BC,obj_xy
  060A  09            	 add HL,BC
                      	 
                      	 
  060B  7B            	 ld A,E
  060C  77            	 ld (HL),A
  060D  23            	 inc HL
  060E  7A            	 ld A,D
  060F  77            	 ld (HL),A
                      	 
                      	; ld (0f0h),HL
                      	; ld (0f2h),BC
                      	 
                      	 
  0610  E1            	 pop HL
  0611  C9            	 ret
                      	;******************************spell action****************************
  0612                	spells_action:
  0612  FD7E00        	 ld A,(IY)
  0615  FE01          	 cp 1
  0617  CA5B06        	 jp z,spells_action1
  061A  FE02          	 cp 2
  061C  CA8406        	 jp z,spells_action2
                      	
  061F  CD4C0D        	 call wall_mod
  0622  78            	 ld A,B
  0623  B7            	 or A
  0624  C2FF06        	 jp nz,spells_action_delete
  0627  79            	 ld A,C
  0628  B7            	 or A
  0629  C2FF06        	 jp nz,spells_action_delete
                      	 
  062C  CDB90C        	 call wall_ck
  062F  C2B106        	 jp nz,spells_action_dol
  0632                	spells_action_wiz:
  0632  23            	 inc HL
  0633  7E            	 ld A,(HL)
  0634  2B            	 dec HL
  0635  E6C0          	 and 11000000b
  0637  280A          	 jr z,spells_action_u
  0639  FE80          	 cp 80h
  063B  380C          	 jr c,spells_action_r
  063D  280E          	 jr z,spells_action_d
  063F                	spells_action_l:
  063F  35            	 dec (HL)
  0640  35            	 dec (HL)
  0641  1810          	 jr spells_action_urdl
  0643                	spells_action_u:
  0643  23            	 inc HL
  0644  35            	 dec (HL)
  0645  35            	 dec (HL)
  0646  2B            	 dec HL
  0647  180A          	 jr spells_action_urdl
  0649                	spells_action_r:
  0649  34            	 inc (HL)
  064A  34            	 inc (HL)
  064B  1806          	 jr spells_action_urdl
  064D                	spells_action_d:
  064D  23            	 inc HL
  064E  34            	 inc (HL)
  064F  34            	 inc (HL)
  0650  2B            	 dec HL
  0651  1800          	 jr spells_action_urdl
  0653                	spells_action_urdl:
  0653  3E01          	 ld A,1
  0655  FD7700        	 ld (IY),A
  0658  C3BE06        	 jp spells_actionend
                      	 
                      	 
                      	 
  065B                	spells_action1:
  065B  23            	 inc HL
  065C  7E            	 ld A,(HL)
  065D  2B            	 dec HL
  065E  E6C0          	 and 11000000b
  0660  280A          	 jr z,spells_action1_u
  0662  FE80          	 cp 80h
  0664  380C          	 jr c,spells_action1_r
  0666  280E          	 jr z,spells_action1_d
  0668                	spells_action1_l:
  0668  35            	 dec (HL)
  0669  35            	 dec (HL)
  066A  1810          	 jr spells_action1_urdl
  066C                	spells_action1_u:
  066C  23            	 inc HL
  066D  35            	 dec (HL)
  066E  35            	 dec (HL)
  066F  2B            	 dec HL
  0670  180A          	 jr spells_action1_urdl
  0672                	spells_action1_r:
  0672  34            	 inc (HL)
  0673  34            	 inc (HL)
  0674  1806          	 jr spells_action1_urdl
  0676                	spells_action1_d:
  0676  23            	 inc HL
  0677  34            	 inc (HL)
  0678  34            	 inc (HL)
  0679  2B            	 dec HL
  067A  1800          	 jr spells_action1_urdl
  067C                	spells_action1_urdl:
  067C  3E02          	 ld A,2
  067E  FD7700        	 ld (IY),A
  0681  C3BE06        	 jp spells_actionend
                      	 
                      	 
                      	
  0684                	spells_action2:
  0684  23            	 inc HL
  0685  7E            	 ld A,(HL)
  0686  2B            	 dec HL
  0687  E6C0          	 and 11000000b
  0689  280B          	 jr z,spells_action2_u
  068B  FE80          	 cp 80h
  068D  380E          	 jr c,spells_action2_r
  068F  2811          	 jr z,spells_action2_d
  0691                	spells_action2_l:
  0691  35            	 dec (HL)
  0692  35            	 dec (HL)
  0693  35            	 dec (HL)
  0694  1813          	 jr spells_action2_urdl
  0696                	spells_action2_u:
  0696  23            	 inc HL
  0697  35            	 dec (HL)
  0698  35            	 dec (HL)
  0699  35            	 dec (HL)
  069A  2B            	 dec HL
  069B  180C          	 jr spells_action2_urdl
  069D                	spells_action2_r:
  069D  34            	 inc (HL)
  069E  34            	 inc (HL)
  069F  34            	 inc (HL)
  06A0  1807          	 jr spells_action2_urdl
  06A2                	spells_action2_d:
  06A2  23            	 inc HL
  06A3  34            	 inc (HL)
  06A4  34            	 inc (HL)
  06A5  34            	 inc (HL)
  06A6  2B            	 dec HL
  06A7  1800          	 jr spells_action2_urdl
  06A9                	spells_action2_urdl:
  06A9  3E00          	 ld A,0
  06AB  FD7700        	 ld (IY),A
  06AE  C3BE06        	 jp spells_actionend
  06B1                	spells_action_dol:
  06B1  DD7ED0        	 ld A,(IX-48)
  06B4  FE0B          	 cp 0bh
  06B6  E5            	 push HL
  06B7  CC7B0D        	 call z,matk_action
  06BA  E1            	 pop HL
  06BB  C3FF06        	 jp spells_action_delete
                      	 
  06BE                	spells_actionend:
  06BE                	spells_action_cross
                      	 
                      	
                      	;********************cross chack spell*******************
  06BE                	spell_cross_ck;
  06BE  CD8A0C        	 call cross_ck_a;s
  06C1  3033          	 jr nc,spell_cross_ck_end
  06C3                	spell_cross_ck_1:
                      	
  06C3  3A2D48        	 ld A,(gil_xy+1)
  06C6  E6C0          	 and 11000000b
  06C8  17            	 rla
  06C9  17            	 rla
  06CA  17            	 rla
  06CB  47            	 ld B,A
  06CC  23            	 inc HL
  06CD  7E            	 ld A,(HL)
  06CE  2B            	 dec HL
  06CF  E6C0          	 and 11000000b
  06D1  17            	 rla
  06D2  17            	 rla
  06D3  17            	 rla
  06D4  3C            	 inc A
  06D5  3C            	 inc A
  06D6  E603          	 and 00000011b
  06D8  4F            	 ld C,A
  06D9  C5            	 push BC
                      	
  06DA  3A2348        	 ld A,(gil_st2)
  06DD  CB7F          	 bit 7,A		;(gil sworud MIRU)
  06DF  2009          	 jr nz,spell_cross_ck_s
  06E1                	spell_cross_ck_n:
  06E1  C1            	 pop BC
  06E2  79            	 ld A,C
  06E3  A8            	 xor B				;urdl = turdl
  06E4  CAFF06        	 jp z,spells_action_delete
  06E7  C3880A        	 jp gil_killing
  06EA                	spell_cross_ck_s:
  06EA  C1            	 pop BC
  06EB  79            	 ld A,C
  06EC  3C            	 inc A
  06ED  E603          	 and 00000011b
  06EF  A8            	 xor B				;urdl = turdl
  06F0  CAFF06        	 jp z,spells_action_delete
  06F3  C3880A        	 jp gil_killing
  06F6                	spell_cross_ck_end:
  06F6  11D716        	 ld DE,graph_spell
  06F9  CDBC04        	 call Egraph;call Egraph
  06FC  C3AA0A        	 jp mains_end
                      	 
  06FF                	spells_action_delete:
  06FF  AF            	 xor A
  0700  DD77D0        	 ld (IX-48),A
  0703  DD7700        	 ld (IX),A
  0706  FD7700        	 ld (IY),A
  0709  3600          	 ld (HL),0
  070B  23            	 inc HL
  070C  3600          	 ld (HL),0
  070E  2B            	 dec HL
  070F  C3AA0A        	 jp mains_end
                      	 
                      	 
                      	
                      	 
                      	;***************************************************************
                      	;**************************knight action************************
  0712                	knight_action:;HL=obj_xy++
  0712  DD7E60        	 ld A,(IX+96)
  0715  47            	 ld B,A
  0716  DD7E00        	 ld A,(IX)
  0719  B8            	 cp B
  071A  3803          	 jr c,knight_actiona
  071C  DD7760        	 ld (IX+96),A
  071F                	knight_actiona:
  071F  DD7ED0        	 ld A,(IX-48)
  0722  FE23          	 cp 23h
  0724  2807          	 jr z,knight_action1
  0726  DD7E30        	 ld A,(IX+48)
  0729  B7            	 or A
  072A  CAF107        	 jp z,knight_action_end
                      	
  072D                	knight_action1:
  072D  CD4C0D        	 call wall_mod
  0730  78            	 ld A,B
  0731  B7            	 or A
  0732  C2D007        	 jp nz,knight_move
  0735  79            	 ld A,C
  0736  B7            	 or A
  0737  C2D007        	 jp nz,knight_move
                      	 
  073A  CDA708        	 call xy_ck
  073D  CA8907        	 jp z,knight_xy
  0740  CDB608        	 call x_ck
  0743  CA9807        	 jp z,knight_x
  0746  CDBE08        	 call y_ck
  0749  CAB407        	 jp z,knight_y
  074C                	kight_accel:
                      	
  074C  CDB90C        	 call wall_ck
  074F  C37607        	 jp kight_accel_2 
                      	 
  0752  CDA708        	 call xy_ck
  0755  CDD308        	 call right_turn
  0758  CDB90C        	 call wall_ck
  075B  CA2908        	 jp z,knight_front_ck
  075E  CDE108        	 call left_turn
  0761  CDB90C        	 call wall_ck
  0764  CAD007        	 jp z,knight_move
  0767  CDF30A        	 call rand4
  076A  FE02          	 cp 2
  076C  3805          	 jr c,kight_accel_1
  076E  CDD308        	 call right_turn
  0771  1803          	 jr kight_accel_2
  0773                	kight_accel_1:
  0773  CDE108        	 call left_turn
  0776                	kight_accel_2:
  0776  CDB90C        	 call wall_ck
  0779  CAD007        	 jp z,knight_move
                      	 
  077C  CDF30A        	 call rand4
  077F  47            	 ld B,A
  0780  23            	 inc HL
  0781  7E            	 ld A,(HL)
  0782  E63F          	 and 00111111b
  0784  B0            	 or B
  0785  77            	 ld (HL),A
  0786  2B            	 dec HL
                      	 
                      	 
  0787  18ED          	 jr kight_accel_2
                      	
                      	
  0789                	knight_xy:
  0789  23            	 inc HL
  078A  7E            	 ld A,(HL)
  078B  F6C0          	 or 11000000b
  078D  77            	 ld (HL),A
  078E  2B            	 dec HL
  078F  CDB90C        	 call wall_ck
  0792  CAD007        	 jp z,knight_move
  0795  C37607        	 jp kight_accel_2 
                      	 
  0798                	knight_x:
  0798  CDBE08        	 call y_ck
  079B  3808          	 jr c,knight_x_1
  079D  23            	 inc HL
  079E  CBFE          	 set 7,(HL)
  07A0  CBB6          	 res 6,(HL)
  07A2  2B            	 dec HL
  07A3  1806          	 jr knight_x_2
  07A5                	knight_x_1:
  07A5  23            	 inc HL
  07A6  CBBE          	 res 7,(HL)
  07A8  CBB6          	 res 6,(HL)
  07AA  2B            	 dec HL
  07AB                	knight_x_2:
  07AB  CDB90C        	 call wall_ck
  07AE  CAD007        	 jp z,knight_move
  07B1  C37607        	 jp kight_accel_2 
                      	 
  07B4                	knight_y:
  07B4  CDB608        	 call x_ck
  07B7  3808          	 jr c,knight_y_1
  07B9  23            	 inc HL
  07BA  CBBE          	 res 7,(HL)
  07BC  CBF6          	 set 6,(HL)
  07BE  2B            	 dec HL
  07BF  1806          	 jr knight_y_2
  07C1                	knight_y_1:
  07C1  23            	 inc HL
  07C2  CBFE          	 set 7,(HL)
  07C4  CBF6          	 set 6,(HL)
  07C6  2B            	 dec HL
  07C7                	knight_y_2:
  07C7  CDB90C        	 call wall_ck
  07CA  CAD007        	 jp z,knight_move
  07CD  C37607        	 jp kight_accel_2 
                      	 
                      	
                      	
                      	
                      	
                      	
                      	
  07D0                	knight_action_urdl_b:
  07D0                	knight_move:;a=0~3
  07D0  23            	 inc HL
  07D1  7E            	 ld A,(HL)
  07D2  2B            	 dec HL
  07D3  E6C0          	 and 11000000b
  07D5  280A          	 jr z,knight_action_up
  07D7  FE80          	 cp 80h
  07D9  380C          	 jr c,knight_action_ri
  07DB  280E          	 jr z,knight_action_do
  07DD                	knight_action_le:
  07DD  35            	 dec (HL)
  07DE  C3F107        	 jp knight_action_end
  07E1                	knight_action_up:
  07E1  23            	 inc HL
  07E2  35            	 dec (HL)
  07E3  2B            	 dec HL
  07E4  C3F107        	 jp knight_action_end
  07E7                	knight_action_ri:
  07E7  34            	 inc (HL)
  07E8  C3F107        	 jp knight_action_end
  07EB                	knight_action_do:
  07EB  23            	 inc HL
  07EC  34            	 inc (HL)
  07ED  2B            	 dec HL
  07EE  C3F107        	 jp knight_action_end
                      	
                      	 
                      	 
                      	
                      	
  07F1                	knight_action_end:
  07F1  FD7E30        	 ld A,(IY+48)
  07F4  EE01          	 xor 1
  07F6  FD7730        	 ld (IY+48),A
  07F9  B7            	 or A
  07FA  2805          	 jr z,knight_action_end2
                      	 
  07FC  11EF16        	 ld DE,graph_n_knightu
  07FF  1803          	 jr knight_action_end3
  0801                	knight_action_end2:
  0801  110717        	 ld DE,graph_n_knightu+24
  0804                	knight_action_end3:
  0804  CDBC04        	 call Egraph
                      	 
                      	 
                      	;********************cross chack kight*******************
                      	; call kwait
                      	
  0807  3A2348        	 ld A,(gil_st2)
  080A  CB7F          	 bit 7,A		;(gil sworud MIRU)
  080C  2808          	 jr z,ssss1
  080E  CD8A0C        	 call cross_ck_a;s
  0811  DCEB08        	 call c,HP_dec;(suraim HP=0)
  0814  1808          	 jr ssss2
  0816                	ssss1:;(gil_st=0-x)
  0816  CD8A0C        	 call cross_ck_a
  0819  3003          	 jr nc,ssss2
  081B  C3880A        	 jp gil_killing
  081E                	ssss2:
  081E  DD7E30        	 ld A,(IX+48)
  0821  EEFF          	 xor 0ffh
  0823  DD7730        	 ld (IX+48),A
  0826  C3AA0A        	 jp mains_end
                      	 
                      	
                      	
  0829                	knight_front_ck:
  0829  CDCB08        	 call xyload
  082C  F5            	 push AF
  082D  329A08        	 ld (knight_front_ck_end+3),A
  0830  7B            	 ld A,E
  0831  329808        	 ld (knight_front_ck_end+1),A 
  0834  F1            	 pop AF
  0835  E6C0          	 and 11000000b
  0837  2810          	 jr z,knight_front_ck_u
  0839  FE02          	 cp 2
  083B  3814          	 jr c,knight_front_ck_r
  083D  281C          	 jr z,knight_front_ck_d
  083F                	knight_front_ck_l:
  083F  7B            	 ld A,E
  0840  D607          	 sub 7
  0842  FE1E          	 cp 30
  0844  DAA408        	 jp c,knight_front_outerwall
  0847  181C          	 jr knight_front_ck_e
  0849                	knight_front_ck_u:
  0849  7A            	 ld A,D
  084A  D607          	 sub 7
  084C  DAA408        	 jp c,knight_front_outerwall
  084F  1814          	 jr knight_front_ck_e
  0851                	knight_front_ck_r:
  0851  7B            	 ld A,E
  0852  C607          	 add A,7
  0854  FE88          	 cp 136
  0856  D2A408        	 jp nc,knight_front_outerwall
  0859  180A          	 jr knight_front_ck_e
  085B                	knight_front_ck_d:
  085B  7A            	 ld A,D
  085C  C607          	 add A,7
  085E  FE2B          	 cp 43
  0860  D2A408        	 jp nc,knight_front_outerwall
  0863  1800          	 jr knight_front_ck_e
  0865                	knight_front_ck_e:
  0865  CDD308        	 call right_turn
  0868  CDB90C        	 call wall_ck
  086B  CA9708        	 jp z,knight_front_ck_end
                      	
  086E  CDE108        	 call left_turn
  0871  CDB90C        	 call wall_ck
  0874  CA9708        	 jp z,knight_front_ck_end
                      	
  0877  CDE108        	 call left_turn
  087A  CDB90C        	 call wall_ck
  087D  CA9708        	 jp z,knight_front_ck_end
                      	 
  0880  CDD308        	 call right_turn
  0883  CDD308        	 call right_turn
                      	 
  0886  23            	 inc HL
  0887  7E            	 ld A,(HL)
  0888  E6C0          	 and 11000000b
  088A  47            	 ld B,A
  088B  3A9A08        	 ld A,(knight_front_ck_end+3)
  088E  E63F          	 and 00111111b
  0890  B0            	 or B
  0891  329A08        	 ld (knight_front_ck_end+3),A
  0894  2B            	 dec HL
                      	 
  0895  18CE          	 jr knight_front_ck_e
                      	 
  0897                	knight_front_ck_end:
  0897  1E00          	 ld E,overwrite
  0899  1600          	 ld D,overwrite
  089B  7B            	 ld A,E
  089C  77            	 ld (HL),A
  089D  23            	 inc HL
  089E  7A            	 ld A,D
  089F  77            	 ld (HL),A
  08A0  2B            	 dec HL
  08A1  C3D007        	 jp knight_move
                      	
  08A4                	knight_front_outerwall:
  08A4  C37607        	 jp kight_accel_2
                      	
                      	
                      	
                      	;***************************ckeck sub****************************
                      	
  08A7                	xy_ck:;chr cp
  08A7  CDCB08        	 call xyload
  08AA  E5            	 push HL		;>
  08AB  2A2C48        	 ld HL,(gil_xy)
  08AE  7C            	 ld A,H
  08AF  E63F          	 and 00111111b
  08B1  67            	 ld H,A
  08B2  ED52          	 sbc HL,DE
  08B4  E1            	 pop HL			;<
  08B5  C9            	 ret
  08B6                	x_ck:
  08B6  CDCB08        	 call xyload
  08B9  3A2C48        	 ld A,(gil_xy)
  08BC  93            	 sub E
  08BD  C9            	 ret
  08BE                	y_ck:
  08BE  CDCB08        	 call xyload
  08C1  7A            	 ld A,D
  08C2  E63F          	 and 00111111b
  08C4  3A2D48        	 ld A,(gil_xy+1)
  08C7  E63F          	 and 00111111b
  08C9  92            	 sub D
  08CA  C9            	 ret
                      	
                      	
  08CB                	xyload:;A=urdl D=none
  08CB  5E            	 ld E,(HL)
  08CC  23            	 inc HL
  08CD  7E            	 ld A,(HL)
  08CE  E63F          	 and 00111111b
  08D0  57            	 ld D,A
  08D1  2B            	 dec HL
  08D2  C9            	 ret
                      	
  08D3                	right_turn:
  08D3  23            	 inc HL
  08D4  7E            	 ld A,(HL)
  08D5  E6C0          	 and 11000000b
  08D7  C640          	 add A,40H
  08D9  47            	 ld B,A
  08DA  7E            	 ld A,(HL)
  08DB  E63F          	 and 00111111b
  08DD  B0            	 or B
  08DE  77            	 ld (HL),A
  08DF  2B            	 dec HL
  08E0  C9            	 ret
                      	 
  08E1                	left_turn:
  08E1  CDD308        	 call right_turn
  08E4  CDD308        	 call right_turn
  08E7  CDD308        	 call right_turn
  08EA  C9            	 ret
                      	
                      	;*************************hp dec*****************************
  08EB                	HP_dec:
  08EB  3A2748        	 ld A,(gil_sword)
  08EE  FE02          	 cp 2
  08F0  DD7E00        	 ld A,(IX)
  08F3  2003          	 jr nz,HP_dec1
  08F5  3D            	 dec A
  08F6  2801          	 jr z,HP_dec2
  08F8                	HP_dec1:
  08F8  3D            	 dec A
  08F9                	HP_dec2:
  08F9  DD7700        	 ld (IX),A
  08FC  280B          	 jr z,HP_rec
  08FE                	gil_HP_dec:
  08FE  3A2048        	 ld A,(gil_hp)
  0901  3D            	 dec A
  0902  322048        	 ld (gil_hp),A
  0905  CA880A        	 jp z,gil_killing
  0908  C9            	 ret
                      	 
  0909                	HP_rec:
  0909  DD7E60        	 ld A,(IX+96)
  090C  47            	 ld B,A
  090D  AF            	 xor A
  090E  DD7760        	 ld (IX+96),A
  0911  3A2048        	 ld A,(gil_HP)
  0914  80            	 add A,B
  0915  3002          	 jr nc,H_recP2
  0917  3EFF          	 ld A,255
  0919                	H_recP2:
  0919  322048        	 ld (gil_HP),A
  091C  C9            	 ret
                      	
                      	
                      	;*************************gil actions*************************
  091D                	gil_action:
  091D  E5            	 push HL
                      	
                      	
  091E  3A2C48        	 ld A,(gil_xy)
  0921  5F            	 ld E,A
  0922  3A2D48        	 ld A,(gil_xy+1)
  0925  57            	 ld D,A
  0926  CDFA0F        	 call grp_del
                      	; call kwait
                      	
                      	;*************************key scanf**************************
  0929  CDA50B        	 call keysc
  092C  321F48        	 ld (gil_button),A
  092F  08            	 ex AF,AF'
                      	
                      	;************************sword back***************************
  0930  3A2348        	 ld A,(gil_st2)
  0933  B7            	 or A
  0934  C2510A        	 jp nz,gil_sword_f2
                      	;***********************sword atack****************************
  0937                	gil_action_l_b:
  0937  08            	 ex AF,AF'
  0938  CB6F          	 bit 5,A
  093A  C2180A        	 jp nz,gil_sword_f
  093D  CD3B0A        	 call gil_sword_reset
                      	
  0940  211716        	 ld HL,graph_gil_ulf
  0943  22EA09        	 ld (gil_action_end-2),HL
                      	;************************urdl move*****************************
  0946                	gil_action_l:
  0946  CB47          	 bit 0,A
  0948  200F          	 jr nz,gil_left
  094A  CB4F          	 bit 1,A
  094C  202D          	 jr nz,gil_right
  094E  CB77          	 bit 6,A
  0950  204C          	 jr nz,gil_down
  0952  CB7F          	 bit 7,A
  0954  206C          	 jr nz,gil_up
                      	;*****************************noting************************
  0956  C3E909        	 jp gil_action_end-3
                      	 ;************************move farse*************************
  0959                	gil_left:
  0959  3A2D48        	 ld A,(gil_xy+1);y
  095C  E63F          	 and 00111111b
  095E  CA6809        	 jp z,gil_left_l
  0961                	gil_left_s:
  0961  D607          	 sub 7
  0963  DA050A        	 jp c,direction_p
  0966  20F9          	 jr nz,gil_left_s
  0968                	gil_left_l:
  0968  3EC0          	 ld A,11000000b
  096A  212D48        	 ld HL,gil_xy+1
  096D  B6            	 or (HL)
  096E  77            	 ld (HL),A
  096F  2B            	 dec HL;ld HL,gil_xy
  0970  CDB90C        	 call wall_ck
  0973  B7            	 or A;
  0974  C2E909        	 jp nz,gil_action_end-3
                      	
                      	; ld HL,gil_xy
  0977  35            	 dec (HL)
  0978  C3E209        	 jp gil_walk
                      	
  097B                	gil_right:
  097B  3A2D48        	 ld A,(gil_xy+1);y
  097E  E63F          	 and 00111111b
  0980  CA8A09        	 jp z,gil_right_l
  0983                	gil_right_s:
  0983  D607          	 sub 7
  0985  DA050A        	 jp c,direction_p
  0988  20F9          	 jr nz,gil_right_s
  098A                	gil_right_l:
  098A  3E3F          	 ld A,00111111b
  098C  212D48        	 ld HL,gil_xy+1
  098F  A6            	 and (HL)
  0990  77            	 ld (HL),A
  0991  CBF6          	 set 6,(HL)
  0993  2B            	 dec HL;ld HL,gil_xy
  0994  CDB90C        	 call wall_ck
  0997  B7            	 or A;
  0998  C2E909        	 jp nz,gil_action_end-3
                      	
                      	; ld HL,gil_xy
  099B  34            	 inc (HL)
  099C  1844          	 jr gil_walk
                      	
  099E                	gil_down:
  099E  3A2C48        	 ld A,(gil_xy);x
  09A1  D61E          	 sub 30
  09A3  CAAD09        	 jp z,gil_down_l
  09A6                	gil_down_s:
  09A6  D607          	 sub 7
  09A8  DA050A        	 jp c,direction_p
  09AB  20F9          	 jr nz,gil_down_s
  09AD                	gil_down_l:
  09AD  3E3F          	 ld A,00111111b
  09AF  212D48        	 ld HL,gil_xy+1
  09B2  A6            	 and (HL)
  09B3  77            	 ld (HL),A
  09B4  CBFE          	 set 7,(HL)
  09B6  2B            	 dec HL;ld HL,gil_xy
  09B7  CDB90C        	 call wall_ck
  09BA  B7            	 or A;
  09BB  C2E909        	 jp nz,gil_action_end-3
                      	
                      	; ld HL,gil_xy
  09BE  23            	 inc HL
  09BF  34            	 inc (HL)
  09C0  1820          	 jr gil_walk
                      	
  09C2                	gil_up:
  09C2  3A2C48        	 ld A,(gil_xy);x
  09C5  D61E          	 sub 30
  09C7  CAD109        	 jp z,gil_up_l
  09CA                	gil_up_s:
  09CA  D607          	 sub 7
  09CC  DA050A        	 jp c,direction_p
  09CF  20F9          	 jr nz,gil_up_s
  09D1                	gil_up_l:
  09D1  3E3F          	 ld A,00111111b
  09D3  212D48        	 ld HL,gil_xy+1
  09D6  A6            	 and (HL)
  09D7  77            	 ld (HL),A
  09D8  2B            	 dec HL;ld HL,gil_xy
  09D9  CDB90C        	 call wall_ck
  09DC  B7            	 or A;
  09DD  C2E909        	 jp nz,gil_action_end-3
                      	
                      	; ld HL,gil_xy
  09E0  23            	 inc HL
  09E1  35            	 dec (HL)
                      	; jr gil_walk
                      	
                      	
  09E2                	gil_walk:
  09E2  212248        	 ld HL,gil_st1
  09E5  3EFF          	 ld A,0ffh
  09E7  AE            	 xor (HL)
  09E8  77            	 ld (HL),A
                      	
  09E9  211716        	 ld HL,graph_gil_ulf
  09EC                	gil_action_end:
  09EC  3A2248        	 ld A,(gil_st1)
  09EF  3C            	 inc A
  09F0  111800        	 ld DE,24
  09F3  CDF90A        	 call xsan
  09F6                	gil_action_end_l:
  09F6  3A2C48        	 ld A,(gil_xy)
  09F9  5F            	 ld E,A
  09FA  3A2D48        	 ld A,(gil_xy+1)
  09FD  57            	 ld D,A
  09FE  CD6E0F        	 call grp_set
  0A01  E1            	 pop HL
  0A02  C3AA0A        	 jp mains_end
                      	
  0A05                	direction_p:
  0A05  3A2D48        	 ld A,(gil_xy+1)
  0A08  E6C0          	 and 11000000b
  0A0A  CAD109        	 jp z,gil_up_l
  0A0D  FE80          	 cp 80h
  0A0F  DA8A09        	 jp c,gil_right_l
  0A12  CAAD09        	 jp z,gil_down_l
  0A15  C35909        	 jp gil_left
                      	
  0A18                	gil_sword_f:;key_action
  0A18  08            	 ex AF,AF'
  0A19  B7            	 or A
  0A1A  C2300A        	 jp nz,gil_sword_set 
                      	;************************sword atack***************************
  0A1D  3E0A          	 ld A,10		;back flame
  0A1F  322348        	 ld (gil_st2),A
                      	;***********************matk action****************************
  0A22  CD6F0D        	 call matk_action_gil
                      	;*************************************************************
  0A25  114716        	 ld DE,graph_gilsw_ulf	;gil_sw
  0A28  ED53EA09      	 ld (gil_action_end-2),DE
  0A2C  08            	 ex AF,AF'
  0A2D  C34609        	 jp gil_action_l
  0A30                	gil_sword_set:
  0A30  117716        	 ld DE,graph_gilsword_ulf	;gil_swd
  0A33  ED53EA09      	 ld (gil_action_end-2),DE
  0A37                	gil_sword_set_l:
  0A37  08            	 ex AF,AF'
  0A38  C34609        	 jp gil_action_l
  0A3B                	gil_sword_reset:
  0A3B  08            	 ex AF,AF'
  0A3C  3A2348        	 ld A,(gil_st2)
  0A3F  47            	 ld B,A
  0A40  08            	 ex AF,AF'
  0A41  CB78          	 bit 7,B
  0A43  C8            	 ret z
  0A44  08            	 ex AF,AF'
  0A45  E1            	 pop HL
  0A46  3E80          	 ld A,10000000b
                      	;************************sword back***************************
  0A48  F60A          	 or 10			;back flame
  0A4A  322348        	 ld (gil_st2),A
  0A4D  08            	 ex AF,AF'
  0A4E  C34609        	 jp gil_action_l
  0A51                	gil_sword_f2:;auto_action
  0A51  FE80          	 cp 80h
  0A53  CA3709        	 jp z,gil_action_l_b
  0A56  E680          	 and 10000000b
  0A58  C2700A        	 jp nz,gil_sword_f_decB;A=1nnnnnnnb
  0A5B                	gil_sword_f_decA:;A=0nnnnnnnb
  0A5B  212348        	 ld HL,gil_st2
  0A5E  7E            	 ld A,(HL)
  0A5F  3D            	 dec A
  0A60  77            	 ld (HL),A
  0A61  114716        	 ld DE,graph_gilsw_ulf	;gil_sw
  0A64  ED53EA09      	 ld (gil_action_end-2),DE
  0A68  C2840A        	 jp nz,gil_action_l_r
  0A6B  CBFE          	 set 7,(HL)
  0A6D  C3840A        	 jp gil_action_l_r
  0A70                	gil_sword_f_decB:;A=1nnnnnnnb
  0A70  212348        	 ld HL,gil_st2
  0A73  7E            	 ld A,(HL)
  0A74  3D            	 dec A
  0A75  77            	 ld (HL),A
  0A76  E67F          	 and 01111111b
  0A78  114716        	 ld DE,graph_gilsw_ulf	;gil_sw
  0A7B  ED53EA09      	 ld (gil_action_end-2),DE
  0A7F  C2840A        	 jp nz,gil_action_l_r
  0A82  CBBE          	 res 7,(HL)
  0A84                	gil_action_l_r:
  0A84  08            	 ex AF,AF'
  0A85  C34609        	 jp gil_action_l
                      	
                      	
  0A88                	gil_killing:
  0A88  CD7F0B        	 call grp_o
  0A8B  219F0A        	 ld HL,killingm
  0A8E  110000        	 ld DE,0
  0A91  060B          	 ld B,11
  0A93  CDF1BF        	 call msp
  0A96  DD7ED0        	 ld A,(IX-48)
  0A99  32F000        	 ld (0f0h),A
  0A9C  C3C20A        	 jp retP
                      	
                      	
                      	
  0A9F                	killingm:
  0A9F  6265656E206B69	 db "been killed"
                      	
                      	
  0AAA                	mains_end:
                      	; ld A,(IX+48)
                      	; ld (0f0h),A
                      	; ld (0f2h),IX
                      	
  0AAA  3A7303        	 ld A,(count+1)
  0AAD  3D            	 dec A
  0AAE  327303        	 ld (count+1),A
  0AB1  23            	 inc HL
  0AB2  23            	 inc HL
  0AB3  DD23          	 inc IX
  0AB5  FD23          	 inc IY
  0AB7  D9            	 exx
  0AB8  CDA50B        	 call keysc
  0ABB  CB57          	 bit 2,A
  0ABD  C0            	 ret nz
  0ABE  D9            	 exx
  0ABF  C37203        	 jp mains
                      	
                      	
  0AC2                	retP:
  0AC2  310000        	 ld SP,0
  0AC5  C9            	 ret
                      	
                      	
                      	
                      	
                      	
                      	
                      	
                      	;*********************************************************
  0AC6                	TIMBTL:
  0AC6  3E32          	 LD A,50
  0AC8  1806          	 JR TIMER
  0ACA                	TIM30:
  0ACA  3E25          	 LD A,37
  0ACC  1802          	 JR TIMER
  0ACE                	TIM255:
  0ACE  3EFF          	 LD A,255
  0AD0                	TIMER:
  0AD0  010000        	 LD BC,0
  0AD3  03            	 INC BC;LOOP
  0AD4  000000000000  	 DB 0,0,0,0,0,0
  0ADA  A8            	 XOR B
  0ADB  C8            	 RET Z
  0ADC  18F5          	 JR TIMER+3
  0ADE                	RAND:;A
  0ADE  E5            	 PUSH HL
  0ADF  D5            	 push DE
  0AE0  210000        	 LD HL,0
  0AE3  54            	 LD D,H
  0AE4  5D            	 LD E,L
  0AE5  29            	 ADD HL,HL
  0AE6  29            	 ADD HL,HL
  0AE7  19            	 ADD HL,DE
  0AE8  11475D        	 LD DE,5D47H
  0AEB  19            	 ADD HL,DE
  0AEC  22E10A        	 LD (RAND+3),HL
  0AEF  7C            	 LD A,H
  0AF0  D1            	 pop DE
  0AF1  E1            	 POP HL
  0AF2  C9            	 RET
  0AF3                	RAND4:
                      	; ld A,R
                      	; rra
                      	; rra
                      	; rra
                      	; and 11000000b
                      	; ret
  0AF3  CDDE0A        	 CALL RAND
  0AF6  E6C0          	 AND 11000000b
  0AF8  C9            	 RET
  0AF9                	XSAN:
  0AF9  B7            	 OR A
  0AFA  C8            	 RET Z
  0AFB                	XSANL:
  0AFB  19            	 ADD HL,DE
  0AFC  3D            	 DEC A
  0AFD  20FC          	 JR NZ,XSANL
  0AFF  C9            	 RET
  0B00                	NMEMRY:
  0B00  0000000000    	 DB 0,0,0,0,0
  0B05                	ASCN:;HL=l(2byte)DE
  0B05  11000B        	 LD DE,NMEMRY
  0B08  011027        	 LD BC,10000
  0B0B  CD3F0B        	 CALL WARIS
  0B0E  01E803        	 LD BC,1000
  0B11  CD3F0B        	 CALL WARIS
  0B14  016400        	 LD BC,100
  0B17  CD3F0B        	 CALL WARIS
  0B1A  010A00        	 LD BC,10
  0B1D  CD3F0B        	 CALL WARIS
  0B20  7D            	 LD A,L
  0B21  12            	 LD (DE),A
  0B22  0605          	 LD B,5
  0B24  11000B        	 LD DE,NMEMRY
  0B27                	ASCL:
  0B27  1A            	 LD A,(DE)
  0B28  FE00          	 CP 0
  0B2A  2802          	 JR Z,ASCL2
  0B2C  1808          	 JR ASC2
  0B2E                	ASCL2:
  0B2E  13            	 INC DE
  0B2F  10F6          	 DJNZ ASCL
  0B31  0601          	 LD B,1
  0B33  11040B        	 LD DE,NMEMRY+4
  0B36                	ASC2:
  0B36  1A            	 LD A,(DE)
  0B37  0E30          	 LD C,30H
  0B39  81            	 ADD A,C
  0B3A  12            	 LD (DE),A
  0B3B  13            	 INC DE
  0B3C  10F8          	 DJNZ ASC2
  0B3E  C9            	 RET
  0B3F                	WARIS:
  0B3F  AF            	 XOR A
                      	;WARI1:
  0B40  ED42          	 SBC HL,BC
  0B42  3803          	 JR C,WARI2
  0B44  3C            	 INC A
  0B45  18F9          	 JR WARIS+1
  0B47                	WARI2:
  0B47  09            	 ADD HL,BC
  0B48  12            	 LD (DE),A
  0B49  13            	 INC DE		;
  0B4A  C9            	 RET
  0B4B                	cls:
  0B4B  F5            	 push AF
  0B4C  D5            	 push DE
  0B4D  E5            	 push HL
  0B4E  C5            	 push BC
  0B4F  3E00          	 ld A,0
  0B51  21FB10        	 ld HL,grapu_area
  0B54  11FC10        	 ld DE,grapu_area+1
  0B57  77            	 ld (HL),A
  0B58  015F03        	 ld BC,144*6-1
  0B5B  EDB0          	 ldir
  0B5D  CD7F0B        	 call grp_o
  0B60  C1            	 pop BC
  0B61  E1            	 pop HL
  0B62  D1            	 pop DE
  0B63  F1            	 pop AF
  0B64  C9            	 ret
                      	
  0B65                	bls:
  0B65  F5            	 push AF
  0B66  D5            	 push DE
  0B67  E5            	 push HL
  0B68  C5            	 push BC
  0B69  21FB10        	 LD HL,grapu_area
  0B6C  36FF          	 LD (HL),0FFH
  0B6E  11FC10        	 LD DE,grapu_area+1
  0B71  015F03        	 LD BC,863
  0B74  EDB0          	 LDIR
  0B76  CD7F0B        	 CALL grp_o
  0B79  D9            	 EXX
  0B7A  C1            	 pop BC
  0B7B  E1            	 pop HL
  0B7C  D1            	 pop DE
  0B7D  F1            	 pop AF
  0B7E  C9            	 RET
  0B7F                	grp_o:
  0B7F  3E06          	 ld A,6
  0B81  110000        	 ld DE,0
  0B84  21FB10        	 ld HL,grapu_area
  0B87                	grp_o_l:
  0B87  D5            	 push DE
  0B88  F5            	 push AF
  0B89  0690          	 ld B,144
  0B8B  CDD0BF        	 call grp
  0B8E  23            	 inc HL
  0B8F  F1            	 pop AF
  0B90  D1            	 pop DE
  0B91  14            	 inc D
  0B92  3D            	 dec A
  0B93  20F2          	 jr nz,grp_o_l
  0B95  C9            	 ret
                      	
  0B96                	grp_open:
  0B96  0E06          	 ld C,6
  0B98                	grp_open_l
  0B98  C5            	 push BC
  0B99  D5            	 push DE
  0B9A  CDD0BF        	 call grp
  0B9D  D1            	 pop DE
  0B9E  14            	 inc D
  0B9F  23            	 inc HL
  0BA0  C1            	 pop BC
  0BA1  0D            	 dec C
  0BA2  20F4          	 jr nz,grp_open_l
  0BA4  C9            	 ret
                      	
  0BA5                	keysc:
  0BA5  F3            	 di
  0BA6  AF            	 xor A
  0BA7  D311          	 out (11h),A
  0BA9  3E08          	 ld A,08h
  0BAB  D311          	 out (11h),A
  0BAD  CDAD8A        	 call 8aadh
  0BB0  DB10          	 in A,(10h)
  0BB2  E6E0          	 and 0e0h
  0BB4  47            	 ld B,A
  0BB5  AF            	 xor A
  0BB6  D311          	 out (11h),A
  0BB8  3E10          	 ld A,10h
  0BBA  D311          	 out (11h),A
  0BBC  CDAD8A        	 call 8aadh
  0BBF  DB10          	 in A,(10h)
  0BC1  E60F          	 and 0fh
  0BC3  B0            	 or B
  0BC4  FB            	 ei
  0BC5  C9            	 ret
                      	
                      	
                      	
  0BC6                	charReput:;HL=obj_xy++
  0BC6                	charReput_x:
  0BC6  7E            	 ld A,(HL);x
  0BC7  4F            	 ld C,A
  0BC8  D61E          	 sub 30
  0BCA  CAE20B        	 jp z,charReput_y
  0BCD                	charReput_x_lp:
  0BCD  D607          	 sub 7
  0BCF  CAE20B        	 jp z,charReput_y
  0BD2  30F9          	 jr nc,charReput_x_lp
  0BD4  FEFD          	 cp 0fch+1;cy=-4~-6 left
  0BD6  3804          	 jr c,charReput_x_1
  0BD8  ED44          	 neg;(right+)
  0BDA  1804          	 jr charReput_x_2
  0BDC                	charReput_x_1:
  0BDC  C607          	 add A,7
  0BDE  ED44          	 neg;(left-)
  0BE0                	charReput_x_2:
  0BE0  81            	 add A,C
  0BE1  77            	 ld (HL),A
                      	
  0BE2                	charReput_y:
  0BE2  23            	 inc HL
  0BE3  7E            	 ld A,(HL)
  0BE4  2B            	 dec HL
  0BE5  4F            	 ld C,A
  0BE6  E63F          	 and 00111111b
  0BE8  C8            	 ret z
  0BE9                	charReput_y_lp:
  0BE9  D607          	 sub 7
  0BEB  C8            	 ret z
  0BEC  30FB          	 jr nc,charReput_y_lp
  0BEE  FEFD          	 cp 0fch+1;cy=-4~-6 up
  0BF0  3804          	 jr c,charReput_y_1
  0BF2  ED44          	 neg;(down+)
  0BF4  1804          	 jr charReput_y_2
  0BF6                	charReput_y_1:
  0BF6  C607          	 add A,7
  0BF8  ED44          	 neg;(up-)
  0BFA                	charReput_y_2:
  0BFA  81            	 add A,C
  0BFB  23            	 inc HL
  0BFC  77            	 ld (HL),A
  0BFD  2B            	 dec HL
  0BFE  C9            	 ret 
                      	
                      	
  0BFF                	cross_ck_s:;HL=obj_xy+
  0BFF  5E            	 ld E,(HL)
  0C00  23            	 inc HL
  0C01  56            	 ld D,(HL)
  0C02  2B            	 dec HL
  0C03  3A2D48        	 ld A,(gil_xy+1)
  0C06  E6C0          	 and 11000000b
  0C08  CA310C        	 jp z,cross_ck_s_up
  0C0B  FE80          	 cp 80h
  0C0D  DA4F0C        	 jp c,cross_ck_s_right
  0C10  CA6C0C        	 jp z,cross_ck_s_down
  0C13                	cross_ck_s_left:
  0C13  3A2D48        	 ld A,(gil_xy+1)
  0C16  E63F          	 and 3fh
  0C18  92            	 sub D	;x-x1
  0C19  FE03          	 cp 3
  0C1B  3805          	 jr c,cross_ck_s_left_2
  0C1D  2F            	 cpl
  0C1E  3C            	 inc A
  0C1F  FE03          	 cp 3
  0C21  D0            	 ret nc
  0C22                	cross_ck_s_left_2:
  0C22  3A2C48        	 ld A,(gil_xy)
  0C25  93            	 sub E
  0C26  FE06          	 cp 6		;when (a-d)>0 is that empty at left.
  0C28  D8            	 ret c
  0C29  2F            	 cpl
  0C2A  3C            	 inc A
  0C2B  FE03          	 cp 3
  0C2D  DA880A        	 jp c,gil_killing
  0C30  C9            	 ret
  0C31                	cross_ck_s_up:
  0C31  3A2C48        	 ld A,(gil_xy)
  0C34  93            	 sub E	;x-x1
  0C35  FE03          	 cp 3
  0C37  3805          	 jr c,cross_ck_s_up_2
  0C39  2F            	 cpl
  0C3A  3C            	 inc A
  0C3B  FE03          	 cp 3
  0C3D  D0            	 ret nc
  0C3E                	cross_ck_s_up_2:
  0C3E  3A2D48        	 ld A,(gil_xy+1)
  0C41  E63F          	 and 3fh
  0C43  92            	 sub D
  0C44  FE03          	 cp 3		;when (a-d)>0 is that empty at up.
  0C46  D8            	 ret c
  0C47  2F            	 cpl
  0C48  3C            	 inc A
  0C49  FE03          	 cp 3
  0C4B  DA880A        	 jp c,gil_killing
  0C4E  C9            	 ret
  0C4F                	cross_ck_s_right:
  0C4F  3A2D48        	 ld A,(gil_xy+1)
  0C52  E63F          	 and 3fh
  0C54  92            	 sub D	;x-x1
  0C55  FE03          	 cp 3
  0C57  3805          	 jr c,cross_ck_s_right_2
  0C59  2F            	 cpl
  0C5A  3C            	 inc A
  0C5B  FE03          	 cp 3
  0C5D  C9            	 ret ;c or nc
  0C5E                	cross_ck_s_right_2:
  0C5E  3A2C48        	 ld A,(gil_xy)
  0C61  93            	 sub E
  0C62  FE03          	 cp 3		;when (a-d)<0 is that empty at right.
  0C64  DA880A        	 jp c,gil_killing
  0C67  2F            	 cpl
  0C68  3C            	 inc A
  0C69  FE06          	 cp 6
  0C6B  C9            	 ret ;c or nc
  0C6C                	cross_ck_s_down:
  0C6C  3A2C48        	 ld A,(gil_xy)
  0C6F  93            	 sub E	;x-x1
  0C70  FE03          	 cp 3
  0C72  3805          	 jr c,cross_ck_s_down_2
  0C74  2F            	 cpl
  0C75  3C            	 inc A
  0C76  FE03          	 cp 3
  0C78  D0            	 ret nc
  0C79                	cross_ck_s_down_2:
  0C79  3A2D48        	 ld A,(gil_xy+1)
  0C7C  E63F          	 and 3fh
  0C7E  92            	 sub D
  0C7F  FE03          	 cp 3		;when (a-d)<0 is that empty at down.
  0C81  DA880A        	 jp c,gil_killing
  0C84  D8            	 ret c
  0C85  2F            	 cpl
  0C86  3C            	 inc A
  0C87  FE06          	 cp 6
  0C89  C9            	 ret
                      	
                      	
  0C8A                	cross_ck_a:;HL=obj_xy+
  0C8A  5E            	 ld E,(HL);x
  0C8B  23            	 inc HL
  0C8C  7E            	 ld A,(HL)
  0C8D  2B            	 dec HL
  0C8E  E63F          	 and 3fh
  0C90  57            	 ld D,A	;y
                      	; ld HL,(gil_xy)
  0C91  3A2C48        	 ld A,(gil_xy)
  0C94  93            	 sub E	;x-x1
  0C95  FE03          	 cp 3
  0C97  3805          	 jr c,cross_ck_al
  0C99  2F            	 cpl
  0C9A  3C            	 inc A
  0C9B  FE03          	 cp 3
  0C9D  D0            	 ret nc
  0C9E                	cross_ck_al:
  0C9E  3A2D48        	 ld A,(gil_xy+1)
  0CA1  E63F          	 and 3fh
  0CA3  92            	 sub D
  0CA4  FE03          	 cp 3
  0CA6  D8            	 ret c
  0CA7  2F            	 cpl
  0CA8  3C            	 inc A
  0CA9  FE03          	 cp 3
  0CAB  C9            	 ret ;nc or cy
                      	;cy is crosses.
                      	
  0CAC                	cha_kill:;HL=obj_xy++,IX=obj_hp
  0CAC  E5            	 push HL
  0CAD  5E            	 ld E,(HL)
  0CAE  23            	 inc HL
  0CAF  56            	 ld D,(HL)
  0CB0  CDFA0F        	 call grp_del
  0CB3  E1            	 pop HL
  0CB4  AF            	 xor A
  0CB5  DD7700        	 ld (IX),A
  0CB8  C9            	 ret
                      	
                      	
  0CB9                	wall_ck:
  0CB9  E5            	 push HL
  0CBA  CDBF0C        	 call wall_cks
  0CBD  E1            	 pop HL
  0CBE  C9            	 ret
                      	
  0CBF                	wall_cks:;HL,obj_xy+;non zero=don't pass, zero=pass and A=0, cy=not block
  0CBF  E5            	 push HL
                      	;HL=(y,x)
  0CC0  5E            	 ld E,(HL);x
  0CC1  23            	 inc HL
  0CC2  56            	 ld D,(HL);y
  0CC3  2B            	 dec HL
  0CC4  EB            	 ex DE,HL
  0CC5  3E3F          	 ld A,00111111b
  0CC7  A4            	 and H
  0CC8  010000        	 ld BC,0
  0CCB  2808          	 jr z,wall_ck_lc
  0CCD                	wall_ck_lb:
  0CCD  04            	 inc B
  0CCE  D607          	 sub 7
  0CD0  DA490D        	 jp c,wall_ck_end
  0CD3  20F8          	 jr nz,wall_ck_lb
  0CD5                	wall_ck_lc:
  0CD5  7D            	 ld A,L
  0CD6  D61E          	 sub 30
  0CD8  2808          	 jr z,wall_ck_le
  0CDA                	wall_ck_ld:
  0CDA  0C            	 inc C
  0CDB  D607          	 sub 7
  0CDD  DA490D        	 jp c,wall_ck_end
  0CE0  20F8          	 jr nz,wall_ck_ld
  0CE2                	wall_ck_le:
  0CE2  7C            	 ld A,H
  0CE3  E6C0          	 and 11000000b
  0CE5  CA330D        	 jp z,wall_ck_lu
  0CE8  FE80          	 cp 80h
  0CEA  DA1C0D        	 jp c,wall_ck_lr
  0CED  CA060D        	 jp z,wall_ck_ldd
                      	
  0CF0                	wall_ck_ll:
  0CF0  21C90E        	 ld HL,map_memry_left-17
                      	;x+C
  0CF3  59            	 ld E,C
  0CF4  1600          	 ld D,0
  0CF6  19            	 add HL,DE
                      	;y+17*B
  0CF7  111100        	 ld DE,17
  0CFA  04            	 inc B
  0CFB                	wall_ck_ll_2:
  0CFB  19            	 add HL,DE
  0CFC  10FD          	 djnz wall_ck_ll_2
                      	; or A
                      	; sbc HL,DE
  0CFE  228C0D        	 ld (block_pointaP+1),HL
  0D01  7E            	 ld A,(HL)
  0D02  E680          	 and t;t(80h) or f(0)
  0D04  E1            	 pop HL
                      	
                      	; ld A,"l"
                      	; ld DE,0
                      	; call 0be62h
                      	; pop HL
                      	
  0D05  C9            	 ret
                      	
                      	
  0D06                	wall_ck_ldd:
  0D06  214A0E        	 ld HL,map_memry_top-16
                      	;x+C
  0D09  59            	 ld E,C
  0D0A  1600          	 ld D,0
  0D0C  19            	 add HL,DE
                      	;y+16*B
  0D0D  111000        	 ld DE,16
  0D10  04            	 inc B
  0D11                	wall_ck_ld2:
  0D11  19            	 add HL,DE
  0D12  10FD          	 djnz wall_ck_ld2
                      	; sub HL,DE
  0D14  228C0D        	 ld (block_pointaP+1),HL
  0D17  7E            	 ld A,(HL)
  0D18  E680          	 and t;t(80h) or f(0)
  0D1A  E1            	 pop HL
                      	
                      	; ld A,"d"
                      	; ld DE,0
                      	; call 0be62h
                      	; pop HL
                      	
  0D1B  C9            	 ret
                      	
                      	
  0D1C                	wall_ck_lr:
  0D1C  21C90E        	 ld HL,map_memry_left-17
                      	;x+C
  0D1F  59            	 ld E,C
  0D20  1600          	 ld D,0
  0D22  19            	 add HL,DE
  0D23  23            	 inc HL
                      	;y+17*B
  0D24  111100        	 ld DE,17
  0D27  04            	 inc B
  0D28                	wall_ck_lr_2:
  0D28  19            	 add HL,DE
  0D29  10FD          	 djnz wall_ck_lr_2
                      	; or A
                      	; sbc HL,DE
  0D2B  228C0D        	 ld (block_pointaP+1),HL
  0D2E  7E            	 ld A,(HL)
  0D2F  E680          	 and t;t(80h) or f(0)
  0D31  E1            	 pop HL
                      	
                      	; ld A,"r"
                      	; ld DE,0
                      	; call 0be62h
                      	; pop HL
                      	
  0D32  C9            	 ret
                      	
                      	
                      	
                      	
  0D33                	wall_ck_lu:
  0D33  213A0E        	 ld HL,map_memry_top-16-16
                      	;x+C
  0D36  59            	 ld E,C
  0D37  1600          	 ld D,0
  0D39  19            	 add HL,DE
                      	;y+16*B
  0D3A  111000        	 ld DE,16
  0D3D  04            	 inc B
  0D3E                	wall_ck_lu2:
  0D3E  19            	 add HL,DE
  0D3F  10FD          	 djnz wall_ck_lu2
                      	; or A
                      	; sbc HL,DE
  0D41  228C0D        	 ld (block_pointaP+1),HL
  0D44  7E            	 ld A,(HL)
  0D45  E680          	 and t;t(80h) or f(0)
  0D47  E1            	 pop HL
                      	
                      	; ld A,"u"
                      	; ld DE,0
                      	; call 0be62h
                      	; pop HL
                      	
  0D48  C9            	 ret
  0D49                	wall_ck_end:
  0D49  E1            	 pop HL
  0D4A  AF            	 xor A
  0D4B  C9            	 ret
                      	
                      	
                      	;******************************wall mod block**************************
                      	;********************wall mod****HL=obj_xy************************
  0D4C                	wall_mod:
  0D4C  010000        	 ld BC,0
  0D4F  7E            	 ld A,(HL) 
  0D50  5F            	 ld E,A
  0D51  23            	 inc HL
  0D52  7E            	 ld A,(HL)
  0D53  E63F          	 and 00111111b
  0D55  57            	 ld D,A
  0D56  2B            	 dec HL
                      	 
  0D57  7B            	 ld A,E
  0D58  D61E          	 sub 30
  0D5A  2807          	 jr z,wall_mod_l2
  0D5C                	wall_mod_l1:
  0D5C  D607          	 sub 7
  0D5E  2803          	 jr z,wall_mod_l2
  0D60  30FA          	 jr nc,wall_mod_l1
  0D62  4F            	 ld C,A
                      	
  0D63                	wall_mod_l2
  0D63  7A            	 ld A,D
  0D64  B7            	 or A
  0D65  2807          	 jr z,wall_mod_l4
  0D67                	wall_mod_l3:
  0D67  D607          	 sub 7
  0D69  2803          	 jr z,wall_mod_l4
  0D6B  30FA          	 jr nc,wall_mod_l3
  0D6D  47            	 ld B,A
  0D6E                	wall_mod_l4
                      	; ld A,E
                      	; ld (0f0h),A
                      	; ld A,D
                      	; ld (0f1h),A
                      	; ld A,C
                      	; ld (0f4h),A
                      	; ld A,B
                      	; ld (0f5h),A
  0D6E  C9            	 ret
                      	 
                      	 
                      	 
                      	;*************************************matk action******************************
                      	
  0D6F                	matk_action_gil:
  0D6F  212548        	 ld HL,gil_matk_count
  0D72  5E            	 ld E,(HL)
  0D73  1C            	 inc E
  0D74  1D            	 dec E
  0D75  C8            	 ret z
  0D76  1D            	 dec E
  0D77  73            	 ld (HL),E
                      	
  0D78  212C48        	 ld HL,gil_xy
  0D7B                	matk_action:;HL=obj address+ let push pop
  0D7B  08            	 ex AF,AF'
  0D7C  32CD0D        	 ld (matk_action_gil_ret+1),A
  0D7F  22960D        	 ld (matk_action_HLP+1),HL
  0D82  CDB90C        	 call wall_ck
  0D85  DACC0D        	 jp c,matk_action_gil_ret
  0D88  CACC0D        	 jp z,matk_action_gil_ret
  0D8B                	block_pointaP:
  0D8B  210000        	 ld HL,overwrite		;block address
  0D8E  4E            	 ld C,(HL)
  0D8F  0C            	 inc C
  0D90  CAC10D        	 jp z,gil_matk_break 
  0D93  3600          	 ld (HL),0
                      	 
                      	; call bls
                      	
  0D95                	matk_action_HLP:
  0D95  210000        	 ld HL,overwrite
  0D98  22CF0D        	 ld (matk_action_gil_ret+3),HL
                      	
  0D9B  5E            	 ld E,(HL)
  0D9C  23            	 inc HL
  0D9D  56            	 ld D,(HL)
  0D9E  7A            	 ld A,D
  0D9F  E6C0          	 and 11000000b
  0DA1  2818          	 jr z,matk_action_u
  0DA3  FE80          	 cp 80h
  0DA5  380E          	 jr c,matk_action_r
  0DA7  2806          	 jr z,matk_action_d
  0DA9                	matk_action_l:
  0DA9  1D            	 dec E
  0DAA  CDFA0F        	 call grp_del
  0DAD  181D          	 jr matk_action_gil_ret
  0DAF                	matk_action_d:
  0DAF  14            	 inc D
  0DB0  CDFA0F        	 call grp_del
  0DB3  1817          	 jr matk_action_gil_ret
  0DB5                	matk_action_r:
  0DB5  1C            	 inc E
  0DB6  CDFA0F        	 call grp_del
  0DB9  1811          	 jr matk_action_gil_ret
  0DBB                	matk_action_u:
  0DBB  15            	 dec D
  0DBC  CDFA0F        	 call grp_del
  0DBF  180B          	 jr matk_action_gil_ret
                      	
  0DC1                	gil_matk_break:
  0DC1  DD7ED0        	 ld A,(IX-48)
  0DC4  FE8F          	 cp 8fh
  0DC6  2004          	 jr nz,matk_action_gil_ret
  0DC8  AF            	 xor A
  0DC9  322548        	 ld (gil_matk_count),A
  0DCC                	matk_action_gil_ret:
  0DCC  3E00          	 ld A,overwrite
  0DCE  210000        	 ld HL,overwrite
  0DD1  08            	 ex AF,AF'
  0DD2  C9            	 ret
                      	
                      	
                      	
  0DD3                	Map_make:
  0DD3  CD4B0B        	 call cls
  0DD6  214717        	 ld HL,Map_data
  0DD9  3A9846        	 ld A,(floor)
  0DDC  3D            	 dec A
  0DDD  11C900        	 ld DE,96+105
  0DE0  CDF90A        	 call xsan
  0DE3  115A0E        	 ld DE,map_memry_top
  0DE6  016000        	 ld BC,96
  0DE9  EDB0          	 ldir
  0DEB  11DA0E        	 ld DE,map_memry_left
  0DEE  3E07          	 ld A,7
  0DF0  13            	 inc DE
  0DF1                	map_make_l:
  0DF1  F5            	 push AF
  0DF2  010F00        	 ld BC,15
  0DF5  EDB0          	 ldir
  0DF7  13            	 inc DE
  0DF8  13            	 inc DE
  0DF9  F1            	 pop AF
  0DFA  3D            	 dec A
  0DFB  20F4          	 jr nz,map_make_l
  0DFD  111E06        	 ld DE,061eh
  0E00  DD215A0E      	 ld IX,map_memry_top
  0E04  FD21DA0E      	 ld IY,map_memry_left
                      	
  0E08                	map_make_l_l:
  0E08  DD7E00        	 ld A,(IX)
  0E0B  E680          	 and t
  0E0D  2808          	 jr z,map_make_Xe
  0E0F  D5            	 push DE
  0E10  21620F        	 ld HL,graph_wall+0
  0E13  CD6E0F        	 call grp_set
  0E16  D1            	 pop DE
  0E17                	map_make_Xe:
  0E17  DD23          	 inc IX
                      	
  0E19  FD7E00        	 ld A,(IY)
  0E1C  E680          	 and t
  0E1E  280F          	 jr z,map_make_Ye
  0E20  D5            	 push DE
  0E21  21680F        	 ld HL,graph_wall+6
  0E24  15            	 dec D
  0E25  15            	 dec D
  0E26  15            	 dec D
  0E27  15            	 dec D
  0E28  15            	 dec D
  0E29  15            	 dec D
  0E2A  1D            	 dec E
  0E2B  CD6E0F        	 call grp_set
  0E2E  D1            	 pop DE
  0E2F                	map_make_Ye:
  0E2F  FD23          	 inc IY
                      	
  0E31  3E07          	 ld A,7
  0E33  83            	 add A,E
  0E34  5F            	 ld E,A
  0E35  FE8E          	 cp 142
  0E37  C2080E        	 jp nz,map_make_l_l
                      	 
  0E3A  3E07          	 ld A,7
  0E3C  82            	 add A,D
  0E3D  57            	 ld D,A
  0E3E  FE37          	 cp 55
  0E40  2807          	 jr z,map_make_end
  0E42  1E1E          	 ld E,1eh
  0E44  FD23          	 inc IY
  0E46  C3080E        	 jp map_make_l_l
  0E49                	map_make_end:
  0E49  C9            	 ret
                      	
                      	
                      	
                      	
  0E4A  FFFFFFFFFFFFFF	 db 0ffh,0ffh,0ffh,0ffh,0ffh,0ffh,0ffh,0ffh,0ffh,0ffh,0ffh,0ffh,0ffh,0ffh,0ffh,0ffh;16
  0E5A                	map_memry_top:;1(ture or false)0000000(loop count,7fh=Outer wall)b
  0E5A                	 ds 16
  0E6A                	 ds 16
  0E7A                	 ds 16
  0E8A                	 ds 16
  0E9A                	 ds 16
  0EAA                	 ds 16
  0EBA  FFFFFFFFFFFFFF	 db 0ffh,0ffh,0ffh,0ffh,0ffh,0ffh,0ffh,0ffh,0ffh,0ffh,0ffh,0ffh,0ffh,0ffh,0ffh,0ffh;16
  0ECA  FFFFFFFFFFFFFF	 db 0ffh,0ffh,0ffh,0ffh,0ffh,0ffh,0ffh,0ffh,0ffh,0ffh,0ffh,0ffh,0ffh,0ffh,0ffh,0ffh;16
                      	
                      	
                      	
  0EDA                	map_memry_left:;1(ture or false)0000000(loop count,7fh=Outer wall)b
  0EDA  FF            	 db 0ffh
  0EDB                	 ds 15
  0EEA  FF            	 db 0ffh
  0EEB  FF            	 db 0ffh
  0EEC                	 ds 15
  0EFB  FF            	 db 0ffh
  0EFC  FF            	 db 0ffh
  0EFD                	 ds 15
  0F0C  FF            	 db 0ffh
  0F0D  FF            	 db 0ffh
  0F0E                	 ds 15
  0F1D  FF            	 db 0ffh
  0F1E  FF            	 db 0ffh
  0F1F                	 ds 15
  0F2E  FF            	 db 0ffh
  0F2F  FF            	 db 0ffh
  0F30                	 ds 15
  0F3F  FF            	 db 0ffh
  0F40  FF            	 db 0ffh
  0F41                	 ds 15
  0F50  FF            	 db 0ffh
  0F51  FF            	 db 0ffh
                      	 
  0F52                	 ds 15
  0F61  FF            	 db 0ffh
  0F62                	graph_wall:
  0F62  010101010101  	 db 1,1,1,1,1,1
  0F68  3F0000000000  	 db 3fh,0,0,0,0,0
                      	
                      	
                      	
  0F6E                	grp_set:;HL_data,DE_(y,x),B_databit
  0F6E  0606          	 ld B,6
                      	;
                      	
  0F70  7A            	 ld A,D
  0F71  E6C0          	 and 11000000b
  0F73  281F          	 jr z,grp_set_0
  0F75  FE80          	 cp 80h
  0F77  3814          	 jr c,grp_set_1
  0F79  2809          	 jr z,grp_set_2
                      	;left
  0F7B  3E12          	 ld A,18
  0F7D  85            	 add A,L
  0F7E  6F            	 ld L,A
  0F7F  3013          	 jr nc,grp_set_0
  0F81  24            	 inc H
  0F82  1810          	 jr grp_set_0
                      	;dowm
  0F84                	grp_set_2:
  0F84  3E0C          	 ld A,12
  0F86  85            	 add A,L
  0F87  6F            	 ld L,A
  0F88  300A          	 jr nc,grp_set_0
  0F8A  24            	 inc H
  0F8B  1807          	 jr grp_set_0
                      	;right
  0F8D                	grp_set_1:
  0F8D  3E06          	 ld A,6
  0F8F  85            	 add A,L
  0F90  6F            	 ld L,A
  0F91  3001          	 jr nc,grp_set_0
  0F93  24            	 inc H
                      	
                      	;up,non direction
  0F94                	grp_set_0:
  0F94  7B            	 ld A,E
  0F95  32BB0F        	 ld (grp_set_or1+1),A
  0F98  7A            	 ld A,D
  0F99  E63F          	 and 3fh
  0F9B  1600          	 ld D,0
  0F9D                	grp_set_set1:
  0F9D  14            	 inc D
  0F9E  D608          	 sub 8
  0FA0  30FB          	 jr nc,grp_set_set1
  0FA2  15            	 dec D
  0FA3  C608          	 add A,8
  0FA5                	grp_set_set2:
  0FA5  32C40F        	 ld (grp_set_shiftd_bit+1),A
  0FA8  4F            	 ld C,A
  0FA9  3E08          	 ld A,8
  0FAB  91            	 sub C
  0FAC  32EA0F        	 ld (grp_set_shiftu_bit+1),A
                      	
  0FAF                	grp_set_shiftd:
  0FAF  7A            	 ld A,D			;line number
  0FB0  E5            	 push HL					;HL
  0FB1  21FB10        	 ld HL,grapu_area
  0FB4  119000        	 ld DE,144
  0FB7  CDF90A        	 call xsan		;y+
  0FBA                	grp_set_or1:
  0FBA  1E00          	 ld E,overwrite
  0FBC  1600          	 ld D,0
  0FBE  19            	 add HL,DE		;x+
  0FBF  EB            	 ex DE,HL
  0FC0  E1            	 pop HL			;data
  0FC1  E5            	 push HL					;HL
  0FC2  C5            	 push BC						;BC
  0FC3                	grp_set_shiftd_bit:
  0FC3  0E00          	 ld C,overwrite		;shift bit count
  0FC5  7E            	 ld A,(HL)
  0FC6  08            	 ex AF,AF'
  0FC7  79            	 ld A,C
  0FC8  B7            	 or A
  0FC9  2807          	 jr z,grp_set_shiftd_bit_2
  0FCB  08            	 ex AF,AF'
  0FCC                	grp_set_shiftd_bit_l:
  0FCC  CB27          	 sla A
  0FCE  0D            	 dec C
  0FCF  20FB          	 jr nz,grp_set_shiftd_bit_l
  0FD1  08            	 ex AF,AF'
  0FD2                	grp_set_shiftd_bit_2:
  0FD2  08            	 ex AF,AF'
  0FD3  4F            	 ld C,A
  0FD4  1A            	 ld A,(DE)
  0FD5                	grp_set_change1:
  0FD5  B1            	 or C
  0FD6  12            	 ld (DE),A
  0FD7                	grp_set_shiftd_l:
  0FD7  23            	 inc HL
  0FD8  13            	 inc DE
  0FD9  10E8          	 djnz grp_set_shiftd_bit
                      	
                      	; dec DE
                      	
  0FDB  EB            	 ex DE,HL
  0FDC  119000        	 ld DE,144
  0FDF  19            	 add HL,DE
                      	
                      	
  0FE0  C1            	 pop BC						;HL
  0FE1  7D            	 ld A,L
  0FE2  90            	 sub B
  0FE3  3001          	 jr nc,grp_set_shiftu_bit_b
  0FE5  25            	 dec H
  0FE6                	grp_set_shiftu_bit_b:
  0FE6  6F            	 ld L,A
  0FE7  EB            	 ex DE,HL
                      	
  0FE8  E1            	 pop HL			;data2
  0FE9                	grp_set_shiftu_bit:
  0FE9  0E00          	 ld C,overwrite		;shift bit count
  0FEB  7E            	 ld A,(HL)
  0FEC                	grp_set_shiftu_bit_l
  0FEC  CB3F          	 srl A
  0FEE  0D            	 dec C
  0FEF  20FB          	 jr nz,grp_set_shiftu_bit_l
  0FF1  4F            	 ld C,A
  0FF2  1A            	 ld A,(DE)
  0FF3                	grp_set_change2:
  0FF3  B1            	 or C
  0FF4  12            	 ld (DE),A
  0FF5                	grp_set_shiftu_l:
  0FF5  23            	 inc HL
  0FF6  13            	 inc DE
  0FF7  10F0          	 djnz grp_set_shiftu_bit
                      	
                      	; call grp_o
  0FF9  C9            	 ret
                      	
                      	
                      	
                      	
                      	
                      	
                      	
                      	
                      	
  0FFA                	grp_del:;HL_data,DE_(y,x),B_databit
  0FFA  216510        	 ld HL,del_graph
  0FFD  0606          	 ld B,6
  0FFF  7B            	 ld A,E
  1000  322610        	 ld (grp_set_or1d+1),A
  1003  7A            	 ld A,D
  1004  E63F          	 and 3fh
  1006  1600          	 ld D,0
  1008                	grp_set_set1d:
  1008  14            	 inc D
  1009  D608          	 sub 8
  100B  30FB          	 jr nc,grp_set_set1d
  100D  15            	 dec D
  100E  C608          	 add A,8
  1010                	grp_set_set2d:
  1010  322F10        	 ld (grp_set_shiftd_bitd+1),A
  1013  4F            	 ld C,A
  1014  3E08          	 ld A,8
  1016  91            	 sub C
  1017  325510        	 ld (grp_set_shiftu_bitd+1),A
                      	
  101A                	grp_set_shiftdd:
  101A  7A            	 ld A,D			;line number
  101B  E5            	 push HL					;HL
  101C  21FB10        	 ld HL,grapu_area
  101F  119000        	 ld DE,144
  1022  CDF90A        	 call xsan		;y+
  1025                	grp_set_or1d:
  1025  1E00          	 ld E,overwrite
  1027  1600          	 ld D,0
  1029  19            	 add HL,DE		;x+
  102A  EB            	 ex DE,HL
  102B  E1            	 pop HL			;data
  102C  E5            	 push HL					;HL
  102D  C5            	 push BC						;BC
  102E                	grp_set_shiftd_bitd:
  102E  0E00          	 ld C,overwrite		;shift bit count
  1030  7E            	 ld A,(HL)
  1031  08            	 ex AF,AF'
  1032  79            	 ld A,C
  1033  B7            	 or A
  1034  2807          	 jr z,grp_set_shiftd_bit_2d
  1036  08            	 ex AF,AF'
  1037                	grp_set_shiftd_bit_ld:
  1037  37            	 scf
  1038  17            	 rla
  1039  0D            	 dec C
  103A  20FB          	 jr nz,grp_set_shiftd_bit_ld
  103C  08            	 ex AF,AF'
  103D                	grp_set_shiftd_bit_2d:
  103D  08            	 ex AF,AF'
  103E  4F            	 ld C,A
  103F  1A            	 ld A,(DE)
  1040                	grp_set_change1d:
  1040  A1            	 and C
  1041  12            	 ld (DE),A
  1042                	grp_set_shiftd_ld:
  1042  23            	 inc HL
  1043  13            	 inc DE
  1044  10E8          	 djnz grp_set_shiftd_bitd
                      	
                      	; dec DE
                      	
  1046  EB            	 ex DE,HL
  1047  119000        	 ld DE,144
  104A  19            	 add HL,DE
                      	
                      	
  104B  C1            	 pop BC						;HL
  104C  7D            	 ld A,L
  104D  90            	 sub B
  104E  3001          	 jr nc,grp_set_shiftu_bit_bd
  1050  25            	 dec H
  1051                	grp_set_shiftu_bit_bd:
  1051  6F            	 ld L,A
  1052  EB            	 ex DE,HL
                      	
  1053  E1            	 pop HL			;data2
  1054                	grp_set_shiftu_bitd:
  1054  0E00          	 ld C,overwrite		;shift bit count
  1056  7E            	 ld A,(HL)
  1057                	grp_set_shiftu_bit_ld
  1057  37            	 scf
  1058  1F            	 rra
  1059  0D            	 dec C
  105A  20FB          	 jr nz,grp_set_shiftu_bit_ld
  105C  4F            	 ld C,A
  105D  1A            	 ld A,(DE)
  105E                	grp_set_change2d:
  105E  A1            	 and C
  105F  12            	 ld (DE),A
  1060                	grp_set_shiftu_ld:
  1060  23            	 inc HL
  1061  13            	 inc DE
  1062  10F0          	 djnz grp_set_shiftu_bitd
  1064  C9            	 ret
                      	
  1065                	del_graph:
  1065  C0C0C0C0C0C0  	 db 0c0h,0c0h,0c0h,0c0h,0c0h,0c0h
                      	
                      	
                      	; ds 144
                      	; ds 144
                      	
  106B                	 ds 144
  10FB                	grapu_area:
  10FB                	 ds 144*6
  145B                	 ds 144
                      	 
                      	; ds 144
                      	; ds 144
                      	;********************************Graphics**********************************
  14EB                	graph_title:
  14EB  00000000000000	 db 00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,80h,60h,80h,00,00,0C0h,30h,0Ch,08h,30h,0C0h,0C0h,30h,08h,10h,0E0h,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00
  151D  00000000000000	 db 00,00,00,00,00,00,00,00,00,80h,0C0h,00,00,80h,60h,10h,18h,06h,01h,00h,01h,0Eh,03h,00,00,00,00,00,00,01,00,00,00,03,0Ch,30h,40h,080h,00,80h,0E0h,00,00,00,00,00,00,00,00,00
  154F  000000000000C0	 db 00,00,00,00,00,00,0C0h,30h,0Eh,01h,4Fh,66h,0F1h,0E0h,0F0h,58h,58h,40h,20h,80h,0E0h,0F8h,80h,0F0h,0C0h,0E0h,0F0h,0D8h,68h,0A9h,0C3h,42h,82h,86h,84h,0Ch,18h,79h,0F6h,0E1h,0C1h,86h,38h,0C0h,00,00,00,00,00,00
  1581  00804020180601	 db 00,80h,40h,20h,18h,06h,01h,00,00,00,00,0Fh,3Fh,7Fh,0FEh,0F8h,0F8h,0F0h,0FEh,0FFh,0FFh,0FFh,0FFh,0FFh,0FFh,0FFh,0FFh,0FFh,0FFh,0FFh,0FFh,0FFh,0FFh,7Eh,7Eh,7Dh,7Dh,78h,7Dh,3Fh,1Fh,0Fh,00,00,03h,0Ch,70h,80h,00,00
  15B3  00FF0000000000	 db 00,0FFh,00,00,00,00,00,00,00,0F8h,08,08,0F0h,00,0FCh,02Eh,06Fh,0D7h,07,7Fh,80h,00,0F8h,00,0F0h,50h,4Ch,4Eh,0FFh,07,0F7h,0Fh,4Eh,4Ch,0D4h,00,0F0h,50h,48h,48h,0F8h,00,00,00,00,00,00,0Fh,30h,0C0h
  15E5  78474040404044	 db 78h,47h,40h,40h,40h,40h,44h,44h,44h,45h,45h,45h,44h,44h,45h,44h,44h,45h,44h,44h,45h,45h,45h,44h,45h,44h,44h,44h,45h,44h,44h,45h,45h,45h,45h,44h,45h,44h,44h,44h,45h,44h,44h,44h,40h,40h,40h,40h,40h,7Fh
                      	
  1617                	graph_gil_ulf:
  1617  000C3F1F0C00  	 db 00,0Ch,3Fh,1Fh,0Ch,00
  161D                	graph_gil_rlf:
  161D  00003F3F0C00  	 db 00,00,3Fh,3Fh,0Ch,00
  1623                	graph_gil_dlf:
  1623  000C1F370C00  	 db 00,0Ch,1Fh,37h,0Ch,00
  1629                	graph_gil_llf:
  1629  000C3F3F0000  	 db 00,0Ch,3Fh,3Fh,00,00
                      	
  162F                	graph_gil_urf:
  162F  000C1F3F0C00  	 db 00,0Ch,1Fh,3Fh,0Ch,00
  1635                	graph_gil_rrf:
  1635  00201F1F2C00  	 db 00,20h,1Fh,1Fh,2Ch,00
  163B                	graph_gil_drf:
  163B  000C3F170C00  	 db 00,0Ch,3Fh,17h,0Ch,00
  1641                	graph_gil_lrf:
  1641  002C1F1F2000  	 db 00,2Ch,1Fh,1Fh,20h,00
                      	
  1647                	graph_gilsw_ulf:
  1647  000C3F1F0C08  	 db 00,0Ch,3Fh,1Fh,0Ch,08
  164D  080C3F3F0C00  	 db 08h,0Ch,3Fh,3Fh,0Ch,00
  1653  080C1F370C00  	 db 08,0Ch,1Fh,37h,0Ch,00
  1659  000C3F3F0C08  	 db 00,0Ch,3Fh,3Fh,0Ch,08
                      	;graph_gilsw_urf:
  165F  000C1F3F0C08  	 db 00,0Ch,1Fh,3Fh,0Ch,08
  1665  082C1F1F2C00  	 db 08,2Ch,1Fh,1Fh,2Ch,00
  166B  080C3F170C00  	 db 08,0Ch,3Fh,17h,0Ch,00
  1671  002C1F1F2C08  	 db 00,2Ch,1Fh,1Fh,2Ch,08
                      	
  1677                	graph_gilsword_ulf:
  1677  1E0C3F1F0407  	 db 1Eh,0Ch,3Fh,1Fh,04h,07h
  167D  000E3F3F0808  	 db 00,0Eh,3Fh,3Fh,08,08
  1683  38041F3F0C1E  	 db 38h,04h,1Fh,3Fh,0Ch,1Eh
  1689  08083F3F0E00  	 db 08,08,3Fh,3Fh,0Eh,00
                      	;graph_gilsword_ulf:
  168F  1E0C1F3F0407  	 db 1Eh,0Ch,1Fh,3Fh,04,07
  1695  002E1F1F2808  	 db 00,2Eh,1Fh,1Fh,28h,08
  169B  38043F1F0C1E  	 db 38h,04h,3Fh,1Fh,0Ch,1Eh
  16A1  08281F1F2E00  	 db 08,28h,1Fh,1Fh,2Eh,00
                      	
                      	
  16A7                	graph_sraimd:
  16A7  00181C1C1800  	 db 00,18h,1Ch,1Ch,18h,00
  16AD                	graph_sraimu:
  16AD  00181C1C1800  	 db 00,18h,1Ch,1Ch,18h,00
  16B3                	graph_sraimd1:
  16B3  000C1A1E0C00  	 db 00,0Ch,1Ah,1Eh,0Ch,00
  16B9                	graph_sraimu2:
  16B9  000C1A1E0C00  	 db 00,0Ch,1Ah,1Eh,0Ch,00
                      	
  16BF                	magic:
  16BF  032E3F3F2E03  	 db 03,2Eh,3Fh,3Fh,2Eh,03
  16C5                	magicr:
  16C5  00203F3F2E18  	 db 00,20h,3Fh,3Fh,2Eh,18h
  16CB                	magic3:
  16CB  182E3F3F2E18  	 db 18h,2Eh,3Fh,3Fh,2Eh,18h
  16D1                	magic4:
  16D1  182E3F3F2000  	 db 18h,2Eh,3Fh,3Fh,20h,00
                      	 
  16D7                	graph_spell:
  16D7  000018180000  	 db 00,00,18h,18h,00,00
  16DD  000018180000  	 db 00,00,18h,18h,00,00
  16E3  000018180000  	 db 00,00,18h,18h,00,00
  16E9  000018180000  	 db 00,00,18h,18h,00,00
                      	 
                      	
  16EF                	graph_n_knightu:;r foot
  16EF  000C1F3F0407  	 db 00,0Ch,1Fh,3Fh,04,07
  16F5                	graph_n_knightr:
  16F5  00201F1F2808  	 db 00,20h,1Fh,1Fh,28h,08
  16FB                	graph_n_knightd:
  16FB  38043F1F0C00  	 db 38h,04h,3Fh,1Fh,0Ch,00
  1701                	graph_n_knightl:
  1701  08281F1F2000  	 db 08,28h,1Fh,1Fh,20h,00
                      	 
                      	;graph_n_knightu:;l foot
  1707  000C3F1F0407  	 db 00,0Ch,3Fh,1Fh,04h,07h
                      	;graph_n_knightr:
  170D  00003F3F0808  	 db 00,00,3Fh,3Fh,08h,08
                      	;graph_n_knightd:
  1713  38041F3F0C00  	 db 38h,04h,1Fh,3Fh,0Ch,00
                      	;graph_n_knightl:
  1719  08083F3F0000  	 db 08,08,3Fh,3Fh,00,00
                      	
                      	
  171F                	dammy:
  171F  000000000000  	 db 0,0,0,0,0,0
  1725  000000000000  	 db 0,0,0,0,0,0
  172B  000000000000  	 db 0,0,0,0,0,0
  1731  000000000000  	 db 0,0,0,0,0,0
                      	;************************************Data**************************************
  1737  2122238F008384	obj_1:db 21h,22h,23h,8fh,0,83h,84h,85h,1,1,1,1,1,0,8fh,0
                      	
                      	
  1747                	Map_data:;96+105=201byte
                      	; db t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t;d
                      	; db t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t
                      	; db t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t
                      	; db t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t
                      	; db t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t
                      	; db t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t
                      	
                      	; db f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f;d
                      	; db f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f
                      	; db f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f
                      	; db f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f
                      	; db f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f
                      	; db f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f
                      	
  1747  00008080800000	 db f,f,t,t,t,f,f,f,f,f,f,t,f,t,f,f
  1757  00000080008000	 db f,f,f,t,f,t,f,t,f,t,t,f,t,t,f,t
  1767  80008080000080	 db t,f,t,t,f,f,t,f,f,f,f,f,t,f,f,t
  1777  00008080808000	 db f,f,t,t,t,t,f,t,f,t,f,f,f,t,f,f
  1787  00008080808000	 db f,f,t,t,t,t,f,t,t,f,f,t,f,t,f,t
  1797  80008000008000	 db t,f,t,f,f,t,f,f,t,t,f,t,t,t,f,t
                      	
                      	
                      	; db t,t,t,t,t,t,t,t,t,t,t,t,t,t,t;d
                      	; db t,t,t,t,t,t,t,t,t,t,t,t,t,t,t
                      	; db t,t,t,t,t,t,t,t,t,t,t,t,t,t,t
                      	; db t,t,t,t,t,t,t,t,t,t,t,t,t,t,t
                      	; db t,t,t,t,t,t,t,t,t,t,t,t,t,t,t
                      	; db t,t,t,t,t,t,t,t,t,t,t,t,t,t,t
                      	; db t,t,t,t,t,t,t,t,t,t,t,t,t,t,t
                      	
                      	; db f,f,f,f,f,f,f,f,f,f,f,f,f,f,f;d
                      	; db f,f,f,f,f,f,f,f,f,f,f,f,f,f,f
                      	; db f,f,f,f,f,f,f,f,f,f,f,f,f,f,f
                      	; db f,f,f,f,f,f,f,f,f,f,f,f,f,f,f
                      	; db f,f,f,f,f,f,f,f,f,f,f,f,f,f,f
                      	; db f,f,f,f,f,f,f,f,f,f,f,f,f,f,f
                      	; db f,f,f,f,f,f,f,f,f,f,f,f,f,f,f
                      	
  17A7  80000000000080	 db t,f,f,f,f,f,t,f,t,t,f,f,f,f,t
  17B6  00800000808000	 db f,t,f,f,t,t,f,t,f,f,f,t,f,t,f
  17C5  80800080800000	 db t,t,f,t,t,f,f,t,t,t,t,f,t,t,f
  17D4  80800000008080	 db t,t,f,f,f,t,t,t,f,f,t,t,f,t,f
  17E3  80000000800080	 db t,f,f,f,t,f,t,f,t,t,t,t,t,f,t
  17F2  00008000000000	 db f,f,t,f,f,f,f,f,f,t,f,f,t,f,f
  1801  00800080008080	 db f,t,f,t,f,t,t,f,f,f,f,f,t,f,f
                      	 
  1810                	 ds 201*59
                      	 
  4663                	hp_table1:
  4663  01010101010101	 db 1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1
  4673                	hp_table2:
  4673  01010101181818	 db 1,1,1,1,24,24,24,1,1
  467C                	hp_table3:
  467C  18303060609060	 db 24,48,48,96,96,144,96
  4683                	hp_table4:
  4683  3050700160    	 db 48,80,112,1,96
  4688                	hp_table5:
  4688  01010101010101	 db 1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,10110000b
                      	 
                      	;**********************************Variable**************************************
  4698  00            	floor:db 0
  4699  0000          	pdoor_xy:dw 0		;83h
  469B  0000          	pkey_xy:dw 0		;85h
  469D  0000          	pgil_xy:dw 0		;84h,8fh
  469F                	obj:ds 48
  46CF                	obj_hp:ds 48
  46FF                	obj_wp:ds 48
  472F                	obj_st:ds 48
  475F                	obj_xy:ds 96;(x,y&d)
  47BF                	obj_st2:ds 48
  47EF                	obj_st3:ds 48
                      	
  481F  00            	gil_button:db 0
  4820  00            	gil_hp:db 0
  4821  00            	gil_wp:db 0
  4822  00            	gil_st1:db 0	;00 or ffh:right foot or left foot
  4823  00            	gil_st2:db 0	;bit 0-6:counter,bit 7:sword set,if bit 7 enable and bit 0-6 > 0 dec (st2)
                      			;
  4824  00            	gil_matk:db 0	;1:c,2:s,3:g,0:none
  4825  FF            	gil_matk_count:db 255	;matk use count.it is deced when use a matk.
  4826  00            	gil_bt:db 0	;1 is dash enable.
  4827  00            	gil_sword:db 0	;1:dragon,2:ex
  4828  00            	gil_armor:db 0	;1 is hyper.
  4829  00            	gil_gunt:db 0	;1 is hyper.
  482A  00            	gil_shield:db 0	;1 is hyper.
  482B  00            	gil_neck:db 0	;1:g,2:r,3:b.
                      	
  482C                	gil_xy:ds 2
  482E                	gil_dblock:ds 2
  4830                	end
