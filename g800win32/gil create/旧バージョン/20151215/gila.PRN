			  Z80 ASSEMBLER - ZASM VER 1.6
  0100                	org 0100h
                      	
  0000                	overwrite:equ 0
  001E                	x0:equ 30
  008C                	xm:equ 140
  0000                	y0:equ 0
  002F                	ym:equ 47
  0080                	t:equ 80h
  0000                	f:equ 0
                      	
  BFD0                	grp:equ 0bfd0h
  BFF1                	msp:equ 0bff1h
  BCFD                	kwait:equ 0bcfdh
  BE53                	kscan:equ 0be53h
                      	
                      	
                      	
                      	;*******************Title graph********************
  0100                	start:
  0100  210000        	 ld HL,0
  0103  39            	 add HL,SP
  0104  225114        	 ld (retP+1),HL
  0107  228401        	 ld (rec+1),HL
  010A  227F04        	 ld (rec2+1),HL
  010D  CDD914        	 call cls 
  0110  21F21E        	 ld HL,graph_title
  0113  110800        	 ld DE,0008h
  0116  0632          	 ld B,50
  0118  CD2415        	 call grp_open
  011B                	start_l:
  011B  3E01          	 ld A,1
  011D  32AD53        	 ld (floor),A
  0120  CD3315        	 call keysc		;left,right,on,0,/,space,down,up
  0123  CB57          	 bit 2,A
  0125  C0            	 ret nz
  0126  CB5F          	 bit 3,A
  0128  2006          	 jr nz,before_game_c
  012A  CB6F          	 bit 5,A
  012C  2052          	 jr nz,init
  012E  18EB          	 jr start_l
                      	;*****************Continue*******************
  0130                	before_game_c:
  0130  CB6F          	 bit 5,A
  0132  28E7          	 jr z,start_l
  0134  CDD914        	 call cls
  0137  216804        	 ld HL,continue_ms
  013A  110201        	 ld DE,0102h
  013D  0612          	 ld B,18
  013F  CDF1BF        	 call msp
  0142  2AAD53        	 ld HL,(floor)
  0145  2600          	 ld H,0
  0147  CD9314        	 call ascn
  014A                	before_game_c_floor:
  014A  2AAD53        	 ld HL,(floor)
  014D  2600          	 ld H,0
  014F  CD9314        	 call ascn
  0152  219114        	 ld HL,nmemry+3
  0155  110B03        	 ld DE,030bh
  0158  0602          	 ld B,2
  015A  CDF1BF        	 call msp
  015D  CDFDBC        	 call kwait
  0160  21AD53        	 ld HL,floor
  0163  FE1E          	 cp 1eh
  0165  281C          	 jr z,Stating_before
  0167  FE20          	 cp 20h
  0169  280C          	 jr z,before_game_c_u
  016B  FE1F          	 cp 1fh
  016D  20DB          	 jr nz,before_game_c_floor
  016F                	before_game_c_d:
  016F  35            	 dec (HL)
  0170  AF            	 xor A
  0171  BE            	 cp (HL)
  0172  20D6          	 jr nz,before_game_c_floor
  0174  34            	 inc (HL)
  0175  18D3          	 jr before_game_c_floor
  0177                	before_game_c_u:
  0177  34            	 inc (HL)
  0178  3E3D          	 ld A,61
  017A  BE            	 cp (HL)
  017B  20CD          	 jr nz,before_game_c_floor
  017D  35            	 dec (HL)
  017E  18CA          	 jr before_game_c_floor
                      	 
                      	 
                      	 
                      	;***************init************************** 
  0180                	init:
  0180  CD0902        	 call init_c
                      	 
                      	;***************Starting game****************
                      	;***************massage*********************
                      	
  0183                	Stating_before:
  0183                	rec:
  0183  310000        	 ld SP,0
  0186  CD1802        	 call stating_before_c
                      	
                      	;***********************free aria cleen****************
                      	
  0189  CD5602        	 call freecls
                      	
                      	;***********************map set************************
  018C  CD8917        	 call Map_make
                      	
                      	;********************************obj set***************************
                      	
  018F  CDEA02        	 call nextck
                      	
                      	;***********************obj init************************
  0192                	stating_obj:
  0192  21B453        	 ld HL,obj
  0195  3600          	 ld (HL),0
  0197  11B553        	 ld DE,obj+1
  019A  015001        	 ld BC,48+48+48+96+48+48
  019D  EDB0          	 ldir
                      	;***********************obj countor**************
  019F  212222        	 ld HL,obj_1
  01A2  3AAD53        	 ld A,(floor)
  01A5  3D            	 dec A
  01A6  280B          	 jr z,stating_obj_1
                      	
  01A8  57            	 ld D,A
                      	;*********************0=end sign****next floor data***ldi loop**********
  01A9                	stating_obj_2:
  01A9  010000        	 ld BC,0
  01AC  3E00          	 ld A,0
  01AE  EDB1          	 cpir
  01B0  15            	 dec D
  01B1  20F6          	 jr nz,stating_obj_2
  01B3                	stating_obj_1:
  01B3  11B453        	 ld DE,obj
  01B6                	stating_obj_3:
  01B6  7E            	 ld A,(HL)
  01B7  B7            	 or A
  01B8  2804          	 jr z,stating_obj_7
  01BA  EDA0          	 ldi
  01BC  18F8          	 jr stating_obj_3
                      	
                      	;*********************obj cp= then goto mainbefore***************
                      	
  01BE                	stating_obj_7:
  01BE  21B453        	 ld HL,obj
  01C1  110000        	 ld DE,0
  01C4                	stating_obj_4:
  01C4  AF            	 xor A
  01C5  BE            	 cp (HL)
  01C6  CA0002        	 jp z,main_before		;stating_obj_hp
  01C9  E5            	 push HL
  01CA  D5            	 push DE
                      	
                      	;x=x+7*A
  01CB  ED5F          	 ld A,R;call rand
  01CD  E60F          	 and 0fh		;a=0~15
  01CF  211E00        	 ld HL,001eh	;30
  01D2  110700        	 ld DE,0007h
  01D5  CD8714        	 call xsan
                      	
                      	
                      	
                      	;y=y+7*A
  01D8  CD6C14        	 call rand
  01DB                	stating_obj_5:
  01DB  D607          	 sub 7
  01DD  30FC          	 jr nc,stating_obj_5
  01DF  C607          	 add A,7
  01E1  110007        	 ld DE,0700h
  01E4  CD8714        	 call xsan
                      	
  01E7  D1            	 pop DE
  01E8  E5            	 push HL		;xy
                      	
  01E9  217454        	 ld HL,obj_xy		;address
  01EC  19            	 add HL,DE		;address+
                      	
  01ED  CDEF02        	 call stating_obj_hp_wp
                      	
  01F0  19            	 add HL,DE		;address++
  01F1  22F701        	 ld (stating_obj_6+1),HL
                      	; add HL,DE		;address++(direction)
  01F4  13            	 inc DE
                      	
  01F5  E1            	 pop HL
                      	
                      	; ld HL,151eh;(30,0)
                      	
  01F6                	stating_obj_6:
  01F6  220000        	 ld (overwrite),HL
  01F9  224155        	 ld (gil_xy),HL
  01FC  E1            	 pop  HL
  01FD  23            	 inc HL
  01FE  18C4          	 jr stating_obj_4
                      	
                      	
                      	;****************before farse***pgil_xy set**************
                      	
  0200                	main_before:
  0200  CD6402        	 call main_before_c
  0203  CD4003        	 call itemprint
  0206  C3F004        	 jp main
                      	
                      	
                      	;**************************************************************************
                      	;***************************init sub****************************************
                      	;**************************************************************************
                      	
  0209                	init_c:
  0209  213955        	 ld HL,gil_matk
  020C  113A55        	 ld DE,gil_matk+1
  020F  013200        	 ld BC,50
  0212  3E00          	 ld A,0
  0214  77            	 ld (HL),A
  0215  EDB0          	 ldir
  0217  C9            	 ret
                      	 
                      	 
  0218                	Stating_before_c:
  0218  CDD914        	 call cls
  021B  215004        	 ld HL,stating_ms1
  021E  110801        	 ld DE,0108h
  0221  0609          	 ld B,9
  0223  CDF1BF        	 call msp
  0226  215904        	 ld HL,stating_ms2
  0229  110802        	 ld De,0208h
  022C  060A          	 ld B,10
  022E  CDF1BF        	 call msp
  0231  216304        	 ld HL,stating_msf
  0234  110804        	 ld De,0408h
  0237  0605          	 ld B,5
  0239  CDF1BF        	 call msp
  023C  2AAD53        	 ld HL,(floor)
  023F  2600          	 ld H,0
  0241  CD9314        	 call ascn
  0244  219114        	 ld HL,nmemry+3
  0247  110E04        	 ld DE,040eh
  024A  0602          	 ld B,2
  024C  CDF1BF        	 call msp
  024F  CD5C14        	 call tim255
  0252  CDFDBC        	 call kwait
  0255  C9            	 ret
                      	 
  0256                	freecls:
  0256  210A22        	 ld HL,dammy
  0259  AF            	 xor A
  025A  77            	 ld (HL),A
  025B  110B22        	 ld DE,dammy+1
  025E  011700        	 ld BC,23
  0261  EDB0          	 ldir
  0263  C9            	 ret
                      	
  0264                	main_before_c:
  0264  2A4155        	 ld HL,(gil_xy)
  0267  22B253        	 ld (pgil_xy),HL 
  026A  212222        	 ld HL,obj_1
  026D  3AAD53        	 ld A,(floor)
  0270  3D            	 dec A
  0271  2810          	 jr z,main_before_15
  0273  57            	 ld D,A
  0274  AF            	 xor A
  0275  010000        	 ld BC,0
  0278                	main_before_1:
  0278  EDB1          	 cpir
  027A  15            	 dec D
  027B  20FB          	 jr nz,main_before_1
  027D  21B453        	 ld HL,obj
  0280  B7            	 or A
  0281  ED42          	 sbc HL,BC		;it's start pointa**obj++
                      	
                      	
                      	;******************door set****************************
  0283                	main_before_15:
  0283  E5            	 push HL		;obj
  0284  3E83          	 ld A,83h
  0286  010000        	 ld BC,0
                      	;main_before_2:
  0289  EDB1          	 cpir
  028B  03            	 inc BC
  028C  217454        	 ld HL,obj_xy
  028F  B7            	 or A
  0290  ED42          	 sbc HL,BC
  0292  B7            	 or A
  0293  ED42          	 sbc HL,BC
  0295  5E            	 ld E,(HL)
  0296  23            	 inc HL
  0297  56            	 ld D,(HL)
  0298  ED53AE53      	 ld (pdoor_xy),DE
                      	
                      	;*****************key set*******************************
                      	
  029C  E1            	 pop HL
  029D  3E85          	 ld A,85h
  029F  010000        	 ld BC,0
                      	;main_before_3:
  02A2  EDB1          	 cpir
  02A4  03            	 inc BC
  02A5  217454        	 ld HL,obj_xy
  02A8  B7            	 or A
  02A9  ED42          	 sbc HL,BC
  02AB  B7            	 or A
  02AC  ED42          	 sbc HL,BC
  02AE  5E            	 ld E,(HL)
  02AF  23            	 inc HL
  02B0  56            	 ld D,(HL)
  02B1  ED53B053      	 ld (pkey_xy),DE
  02B5  AF            	 xor A
  02B6  325155        	 ld (key),A
                      	
                      	;*********************obj cross gil********************
                      	
  02B9  2A4155        	 ld HL,(gil_xy)
  02BC  4D            	 ld C,L
  02BD  44            	 ld B,H
  02BE  217454        	 ld HL,obj_xy
  02C1                	main_before_gil:
  02C1  E5            	 push HL
  02C2  5E            	 ld E,(HL)
  02C3  23            	 inc HL
  02C4  56            	 ld D,(HL)
  02C5  EB            	 ex DE,HL
  02C6  B7            	 or A
  02C7  ED42          	 sbc HL,BC
  02C9  E1            	 pop HL
  02CA  2804          	 jr z,main_before_gil_z
  02CC  23            	 inc HL
  02CD  23            	 inc HL
  02CE  18F1          	 jr main_before_gil
  02D0                	main_before_gil_z:
  02D0  23            	 inc HL
  02D1  23            	 inc HL
  02D2  7E            	 ld A,(HL)
  02D3  B7            	 or A
  02D4  C29201        	 jp nz,stating_obj
                      	 
  02D7  3AF701        	 ld A,(stating_obj_6+1)
  02DA  6F            	 ld L,A
  02DB  3AF801        	 ld A,(stating_obj_6+2)
  02DE  67            	 ld H,A
  02DF  3E15          	 ld A,21
  02E1  77            	 ld (HL),A
  02E2  23            	 inc HL
  02E3  3E2A          	 ld A,42
  02E5  77            	 ld (HL),A
  02E6  22F000        	 ld (0f0h),HL
  02E9  C9            	 ret
                      	 
                      	 
  02EA                	nextck:
  02EA  AF            	 xor A
  02EB  325155        	 ld (key),A
  02EE  C9            	 ret
                      	
                      	 
                      	;*********************obs  hp  wp set*********************
  02EF                	stating_obj_hp_wp:
  02EF  E5            	 push HL
  02F0  D5            	 push DE
                      	
  02F1  21B453        	 ld HL,obj
  02F4  19            	 add HL,DE
  02F5  7E            	 ld A,(HL)
  02F6  E60F          	 and 0fh
  02F8  CB7E          	 bit 7,(HL)
  02FA  2028          	 jr nz,stating_obj_hp_wp5
  02FC  CB76          	 bit 6,(HL)
  02FE  201D          	 jr nz,stating_obj_hp_wp4
  0300  CB6E          	 bit 5,(HL)
  0302  2012          	 jr nz,stating_obj_hp_wp3
  0304  CB66          	 bit 4,(HL)
  0306  2007          	 jr nz,stating_obj_hp_wp2
  0308                	stating_obj_hp_wp1:
  0308  217553        	 ld HL,hp_table1
  030B  C32B03        	 jp stating_obj_hp_wp6
  030E  C9            	 ret
  030F                	stating_obj_hp_wp2:
  030F  218553        	 ld HL,hp_table2
  0312  C32B03        	 jp stating_obj_hp_wp6
  0315  C9            	 ret
  0316                	stating_obj_hp_wp3:
  0316  218E53        	 ld HL,hp_table3
  0319  C32B03        	 jp stating_obj_hp_wp6
  031C  C9            	 ret
  031D                	stating_obj_hp_wp4:
  031D  219553        	 ld HL,hp_table4
  0320  C32B03        	 jp stating_obj_hp_wp6
  0323  C9            	 ret
  0324                	stating_obj_hp_wp5:
  0324  219D53        	 ld HL,hp_table5
  0327  C32B03        	 jp stating_obj_hp_wp6
  032A  C9            	 ret
  032B                	stating_obj_hp_wp6:
  032B  5F            	 ld E,A
  032C  1D            	 dec E
  032D  1600          	 ld D,0
  032F  19            	 add HL,DE
  0330  7E            	 ld A,(HL)
  0331  D1            	 pop DE
  0332  21E453        	 ld HL,obj_hp
  0335  19            	 add HL,DE
  0336  77            	 ld (HL),A
                      	 
  0337  E1            	 pop HL
  0338  E67F          	 and 01111111b
                      	 ;********************************************************HP*******************************
  033A  3E38          	 ld A,00111000b
  033C  323555        	 ld (gil_hp),A
  033F  C9            	 ret	;gil is end of data.
                      	 
                      	 
                      	;************************item print1*******************************************
                      	 
  0340                	itemprint:
  0340  E5            	 push HL
                      	 
  0341  3A5155        	 ld A,(key)
  0344  B7            	 or A
  0345  2809          	 jr z,itemprint_matk
  0347  219E21        	 ld HL,graph_key
  034A  110000        	 ld DE,0000h
  034D  CD7519        	 call grp_set
  0350                	itemprint_matk:
  0350  3A4555        	 ld A,(matk)
  0353  B7            	 or A
  0354  280C          	 jr z,itemprint_boot
  0356  CD2304        	 call matk_set
  0359  21B621        	 ld HL,graph_matk
  035C  110007        	 ld DE,0700h
  035F  CD7519        	 call grp_set
  0362                	itemprint_boot:
  0362  3E01          	 ld A,1
  0364  324655        	 ld (boot),A
  0367  3A4655        	 ld A,(boot)
  036A  B7            	 or A
  036B  2809          	 jr z,itemprint_po
  036D  21BC21        	 ld HL,graph_boot
  0370  110707        	 ld DE,0707h
  0373  CD7519        	 call grp_set
  0376                	itemprint_po:
  0376  3A5055        	 ld A,(posion)
  0379  B7            	 or A
  037A  2809          	 jr z,itemprint_sword
  037C  21C221        	 ld HL,graph_po
  037F  110E07        	 ld DE,070eh
  0382  CD7519        	 call grp_set
  0385                	itemprint_sword:
  0385  3A4755        	 ld A,(sword)
  0388  B7            	 or A
  0389  2809          	 jr z,itemprint_kndl
  038B  21E021        	 ld HL,graph_sword
  038E  11000E        	 ld DE,0e00h
  0391  CD7519        	 call grp_set
  0394                	itemprint_kndl:
  0394  3A4E55        	 ld A,(kndl)
  0397  B7            	 or A
  0398  2809          	 jr z,itemprint_gnt
  039A  21D421        	 ld HL,graph_kndl
  039D  110015        	 ld DE,1500h
  03A0  CD7519        	 call grp_set
  03A3                	itemprint_gnt:
  03A3  3A4955        	 ld A,(gnt)
  03A6  B7            	 or A
  03A7  2809          	 jr z,itemprint_armor
  03A9  21F221        	 ld HL,graph_gnt
  03AC  11070E        	 ld DE,0e07h
  03AF  CD7519        	 call grp_set
  03B2                	itemprint_armor:
  03B2  3A4855        	 ld A,(armor)
  03B5  B7            	 or A
  03B6  2809          	 jr z,itemprint_shield
  03B8  21DA21        	 ld HL,graph_armor
  03BB  110E0E        	 ld DE,0e0eh
  03BE  CD7519        	 call grp_set
  03C1                	itemprint_shield:
  03C1  3A4A55        	 ld A,(shield)
  03C4  B7            	 or A
  03C5  2809          	 jr z,itemprint_hlmt
  03C7  21E621        	 ld HL,graph_shield
  03CA  110715        	 ld DE,1507h
  03CD  CD7519        	 call grp_set
  03D0                	itemprint_hlmt:
  03D0  3A4B55        	 ld A,(hlmt)
  03D3  B7            	 or A
  03D4  280C          	 jr z,itemprint_nec
  03D6  CD3D04        	 call hlmt_set
  03D9  21F821        	 ld HL,graph_hlmt
  03DC  11001C        	 ld DE,1c00h
  03DF  CD7519        	 call grp_set
  03E2                	itemprint_nec:
  03E2  3A5255        	 ld A,(nec)
  03E5  B7            	 or A
  03E6  2809          	 jr z,itemprint_brns
  03E8  21FE21        	 ld HL,graph_nec
  03EB  110E15        	 ld DE,150eh
  03EE  CD7519        	 call grp_set
  03F1                	itemprint_brns:
  03F1  3A4F55        	 ld A,(brns)
  03F4  B7            	 or A
  03F5  2809          	 jr z,itemprint_meis
  03F7  21CE21        	 ld HL,graph_brns
  03FA  11071C        	 ld DE,1c07h
  03FD  CD7519        	 call grp_set
  0400                	itemprint_meis:
  0400  3A5355        	 ld A,(meis)
  0403  B7            	 or A
  0404  2809          	 jr z,itemprint_rod
  0406  210422        	 ld HL,graph_meis
  0409  110E1C        	 ld DE,1c0eh
  040C  CD7519        	 call grp_set
  040F                	itemprint_rod:
  040F  3A4C55        	 ld A,(rod)
  0412  B7            	 or A
  0413  2809          	 jr z,itemprint_
  0415  21C821        	 ld HL,graph_rod
  0418  110023        	 ld DE,2300h
  041B  CD7519        	 call grp_set
  041E                	itemprint_:
                      	
  041E  CD0D15        	 call grp_o
  0421  E1            	 pop HL
  0422  C9            	 ret
                      	 
                      	 
                      	;****************************item set************************************
  0423                	matk_set:
  0423  FE01          	 cp 1
  0425  2810          	 jr z,cmtk
  0427  FE02          	 cp 2
  0429  2806          	 jr z,smtk
  042B                	gmtk:
  042B  3EFF          	 ld A,255
  042D  323A55        	 ld (gil_matk_count),A
  0430  C9            	 ret
  0431                	smtk:
  0431  3E04          	 ld A,4
  0433  323A55        	 ld (gil_matk_count),A
  0436  C9            	 ret
  0437                	cmtk:
  0437  3E02          	 ld A,2
  0439  323A55        	 ld (gil_matk_count),A
  043C  C9            	 ret
                      	 
  043D                	hlmt_set:
  043D  FE01          	 cp 1
  043F  C0            	 ret nz
  0440  FE03          	 cp 3
  0442  2806          	 jr z,ihlmt
  0444  3E60          	 ld A,96
  0446  323555        	 ld (gil_hp),A
  0449  C9            	 ret
  044A                	ihlmt:
  044A  3E10          	 ld A,16
  044C  323555        	 ld (gil_hp),A
  044F  C9            	 ret
                      	
                      	 
  0450                	stating_ms1:
  0450  47455420524541	 db "GET READY"
  0459                	stating_ms2:
  0459  504C4159455220	 db "PLAYER ONE"
  0463                	stating_msf:
  0463  464C4F4F52    	 db "FLOOR"
  0468                	continue_ms:
  0468  53454C45435420	 db "SELECT START FLOOR"
  047A                	wall_grp:
  047A  FFFFFF        	 db 0ffh,0ffh,0ffh
  047D                	pole_grp:
  047D  01            	 db 1h
                      	 
                      	 
                      	;*************************************************************************************
                      	;********************************recover**********************************************
  047E                	stating_rec:
  047E                	rec2:
  047E  310000        	 ld SP,0
  0481  CD1802        	 call Stating_before_c
  0484  CD8917        	 call map_make
  0487  CD5602        	 call freecls
  048A  AF            	 xor A
  048B  325155        	 ld (key),A
                      	; xor A
                      	; ld (posion),A
  048E  ED5BB253      	 ld DE,(pgil_xy)
  0492  ED534155      	 ld (gil_xy),DE
  0496                	stating_rec1:
  0496  DD21E453      	 ld IX,obj_hp
  049A  217454        	 ld HL,obj_xy
  049D  110000        	 ld DE,0
  04A0                	stating_rec2:
  04A0  DD7ED0        	 ld A,(IX-48)
  04A3  FE8F          	 cp 8fh
  04A5  CAE604        	 jp z,stating_rec3
  04A8  D5            	 push DE
  04A9  CDEF02        	 call stating_obj_hp_wp
  04AC  CD1816        	 call cross_ck_a
  04AF  DABA04        	 jp c,obj_of
  04B2  D1            	 pop DE
  04B3  23            	 inc HL
  04B4  23            	 inc HL
  04B5  13            	 inc DE
  04B6  DD23          	 inc IX
  04B8  18E6          	 jr  stating_rec2
                      	 
  04BA                	obj_of:
  04BA  E5            	 push HL
  04BB  110700        	 ld DE,7
  04BE  210000        	 ld HL,0
  04C1  CD6C14        	 call rand
  04C4  E60E          	 and 0eh
  04C6  CD8714        	 call xsan
  04C9  111E00        	 ld DE,30
  04CC  19            	 add HL,DE
  04CD  7D            	 ld A,L
  04CE  E1            	 pop HL
  04CF  77            	 ld (HL),A
  04D0  E5            	 push HL
  04D1  110700        	 ld DE,7
  04D4  210000        	 ld HL,0
  04D7  ED5F          	 ld A,R
  04D9  E606          	 and 06
  04DB  CD8714        	 call xsan
  04DE  7D            	 ld A,L
  04DF  E1            	 pop HL
  04E0  23            	 inc HL
  04E1  77            	 ld (HL),A
  04E2  2B            	 dec HL
  04E3  C39604        	 jp stating_rec1
                      	 
  04E6                	stating_rec3:
  04E6  AF            	 xor A
  04E7  DD772E        	 ld (IX+46),A
  04EA  CD4003        	 call itemprint
  04ED  C3F004        	 jp main
                      	 
                      	 
                      	;**************************************************************************************
                      	;************************************Main*********************************************
                      	;**************************************************************************************
  04F0                	main:
  04F0  CD0D15        	 call grp_o
                      	; call tim30
  04F3  3E30          	 ld A,48
  04F5  320405        	 ld (count+1),A
  04F8  217454        	 ld HL,obj_xy
  04FB  DD21E453      	 ld IX,obj_hp
  04FF  FD21D454      	 ld IY,obj_st2
  0503                	mains:
                      	; ret
  0503                	count:
  0503  3E00          	 ld A,overwrite
  0505  B7            	 or A
  0506  CAF004        	 jp z,main
                      	;unknown_ID_throght(0)
  0509  DD7ED0        	 ld A,(IX-48)
  050C  B7            	 or A
  050D  CA3614        	 jp z,mains_end
                      	;count out then main
                      	
                      	;graph_delete
                      	
  0510  E5            	 push HL		;>
  0511  5E            	 ld E,(HL)
  0512  23            	 inc HL
  0513  56            	 ld D,(HL)
  0514  CD011A        	 call grp_del
  0517  E1            	 pop HL		;<
                      	;hp_zero_throght
                      	
  0518  DD7E00        	 ld A,(IX)
  051B  B7            	 or A
  051C  CA3614        	 jp z,mains_end
                      	
                      	
                      	
                      	
                      	;******************************ivent action **********************
                      	 
  051F  DD7ED0        	 ld A,(IX-48)
  0522  47            	 ld B,A
  0523  E6E0          	 and 0e0h
  0525  C2A505        	 jp nz,st_action
  0528  78            	 ld A,B
  0529  FE0A          	 cp 0ah
  052B  CAD108        	 jp z,spells_action
  052E  FE0B          	 cp 0bh
  0530  CAD108        	 jp z,spells_action
                      	
                      	;wp
  0533  DD7E30        	 ld A,(IX+48)
  0536  B7            	 or A
                      	
                      	;wp=0
  0537  CA4905        	 jp z,st_check
                      	
                      	
                      	
                      	;wp>0
  053A  3D            	 dec A
  053B  DD7730        	 ld (IX+48),A
  053E  DD7ED0        	 ld A,(IX-48);(Syubetsu)
  0541  CB67          	 bit 4,A
  0543  CA7406        	 jp z,sraim_move3_e;(suraimuGPRINT)
  0546  C30E07        	 jp wizard_move_e_wpp
                      	; jp wizard_act_e
                      	; jp nz,mains_end
                      	; jp st_check
  0549                	st_check:
  0549  DD7E60        	 ld A,(IX+96)
  054C  B7            	 or A
  054D  C29E05        	 jp nz,st_dec
                      	
                      	;wp=0,st=0
                      	;wp setting((di)=move lutin)
                      	
  0550  DD7ED0        	 ld A,(IX-48);(Syurui)
  0553  CB67          	 bit 4,A
  0555  2808          	 jr z,wp_str_b
  0557  ED5F          	 ld A,R;		(wizard)
  0559  E61F          	 and 00011111b
  055B  CBEF          	 set 5,A
  055D  182A          	 jr wp_str
  055F                	wp_str_b:
  055F  F5            	 push AF
  0560  ED5F          	 ld A,R
  0562  E67F          	 and 7fh
  0564  47            	 ld B,A
  0565  ED5F          	 ld A,R
  0567  E67F          	 and 7fh
  0569  80            	 add A,B
  056A  47            	 ld B,A
  056B  F1            	 pop AF
  056C  FE02          	 cp 2
  056E  3816          	 jr c,wp_G
  0570  280F          	 jr z,wp_B
  0572  FE04          	 cp 4
  0574  78            	 ld A,B
  0575  3806          	 jr c,wp_R
  0577  2804          	 jr z,wp_BL
  0579                	wp_D:
  0579                	wp_DY:
  0579  E608          	 and 8
  057B  180C          	 jr wp_str
  057D                	wp_BL:
  057D                	wp_R:
  057D  E610          	 and 16
  057F  1808          	 jr wp_str
  0581                	wp_B:
  0581  78            	 ld A,B
  0582  E608          	 and 8
  0584  1803          	 jr wp_str
  0586                	wp_G:
  0586  78            	 ld A,B
  0587  E610          	 and 16
  0589                	wp_str:
  0589  C608          	 add A,8
  058B  DD7730        	 ld (IX+48),A
  058E  3E19          	 ld A,25
  0590  DD7760        	 ld (IX+96),A
                      	
  0593  DD7ED0        	 ld A,(IX-48);(Syubetsu)
  0596  CB67          	 bit 4,A
  0598  CA7406        	 jp z,sraim_move3_e;(suraimuGPRINT)
  059B  C30E07        	 jp wizard_move_e_wpp;(wizard not print)mains_end
                      	; jp Egraph;
                      	
                      	
                      	
                      	;wp=0,st=x
  059E                	st_dec:
  059E  3D            	 dec A
  059F  DD7760        	 ld (IX+96),A
  05A2  C3EC05        	 jp sraim_or_wiz_action
                      	 
                      	 
                      	;***********************************knight,quox,ivent*********************************
  05A5                	st_action:;Individual action
                      	; call bls
  05A5  DD7ED0        	 ld A,(IX-48)
  05A8  FE45          	 cp 45h
  05AA  CA9707        	 jp z,goast_action
  05AD  FE46          	 cp 46h
  05AF  CA9707        	 jp z,goast_action
  05B2  CB6F          	 bit 5,A
  05B4  C2D809        	 jp nz,knight_action
  05B7  FE85          	 cp 85h
  05B9  CA060C        	 jp z,key_action
  05BC  FE84          	 cp 84h
  05BE  CAFC11        	 jp z,door_action
  05C1  FE83          	 cp 83h
  05C3  CA2B0C        	 jp z,box_action
  05C6  FE8F          	 cp 8fh
  05C8  CA7112        	 jp z,gil_action
  05CB  C33614        	 jp mains_end
                      	
  05CE  32F000        	 ld (0f0h),A
  05D1  DD7ED0        	 ld A,(IX-48)
  05D4  32F400        	 ld (0f4h),A
  05D7  DD7E00        	 ld A,(IX-0)
  05DA  32F500        	 ld (0f5h),A
  05DD  DD7E30        	 ld A,(IX+48)
  05E0  32F600        	 ld (0f6h),A
  05E3  DD7E60        	 ld A,(IX+96)
  05E6  32F700        	 ld (0f7h),A
  05E9  C35014        	 jp retP
                      	
                      	
                      	
                      	
                      	
                      	
                      	
                      	
                      	
                      	
                      	
                      	
                      	
                      	
                      	
                      	
                      	
                      	
                      	
                      	;****************************************************************************
                      	;*********************************sraim or wiz*******************************
                      	
  05EC                	sraim_or_wiz_action:;HL=obj_xy++
  05EC  DDCBD066      	 bit 4,(IX-48);(NO.)
  05F0  C2A906        	 jp nz,wiz_action
                      	
                      	 ;;;;
                      	 ;;;;
  05F3  DD7E60        	 ld A,(IX+96);(st)
                      	 
                      	; ld (0f0h),A
                      	; jp retP
                      	
  05F6  FE09          	 cp 9
  05F8  280B          	 jr z,sraim_move1_B
  05FA  FE05          	 cp 5
  05FC  2834          	 jr z,sraim_move1
  05FE  FE01          	 cp 1
  0600  2850          	 jr z,sraim_move3
  0602  C37406        	 jp sraim_move3_e;mains_end
                      	
                      	
  0605                	sraim_move1_B:
  0605  DD7ED0        	 ld A,(IX-48)
  0608  FE03          	 cp 3
  060A  380A          	 jr c,sraim_move1_nspell
  060C  CD6C14        	 call rand
  060F  FE40          	 cp 64
  0611  3003          	 jr nc,sraim_move1_nspell
  0613  CD8508        	 call spell_create
  0616                	sraim_move1_nspell:
  0616  CD4D16        	 call wall_ck
  0619  2817          	 jr z,sraim_move1
  061B  23            	 inc HL
  061C  CBBE          	 res 7,(HL)
  061E  CBB6          	 res 6,(HL)
  0620  ED5F          	 ld A,R
                      	; rla
  0622  1F            	 rra
  0623  1F            	 rra
  0624  1F            	 rra
  0625  E6C0          	 and 0c0h
  0627  B6            	 or (HL)
  0628  77            	 ld (HL),A
  0629  2B            	 dec HL
  062A  3E50          	 ld A,80
  062C  DD7760        	 ld (IX+96),A
  062F  C37406        	 jp sraim_move3_e
  0632                	sraim_move1:
                      	
                      	
                      	;graph_delete
                      	
                      	; push HL		;>
                      	; call bls
                      	; ld E,(HL)
                      	; inc HL
                      	; ld D,(HL)
                      	; call grp_del
                      	; pop HL		;<
                      	
                      	
  0632  23            	 inc HL
  0633  7E            	 ld A,(HL)
  0634  E6C0          	 and 0c0h
  0636  280B          	 jr z,sraim_move1_u
  0638  FE80          	 cp 80h
  063A  380C          	 jr c,sraim_move1_r
  063C  280F          	 jr z,sraim_move1_d
  063E                	sraim_move1_l:
  063E  2B            	 dec HL
  063F  35            	 dec (HL)
  0640  35            	 dec (HL)
  0641  1831          	 jr sraim_move3_e
  0643                	sraim_move1_u:
  0643  35            	 dec (HL)
  0644  35            	 dec (HL)
  0645  2B            	 dec HL
  0646  182C          	 jr sraim_move3_e
  0648                	sraim_move1_r:
  0648  2B            	 dec HL
  0649  34            	 inc (HL)
  064A  34            	 inc (HL)
  064B  1827          	 jr sraim_move3_e
  064D                	sraim_move1_d:
  064D  34            	 inc (HL)
  064E  34            	 inc (HL)
  064F  2B            	 dec HL
                      	
  0650  1822          	 jr sraim_move3_e
                      	
                      	
  0652                	sraim_move3:
                      	
  0652  23            	 inc HL
  0653  7E            	 ld A,(HL)
  0654  E6C0          	 and 0c0h
  0656  280C          	 jr z,sraim_move3_u
  0658  FE80          	 cp 80h
  065A  380E          	 jr c,sraim_move3_r
  065C  2812          	 jr z,sraim_move3_d
  065E                	sraim_move3_l:
  065E  2B            	 dec HL
  065F  35            	 dec (HL)
  0660  35            	 dec (HL)
  0661  35            	 dec (HL)
  0662  1810          	 jr sraim_move3_e
  0664                	sraim_move3_u:
  0664  35            	 dec (HL)
  0665  35            	 dec (HL)
  0666  35            	 dec (HL)
  0667  2B            	 dec HL
  0668  180A          	 jr sraim_move3_e
  066A                	sraim_move3_r:
  066A  2B            	 dec HL
  066B  34            	 inc (HL)
  066C  34            	 inc (HL)
  066D  34            	 inc (HL)
  066E  1804          	 jr sraim_move3_e
  0670                	sraim_move3_d:
  0670  34            	 inc (HL)
  0671  34            	 inc (HL)
  0672  34            	 inc (HL)
  0673  2B            	 dec HL
  0674                	sraim_move3_e:
  0674  11AE20        	 ld DE,graph_sraimd
  0677                	Egraph:;(DE=)
  0677  ED538006      	 ld (Egraph_put+1),DE
  067B  E5            	 push HL		;>
  067C  5E            	 ld E,(HL)
  067D  23            	 inc HL
  067E  56            	 ld D,(HL)
  067F                	Egraph_put:
  067F  210000        	 ld HL,overwrite
  0682  CD7519        	 call grp_set
  0685  E1            	 pop HL			;<
  0686  DD7ED0        	 ld A,(IX-48)
  0689  E6F8          	 and 11111000b
  068B  CA8F06        	 jp z,sraim_cross_ck;
  068E  C9            	 ret
                      	 
  068F                	sraim_cross_ck:
  068F  3A3855        	 ld A,(gil_st2)
  0692  CB7F          	 bit 7,A		;(gil sworud MIRU)
  0694  2808          	 jr z,s1
  0696  CD1816        	 call cross_ck_a;s
  0699  DC3A16        	 call c,cha_kill;(suraim HP=0)
  069C  1808          	 jr s2
  069E                	s1:;(gil_st=0-x)
  069E  CD1816        	 call cross_ck_a
  06A1  3003          	 jr nc,s2
  06A3  C31714        	 jp gil_killing
                      	 
  06A6                	s2:
                      	; jp c,retP
  06A6  C33614        	 jp mains_end
                      	
                      	
                      	;******************wiz actions**Main***********************
  06A9                	wiz_action:
  06A9  DD7E60        	 ld A,(IX+96)
  06AC  FE18          	 cp 24
  06AE  CADA06        	 jp z,wiz_ap
  06B1  FE0C          	 cp 12
  06B3  CAFC06        	 jp z,wiz_sp
  06B6  FD7E00        	 ld A,(IY)
  06B9  B7            	 or A
  06BA  C20207        	 jp nz,wiz_dec
  06BD                	wiz_dec2:
  06BD  11C620        	 ld DE,magic
  06C0  CD7706        	 call Egraph
                      	;********************cross chack wiz*******************
  06C3                	wizard_cross_ck;
  06C3  3A3855        	 ld A,(gil_st2)
  06C6  CB7F          	 bit 7,A		;(gil sworud MIRU)
  06C8  2808          	 jr z,ss1
  06CA  CD1816        	 call cross_ck_a;s
  06CD  DC3A16        	 call c,cha_kill;(suraim HP=0)
  06D0  1805          	 jr ss2
  06D2                	ss1:;(gil_st=0-x)
  06D2  CD1816        	 call cross_ck_a
  06D5  3000          	 jr nc,wizard_end
                      	; jp gil_killing
  06D7                	ss2:
  06D7                	wizard_end:
                      	;********************wiz end***************************
  06D7  C33614        	 jp mains_end
                      	
  06DA                	wiz_ap:
                      	
  06DA                	gil_notaction_f:
  06DA  3A3455        	 ld A,(gil_button)
  06DD  DD3430        	 inc (IX+48)
  06E0  DD3460        	 inc (IX+96)
  06E3  E6C3          	 and 11000011b
  06E5  CAD706        	 jp z,wizard_end
  06E8  DD3530        	 dec (IX+48)
  06EB  DD3560        	 dec (IX+96)
                      	 
  06EE  DD7E60        	 ld A,(IX+96)
  06F1  3E0A          	 ld A,10
  06F3  FD7700        	 ld (IY),A
  06F6  CD1107        	 call wiz_locate
  06F9  C3BD06        	 jp wiz_dec2
  06FC                	wiz_sp:
  06FC  CD8508        	 call spell_create
  06FF  C3BD06        	 jp wiz_dec2
  0702                	wiz_dec:
  0702  DD3460        	 inc (IX+96)
  0705  FD3500        	 dec (IY)
  0708  FD7E00        	 ld A,(IY)
  070B  C3BD06        	 jp wiz_dec2
                      	
                      	;***********************wp>0 then noting*********************
  070E                	wizard_move_e_wpp;wp>0
  070E  C33614        	 jp mains_end
                      	
                      	;***********************wiz_locate**************************
  0711                	wiz_locate:
                      	
  0711  E5            	 push HL	;>
  0712  214155        	 ld HL,gil_xy
  0715  5E            	 ld E,(HL);x
  0716  23            	 inc HL
  0717  56            	 ld D,(HL);y
                      	
                      	; ld A,E
                      	; ld (0f0h),A
                      	; ld A,D
                      	; ld (0f1h),A
                      	 
  0718  E1            	 pop HL		;<
  0719  ED5F          	 ld A,R
  071B  4F            	 ld C,A
  071C  ED5F          	 ld A,R
  071E  E603          	 and 00000011b
  0720  B7            	 or A
  0721  CA3F07        	 jp z,wiz_locate_left
  0724  FE02          	 cp 2
  0726  DA5607        	 jp c,wiz_locate_down
  0729  CA6A07        	 jp z,wiz_locate_right
  072C                	wiz_locate_up:
  072C  7A            	 ld A,D
  072D  E63F          	 and 00111111b
  072F  D60E          	 sub 14
  0731  38DE          	 jr c,wiz_locate
  0733  F680          	 or 10000000b
  0735  57            	 ld D,A
                      	 
  0736  7B            	 ld A,E
  0737  77            	 ld (HL),A
  0738  23            	 inc HL
  0739  7A            	 ld A,D
  073A  77            	 ld (HL),A
  073B  2B            	 dec HL
                      	 
  073C  C38207        	 jp wiz_locate_end
  073F                	wiz_locate_left;
  073F  7B            	 ld A,E
  0740  D60E          	 sub 14
  0742  FE1E          	 cp 30
  0744  38CB          	 jr c,wiz_locate
  0746  5F            	 ld E,A
                      	 
  0747  7A            	 ld A,D
  0748  E63F          	 and 00111111b
  074A  F640          	 or 01000000b
  074C  57            	 ld D,A
                      	 
  074D  7B            	 ld A,E
  074E  77            	 ld (HL),A
  074F  23            	 inc HL
  0750  7A            	 ld A,D
  0751  77            	 ld (HL),A
  0752  2B            	 dec HL
                      	 
  0753  C38207        	 jp wiz_locate_end
  0756                	wiz_locate_down;
  0756  7A            	 ld A,D
  0757  E63F          	 and 00111111b
  0759  7A            	 ld A,D
  075A  C60E          	 add A,14
  075C  FE30          	 cp 47+1
  075E  30B1          	 jr nc,wiz_locate
  0760  57            	 ld D,A
                      	 
  0761  7B            	 ld A,E
  0762  77            	 ld (HL),A
  0763  23            	 inc HL
  0764  7A            	 ld A,D
  0765  77            	 ld (HL),A
  0766  2B            	 dec HL
                      	 
  0767  C38207        	 jp wiz_locate_end
  076A                	wiz_locate_right;
  076A  7B            	 ld A,E
  076B  C60E          	 add A,14
  076D  FE88          	 cp 135+1
  076F  D21107        	 jp nc,wiz_locate
  0772  5F            	 ld E,A
                      	 
  0773  7A            	 ld A,D
  0774  E63F          	 and 00111111b
  0776  F6C0          	 or 11000000b
  0778  57            	 ld D,A
                      	 
  0779  7B            	 ld A,E
  077A  77            	 ld (HL),A
  077B  23            	 inc HL
  077C  7A            	 ld A,D
  077D  77            	 ld (HL),A
  077E  2B            	 dec HL
                      	 
  077F  C38207        	 jp wiz_locate_end
                      	 
                      	;
  0782                	wiz_locate_end:
  0782  CDE016        	 call wall_mod
  0785  7E            	 ld A,(HL)
  0786  91            	 sub C
  0787  77            	 ld (HL),A 
  0788  23            	 inc HL		;>
  0789  7E            	 ld A,(HL)
  078A  90            	 sub B
  078B  77            	 ld (HL),A
  078C  E63F          	 and 00111111b
  078E  FE2A          	 cp 7*6
  0790  2003          	 jr nz,wizle
  0792  320D22        	 ld (dammy+3),A
  0795                	wizle:
  0795  2B            	 dec HL		;<
  0796  C9            	 ret
                      	 
                      	;******************************goast action***************************
  0797                	goast_action:
  0797  DD7E60        	 ld A,(IX+96)
  079A  47            	 ld B,A
  079B  DD7E00        	 ld A,(IX)
  079E  B8            	 cp B
  079F  3803          	 jr c,goast_action_b
  07A1  DD7760        	 ld (IX+96),A
  07A4                	goast_action_b:
  07A4  DD7E30        	 ld A,(IX+48)
  07A7  B7            	 or A
  07A8  CAB507        	 jp z,goast_action_a
  07AB  3D            	 dec A
  07AC  DD7730        	 ld (IX+48),A
  07AF  CA5208        	 jp z,goast_warp_ap
  07B2  C32208        	 jp goast_end
  07B5                	goast_action_a:
  07B5  CDE016        	 call wall_mod
  07B8  79            	 ld A,C
  07B9  B7            	 or A
  07BA  C21F08        	 jp nz,goast_move
  07BD  78            	 ld A,B
  07BE  B7            	 or A
  07BF  C21F08        	 jp nz,goast_move 
                      	 
  07C2                	goast_action_0:
  07C2  CD8114        	 call rand4
  07C5  FE80          	 cp 80h
  07C7  3803          	 jr c,goast_action_1
  07C9  CD8508        	 call spell_create
  07CC                	goast_action_1:
  07CC  CD930B        	 call xyload
  07CF  3A4155        	 ld A,(gil_xy)
  07D2  93            	 sub E
  07D3  3004          	 jr nc,goast_cp1
  07D5  2812          	 jr z,goast_y
  07D7  ED44          	 neg
  07D9                	goast_cp1:
  07D9  4F            	 ld C,A
  07DA  3A4255        	 ld A,(gil_xy+1)
  07DD  E63F          	 and 00111111b
  07DF  92            	 sub D
  07E0  3004          	 jr nc,goast_cp2
  07E2  280C          	 jr z,goast_x
  07E4  ED44          	 neg
  07E6                	goast_cp2:
  07E6  B9            	 cp C
  07E7  3807          	 jr c,goast_x 
  07E9                	goast_y:
  07E9  CD860B        	 call y_ck
  07EC  3819          	 jr c,goast_up
  07EE  181F          	 jr goast_do
  07F0                	goast_x:
  07F0  CD7E0B        	 call x_ck
  07F3  3802          	 jr c,goast_le
  07F5  1808          	 jr goast_ri
  07F7                	goast_le:
  07F7  23            	 inc HL
  07F8  CBFE          	 set 7,(HL)
  07FA  CBF6          	 set 6,(HL)
  07FC  2B            	 dec HL
  07FD  1818          	 jr goast_wc
  07FF                	goast_ri:
  07FF  23            	 inc HL
  0800  CBBE          	 res 7,(HL)
  0802  CBF6          	 set 6,(HL)
  0804  2B            	 dec HL
  0805  1810          	 jr goast_wc
  0807                	goast_up:
  0807  23            	 inc HL
  0808  CBBE          	 res 7,(HL)
  080A  CBB6          	 res 6,(HL)
  080C  2B            	 dec HL
  080D  1808          	 jr goast_wc
  080F                	goast_do:
  080F  23            	 inc HL
  0810  CBFE          	 set 7,(HL)
  0812  CBB6          	 res 6,(HL)
  0814  2B            	 dec HL
  0815  1800          	 jr goast_wc
  0817                	goast_wc:
  0817  CD4D16        	 call wall_ck
  081A  2803          	 jr z,goast_move
  081C  C34A08        	 jp goast_warp
  081F                	goast_move:
  081F  CD8D0A        	 call empty_move
  0822                	goast_end:
                      	 
                      	;*****************************cross ck goast*****************************
  0822  3A3855        	 ld A,(gil_st2)
  0825  B7            	 or A
  0826  2811          	 jr z,sssss1
  0828  CB7F          	 bit 7,A
  082A  2808          	 jr z,sssss0
  082C  CD1816        	 call cross_ck_a;s
  082F  DCD10B        	 call c,HP_decB;
  0832  280D          	 jr z,sssss2
  0834                	sssss0:
  0834  CD1816        	 call cross_ck_a;
  0837  1808          	 jr sssss2
  0839                	sssss1:;(gil_st=0-x)
  0839  CD1816        	 call cross_ck_a
  083C  3003          	 jr nc,sssss2
  083E  C31714        	 jp gil_killing
  0841                	sssss2:
                      	 
  0841  11DE20        	 ld DE,graph_goast
  0844  CD7706        	 call Egraph
  0847  C33614        	 jp mains_end
                      	 
                      	;****************************goast sub*********************************** 
  084A                	goast_warp:
  084A  3E12          	 ld A,18
  084C  DD7730        	 ld (IX+48),A
  084F  C32208        	 jp goast_end
                      	 
  0852                	goast_warp_ap:
  0852  23            	 inc HL
  0853  7E            	 ld A,(HL)
  0854  2B            	 dec HL
  0855  E6C0          	 and 11000000b
  0857  280C          	 jr z,goast_warp_ap_u
  0859  FE80          	 cp 80h
  085B  3810          	 jr c,goast_warp_ap_r
  085D  2814          	 jr z,goast_warp_ap_d
  085F                	goast_warp_ap_l:
  085F  7E            	 ld A,(HL)
  0860  D607          	 sub 7
  0862  77            	 ld (HL),A
  0863  1816          	 jr goast_warp_ap_e
  0865                	goast_warp_ap_u:
  0865  23            	 inc HL
  0866  7E            	 ld A,(HL)
  0867  D607          	 sub 7
  0869  77            	 ld (HL),A
  086A  2B            	 dec HL
  086B  180E          	 jr goast_warp_ap_e
  086D                	goast_warp_ap_r:
  086D  7E            	 ld A,(HL)
  086E  C607          	 add A,7
  0870  77            	 ld (HL),A
  0871  1808          	 jr goast_warp_ap_e
  0873                	goast_warp_ap_d:
  0873  23            	 inc HL
  0874  7E            	 ld A,(HL)
  0875  C607          	 add A,7
  0877  77            	 ld (HL),A
  0878  2B            	 dec HL
  0879  1800          	 jr goast_warp_ap_e
  087B                	goast_warp_ap_e:
  087B  3A1222        	 ld A,(dammy+8)
  087E  3C            	 inc A
  087F  321222        	 ld (dammy+8),A
  0882  C32208        	 jp goast_end
                      	 
                      	;******************************spell create*************************** 
                      	;******************************spell create*************************** 
  0885                	spell_create:
  0885  E5            	 push HL
  0886  21B453        	 ld HL,obj
  0889  AF            	 xor A
  088A  010000        	 ld BC,0
  088D  EDB1          	 cpir		;BC<0
  088F  03            	 inc BC
                      	 
                      	 
                      	; ld (HL),0	;chr clr
  0890  2B            	 dec HL		;spell address
  0891  DD7ED0        	 ld A,(IX-48)
  0894  FE04          	 cp 4h
  0896  280F          	 jr z,spellB
  0898  DD7ED0        	 ld A,(IX-48)
  089B  FE13          	 cp 13h
  089D  2808          	 jr z,spellB
  089F  FE46          	 cp 46h
  08A1  2804          	 jr z,spellB
  08A3  360A          	 ld (HL),0Ah
  08A5  1802          	 jr spellsetok
  08A7                	spellB:
  08A7  360B          	 ld (HL),0Bh
  08A9                	spellsetok:
                      			;hp
  08A9  113000        	 ld DE,48
  08AC  19            	 add HL,DE
  08AD  3601          	 ld (HL),1
                      	 		;st2
  08AF  11F000        	 ld DE,48*5
  08B2  19            	 add HL,DE
  08B3  3600          	 ld (HL),0
                      	 
  08B5  E1            	 pop HL
                      	 
                      	; ld (0f4h),HL
                      	
  08B6  7E            	 ld A,(HL)
  08B7  5F            	 ld E,A
  08B8  23            	 inc HL
  08B9  7E            	 ld A,(HL)
  08BA  57            	 ld D,A
  08BB  2B            	 dec HL
                      	 
  08BC  E5            	 push HL
  08BD  210000        	 ld HL,0
  08C0  B7            	 or A
  08C1  ED42          	 sbc HL,BC;xy_countor
  08C3  B7            	 or A
  08C4  ED42          	 sbc HL,BC
  08C6  017454        	 ld BC,obj_xy
  08C9  09            	 add HL,BC
                      	 
                      	 
  08CA  7B            	 ld A,E
  08CB  77            	 ld (HL),A
  08CC  23            	 inc HL
  08CD  7A            	 ld A,D
  08CE  77            	 ld (HL),A
                      	 
                      	; ld (0f0h),HL
                      	; ld (0f2h),BC
                      	 
                      	 
  08CF  E1            	 pop HL
  08D0  C9            	 ret
                      	;******************************spell action****************************
  08D1                	spells_action:
  08D1  FD7E00        	 ld A,(IY)
  08D4  FE01          	 cp 1
  08D6  CA1A09        	 jp z,spells_action1
  08D9  FE02          	 cp 2
  08DB  CA4309        	 jp z,spells_action2
                      	
  08DE  CDE016        	 call wall_mod
  08E1  78            	 ld A,B
  08E2  B7            	 or A
  08E3  C2C509        	 jp nz,spells_action_delete
  08E6  79            	 ld A,C
  08E7  B7            	 or A
  08E8  C2C509        	 jp nz,spells_action_delete
                      	 
  08EB  CD4D16        	 call wall_ck
  08EE  C27009        	 jp nz,spells_action_dol
  08F1                	spells_action_wiz:
  08F1  23            	 inc HL
  08F2  7E            	 ld A,(HL)
  08F3  2B            	 dec HL
  08F4  E6C0          	 and 11000000b
  08F6  280A          	 jr z,spells_action_u
  08F8  FE80          	 cp 80h
  08FA  380C          	 jr c,spells_action_r
  08FC  280E          	 jr z,spells_action_d
  08FE                	spells_action_l:
  08FE  35            	 dec (HL)
  08FF  35            	 dec (HL)
  0900  1810          	 jr spells_action_urdl
  0902                	spells_action_u:
  0902  23            	 inc HL
  0903  35            	 dec (HL)
  0904  35            	 dec (HL)
  0905  2B            	 dec HL
  0906  180A          	 jr spells_action_urdl
  0908                	spells_action_r:
  0908  34            	 inc (HL)
  0909  34            	 inc (HL)
  090A  1806          	 jr spells_action_urdl
  090C                	spells_action_d:
  090C  23            	 inc HL
  090D  34            	 inc (HL)
  090E  34            	 inc (HL)
  090F  2B            	 dec HL
  0910  1800          	 jr spells_action_urdl
  0912                	spells_action_urdl:
  0912  3E01          	 ld A,1
  0914  FD7700        	 ld (IY),A
  0917  C37D09        	 jp spells_actionend
                      	 
                      	 
                      	 
  091A                	spells_action1:
  091A  23            	 inc HL
  091B  7E            	 ld A,(HL)
  091C  2B            	 dec HL
  091D  E6C0          	 and 11000000b
  091F  280A          	 jr z,spells_action1_u
  0921  FE80          	 cp 80h
  0923  380C          	 jr c,spells_action1_r
  0925  280E          	 jr z,spells_action1_d
  0927                	spells_action1_l:
  0927  35            	 dec (HL)
  0928  35            	 dec (HL)
  0929  1810          	 jr spells_action1_urdl
  092B                	spells_action1_u:
  092B  23            	 inc HL
  092C  35            	 dec (HL)
  092D  35            	 dec (HL)
  092E  2B            	 dec HL
  092F  180A          	 jr spells_action1_urdl
  0931                	spells_action1_r:
  0931  34            	 inc (HL)
  0932  34            	 inc (HL)
  0933  1806          	 jr spells_action1_urdl
  0935                	spells_action1_d:
  0935  23            	 inc HL
  0936  34            	 inc (HL)
  0937  34            	 inc (HL)
  0938  2B            	 dec HL
  0939  1800          	 jr spells_action1_urdl
  093B                	spells_action1_urdl:
  093B  3E02          	 ld A,2
  093D  FD7700        	 ld (IY),A
  0940  C37D09        	 jp spells_actionend
                      	 
                      	 
                      	
  0943                	spells_action2:
  0943  23            	 inc HL
  0944  7E            	 ld A,(HL)
  0945  2B            	 dec HL
  0946  E6C0          	 and 11000000b
  0948  280B          	 jr z,spells_action2_u
  094A  FE80          	 cp 80h
  094C  380E          	 jr c,spells_action2_r
  094E  2811          	 jr z,spells_action2_d
  0950                	spells_action2_l:
  0950  35            	 dec (HL)
  0951  35            	 dec (HL)
  0952  35            	 dec (HL)
  0953  1813          	 jr spells_action2_urdl
  0955                	spells_action2_u:
  0955  23            	 inc HL
  0956  35            	 dec (HL)
  0957  35            	 dec (HL)
  0958  35            	 dec (HL)
  0959  2B            	 dec HL
  095A  180C          	 jr spells_action2_urdl
  095C                	spells_action2_r:
  095C  34            	 inc (HL)
  095D  34            	 inc (HL)
  095E  34            	 inc (HL)
  095F  1807          	 jr spells_action2_urdl
  0961                	spells_action2_d:
  0961  23            	 inc HL
  0962  34            	 inc (HL)
  0963  34            	 inc (HL)
  0964  34            	 inc (HL)
  0965  2B            	 dec HL
  0966  1800          	 jr spells_action2_urdl
  0968                	spells_action2_urdl:
  0968  3E00          	 ld A,0
  096A  FD7700        	 ld (IY),A
  096D  C37D09        	 jp spells_actionend
  0970                	spells_action_dol:
  0970  DD7ED0        	 ld A,(IX-48)
  0973  FE0B          	 cp 0bh
  0975  E5            	 push HL
  0976  CC1B17        	 call z,matk_action
  0979  E1            	 pop HL
  097A  C3C509        	 jp spells_action_delete
                      	 
  097D                	spells_actionend:
  097D                	spells_action_cross
                      	 
                      	
                      	;********************cross chack spell*******************
  097D                	spell_cross_ck;
  097D  CD1816        	 call cross_ck_a;s
  0980  3033          	 jr nc,spell_cross_ck_end
  0982                	spell_cross_ck_1:
                      	
  0982  3A4255        	 ld A,(gil_xy+1)
  0985  E6C0          	 and 11000000b
  0987  17            	 rla
  0988  17            	 rla
  0989  17            	 rla
  098A  47            	 ld B,A
  098B  23            	 inc HL
  098C  7E            	 ld A,(HL)
  098D  2B            	 dec HL
  098E  E6C0          	 and 11000000b
  0990  17            	 rla
  0991  17            	 rla
  0992  17            	 rla
  0993  3C            	 inc A
  0994  3C            	 inc A
  0995  E603          	 and 00000011b
  0997  4F            	 ld C,A
  0998  C5            	 push BC
                      	
  0999  3A3855        	 ld A,(gil_st2)
  099C  CB7F          	 bit 7,A		;(gil sworud MIRU)
  099E  2009          	 jr nz,spell_cross_ck_s
  09A0                	spell_cross_ck_n:
  09A0  C1            	 pop BC
  09A1  79            	 ld A,C
  09A2  A8            	 xor B				;urdl = turdl
  09A3  CABE09        	 jp z,spells_action_delete_g
  09A6  C31714        	 jp gil_killing
  09A9                	spell_cross_ck_s:
  09A9  C1            	 pop BC
  09AA  79            	 ld A,C
  09AB  3C            	 inc A
  09AC  E603          	 and 00000011b
  09AE  A8            	 xor B				;urdl = turdl
  09AF  CABE09        	 jp z,spells_action_delete_g
  09B2  C31714        	 jp gil_killing
  09B5                	spell_cross_ck_end:
  09B5  11F620        	 ld DE,graph_spell
  09B8  CD7706        	 call Egraph;call Egraph
  09BB  C33614        	 jp mains_end
                      	 
  09BE                	spells_action_delete_g
  09BE  3A0B22        	 ld A,(dammy+1)
  09C1  3C            	 inc A
  09C2  320B22        	 ld (dammy+1),A
  09C5                	spells_action_delete:
  09C5  AF            	 xor A
  09C6  DD77D0        	 ld (IX-48),A
  09C9  DD7700        	 ld (IX),A
  09CC  FD7700        	 ld (IY),A
  09CF  3600          	 ld (HL),0
  09D1  23            	 inc HL
  09D2  3600          	 ld (HL),0
  09D4  2B            	 dec HL
  09D5  C33614        	 jp mains_end
                      	 
                      	 
                      	
                      	 
                      	;***************************************************************
                      	;**************************knight action************************
  09D8                	knight_action:;HL=obj_xy++
                      	;******************ricaba*******************
  09D8  DD7E60        	 ld A,(IX+96)
  09DB  47            	 ld B,A
  09DC  DD7E00        	 ld A,(IX)
  09DF  B8            	 cp B
  09E0  3803          	 jr c,knight_actiona
  09E2  DD7760        	 ld (IX+96),A
  09E5                	knight_actiona:
  09E5  DD7ED0        	 ld A,(IX-48)
  09E8  FE23          	 cp 23h
  09EA  2807          	 jr z,knight_action1
  09EC  DD7E30        	 ld A,(IX+48)
  09EF  B7            	 or A
  09F0  CAA60A        	 jp z,knight_action_end
                      	
  09F3                	knight_action1:
  09F3  CDE016        	 call wall_mod
  09F6  78            	 ld A,B
  09F7  B7            	 or A
  09F8  C2890A        	 jp nz,knight_move
  09FB  79            	 ld A,C
  09FC  B7            	 or A
  09FD  C2890A        	 jp nz,knight_move
                      	 
  0A00  CD6F0B        	 call xy_ck
  0A03  CA420A        	 jp z,knight_xy
  0A06  CD7E0B        	 call x_ck
  0A09  CA510A        	 jp z,knight_x
  0A0C  CD860B        	 call y_ck
  0A0F  CA6D0A        	 jp z,knight_y
  0A12                	kight_accel:
                      	
                      	 
  0A12  CD9B0B        	 call right_turn
  0A15  CD4D16        	 call wall_ck
                      	; call z,48381
  0A18  CA890A        	 jp z,knight_move
  0A1B  CDA90B        	 call left_turn
                      	 
  0A1E  CD4D16        	 call wall_ck
  0A21  C2270A        	 jp nz,rndurdl
  0A24  C3890A        	 jp knight_move
  0A27                	kight_accel_2:
  0A27                	rndurdl:
  0A27  CD9B0B        	 call right_turn
  0A2A  CD4D16        	 call wall_ck
  0A2D  CA890A        	 jp z,knight_move
                      	
  0A30  CD9B0B        	 call right_turn 
  0A33  CD9B0B        	 call right_turn
  0A36  CD4D16        	 call wall_ck
  0A39  CA890A        	 jp z,knight_move
                      	 
  0A3C  CDA90B        	 call left_turn 
  0A3F  C3890A        	 jp knight_move
                      	
                      	
  0A42                	knight_xy:
  0A42  23            	 inc HL
  0A43  7E            	 ld A,(HL)
  0A44  F6C0          	 or 11000000b
  0A46  77            	 ld (HL),A
  0A47  2B            	 dec HL
  0A48  CD4D16        	 call wall_ck
  0A4B  CA890A        	 jp z,knight_move
  0A4E  C3270A        	 jp kight_accel_2 
                      	 
  0A51                	knight_x:
  0A51  CD860B        	 call y_ck
  0A54  3808          	 jr c,knight_x_1
  0A56  23            	 inc HL
  0A57  CBFE          	 set 7,(HL)
  0A59  CBB6          	 res 6,(HL)
  0A5B  2B            	 dec HL
  0A5C  1806          	 jr knight_x_2
  0A5E                	knight_x_1:
  0A5E  23            	 inc HL
  0A5F  CBBE          	 res 7,(HL)
  0A61  CBB6          	 res 6,(HL)
  0A63  2B            	 dec HL
  0A64                	knight_x_2:
  0A64  CD4D16        	 call wall_ck
  0A67  CA890A        	 jp z,knight_move
  0A6A  C3270A        	 jp kight_accel_2 
                      	 
  0A6D                	knight_y:
  0A6D  CD7E0B        	 call x_ck
  0A70  3808          	 jr c,knight_y_1
  0A72  23            	 inc HL
  0A73  CBBE          	 res 7,(HL)
  0A75  CBF6          	 set 6,(HL)
  0A77  2B            	 dec HL
  0A78  1806          	 jr knight_y_2
  0A7A                	knight_y_1:
  0A7A  23            	 inc HL
  0A7B  CBFE          	 set 7,(HL)
  0A7D  CBF6          	 set 6,(HL)
  0A7F  2B            	 dec HL
  0A80                	knight_y_2:
  0A80  CD4D16        	 call wall_ck
  0A83  CA890A        	 jp z,knight_move
  0A86  C3270A        	 jp kight_accel_2 
                      	 
                      	
                      	
                      	
                      	
                      	
                      	
  0A89                	knight_move:;a=0~3
  0A89  11A60A        	 ld DE, knight_action_end
  0A8C  D5            	 push DE
  0A8D                	empty_move:
  0A8D  23            	 inc HL
  0A8E  7E            	 ld A,(HL)
  0A8F  2B            	 dec HL
  0A90  E6C0          	 and 11000000b
  0A92  2808          	 jr z,knight_action_up
  0A94  FE80          	 cp 80h
  0A96  3808          	 jr c,knight_action_ri
  0A98  2808          	 jr z,knight_action_do
  0A9A                	knight_action_le:
  0A9A  35            	 dec (HL)
  0A9B  C9            	 ret
  0A9C                	knight_action_up:
  0A9C  23            	 inc HL
  0A9D  35            	 dec (HL)
  0A9E  2B            	 dec HL
  0A9F  C9            	 ret
  0AA0                	knight_action_ri:
  0AA0  34            	 inc (HL)
  0AA1  C9            	 ret
  0AA2                	knight_action_do:
  0AA2  23            	 inc HL
  0AA3  34            	 inc (HL)
  0AA4  2B            	 dec HL
  0AA5  C9            	 ret
                      	
                      	 
                      	 
                      	
                      	
  0AA6                	knight_action_end:
  0AA6  FD7E30        	 ld A,(IY+48)
  0AA9  EE01          	 xor 1
  0AAB  FD7730        	 ld (IY+48),A
  0AAE  B7            	 or A
  0AAF  2805          	 jr z,knight_action_end2
                      	 
  0AB1  110E21        	 ld DE,graph_n_knightu
  0AB4  1803          	 jr knight_action_end3
  0AB6                	knight_action_end2:
  0AB6  112621        	 ld DE,graph_n_knightu+24
  0AB9                	knight_action_end3:
  0AB9  CD7706        	 call Egraph
                      	 
                      	 
                      	;********************chack knight cross*******************
                      	; call kwait
                      	
  0ABC  E5            	 push HL
  0ABD  2A7454        	 ld HL,(obj_xy)
  0AC0  221022        	 ld (dammy+6),HL
  0AC3  E1            	 pop HL
                      	
                      	
  0AC4  3A3855        	 ld A,(gil_st2)
  0AC7  B7            	 or A
  0AC8  2814          	 jr z,ssss1
  0ACA  CB7F          	 bit 7,A	;(gil sworud MIRU) 
  0ACC  2808          	 jr z,ssss0
  0ACE  CD1816        	 call cross_ck_a;s
  0AD1  DCB30B        	 call c,HP_dec;(suraim HP=0)
  0AD4  1810          	 jr ssss2
  0AD6                	ssss0:
  0AD6  CD1816        	 call cross_ck_a;s
  0AD9  DCC60B        	 call c,HP_dec_swdbc
  0ADC  1808          	 jr ssss2
  0ADE                	ssss1:;(gil_st=0-x)
  0ADE  CD1816        	 call cross_ck_a
  0AE1  3003          	 jr nc,ssss2
  0AE3  C31714        	 jp gil_killing
  0AE6                	ssss2:
  0AE6  DD7E30        	 ld A,(IX+48)
  0AE9  EEFF          	 xor 0ffh
  0AEB  DD7730        	 ld (IX+48),A
  0AEE  C33614        	 jp mains_end
                      	 
                      	
                      	
  0AF1                	knight_front_ck:
  0AF1  CD930B        	 call xyload
  0AF4  F5            	 push AF
  0AF5  32620B        	 ld (knight_front_ck_end+3),A
  0AF8  7B            	 ld A,E
  0AF9  32600B        	 ld (knight_front_ck_end+1),A 
  0AFC  F1            	 pop AF
  0AFD  E6C0          	 and 11000000b
  0AFF  2810          	 jr z,knight_front_ck_u
  0B01  FE02          	 cp 2
  0B03  3814          	 jr c,knight_front_ck_r
  0B05  281C          	 jr z,knight_front_ck_d
  0B07                	knight_front_ck_l:
  0B07  7B            	 ld A,E
  0B08  D607          	 sub 7
  0B0A  FE1E          	 cp 30
  0B0C  DA6C0B        	 jp c,knight_front_outerwall
  0B0F  181C          	 jr knight_front_ck_e
  0B11                	knight_front_ck_u:
  0B11  7A            	 ld A,D
  0B12  D607          	 sub 7
  0B14  DA6C0B        	 jp c,knight_front_outerwall
  0B17  1814          	 jr knight_front_ck_e
  0B19                	knight_front_ck_r:
  0B19  7B            	 ld A,E
  0B1A  C607          	 add A,7
  0B1C  FE88          	 cp 136
  0B1E  D26C0B        	 jp nc,knight_front_outerwall
  0B21  180A          	 jr knight_front_ck_e
  0B23                	knight_front_ck_d:
  0B23  7A            	 ld A,D
  0B24  C607          	 add A,7
  0B26  FE2B          	 cp 43
  0B28  D26C0B        	 jp nc,knight_front_outerwall
  0B2B  1800          	 jr knight_front_ck_e
  0B2D                	knight_front_ck_e:
  0B2D  CD9B0B        	 call right_turn
  0B30  CD4D16        	 call wall_ck
  0B33  CA5F0B        	 jp z,knight_front_ck_end
                      	
  0B36  CDA90B        	 call left_turn
  0B39  CD4D16        	 call wall_ck
  0B3C  CA5F0B        	 jp z,knight_front_ck_end
                      	
  0B3F  CDA90B        	 call left_turn
  0B42  CD4D16        	 call wall_ck
  0B45  CA5F0B        	 jp z,knight_front_ck_end
                      	 
  0B48  CD9B0B        	 call right_turn
  0B4B  CD9B0B        	 call right_turn
                      	 
  0B4E  23            	 inc HL
  0B4F  7E            	 ld A,(HL)
  0B50  E6C0          	 and 11000000b
  0B52  47            	 ld B,A
  0B53  3A620B        	 ld A,(knight_front_ck_end+3)
  0B56  E63F          	 and 00111111b
  0B58  B0            	 or B
  0B59  32620B        	 ld (knight_front_ck_end+3),A
  0B5C  2B            	 dec HL
                      	 
  0B5D  18CE          	 jr knight_front_ck_e
                      	 
  0B5F                	knight_front_ck_end:
  0B5F  1E00          	 ld E,overwrite
  0B61  1600          	 ld D,overwrite
  0B63  7B            	 ld A,E
  0B64  77            	 ld (HL),A
  0B65  23            	 inc HL
  0B66  7A            	 ld A,D
  0B67  77            	 ld (HL),A
  0B68  2B            	 dec HL
  0B69  C3890A        	 jp knight_move
                      	
  0B6C                	knight_front_outerwall:
  0B6C  C3270A        	 jp kight_accel_2
                      	
                      	
                      	
                      	;***************************ckeck sub****************************
                      	
  0B6F                	xy_ck:;chr cp
  0B6F  CD930B        	 call xyload
  0B72  E5            	 push HL		;>
  0B73  2A4155        	 ld HL,(gil_xy)
  0B76  7C            	 ld A,H
  0B77  E63F          	 and 00111111b
  0B79  67            	 ld H,A
  0B7A  ED52          	 sbc HL,DE
  0B7C  E1            	 pop HL			;<
  0B7D  C9            	 ret
  0B7E                	x_ck:
  0B7E  CD930B        	 call xyload
  0B81  3A4155        	 ld A,(gil_xy)
  0B84  93            	 sub E
  0B85  C9            	 ret
  0B86                	y_ck:
  0B86  CD930B        	 call xyload
  0B89  7A            	 ld A,D
  0B8A  E63F          	 and 00111111b
  0B8C  3A4255        	 ld A,(gil_xy+1)
  0B8F  E63F          	 and 00111111b
  0B91  92            	 sub D
  0B92  C9            	 ret
                      	
                      	
  0B93                	xyload:;A=urdl D=none
  0B93  5E            	 ld E,(HL)
  0B94  23            	 inc HL
  0B95  7E            	 ld A,(HL)
  0B96  E63F          	 and 00111111b
  0B98  57            	 ld D,A
  0B99  2B            	 dec HL
  0B9A  C9            	 ret
                      	
  0B9B                	right_turn:
  0B9B  23            	 inc HL
  0B9C  7E            	 ld A,(HL)
  0B9D  E6C0          	 and 11000000b
  0B9F  C640          	 add A,40H
  0BA1  47            	 ld B,A
  0BA2  7E            	 ld A,(HL)
  0BA3  E63F          	 and 00111111b
  0BA5  B0            	 or B
  0BA6  77            	 ld (HL),A
  0BA7  2B            	 dec HL
  0BA8  C9            	 ret
                      	 
  0BA9                	left_turn:
  0BA9  CD9B0B        	 call right_turn
  0BAC  CD9B0B        	 call right_turn
  0BAF  CD9B0B        	 call right_turn
  0BB2  C9            	 ret
                      	
                      	;*************************hp dec*****************************
  0BB3                	HP_dec:
  0BB3  3A3C55        	 ld A,(gil_sword)
  0BB6  FE02          	 cp 2
  0BB8  DD7E00        	 ld A,(IX)
  0BBB  2003          	 jr nz,HP_dec1
  0BBD  3D            	 dec A
  0BBE  2801          	 jr z,HP_dec2
  0BC0                	HP_dec1:
  0BC0  3D            	 dec A
  0BC1                	HP_dec2:
  0BC1  DD7700        	 ld (IX),A
  0BC4  281F          	 jr z,HP_rec
  0BC6                	HP_dec_swdbc:
  0BC6                	gil_HP_dec:
  0BC6  3A3555        	 ld A,(gil_hp)
  0BC9  3D            	 dec A
  0BCA  323555        	 ld (gil_hp),A
  0BCD  CA1714        	 jp z,gil_killing
  0BD0  C9            	 ret
                      	 
  0BD1                	HP_decB:
  0BD1  3A3C55        	 ld A,(gil_sword)
  0BD4  FE02          	 cp 2
  0BD6  DD7E00        	 ld A,(IX)
  0BD9  2003          	 jr nz,HP_decb1
  0BDB  3D            	 dec A
  0BDC  2801          	 jr z,HP_decb2
  0BDE                	HP_decb1:
  0BDE  3D            	 dec A
  0BDF                	HP_decb2:
  0BDF  DD7700        	 ld (IX),A
  0BE2  2814          	 jr z,HP_rec2
  0BE4  C9            	 ret
                      	
                      	 
  0BE5                	HP_rec:
  0BE5  DD7E60        	 ld A,(IX+96)
  0BE8  47            	 ld B,A
  0BE9  AF            	 xor A
  0BEA  DD7760        	 ld (IX+96),A
  0BED  3A3555        	 ld A,(gil_HP)
  0BF0  80            	 add A,B
  0BF1  3002          	 jr nc,H_recP2
  0BF3  3EFF          	 ld A,255
  0BF5                	H_recP2:
  0BF5  323555        	 ld (gil_HP),A
  0BF8                	HP_rec2:
  0BF8  AF            	 xor A
  0BF9  DD7700        	 ld (IX),A
  0BFC  DD7730        	 ld (IX+48),A
  0BFF  DD7760        	 ld (IX+96),A
  0C02  FD7700        	 ld (IY),A
  0C05  C9            	 ret
                      	
                      	;*************************key actions************************
  0C06                	key_action:
  0C06  3A5155        	 ld A,(key)
  0C09  B7            	 or A
  0C0A  280A          	 jr z,key_action_1
  0C0C  CD4003        	 call itemprint
  0C0F  AF            	 xor A
  0C10  DD7700        	 ld (IX),A
  0C13  C33614        	 jp mains_end
  0C16                	key_action_1:
  0C16  E5            	 push HL
  0C17  CD1816        	 call cross_ck_a
  0C1A  E1            	 pop HL
  0C1B  3005          	 jr nc,key_action_end
  0C1D  3E01          	 ld A,1
  0C1F  325155        	 ld (key),A
  0C22                	key_action_end:
  0C22  119E21        	 ld DE,graph_key
  0C25  CD7706        	 call Egraph
  0C28  C33614        	 jp mains_end
                      	
                      	;**************************box action*************************
  0C2B                	box_action:
                      	
  0C2B  DD7E30        	 ld A,(IX+48)
  0C2E  B7            	 or A
  0C2F  3AAD53        	 ld A,(floor)
  0C32  2012          	 jr nz,box_actiont
                      	 
  0C34  3D            	 dec A
  0C35  D9            	 exx
  0C36  87            	 add A,A
  0C37  5F            	 ld E,A
  0C38  1600          	 ld D,0
  0C3A  21510C        	 ld HL,box_action_table_farse
  0C3D                	box_action2:
  0C3D  19            	 add HL,DE
  0C3E  5E            	 ld E,(HL)
  0C3F  23            	 inc HL
  0C40  56            	 ld D,(HL)
  0C41  EB            	 ex DE,HL
                      	 
  0C42  22F000        	 ld (0f0h),HL
                      	; ret
                      	 
  0C45  E9            	 jp (HL)
  0C46                	box_actiont:
  0C46  3D            	 dec A
  0C47  D9            	 exx
  0C48  87            	 add A,A
  0C49  5F            	 ld E,A
  0C4A  1600          	 ld D,0
  0C4C  21C70C        	 ld HL,box_action_table_true
  0C4F  18EC          	 jr box_action2
  0C51                	box_action_table_farse:
  0C51  3D0D6C0D960DC7	 dw floor1,floor2,floor3,floor4,floor5,floor6,floor7,floor8,floor9,floor10
  0C65  090F4A0F710FCF	 dw floor11,floor12,floor13,floor14,floor15,floor16,floor17,floor18,floor19,floor20
  0C79  42114211421146	 dw floor21,floor22,floor23,floor24,floor25,floor26,floor27,floor28,floor29,floor30
  0C8D  EF11EF11EF11EF	 dw floor31,floor32,floor33,floor34,floor35,floor36,floor37,floor38,floor39,floor40
  0CA1  EF11EF11EF11EF	 dw floor41,floor42,floor43,floor44,floor45,floor46,floor47,floor48,floor49,floor50
  0CB5  EF11EF11EF11EF	 dw floor51,floor52,floor53,floor54,floor55,floor56,floor57,floor58,floor59
  0CC7                	box_action_table_true:
  0CC7  4C0D7B0DA60DCB	 dw floor1t,floor2t,floor3t,floor4t,floor5t,floor6t,floor7t,floor8t,floor9t,floor10t
  0CDB  310F580FAF0FD3	 dw floor11t,floor12t,floor13t,floor14t,floor15t,floor16t,floor17t,floor18t,floor19t,floor20t
  0CEF  42114211421160	 dw floor21t,floor22t,floor23t,floor24t,floor25t,floor26t,floor27t,floor28t,floor29t,floor30t
  0D03  EF11EF11EF11EF	 dw floor31t,floor32t,floor33t,floor34t,floor35t,floor36t,floor37t,floor38t,floor39t,floor40t
  0D17  EF11EF11EF11EF	 dw floor41t,floor42t,floor43t,floor44t,floor45t,floor46t,floor47t,floor48t,floor49t,floor50t
  0D2B  EF11EF11EF11EF	 dw floor51t,floor52t,floor53t,floor54t,floor55t,floor56t,floor57t,floor58t,floor59t
                      	
                      	
                      	;***********************floor1******************************
  0D3D                	floor1:
  0D3D  D9            	 exx
  0D3E  3A0A22        	 ld A,(dammy)
  0D41  FE03          	 cp 3
  0D43  DA3614        	 jp c,mains_end
  0D46  DD7730        	 ld (IX+48),A
  0D49  C33614        	 jp mains_end
  0D4C                	floor1t
  0D4C  D9            	 exx
  0D4D  3A4555        	 ld A,(matk)
  0D50  B7            	 or A
  0D51  C23614        	 jp nz,mains_end
  0D54  E5            	 push HL
  0D55  CD1816        	 call cross_ck_a
  0D58  E1            	 pop HL
  0D59  D2F311        	 jp nc,box_action_end
  0D5C  3E01          	 ld A,1
  0D5E  324555        	 ld (matk),A
  0D61  3E02          	 ld A,2
  0D63  323A55        	 ld (gil_matk_count),A
  0D66  CD4003        	 call itemprint
  0D69  C33614        	 jp mains_end
                      	 
                      	 
                      	
                      	;***********************floor2******************************
  0D6C                	floor2:
  0D6C  D9            	 exx
                      	 
  0D6D  3A0A22        	 ld A,(dammy)
  0D70  FE02          	 cp 2
  0D72  DA3614        	 jp c,mains_end
  0D75  DD7730        	 ld (IX+48),A
  0D78  C33614        	 jp mains_end
  0D7B                	floor2t
  0D7B  D9            	 exx
  0D7C  3A4655        	 ld A,(boot)
  0D7F  B7            	 or A
  0D80  C23614        	 jp nz,mains_end
  0D83  E5            	 push HL
  0D84  CD1816        	 call cross_ck_a
  0D87  E1            	 pop HL
  0D88  D2F311        	 jp nc,box_action_end
  0D8B  3E01          	 ld A,1
  0D8D  324655        	 ld (boot),A
  0D90  CD4003        	 call itemprint
  0D93  C33614        	 jp mains_end
                      	
                      	
                      	;***********************floor3******************************
  0D96                	floor3:
  0D96  D9            	 exx
  0D97  3AE453        	 ld A,(obj_hp)
  0D9A  B7            	 or A
  0D9B  C23614        	 jp nz,mains_end
  0D9E  3E01          	 ld A,1
  0DA0  DD7730        	 ld (IX+48),A
  0DA3  C33614        	 jp mains_end
  0DA6                	floor3t:
  0DA6  D9            	 exx
  0DA7  3A5055        	 ld A,(posion)
  0DAA  FE01          	 cp 1
  0DAC  CA3614        	 jp z,mains_end
  0DAF  E5            	 push HL
  0DB0  CD1816        	 call cross_ck_a
  0DB3  E1            	 pop HL
  0DB4  D2F311        	 jp nc,box_action_end
  0DB7  3E01          	 ld A,1
  0DB9  325055        	 ld (posion),A
  0DBC  CD4003        	 call itemprint
  0DBF  3E40          	 ld A,64
  0DC1  323555        	 ld (gil_hp),A
  0DC4  C33614        	 jp mains_end
                      	 
                      	;***********************floor4*****************************
  0DC7                	floor4:
  0DC7  D9            	 exx
  0DC8  C33614        	 jp mains_end
  0DCB                	floor4t:
  0DCB  D9            	 exx
  0DCC  C33614        	 jp mains_end
                      	 
                      	;***********************floor5*****************************
  0DCF                	floor5:
  0DCF  D9            	 exx
  0DD0  3A0B22        	 ld A,(dammy+1)
  0DD3  FE04          	 cp 4
  0DD5  DA3614        	 jp c,mains_end
  0DD8  3E01          	 ld A,1
  0DDA  DD7730        	 ld (IX+48),A
  0DDD  C33614        	 jp mains_end
  0DE0                	floor5t:
  0DE0  D9            	 exx
  0DE1  3A4755        	 ld A,(sword)
  0DE4  B7            	 or A
  0DE5  C23614        	 jp nz,mains_end
  0DE8  E5            	 push HL
  0DE9  CD1816        	 call cross_ck_a
  0DEC  E1            	 pop HL
  0DED  D2F311        	 jp nc,box_action_end
  0DF0  3E01          	 ld A,1
  0DF2  324755        	 ld (sword),A
  0DF5  CD4003        	 call itemprint
  0DF8  C33614        	 jp mains_end
                      	 
                      	;***********************floor6*****************************
  0DFB                	floor6:
  0DFB  D9            	 exx
  0DFC  3A4255        	 ld A,(gil_xy+1)
  0DFF  E63F          	 and 00111111b
  0E01  C2090E        	 jp nz,floor6l
  0E04  3E01          	 ld A,1
  0E06  DD7760        	 ld (IX+96),A
  0E09                	floor6l:
  0E09  DD7E60        	 ld A,(IX+96)
  0E0C  B7            	 or A
  0E0D  CA3614        	 jp z,mains_end
  0E10  3A4255        	 ld A,(gil_xy+1)
  0E13  E63F          	 and 00111111b
  0E15  FE01          	 cp 1
  0E17  C23614        	 jp nz,mains_end
  0E1A  DD7730        	 ld (IX+48),A
  0E1D  C33614        	 jp mains_end
  0E20                	floor6t:
  0E20  D9            	 exx
  0E21  3A4E55        	 ld A,(kndl)
  0E24  B7            	 or A
  0E25  C23614        	 jp nz,mains_end
  0E28  CD1816        	 call cross_ck_a
  0E2B  D2F311        	 jp nc,box_action_end
  0E2E  3E01          	 ld A,1
  0E30  324E55        	 ld (kndl),A
  0E33  CD4003        	 call itemprint
  0E36  C33614        	 jp mains_end
                      	;***********************floor7*****************************
  0E39                	floor7:
  0E39  D9            	 exx
  0E3A  3A0C22        	 ld A,(dammy+2)
  0E3D  B7            	 or A
  0E3E  CA3614        	 jp z,mains_end
  0E41  3E01          	 ld A,1
  0E43  DD7730        	 ld (IX+48),A
  0E46  C33614        	 jp mains_end
  0E49                	floor7t:
  0E49  D9            	 exx
  0E4A  3A4555        	 ld A,(matk)
  0E4D  B7            	 or A
  0E4E  C23614        	 jp nz,mains_end
  0E51  CD1816        	 call cross_ck_a
  0E54  D2F311        	 jp nc,box_action_end
  0E57  3E02          	 ld A,2
  0E59  324555        	 ld (matk),A
  0E5C  3E04          	 ld A,4
  0E5E  323A55        	 ld (gil_matk_count),A
  0E61  CD4003        	 call itemprint
  0E64  C33614        	 jp mains_end
                      	 
  0E67                	floor8:
  0E67  D9            	 exx
  0E68  CDE016        	 call wall_mod
  0E6B  78            	 ld A,B
  0E6C  FE01          	 cp 1
  0E6E  CA3614        	 jp z,mains_end
  0E71  79            	 ld A,C
  0E72  B7            	 or A
  0E73  C23614        	 jp nz,mains_end
  0E76  3A3455        	 ld A,(gil_button)
  0E79  CB6F          	 bit 5,A
  0E7B  CA3614        	 jp z,mains_end
  0E7E  DD7730        	 ld (IX+48),A
  0E81  C33614        	 jp mains_end
  0E84                	floor8t
  0E84  D9            	 exx
  0E85  3A5055        	 ld A,(posion)
  0E88  FE01          	 cp 1
  0E8A  CA3614        	 jp z,mains_end
  0E8D  CD1816        	 call cross_ck_a
  0E90  D2F311        	 jp nc,box_action_end
  0E93  3E01          	 ld A,1
  0E95  325055        	 ld (posion),A
  0E98  3E40          	 ld A,64
  0E9A  323555        	 ld (gil_hp),A
  0E9D  CD4003        	 call itemprint
  0EA0  C33614        	 jp mains_end
                      	 
  0EA3                	floor9:
  0EA3  D9            	 exx
  0EA4  ED5B4155      	 ld DE,(gil_xy)
  0EA8  7A            	 ld A,D
  0EA9  E63F          	 and 00111111b
  0EAB  C23614        	 jp nz,mains_end
  0EAE  7B            	 ld A,E
  0EAF  FE56          	 cp 30+7*8
  0EB1  CAB90E        	 jp z,floor9l
  0EB4  FE5D          	 cp 30+7*9
  0EB6  C23614        	 jp nz,mains_end
  0EB9                	floor9l:
  0EB9  3E01          	 ld A,1
  0EBB  DD7730        	 ld (IX+48),A
  0EBE  C33614        	 jp mains_end
  0EC1                	floor9t
  0EC1  D9            	 exx
  0EC2  3A5055        	 ld A,(posion)
  0EC5  FE02          	 cp 2
  0EC7  CA3614        	 jp z,mains_end
  0ECA  CD1816        	 call cross_ck_a
  0ECD  D2F311        	 jp nc,box_action_end
  0ED0  3E02          	 ld A,2
  0ED2  325055        	 ld (posion),A
  0ED5  3E10          	 ld A,16
  0ED7  323555        	 ld (gil_hp),A
  0EDA  CD4003        	 call itemprint
  0EDD  C33614        	 jp mains_end
                      	 
  0EE0                	floor10:
  0EE0  D9            	 exx
  0EE1  3A0B22        	 ld A,(dammy+1)
  0EE4  B7            	 or A
  0EE5  CA3614        	 jp z,mains_end
  0EE8  3E01          	 ld A,1
  0EEA  DD7730        	 ld (IX+48),A
  0EED  C33614        	 jp mains_end
  0EF0                	floor10t:
  0EF0  D9            	 exx
  0EF1  3A4955        	 ld A,(gnt)
  0EF4  B7            	 or A
  0EF5  C23614        	 jp nz,mains_end
  0EF8  CD1816        	 call cross_ck_a
  0EFB  D2F311        	 jp nc,box_action_end
  0EFE  3E01          	 ld A,1
  0F00  324955        	 ld (gnt),A
  0F03  CD4003        	 call itemprint
  0F06  C33614        	 jp mains_end
                      	 
                      	 
  0F09                	floor11:
  0F09  D9            	 exx
  0F0A  3A4255        	 ld A,(gil_xy+1)
  0F0D  E63F          	 and 00111111b
  0F0F  FE2A          	 cp 42
  0F11  2005          	 jr nz,floor11l
  0F13  3E01          	 ld A,1
  0F15  DD7760        	 ld (IX+96),A
  0F18                	floor11l:
  0F18  DD7E60        	 ld A,(IX+96)
  0F1B  B7            	 or A
  0F1C  CA3614        	 jp z,mains_end
  0F1F  3A4255        	 ld A,(gil_xy+1)
  0F22  E63F          	 and 00111111b
  0F24  FE29          	 cp 41
  0F26  C23614        	 jp nz,mains_end
  0F29  3E01          	 ld A,1
  0F2B  DD7730        	 ld (IX+48),A
  0F2E  C33614        	 jp mains_end
  0F31                	floor11t:
  0F31  D9            	 exx
  0F32  3A4E55        	 ld A,(kndl)
  0F35  B7            	 or A
  0F36  C23614        	 jp nz,mains_end
  0F39  CD1816        	 call cross_ck_a
  0F3C  D2F311        	 jp nc,box_action_end
  0F3F  3E01          	 ld A,1
  0F41  324E55        	 ld (kndl),A
  0F44  CD4003        	 call itemprint
  0F47  C33614        	 jp mains_end
                      	
  0F4A                	floor12:
  0F4A  D9            	 exx
  0F4B  3A0D22        	 ld A,(dammy+3)
  0F4E  B7            	 or A
  0F4F  CA3614        	 jp z,mains_end
  0F52  DD7730        	 ld (IX+48),A
  0F55  C33614        	 jp mains_end
  0F58                	floor12t:
  0F58  D9            	 exx
  0F59  3A4855        	 ld A,(armor)
  0F5C  B7            	 or A
  0F5D  C23614        	 jp nz,mains_end
  0F60  CD1816        	 call cross_ck_a
  0F63  D2F311        	 jp nc,box_action_end
  0F66  3E01          	 ld A,1
  0F68  324855        	 ld (armor),A
  0F6B  CD4003        	 call itemprint
  0F6E  C33614        	 jp mains_end
                      	 
                      	 
  0F71                	floor13:
  0F71  D9            	 exx
  0F72  E5            	 push HL
  0F73  21E453        	 ld HL,obj_hp
  0F76  7E            	 ld A,(HL)
  0F77  B7            	 or A
  0F78  C2AB0F        	 jp nz,floor13l
  0F7B  23            	 inc HL
  0F7C  7E            	 ld A,(HL)
  0F7D  B7            	 or A
  0F7E  C2AB0F        	 jp nz,floor13l
  0F81  23            	 inc HL
  0F82  7E            	 ld A,(HL)
  0F83  B7            	 or A
  0F84  C2AB0F        	 jp nz,floor13l
  0F87  23            	 inc HL
  0F88  7E            	 ld A,(HL)
  0F89  B7            	 or A
  0F8A  C2AB0F        	 jp nz,floor13l
  0F8D  23            	 inc HL
  0F8E  7E            	 ld A,(HL)
  0F8F  B7            	 or A
  0F90  C2AB0F        	 jp nz,floor13l
  0F93  23            	 inc HL
  0F94  7E            	 ld A,(HL)
  0F95  B7            	 or A
  0F96  C2AB0F        	 jp nz,floor13l
  0F99  23            	 inc HL
  0F9A  7E            	 ld A,(HL)
  0F9B  B7            	 or A
  0F9C  C2AB0F        	 jp nz,floor13l
  0F9F  E1            	 pop HL
  0FA0  3E01          	 ld A,1
  0FA2  320F22        	 ld (dammy+5),A
  0FA5  DD7730        	 ld (IX+48),A
  0FA8  C33614        	 jp mains_end
  0FAB                	floor13l:
  0FAB  E1            	 pop HL
  0FAC  C33614        	 jp mains_end
  0FAF                	floor13t:
  0FAF  D9            	 exx
  0FB0  3A0E22        	 ld A,(dammy+4)
  0FB3  B7            	 or A
  0FB4  CA3614        	 jp z,mains_end
  0FB7  3A4A55        	 ld A,(shield)
  0FBA  B7            	 or A
  0FBB  C23614        	 jp nz,mains_end
  0FBE  CD1816        	 call cross_ck_a
  0FC1  D2F311        	 jp nc,box_action_end
  0FC4  3E01          	 ld A,1
  0FC6  324A55        	 ld (shield),A
  0FC9  CD4003        	 call itemprint
  0FCC  C33614        	 jp mains_end
                      	 
  0FCF                	floor14:
  0FCF  D9            	 exx
  0FD0  C33614        	 jp mains_end
  0FD3                	floor14t:
  0FD3  D9            	 exx
  0FD4  C33614        	 jp mains_end
                      	 
  0FD7                	floor15:
  0FD7  D9            	 exx
  0FD8  E5            	 push HL
  0FD9  211022        	 ld HL,dammy+6
  0FDC  CD6F0B        	 call xy_ck
  0FDF  E1            	 pop HL
  0FE0  C23614        	 jp nz,mains_end
  0FE3  3A3855        	 ld A,(gil_st2)
  0FE6  E67F          	 and 01111111b
  0FE8  CA3614        	 jp z,mains_end
  0FEB  3E01          	 ld A,1
  0FED  DD7730        	 ld (IX+48),A
  0FF0  C33614        	 jp mains_end
  0FF3                	floor15t:
  0FF3  D9            	 exx
  0FF4  3A5255        	 ld A,(nec)
  0FF7  B7            	 or A
  0FF8  C23614        	 jp nz,mains_end
  0FFB  CD1816        	 call cross_ck_a
  0FFE  D2F311        	 jp nc,box_action_end
  1001  3E01          	 ld A,1
  1003  325255        	 ld (nec),A
  1006  CD4003        	 call itemprint
  1009  C33614        	 jp mains_end
                      	 
  100C                	floor16:
  100C  D9            	 exx
  100D  3A4155        	 ld A,(gil_xy)
  1010  FE1E          	 cp x0
  1012  2004          	 jr nz,floor16l1
  1014  DDCB60C6      	 set 0,(IX+96)
  1018                	floor16l1
  1018  3A4155        	 ld A,(gil_xy)
  101B  FE87          	 cp 135
  101D  2004          	 jr nz,floor16l2
  101F  DDCB60CE      	 set 1,(IX+96)
  1023                	floor16l2:
  1023  DD7E60        	 ld A,(IX+96)
  1026  FE03          	 cp 3
  1028  C23614        	 jp nz,mains_end
  102B  DD7730        	 ld (IX+48),A
  102E  C33614        	 jp mains_end
  1031                	floor16t:
  1031  D9            	 exx
  1032  3A4E55        	 ld A,(kndl)
  1035  FE02          	 cp 2
  1037  CA3614        	 jp z,mains_end
  103A  CD1816        	 call cross_ck_a
  103D  D2F311        	 jp nc,box_action_end
  1040  3E02          	 ld A,2
  1042  324E55        	 ld (kndl),A
  1045  CD4003        	 call itemprint
  1048  C33614        	 jp mains_end
                      	
  104B                	floor17:
  104B  D9            	 exx
                      	; jr f17test
  104C  3A1222        	 ld A,(dammy+8)
  104F  FE05          	 cp 5
  1051  DA3614        	 jp c,mains_end
  1054                	f17test:
  1054  3E01          	 ld A,1
  1056  DD7730        	 ld (IX+48),A
  1059  C33614        	 jp mains_end
  105C                	floor17t
  105C  D9            	 exx
  105D  3A5055        	 ld A,(posion)
  1060  FE03          	 cp 3
  1062  CA3614        	 jp z,mains_end
  1065  CD1816        	 call cross_ck_a
  1068  D2F311        	 jp nc,box_action_end
  106B  3E03          	 ld A,3
  106D  325055        	 ld (posion),A
  1070  CD4003        	 call itemprint
  1073  C33614        	 jp mains_end
                      	 
  1076                	floor18:
  1076  D9            	 exx
  1077  3A4155        	 ld A,(gil_xy)
  107A  FE1E          	 cp X0
  107C  2821          	 jr z,floor18_e
  107E  FE87          	 cp 135
  1080  281D          	 jr z,floor18_e
  1082  3A4255        	 ld A,(gil_xy+1)
  1085  E63F          	 and 00111111b
  1087  2816          	 jr z,floor18_e
  1089  FE2A          	 cp 42
  108B  2812          	 jr z,floor18_e
                      	
  108D  DD3460        	 inc (IX+96)
  1090  DD7E60        	 ld A,(IX+96)
  1093  B7            	 or A
  1094  C23614        	 jp nz,mains_end
  1097  3E01          	 ld A,1
  1099  DD7730        	 ld (IX+48),A
  109C  C33614        	 jp mains_end 
  109F                	floor18_e:
  109F  AF            	 xor A
  10A0  DD7760        	 ld (IX+96),A
  10A3  C33614        	 jp mains_end
  10A6                	floor18t
  10A6  D9            	 exx
  10A7  3A4755        	 ld A,(sword)
  10AA  FE02          	 cp 2
  10AC  CA3614        	 jp z,mains_end
  10AF  3A5055        	 ld A,(posion)
  10B2  FE03          	 cp 3
  10B4  C2F311        	 jp nz,box_action_end
  10B7  CD1816        	 call cross_ck_a
  10BA  D2F311        	 jp nc,box_action_end
  10BD  3E02          	 ld A,2
  10BF  324755        	 ld (sword),A
  10C2  AF            	 xor A
  10C3  325055        	 ld (posion),A
  10C6  110E07        	 ld DE,070eh
  10C9  CD011A        	 call grp_del
  10CC  CD4003        	 call itemprint
  10CF  C33614        	 jp mains_end
                      	 
  10D2                	floor19:
  10D2  D9            	 exx
  10D3  C33614        	 jp mains_end
  10D6                	floor19t:
  10D6  D9            	 exx
  10D7  C33614        	 jp mains_end
                      	
  10DA                	floor20:
  10DA  D9            	 exx
  10DB  E5            	 push HL
  10DC  21E453        	 ld HL,obj_hp
  10DF  7E            	 ld A,(HL)
  10E0  B7            	 or A
  10E1  CA1F11        	 jp z,floor20e
  10E4  23            	 inc HL
  10E5  7E            	 ld A,(HL)
  10E6  B7            	 or A
  10E7  CA1F11        	 jp z,floor20e
  10EA  23            	 inc HL
  10EB  7E            	 ld A,(HL)
  10EC  B7            	 or A
  10ED  CA1F11        	 jp z,floor20e
  10F0  23            	 inc HL
  10F1  7E            	 ld A,(HL)
  10F2  B7            	 or A
  10F3  CA1F11        	 jp z,floor20e
  10F6  23            	 inc HL
  10F7  7E            	 ld A,(HL)
  10F8  B7            	 or A
  10F9  CA1F11        	 jp z,floor20e
  10FC  23            	 inc HL
  10FD  7E            	 ld A,(HL)
  10FE  B7            	 or A
  10FF  CA1F11        	 jp z,floor20e
  1102  23            	 inc HL
  1103  7E            	 ld A,(HL)
  1104  B7            	 or A
  1105  CA1F11        	 jp z,floor20e
  1108  23            	 inc HL
  1109  7E            	 ld A,(HL)
  110A  B7            	 or A
  110B  CA1F11        	 jp z,floor20e
  110E  23            	 inc HL
  110F  E1            	 pop HL
  1110  3A5155        	 ld A,(key)
  1113  B7            	 or A
  1114  CA3614        	 jp z,mains_end
  1117  3E01          	 ld A,1
  1119  DD7730        	 ld (IX+48),A
  111C  C33614        	 jp mains_end 
  111F                	floor20e:
  111F  E1            	 pop HL
  1120  C33614        	 jp mains_end
  1123                	floor20t
  1123  D9            	 exx
  1124  3A5055        	 ld A,(posion)
  1127  FE01          	 cp 1
  1129  CA3614        	 jp z,mains_end
  112C  CD1816        	 call cross_ck_a
  112F  D2F311        	 jp nc,box_action_end
  1132  3E01          	 ld A,1
  1134  325055        	 ld (posion),A
  1137  3E40          	 ld A,64
  1139  323555        	 ld (gil_hp),A
  113C  CD4003        	 call itemprint
  113F  C33614        	 jp mains_end
                      	
                      	
  1142                	floor21:
  1142                	floor21t:
  1142                	floor22:
  1142                	floor22t:
  1142                	floor23:
  1142                	floor23t:
  1142  D9            	 exx
  1143  C33614        	 jp mains_end
                      	 
  1146                	floor24:
  1146  D9            	 exx
  1147  E5            	 push HL
  1148  21B253        	 ld HL,pgil_xy
  114B  CD6F0B        	 call xy_ck
  114E  E1            	 pop HL
  114F  C23614        	 jp nz,mains_end
  1152  3A3855        	 ld A,(gil_st2)
  1155  CB7F          	 bit 7,A
  1157  CA3614        	 jp z,mains_end
  115A  DD7730        	 ld (IX+48),A
  115D  C33614        	 jp mains_end
  1160                	floor24t:
  1160  D9            	 exx
  1161  3A4F55        	 ld A,(brns)
  1164  B7            	 or A
  1165  C23614        	 jp nz,mains_end
  1168  CD1816        	 call cross_ck_a
  116B  D2F311        	 jp nc,box_action_end
  116E  3E01          	 ld A,1
  1170  324F55        	 ld (brns),A
  1173  CD4003        	 call itemprint
  1176  C33614        	 jp mains_end
  1179                	floor25:
  1179                	floor25t:
  1179  D9            	 exx
  117A  C33614        	 jp mains_end
                      	 
                      	 
  117D                	floor26:
  117D  D9            	 exx
                      	; jp f26t
  117E  E5            	 push HL
  117F  0600          	 ld B,0
  1181  21E453        	 ld HL,obj_hp
  1184  7E            	 ld A,(HL)
  1185  B7            	 or A
  1186  C28A11        	 jp nz,floor26a
  1189  04            	 inc B
  118A                	floor26a:
  118A  23            	 inc HL
  118B  7E            	 ld A,(HL)
  118C  B7            	 or A
  118D  C29111        	 jp nz,floor26b
  1190  04            	 inc B
  1191                	floor26b:
  1191  23            	 inc HL
  1192  7E            	 ld A,(HL)
  1193  B7            	 or A
  1194  C29811        	 jp nz,floor26c
  1197  04            	 inc B
  1198                	floor26c:
  1198  E1            	 pop HL
  1199  78            	 ld A,B
  119A  FE01          	 cp 1
  119C  DA3614        	 jp c,mains_end
  119F  CAAA11        	 jp z,floor26d
  11A2  FE03          	 cp 3
  11A4  DAAA11        	 jp c,floor26d
  11A7  C33614        	 jp mains_end
  11AA                	floor26d:
  11AA  3A5155        	 ld A,(key)
  11AD  B7            	 or A
  11AE  CA3614        	 jp z,mains_end
  11B1                	f26t:
  11B1  3E01          	 ld A,1
  11B3  DD7730        	 ld (IX+48),A
  11B6  C33614        	 jp mains_end
  11B9                	floor26t
  11B9  D9            	 exx
  11BA  3A4955        	 ld A,(gnt)
  11BD  FE02          	 cp 2
  11BF  CA3614        	 jp z,mains_end
  11C2  FE03          	 cp 3
  11C4  CA3614        	 jp z,mains_end
  11C7  CD1816        	 call cross_ck_a
  11CA  D2F311        	 jp nc,box_action_end
  11CD  3A4F55        	 ld A,(brns)
  11D0  B7            	 or A
  11D1  2007          	 jr nz,floor26tt
  11D3                	floor26ti:
  11D3  3E03          	 ld A,3
  11D5  324955        	 ld (gnt),A
  11D8  1805          	 jr floor26tl
  11DA                	floor26tt: 
  11DA  3E02          	 ld A,2
  11DC  324955        	 ld (gnt),A
  11DF                	floor26tl:
  11DF  AF            	 xor A
  11E0  324F55        	 ld (brns),A
  11E3  11071C        	 ld DE,1c07h
  11E6  CD011A        	 call grp_del
  11E9  CD4003        	 call itemprint
  11EC  C33614        	 jp mains_end
                      	 
  11EF                	floor27:
  11EF                	floor27t
  11EF                	floor28:
  11EF                	floor28t
  11EF                	floor29:
  11EF                	floor29t
  11EF                	floor30:
  11EF                	floor30t
  11EF                	floor31:
  11EF                	floor31t:
  11EF                	floor32:
  11EF                	floor32t:
  11EF                	floor33:
  11EF                	floor33t:
  11EF                	floor34:
  11EF                	floor34t:
  11EF                	floor35:
  11EF                	floor35t:
  11EF                	floor36:
  11EF                	floor36t:
  11EF                	floor37:
  11EF                	floor37t
  11EF                	floor38:
  11EF                	floor38t
  11EF                	floor39:
  11EF                	floor39t
  11EF                	floor40:
  11EF                	floor40t
  11EF                	floor41:
  11EF                	floor41t:
  11EF                	floor42:
  11EF                	floor42t:
  11EF                	floor43:
  11EF                	floor43t:
  11EF                	floor44:
  11EF                	floor44t:
  11EF                	floor45:
  11EF                	floor45t:
  11EF                	floor46:
  11EF                	floor46t:
  11EF                	floor47:
  11EF                	floor47t
  11EF                	floor48:
  11EF                	floor48t
  11EF                	floor49:
  11EF                	floor49t
  11EF                	floor50:
  11EF                	floor50t
  11EF                	floor51:
  11EF                	floor51t:
  11EF                	floor52:
  11EF                	floor52t:
  11EF                	floor53:
  11EF                	floor53t:
  11EF                	floor54:
  11EF                	floor54t:
  11EF                	floor55:
  11EF                	floor55t:
  11EF                	floor56:
  11EF                	floor56t:
  11EF                	floor57:
  11EF                	floor57t
  11EF                	floor58:
  11EF                	floor58t
  11EF                	floor59:
  11EF                	floor59t
  11EF  D9            	 exx
  11F0  C33614        	 jp mains_end
                      	
                      	
                      	
                      	
  11F3                	box_action_end:
  11F3  11B021        	 ld DE,graph_box
  11F6  CD7706        	 call Egraph
  11F9  C33614        	 jp mains_end
                      	
                      	
                      	;*************************door actions************************
  11FC                	door_action:
  11FC  3A5155        	 ld A,(key)
  11FF  B7            	 or A
  1200  2002          	 jr nz,door_action_1
  1202  1812          	 jr door_action_end
  1204                	door_action_1:
  1204  11AA21        	 ld DE,graph_door+6
  1207  CD7706        	 call Egraph
  120A  CD1816        	 call cross_ck_a
  120D  CD6F0B        	 call xy_ck
  1210  CA2F12        	 jp z,next_floor
  1213  C33614        	 jp mains_end
  1216                	door_action_end:
  1216  CD1816        	 call cross_ck_a
  1219  300B          	 jr nc,door_action_end2
  121B  3A0F22        	 ld A,(dammy+5)
  121E  B7            	 or A
  121F  2005          	 jr nz,door_action_end2
  1221  3E01          	 ld A,1
  1223  320E22        	 ld (dammy+4),A
  1226                	door_action_end2:
  1226  11A421        	 ld DE,graph_door
  1229  CD7706        	 call Egraph
  122C  C33614        	 jp mains_end
                      	
  122F                	next_floor:
  122F  AF            	 xor A
  1230  325155        	 ld (key),A
  1233  CD4003        	 call itemprint
  1236  CD0D15        	 call grp_o
                      	 
  1239  110601        	 ld DE,0106h
  123C  060B          	 ld B,11
  123E  215C12        	 ld HL,next_floorms
  1241  CDF1BF        	 call msp
  1244  110802        	 ld DE,0208h
  1247  060A          	 ld B,10
  1249  216712        	 ld HL,next_floorms+11
  124C  CDF1BF        	 call msp
  124F  CD5C14        	 call tim255
  1252  CDFDBC        	 call kwait
  1255  21AD53        	 ld HL,floor
  1258  34            	 inc (HL)
  1259  C38301        	 jp Stating_before
  125C                	next_floorms:
  125C  464C4F4F522043	 db "FLOOR CLEAR"
  1267  4E45585420464C	 db "NEXT FLOOR"
                      	
                      	;*************************gil actions*************************
  1271                	gil_action:
  1271  E5            	 push HL
                      	
                      	
  1272  3A4155        	 ld A,(gil_xy)
  1275  5F            	 ld E,A
  1276  3A4255        	 ld A,(gil_xy+1)
  1279  57            	 ld D,A
  127A  CD011A        	 call grp_del
                      	; call kwait
                      	
                      	;*************************key scanf**************************
  127D  CD3315        	 call keysc
  1280  323455        	 ld (gil_button),A
  1283  08            	 ex AF,AF'
                      	
                      	;************************sword back***************************
  1284  3A3855        	 ld A,(gil_st2)
  1287  B7            	 or A
  1288  C2E013        	 jp nz,gil_sword_f2
                      	;***********************sword atack****************************
  128B                	gil_action_l_b:
  128B  08            	 ex AF,AF'
  128C  CB6F          	 bit 5,A
  128E  C27F13        	 jp nz,gil_sword_f
  1291  CDB613        	 call gil_sword_reset
                      	
  1294  211E20        	 ld HL,graph_gil_ulf
  1297  225113        	 ld (gil_action_end-2),HL
                      	;************************urdl move*****************************
  129A                	gil_action_l:
  129A  08            	 ex AF,AF'
  129B  3A4655        	 ld A,(boot)
  129E  B7            	 or A
  129F  200B          	 jr nz,gil_action_l2
  12A1  3A3B55        	 ld A,(gil_bt)
  12A4  EEFF          	 xor 0ffh
  12A6  323B55        	 ld (gil_bt),A
  12A9  CA5013        	 jp z,gil_action_end-3
  12AC                	gil_action_l2:
  12AC  08            	 ex AF,AF'
  12AD  CB47          	 bit 0,A
  12AF  200F          	 jr nz,gil_left
  12B1  CB4F          	 bit 1,A
  12B3  202D          	 jr nz,gil_right
  12B5  CB77          	 bit 6,A
  12B7  204C          	 jr nz,gil_down
  12B9  CB7F          	 bit 7,A
  12BB  206C          	 jr nz,gil_up
                      	;*****************************noting************************
  12BD  C35013        	 jp gil_action_end-3
                      	 ;************************move farse*************************
  12C0                	gil_left:
  12C0  3A4255        	 ld A,(gil_xy+1);y
  12C3  E63F          	 and 00111111b
  12C5  CACF12        	 jp z,gil_left_l
  12C8                	gil_left_s:
  12C8  D607          	 sub 7
  12CA  DA6C13        	 jp c,direction_p
  12CD  20F9          	 jr nz,gil_left_s
  12CF                	gil_left_l:
  12CF  3EC0          	 ld A,11000000b
  12D1  214255        	 ld HL,gil_xy+1
  12D4  B6            	 or (HL)
  12D5  77            	 ld (HL),A
  12D6  2B            	 dec HL;ld HL,gil_xy
  12D7  CD4D16        	 call wall_ck
  12DA  B7            	 or A;
  12DB  C25013        	 jp nz,gil_action_end-3
                      	
                      	; ld HL,gil_xy
  12DE  35            	 dec (HL)
  12DF  C34913        	 jp gil_walk
                      	
  12E2                	gil_right:
  12E2  3A4255        	 ld A,(gil_xy+1);y
  12E5  E63F          	 and 00111111b
  12E7  CAF112        	 jp z,gil_right_l
  12EA                	gil_right_s:
  12EA  D607          	 sub 7
  12EC  DA6C13        	 jp c,direction_p
  12EF  20F9          	 jr nz,gil_right_s
  12F1                	gil_right_l:
  12F1  3E3F          	 ld A,00111111b
  12F3  214255        	 ld HL,gil_xy+1
  12F6  A6            	 and (HL)
  12F7  77            	 ld (HL),A
  12F8  CBF6          	 set 6,(HL)
  12FA  2B            	 dec HL;ld HL,gil_xy
  12FB  CD4D16        	 call wall_ck
  12FE  B7            	 or A;
  12FF  C25013        	 jp nz,gil_action_end-3
                      	
                      	; ld HL,gil_xy
  1302  34            	 inc (HL)
  1303  1844          	 jr gil_walk
                      	
  1305                	gil_down:
  1305  3A4155        	 ld A,(gil_xy);x
  1308  D61E          	 sub 30
  130A  CA1413        	 jp z,gil_down_l
  130D                	gil_down_s:
  130D  D607          	 sub 7
  130F  DA6C13        	 jp c,direction_p
  1312  20F9          	 jr nz,gil_down_s
  1314                	gil_down_l:
  1314  3E3F          	 ld A,00111111b
  1316  214255        	 ld HL,gil_xy+1
  1319  A6            	 and (HL)
  131A  77            	 ld (HL),A
  131B  CBFE          	 set 7,(HL)
  131D  2B            	 dec HL;ld HL,gil_xy
  131E  CD4D16        	 call wall_ck
  1321  B7            	 or A;
  1322  C25013        	 jp nz,gil_action_end-3
                      	
                      	; ld HL,gil_xy
  1325  23            	 inc HL
  1326  34            	 inc (HL)
  1327  1820          	 jr gil_walk
                      	
  1329                	gil_up:
  1329  3A4155        	 ld A,(gil_xy);x
  132C  D61E          	 sub 30
  132E  CA3813        	 jp z,gil_up_l
  1331                	gil_up_s:
  1331  D607          	 sub 7
  1333  DA6C13        	 jp c,direction_p
  1336  20F9          	 jr nz,gil_up_s
  1338                	gil_up_l:
  1338  3E3F          	 ld A,00111111b
  133A  214255        	 ld HL,gil_xy+1
  133D  A6            	 and (HL)
  133E  77            	 ld (HL),A
  133F  2B            	 dec HL;ld HL,gil_xy
  1340  CD4D16        	 call wall_ck
  1343  B7            	 or A;
  1344  C25013        	 jp nz,gil_action_end-3
                      	
                      	; ld HL,gil_xy
  1347  23            	 inc HL
  1348  35            	 dec (HL)
                      	; jr gil_walk
                      	
                      	
  1349                	gil_walk:
  1349  213755        	 ld HL,gil_st1
  134C  3EFF          	 ld A,0ffh
  134E  AE            	 xor (HL)
  134F  77            	 ld (HL),A
                      	
  1350  211E20        	 ld HL,graph_gil_ulf
  1353                	gil_action_end:
  1353  3A3755        	 ld A,(gil_st1)
  1356  3C            	 inc A
  1357  111800        	 ld DE,24
  135A  CD8714        	 call xsan
  135D                	gil_action_end_l:
  135D  3A4155        	 ld A,(gil_xy)
  1360  5F            	 ld E,A
  1361  3A4255        	 ld A,(gil_xy+1)
  1364  57            	 ld D,A
  1365  CD7519        	 call grp_set
  1368  E1            	 pop HL
  1369  C33614        	 jp mains_end
                      	
  136C                	direction_p:
  136C  3A4255        	 ld A,(gil_xy+1)
  136F  E6C0          	 and 11000000b
  1371  CA3813        	 jp z,gil_up_l
  1374  FE80          	 cp 80h
  1376  DAF112        	 jp c,gil_right_l
  1379  CA1413        	 jp z,gil_down_l
  137C  C3C012        	 jp gil_left
                      	
  137F                	gil_sword_f:;key_action
  137F  08            	 ex AF,AF'
  1380  B7            	 or A
  1381  C2AB13        	 jp nz,gil_sword_set 
                      	;************************sword atack***************************
  1384  3A4955        	 ld A,(gnt)
  1387  FE01          	 cp 1
  1389  380D          	 jr c,gnt_back_1
  138B  280B          	 jr z,gnt_back_1
  138D  FE03          	 cp 3
  138F  3803          	 jr c,gnt_back_2
  1391  AF            	 xor A
  1392  1806          	 jr gnt_back_e
  1394                	gnt_back_2:
  1394  3E04          	 ld A,4
  1396  1802          	 jr gnt_back_e
  1398                	gnt_back_1:
  1398  3E0A          	 ld A,10		;back flame
  139A                	gnt_back_e:
  139A  323855        	 ld (gil_st2),A
                      	;***********************matk action****************************
  139D  CD0317        	 call matk_action_gil
                      	;*************************************************************
  13A0  114E20        	 ld DE,graph_gilsw_ulf	;gil_sw
  13A3  ED535113      	 ld (gil_action_end-2),DE
  13A7  08            	 ex AF,AF'
  13A8  C39A12        	 jp gil_action_l
  13AB                	gil_sword_set:
  13AB  117E20        	 ld DE,graph_gilsword_ulf	;gil_swd
  13AE  ED535113      	 ld (gil_action_end-2),DE
  13B2                	gil_sword_set_l:
  13B2  08            	 ex AF,AF'
  13B3  C39A12        	 jp gil_action_l
  13B6                	gil_sword_reset:
  13B6  08            	 ex AF,AF'
  13B7  3A3855        	 ld A,(gil_st2)
  13BA  47            	 ld B,A
  13BB  08            	 ex AF,AF'
  13BC  CB78          	 bit 7,B
  13BE  C8            	 ret z
  13BF  08            	 ex AF,AF'
  13C0  E1            	 pop HL
                      	;************************sword back***************************
  13C1  3A4955        	 ld A,(gnt)
  13C4  FE01          	 cp 1
  13C6  380D          	 jr c,gnt_backb_1
  13C8  280B          	 jr z,gnt_backb_1
  13CA  FE03          	 cp 3
  13CC  3803          	 jr c,gnt_backb_2
  13CE  AF            	 xor A
  13CF  1806          	 jr gnt_backb_e
  13D1                	gnt_backb_2:
  13D1  3E04          	 ld A,4
  13D3  1802          	 jr gnt_backb_e
  13D5                	gnt_backb_1:
  13D5  3E0A          	 ld A,10		;back flame
  13D7                	gnt_backb_e:
  13D7  F680          	 or 10000000b
  13D9  323855        	 ld (gil_st2),A
                      	 
  13DC  08            	 ex AF,AF'
  13DD  C39A12        	 jp gil_action_l
  13E0                	gil_sword_f2:;auto_action
  13E0  FE80          	 cp 80h
  13E2  CA8B12        	 jp z,gil_action_l_b
  13E5  E680          	 and 10000000b
  13E7  C2FF13        	 jp nz,gil_sword_f_decB;A=1nnnnnnnb
  13EA                	gil_sword_f_decA:;A=0nnnnnnnb
  13EA  213855        	 ld HL,gil_st2
  13ED  7E            	 ld A,(HL)
  13EE  3D            	 dec A
  13EF  77            	 ld (HL),A
  13F0  114E20        	 ld DE,graph_gilsw_ulf	;gil_sw
  13F3  ED535113      	 ld (gil_action_end-2),DE
  13F7  C21314        	 jp nz,gil_action_l_r
  13FA  CBFE          	 set 7,(HL)
  13FC  C31314        	 jp gil_action_l_r
  13FF                	gil_sword_f_decB:;A=1nnnnnnnb
  13FF  213855        	 ld HL,gil_st2
  1402  7E            	 ld A,(HL)
  1403  3D            	 dec A
  1404  77            	 ld (HL),A
  1405  E67F          	 and 01111111b
  1407  114E20        	 ld DE,graph_gilsw_ulf	;gil_sw
  140A  ED535113      	 ld (gil_action_end-2),DE
  140E  C21314        	 jp nz,gil_action_l_r
  1411  CBBE          	 res 7,(HL)
  1413                	gil_action_l_r:
  1413  08            	 ex AF,AF'
  1414  C39A12        	 jp gil_action_l
                      	
                      	
  1417                	gil_killing:
  1417  CD0D15        	 call grp_o
  141A  212B14        	 ld HL,killingm
  141D  110000        	 ld DE,0
  1420  060B          	 ld B,11
  1422  CDF1BF        	 call msp
  1425  CDFDBC        	 call 48381
  1428  C37E04        	 jp stating_rec
                      	
                      	
                      	
  142B                	killingm:
  142B  6265656E206B69	 db "been killed"
                      	
                      	
  1436                	mains_end:
                      	; ld A,(IX+48)
                      	; ld (0f0h),A
                      	; ld (0f2h),IX
  1436  3A0405        	 ld A,(count+1)
  1439  3D            	 dec A
  143A  320405        	 ld (count+1),A
  143D  23            	 inc HL
  143E  23            	 inc HL
  143F  DD23          	 inc IX
  1441  FD23          	 inc IY
  1443  D9            	 exx
  1444  CD3315        	 call keysc
  1447  CB57          	 bit 2,A
  1449  C25014        	 jp nz,retp
  144C  D9            	 exx
  144D  C30305        	 jp mains
                      	
                      	
  1450                	retP:
  1450  310000        	 ld SP,0
  1453  C9            	 ret
                      	
                      	
                      	
                      	
                      	
                      	
                      	
                      	;*********************************************************
  1454                	TIMBTL:
  1454  3E32          	 LD A,50
  1456  1806          	 JR TIMER
  1458                	TIM30:
  1458  3E25          	 LD A,37
  145A  1802          	 JR TIMER
  145C                	TIM255:
  145C  3EFF          	 LD A,255
  145E                	TIMER:
  145E  010000        	 LD BC,0
  1461  03            	 INC BC;LOOP
  1462  000000000000  	 DB 0,0,0,0,0,0
  1468  A8            	 XOR B
  1469  C8            	 RET Z
  146A  18F5          	 JR TIMER+3
  146C                	RAND:;A
  146C  E5            	 PUSH HL
  146D  D5            	 push DE
  146E  210000        	 LD HL,0
  1471  54            	 LD D,H
  1472  5D            	 LD E,L
  1473  29            	 ADD HL,HL
  1474  29            	 ADD HL,HL
  1475  19            	 ADD HL,DE
  1476  11475D        	 LD DE,5D47H
  1479  19            	 ADD HL,DE
  147A  226F14        	 LD (RAND+3),HL
  147D  7C            	 LD A,H
  147E  D1            	 pop DE
  147F  E1            	 POP HL
  1480  C9            	 RET
  1481                	RAND4:
                      	; ld A,R
                      	; rra
                      	; rra
                      	; rra
                      	; and 11000000b
                      	; ret
  1481  CD6C14        	 CALL RAND
  1484  E6C0          	 AND 11000000b
  1486  C9            	 RET
  1487                	XSAN:
  1487  B7            	 OR A
  1488  C8            	 RET Z
  1489                	XSANL:
  1489  19            	 ADD HL,DE
  148A  3D            	 DEC A
  148B  20FC          	 JR NZ,XSANL
  148D  C9            	 RET
  148E                	NMEMRY:
  148E  0000000000    	 DB 0,0,0,0,0
  1493                	ASCN:;HL=l(2byte)DE
  1493  118E14        	 LD DE,NMEMRY
  1496  011027        	 LD BC,10000
  1499  CDCD14        	 CALL WARIS
  149C  01E803        	 LD BC,1000
  149F  CDCD14        	 CALL WARIS
  14A2  016400        	 LD BC,100
  14A5  CDCD14        	 CALL WARIS
  14A8  010A00        	 LD BC,10
  14AB  CDCD14        	 CALL WARIS
  14AE  7D            	 LD A,L
  14AF  12            	 LD (DE),A
  14B0  0605          	 LD B,5
  14B2  118E14        	 LD DE,NMEMRY
  14B5                	ASCL:
  14B5  1A            	 LD A,(DE)
  14B6  FE00          	 CP 0
  14B8  2802          	 JR Z,ASCL2
  14BA  1808          	 JR ASC2
  14BC                	ASCL2:
  14BC  13            	 INC DE
  14BD  10F6          	 DJNZ ASCL
  14BF  0601          	 LD B,1
  14C1  119214        	 LD DE,NMEMRY+4
  14C4                	ASC2:
  14C4  1A            	 LD A,(DE)
  14C5  0E30          	 LD C,30H
  14C7  81            	 ADD A,C
  14C8  12            	 LD (DE),A
  14C9  13            	 INC DE
  14CA  10F8          	 DJNZ ASC2
  14CC  C9            	 RET
  14CD                	WARIS:
  14CD  AF            	 XOR A
                      	;WARI1:
  14CE  ED42          	 SBC HL,BC
  14D0  3803          	 JR C,WARI2
  14D2  3C            	 INC A
  14D3  18F9          	 JR WARIS+1
  14D5                	WARI2:
  14D5  09            	 ADD HL,BC
  14D6  12            	 LD (DE),A
  14D7  13            	 INC DE		;
  14D8  C9            	 RET
  14D9                	cls:
  14D9  F5            	 push AF
  14DA  D5            	 push DE
  14DB  E5            	 push HL
  14DC  C5            	 push BC
  14DD  3E00          	 ld A,0
  14DF  21021B        	 ld HL,grapu_area
  14E2  11031B        	 ld DE,grapu_area+1
  14E5  77            	 ld (HL),A
  14E6  015F03        	 ld BC,144*6-1
  14E9  EDB0          	 ldir
  14EB  CD0D15        	 call grp_o
  14EE  C1            	 pop BC
  14EF  E1            	 pop HL
  14F0  D1            	 pop DE
  14F1  F1            	 pop AF
  14F2  C9            	 ret
                      	
  14F3                	bls:
  14F3  F5            	 push AF
  14F4  D5            	 push DE
  14F5  E5            	 push HL
  14F6  C5            	 push BC
  14F7  21021B        	 LD HL,grapu_area
  14FA  36FF          	 LD (HL),0FFH
  14FC  11031B        	 LD DE,grapu_area+1
  14FF  015F03        	 LD BC,863
  1502  EDB0          	 LDIR
  1504  CD0D15        	 CALL grp_o
  1507  D9            	 EXX
  1508  C1            	 pop BC
  1509  E1            	 pop HL
  150A  D1            	 pop DE
  150B  F1            	 pop AF
  150C  C9            	 RET
  150D                	grp_o:
  150D  3E06          	 ld A,6
  150F  110000        	 ld DE,0
  1512  21021B        	 ld HL,grapu_area
  1515                	grp_o_l:
  1515  D5            	 push DE
  1516  F5            	 push AF
  1517  0690          	 ld B,144
  1519  CDD0BF        	 call grp
  151C  23            	 inc HL
  151D  F1            	 pop AF
  151E  D1            	 pop DE
  151F  14            	 inc D
  1520  3D            	 dec A
  1521  20F2          	 jr nz,grp_o_l
  1523  C9            	 ret
                      	
  1524                	grp_open:
  1524  0E06          	 ld C,6
  1526                	grp_open_l
  1526  C5            	 push BC
  1527  D5            	 push DE
  1528  CDD0BF        	 call grp
  152B  D1            	 pop DE
  152C  14            	 inc D
  152D  23            	 inc HL
  152E  C1            	 pop BC
  152F  0D            	 dec C
  1530  20F4          	 jr nz,grp_open_l
  1532  C9            	 ret
                      	
  1533                	keysc:
  1533  F3            	 di
  1534  AF            	 xor A
  1535  D311          	 out (11h),A
  1537  3E08          	 ld A,08h
  1539  D311          	 out (11h),A
  153B  CDAD8A        	 call 8aadh
  153E  DB10          	 in A,(10h)
  1540  E6E0          	 and 0e0h
  1542  47            	 ld B,A
  1543  AF            	 xor A
  1544  D311          	 out (11h),A
  1546  3E10          	 ld A,10h
  1548  D311          	 out (11h),A
  154A  CDAD8A        	 call 8aadh
  154D  DB10          	 in A,(10h)
  154F  E60F          	 and 0fh
  1551  B0            	 or B
  1552  FB            	 ei
  1553  C9            	 ret
                      	
                      	
                      	
  1554                	charReput:;HL=obj_xy++
  1554                	charReput_x:
  1554  7E            	 ld A,(HL);x
  1555  4F            	 ld C,A
  1556  D61E          	 sub 30
  1558  CA7015        	 jp z,charReput_y
  155B                	charReput_x_lp:
  155B  D607          	 sub 7
  155D  CA7015        	 jp z,charReput_y
  1560  30F9          	 jr nc,charReput_x_lp
  1562  FEFD          	 cp 0fch+1;cy=-4~-6 left
  1564  3804          	 jr c,charReput_x_1
  1566  ED44          	 neg;(right+)
  1568  1804          	 jr charReput_x_2
  156A                	charReput_x_1:
  156A  C607          	 add A,7
  156C  ED44          	 neg;(left-)
  156E                	charReput_x_2:
  156E  81            	 add A,C
  156F  77            	 ld (HL),A
                      	
  1570                	charReput_y:
  1570  23            	 inc HL
  1571  7E            	 ld A,(HL)
  1572  2B            	 dec HL
  1573  4F            	 ld C,A
  1574  E63F          	 and 00111111b
  1576  C8            	 ret z
  1577                	charReput_y_lp:
  1577  D607          	 sub 7
  1579  C8            	 ret z
  157A  30FB          	 jr nc,charReput_y_lp
  157C  FEFD          	 cp 0fch+1;cy=-4~-6 up
  157E  3804          	 jr c,charReput_y_1
  1580  ED44          	 neg;(down+)
  1582  1804          	 jr charReput_y_2
  1584                	charReput_y_1:
  1584  C607          	 add A,7
  1586  ED44          	 neg;(up-)
  1588                	charReput_y_2:
  1588  81            	 add A,C
  1589  23            	 inc HL
  158A  77            	 ld (HL),A
  158B  2B            	 dec HL
  158C  C9            	 ret 
                      	
                      	
  158D                	cross_ck_s:;HL=obj_xy+
  158D  5E            	 ld E,(HL)
  158E  23            	 inc HL
  158F  56            	 ld D,(HL)
  1590  2B            	 dec HL
  1591  3A4255        	 ld A,(gil_xy+1)
  1594  E6C0          	 and 11000000b
  1596  CABF15        	 jp z,cross_ck_s_up
  1599  FE80          	 cp 80h
  159B  DADD15        	 jp c,cross_ck_s_right
  159E  CAFA15        	 jp z,cross_ck_s_down
  15A1                	cross_ck_s_left:
  15A1  3A4255        	 ld A,(gil_xy+1)
  15A4  E63F          	 and 3fh
  15A6  92            	 sub D	;x-x1
  15A7  FE03          	 cp 3
  15A9  3805          	 jr c,cross_ck_s_left_2
  15AB  2F            	 cpl
  15AC  3C            	 inc A
  15AD  FE03          	 cp 3
  15AF  D0            	 ret nc
  15B0                	cross_ck_s_left_2:
  15B0  3A4155        	 ld A,(gil_xy)
  15B3  93            	 sub E
  15B4  FE06          	 cp 6		;when (a-d)>0 is that empty at left.
  15B6  D8            	 ret c
  15B7  2F            	 cpl
  15B8  3C            	 inc A
  15B9  FE03          	 cp 3
  15BB  DA1714        	 jp c,gil_killing
  15BE  C9            	 ret
  15BF                	cross_ck_s_up:
  15BF  3A4155        	 ld A,(gil_xy)
  15C2  93            	 sub E	;x-x1
  15C3  FE03          	 cp 3
  15C5  3805          	 jr c,cross_ck_s_up_2
  15C7  2F            	 cpl
  15C8  3C            	 inc A
  15C9  FE03          	 cp 3
  15CB  D0            	 ret nc
  15CC                	cross_ck_s_up_2:
  15CC  3A4255        	 ld A,(gil_xy+1)
  15CF  E63F          	 and 3fh
  15D1  92            	 sub D
  15D2  FE03          	 cp 3		;when (a-d)>0 is that empty at up.
  15D4  D8            	 ret c
  15D5  2F            	 cpl
  15D6  3C            	 inc A
  15D7  FE03          	 cp 3
  15D9  DA1714        	 jp c,gil_killing
  15DC  C9            	 ret
  15DD                	cross_ck_s_right:
  15DD  3A4255        	 ld A,(gil_xy+1)
  15E0  E63F          	 and 3fh
  15E2  92            	 sub D	;x-x1
  15E3  FE03          	 cp 3
  15E5  3805          	 jr c,cross_ck_s_right_2
  15E7  2F            	 cpl
  15E8  3C            	 inc A
  15E9  FE03          	 cp 3
  15EB  C9            	 ret ;c or nc
  15EC                	cross_ck_s_right_2:
  15EC  3A4155        	 ld A,(gil_xy)
  15EF  93            	 sub E
  15F0  FE03          	 cp 3		;when (a-d)<0 is that empty at right.
  15F2  DA1714        	 jp c,gil_killing
  15F5  2F            	 cpl
  15F6  3C            	 inc A
  15F7  FE06          	 cp 6
  15F9  C9            	 ret ;c or nc
  15FA                	cross_ck_s_down:
  15FA  3A4155        	 ld A,(gil_xy)
  15FD  93            	 sub E	;x-x1
  15FE  FE03          	 cp 3
  1600  3805          	 jr c,cross_ck_s_down_2
  1602  2F            	 cpl
  1603  3C            	 inc A
  1604  FE03          	 cp 3
  1606  D0            	 ret nc
  1607                	cross_ck_s_down_2:
  1607  3A4255        	 ld A,(gil_xy+1)
  160A  E63F          	 and 3fh
  160C  92            	 sub D
  160D  FE03          	 cp 3		;when (a-d)<0 is that empty at down.
  160F  DA1714        	 jp c,gil_killing
  1612  D8            	 ret c
  1613  2F            	 cpl
  1614  3C            	 inc A
  1615  FE06          	 cp 6
  1617  C9            	 ret
                      	
                      	
  1618                	cross_ck_a:;HL=obj_xy+
  1618  5E            	 ld E,(HL);x
  1619  23            	 inc HL
  161A  7E            	 ld A,(HL)
  161B  2B            	 dec HL
  161C  E63F          	 and 3fh
  161E  57            	 ld D,A	;y
                      	; ld HL,(gil_xy)
  161F  3A4155        	 ld A,(gil_xy)
  1622  93            	 sub E	;x-x1
  1623  FE03          	 cp 3
  1625  3805          	 jr c,cross_ck_al
  1627  2F            	 cpl
  1628  3C            	 inc A
  1629  FE03          	 cp 3
  162B  D0            	 ret nc
  162C                	cross_ck_al:
  162C  3A4255        	 ld A,(gil_xy+1)
  162F  E63F          	 and 3fh
  1631  92            	 sub D
  1632  FE03          	 cp 3
  1634  D8            	 ret c
  1635  2F            	 cpl
  1636  3C            	 inc A
  1637  FE03          	 cp 3
  1639  C9            	 ret ;nc or cy
                      	;cy is crosses.
                      	
  163A                	cha_kill:;HL=obj_xy++,IX=obj_hp
  163A  E5            	 push HL
  163B  5E            	 ld E,(HL)
  163C  23            	 inc HL
  163D  56            	 ld D,(HL)
  163E  CD011A        	 call grp_del
  1641  210A22        	 ld HL,dammy
  1644  7E            	 ld A,(HL)
  1645  3C            	 inc A
  1646  77            	 ld (HL),A
  1647  E1            	 pop HL
  1648  AF            	 xor A
  1649  DD7700        	 ld (IX),A
  164C  C9            	 ret
                      	
                      	
  164D                	wall_ck:
  164D  E5            	 push HL
  164E  CD5316        	 call wall_cks
  1651  E1            	 pop HL
  1652  C9            	 ret
                      	
  1653                	wall_cks:;HL,obj_xy+;non zero=don't pass, zero=pass and A=0, cy=not block
  1653  E5            	 push HL
                      	;HL=(y,x)
  1654  5E            	 ld E,(HL);x
  1655  23            	 inc HL
  1656  56            	 ld D,(HL);y
  1657  2B            	 dec HL
  1658  EB            	 ex DE,HL
  1659  3E3F          	 ld A,00111111b
  165B  A4            	 and H
  165C  010000        	 ld BC,0
  165F  2808          	 jr z,wall_ck_lc
  1661                	wall_ck_lb:
  1661  04            	 inc B
  1662  D607          	 sub 7
  1664  DADD16        	 jp c,wall_ck_end
  1667  20F8          	 jr nz,wall_ck_lb
  1669                	wall_ck_lc:
  1669  7D            	 ld A,L
  166A  D61E          	 sub 30
  166C  2808          	 jr z,wall_ck_le
  166E                	wall_ck_ld:
  166E  0C            	 inc C
  166F  D607          	 sub 7
  1671  DADD16        	 jp c,wall_ck_end
  1674  20F8          	 jr nz,wall_ck_ld
  1676                	wall_ck_le:
  1676  7C            	 ld A,H
  1677  E6C0          	 and 11000000b
  1679  CAC716        	 jp z,wall_ck_lu
  167C  FE80          	 cp 80h
  167E  DAB016        	 jp c,wall_ck_lr
  1681  CA9A16        	 jp z,wall_ck_ldd
                      	
  1684                	wall_ck_ll:
  1684  21D018        	 ld HL,map_memry_left-17
                      	;x+C
  1687  59            	 ld E,C
  1688  1600          	 ld D,0
  168A  19            	 add HL,DE
                      	;y+17*B
  168B  111100        	 ld DE,17
  168E  04            	 inc B
  168F                	wall_ck_ll_2:
  168F  19            	 add HL,DE
  1690  10FD          	 djnz wall_ck_ll_2
                      	; or A
                      	; sbc HL,DE
  1692  222C17        	 ld (block_pointaP+1),HL
  1695  7E            	 ld A,(HL)
  1696  E680          	 and t;t(80h) or f(0)
  1698  E1            	 pop HL
                      	
                      	; ld A,"l"
                      	; ld DE,0
                      	; call 0be62h
                      	; pop HL
                      	
  1699  C9            	 ret
                      	
                      	
  169A                	wall_ck_ldd:
  169A  215118        	 ld HL,map_memry_top-16
                      	;x+C
  169D  59            	 ld E,C
  169E  1600          	 ld D,0
  16A0  19            	 add HL,DE
                      	;y+16*B
  16A1  111000        	 ld DE,16
  16A4  04            	 inc B
  16A5                	wall_ck_ld2:
  16A5  19            	 add HL,DE
  16A6  10FD          	 djnz wall_ck_ld2
                      	; sub HL,DE
  16A8  222C17        	 ld (block_pointaP+1),HL
  16AB  7E            	 ld A,(HL)
  16AC  E680          	 and t;t(80h) or f(0)
  16AE  E1            	 pop HL
                      	
                      	; ld A,"d"
                      	; ld DE,0
                      	; call 0be62h
                      	; pop HL
                      	
  16AF  C9            	 ret
                      	
                      	
  16B0                	wall_ck_lr:
  16B0  21D018        	 ld HL,map_memry_left-17
                      	;x+C
  16B3  59            	 ld E,C
  16B4  1600          	 ld D,0
  16B6  19            	 add HL,DE
  16B7  23            	 inc HL
                      	;y+17*B
  16B8  111100        	 ld DE,17
  16BB  04            	 inc B
  16BC                	wall_ck_lr_2:
  16BC  19            	 add HL,DE
  16BD  10FD          	 djnz wall_ck_lr_2
                      	; or A
                      	; sbc HL,DE
  16BF  222C17        	 ld (block_pointaP+1),HL
  16C2  7E            	 ld A,(HL)
  16C3  E680          	 and t;t(80h) or f(0)
  16C5  E1            	 pop HL
                      	
                      	; ld A,"r"
                      	; ld DE,0
                      	; call 0be62h
                      	; pop HL
                      	
  16C6  C9            	 ret
                      	
                      	
                      	
                      	
  16C7                	wall_ck_lu:
  16C7  214118        	 ld HL,map_memry_top-16-16
                      	;x+C
  16CA  59            	 ld E,C
  16CB  1600          	 ld D,0
  16CD  19            	 add HL,DE
                      	;y+16*B
  16CE  111000        	 ld DE,16
  16D1  04            	 inc B
  16D2                	wall_ck_lu2:
  16D2  19            	 add HL,DE
  16D3  10FD          	 djnz wall_ck_lu2
                      	; or A
                      	; sbc HL,DE
  16D5  222C17        	 ld (block_pointaP+1),HL
  16D8  7E            	 ld A,(HL)
  16D9  E680          	 and t;t(80h) or f(0)
  16DB  E1            	 pop HL
                      	
                      	; ld A,"u"
                      	; ld DE,0
                      	; call 0be62h
                      	; pop HL
                      	
  16DC  C9            	 ret
  16DD                	wall_ck_end:
  16DD  E1            	 pop HL
  16DE  AF            	 xor A
  16DF  C9            	 ret
                      	
                      	
                      	;******************************wall mod block**************************
                      	;********************wall mod****HL=obj_xy************************
  16E0                	wall_mod:
  16E0  010000        	 ld BC,0
  16E3  7E            	 ld A,(HL) 
  16E4  5F            	 ld E,A
  16E5  23            	 inc HL
  16E6  7E            	 ld A,(HL)
  16E7  E63F          	 and 00111111b
  16E9  57            	 ld D,A
  16EA  2B            	 dec HL
                      	 
  16EB  7B            	 ld A,E
  16EC  D61E          	 sub 30
  16EE  2807          	 jr z,wall_mod_l2
  16F0                	wall_mod_l1:
  16F0  D607          	 sub 7
  16F2  2803          	 jr z,wall_mod_l2
  16F4  30FA          	 jr nc,wall_mod_l1
  16F6  4F            	 ld C,A
                      	
  16F7                	wall_mod_l2
  16F7  7A            	 ld A,D
  16F8  B7            	 or A
  16F9  2807          	 jr z,wall_mod_l4
  16FB                	wall_mod_l3:
  16FB  D607          	 sub 7
  16FD  2803          	 jr z,wall_mod_l4
  16FF  30FA          	 jr nc,wall_mod_l3
  1701  47            	 ld B,A
  1702                	wall_mod_l4
                      	; ld A,E
                      	; ld (0f0h),A
                      	; ld A,D
                      	; ld (0f1h),A
                      	; ld A,C
                      	; ld (0f4h),A
                      	; ld A,B
                      	; ld (0f5h),A
  1702  C9            	 ret
                      	 
                      	 
                      	 
                      	;*************************************matk action******************************
                      	
  1703                	matk_action_gil:
                      	
  1703  214155        	 ld HL,gil_xy
  1706  CD4D16        	 call wall_ck
  1709  C8            	 ret z
                      	
  170A  213A55        	 ld HL,gil_matk_count
  170D  5E            	 ld E,(HL)
  170E  1C            	 inc E
  170F  1D            	 dec E
  1710  C8            	 ret z
  1711  1D            	 dec E
  1712  73            	 ld (HL),E
  1713  F5            	 push AF
  1714  CC6117        	 call z,gil_matk_break 
  1717  F1            	 pop AF
                      	
  1718  214155        	 ld HL,gil_xy
  171B                	matk_action:;HL=obj address+ let push pop
  171B  08            	 ex AF,AF'
  171C  326C17        	 ld (matk_action_gil_ret+1),A
  171F  223617        	 ld (matk_action_HLP+1),HL
  1722  CD4D16        	 call wall_ck
  1725  DA6B17        	 jp c,matk_action_gil_ret
  1728  CA6B17        	 jp z,matk_action_gil_ret
  172B                	block_pointaP:
  172B  210000        	 ld HL,overwrite		;block address
  172E  4E            	 ld C,(HL)
  172F  0C            	 inc C
  1730  CA6117        	 jp z,gil_matk_break 
  1733  3600          	 ld (HL),0
                      	 
                      	; call bls
                      	
  1735                	matk_action_HLP:
  1735  210000        	 ld HL,overwrite
  1738  226E17        	 ld (matk_action_gil_ret+3),HL
                      	
  173B  5E            	 ld E,(HL)
  173C  23            	 inc HL
  173D  56            	 ld D,(HL)
  173E  7A            	 ld A,D
  173F  E6C0          	 and 11000000b
  1741  2818          	 jr z,matk_action_u
  1743  FE80          	 cp 80h
  1745  380E          	 jr c,matk_action_r
  1747  2806          	 jr z,matk_action_d
  1749                	matk_action_l:
  1749  1D            	 dec E
  174A  CD011A        	 call grp_del
  174D  181C          	 jr matk_action_gil_ret
  174F                	matk_action_d:
  174F  14            	 inc D
  1750  CD011A        	 call grp_del
  1753  1816          	 jr matk_action_gil_ret
  1755                	matk_action_r:
  1755  1C            	 inc E
  1756  CD011A        	 call grp_del
  1759  1810          	 jr matk_action_gil_ret
  175B                	matk_action_u:
  175B  15            	 dec D
  175C  CD011A        	 call grp_del
  175F  180A          	 jr matk_action_gil_ret
                      	
  1761                	gil_matk_break:
  1761  DD7ED0        	 ld A,(IX-48)
  1764  FE8F          	 cp 8fh
  1766  2003          	 jr nz,matk_action_gil_ret
  1768  CD7217        	 call matklost
  176B                	matk_action_gil_ret:
  176B  3E00          	 ld A,overwrite
  176D  210000        	 ld HL,overwrite
  1770  08            	 ex AF,AF'
  1771  C9            	 ret
                      	 
                      	 
                      	
  1772                	matklost:
  1772  AF            	 xor A
  1773  323A55        	 ld (gil_matk_count),A
  1776  324555        	 ld (matk),A
  1779  AF            	 xor A
  177A  324555        	 ld (matk),A
  177D  110007        	 ld DE,0700h
  1780  CD011A        	 call grp_del
  1783  3E01          	 ld A,1
  1785  320C22        	 ld (dammy+2),A
  1788  C9            	 ret
                      	
                      	
  1789                	Map_make:
  1789  CDD914        	 call cls
  178C  219023        	 ld HL,Map_data
  178F  3AAD53        	 ld A,(floor)
  1792  3D            	 dec A
  1793  11C900        	 ld DE,96+105
  1796  CD8714        	 call xsan
  1799  116118        	 ld DE,map_memry_top
  179C  016000        	 ld BC,96
  179F  EDB0          	 ldir
  17A1  11E118        	 ld DE,map_memry_left
  17A4  3E07          	 ld A,7
  17A6  13            	 inc DE
  17A7                	map_make_l:
  17A7  F5            	 push AF
  17A8  010F00        	 ld BC,15
  17AB  EDB0          	 ldir
  17AD  13            	 inc DE
  17AE  13            	 inc DE
  17AF  F1            	 pop AF
  17B0  3D            	 dec A
  17B1  20F4          	 jr nz,map_make_l
  17B3  111E06        	 ld DE,061eh
  17B6  DD216118      	 ld IX,map_memry_top
  17BA  FD21E118      	 ld IY,map_memry_left
                      	
  17BE                	map_make_l_l:
  17BE  DD7E00        	 ld A,(IX)
  17C1  E680          	 and t
  17C3  2808          	 jr z,map_make_Xe
  17C5  D5            	 push DE
  17C6  216919        	 ld HL,graph_wall+0
  17C9  CD7519        	 call grp_set
  17CC  D1            	 pop DE
  17CD                	map_make_Xe:
  17CD  DD23          	 inc IX
                      	
  17CF  FD7E00        	 ld A,(IY)
  17D2  E680          	 and t
  17D4  280F          	 jr z,map_make_Ye
  17D6  D5            	 push DE
  17D7  216F19        	 ld HL,graph_wall+6
  17DA  15            	 dec D
  17DB  15            	 dec D
  17DC  15            	 dec D
  17DD  15            	 dec D
  17DE  15            	 dec D
  17DF  15            	 dec D
  17E0  1D            	 dec E
  17E1  CD7519        	 call grp_set
  17E4  D1            	 pop DE
  17E5                	map_make_Ye:
  17E5  FD23          	 inc IY
                      	
  17E7  3E07          	 ld A,7
  17E9  83            	 add A,E
  17EA  5F            	 ld E,A
  17EB  FE8E          	 cp 142
  17ED  C2BE17        	 jp nz,map_make_l_l
                      	 
  17F0  3E07          	 ld A,7
  17F2  82            	 add A,D
  17F3  57            	 ld D,A
  17F4  FE37          	 cp 55
  17F6  2807          	 jr z,map_make_end
  17F8  1E1E          	 ld E,1eh
  17FA  FD23          	 inc IY
  17FC  C3BE17        	 jp map_make_l_l
  17FF                	map_make_end:
                      	;**********************left right wall***********************
  17FF  0E02          	 ld c,2
  1801  3E1B          	 ld A,27
  1803  320B18        	 ld (Stating_before_mkwall1+1),A
  1806                	Stating_before_mkwall2
  1806  1600          	 ld D,0
  1808  0606          	 ld B,6
  180A                	Stating_before_mkwall1:
  180A  1E00          	 ld E,overwrite
  180C  C5            	 push BC
  180D  D5            	 push DE
  180E  217A04        	 ld HL,wall_grp
  1811  0603          	 ld B,3
  1813  CD7719        	 call grp_set+2
  1816  D1            	 pop DE
  1817  C1            	 pop BC
  1818  3E08          	 ld A,8
  181A  82            	 add A,D
  181B  57            	 ld D,A
  181C  10EC          	 djnz Stating_before_mkwall1
  181E  3E8D          	 ld A,141
  1820  320B18        	 ld (Stating_before_mkwall1+1),A
  1823  0D            	 dec C
  1824  20E0          	 jr nz,Stating_before_mkwall2
                      	
                      	;**************************wall dot set***********************
                      	
  1826  0E0F          	 ld c,15
  1828  3E24          	 ld A,36
  182A  323218        	 ld (Stating_before_mkwall11+1),A
  182D                	Stating_before_mkwall21
  182D  1606          	 ld D,6
  182F  0606          	 ld B,6
  1831                	Stating_before_mkwall11:
  1831  1E00          	 ld E,overwrite
  1833  C5            	 push BC
  1834  D5            	 push DE
  1835  217D04        	 ld HL,pole_grp
  1838  0601          	 ld B,1
  183A  CD7719        	 call grp_set+2
  183D  D1            	 pop DE
  183E  C1            	 pop BC
  183F  3E07          	 ld A,7
  1841  82            	 add A,D
  1842  57            	 ld D,A
  1843  10EC          	 djnz Stating_before_mkwall11
  1845  3A3218        	 ld A,(Stating_before_mkwall11+1)
  1848  C607          	 add A,7
  184A  323218        	 ld (Stating_before_mkwall11+1),A
  184D  0D            	 dec C
  184E  20DD          	 jr nz,Stating_before_mkwall21
  1850  C9            	 ret
                      	
                      	
                      	
                      	
  1851  FFFFFFFFFFFFFF	 db 0ffh,0ffh,0ffh,0ffh,0ffh,0ffh,0ffh,0ffh,0ffh,0ffh,0ffh,0ffh,0ffh,0ffh,0ffh,0ffh;16
  1861                	map_memry_top:;1(ture or false)0000000(loop count,7fh=Outer wall)b
  1861                	 ds 16
  1871                	 ds 16
  1881                	 ds 16
  1891                	 ds 16
  18A1                	 ds 16
  18B1                	 ds 16
  18C1  FFFFFFFFFFFFFF	 db 0ffh,0ffh,0ffh,0ffh,0ffh,0ffh,0ffh,0ffh,0ffh,0ffh,0ffh,0ffh,0ffh,0ffh,0ffh,0ffh;16
  18D1  FFFFFFFFFFFFFF	 db 0ffh,0ffh,0ffh,0ffh,0ffh,0ffh,0ffh,0ffh,0ffh,0ffh,0ffh,0ffh,0ffh,0ffh,0ffh,0ffh;16
                      	
                      	
                      	
  18E1                	map_memry_left:;1(ture or false)0000000(loop count,7fh=Outer wall)b
  18E1  FF            	 db 0ffh
  18E2                	 ds 15
  18F1  FF            	 db 0ffh
  18F2  FF            	 db 0ffh
  18F3                	 ds 15
  1902  FF            	 db 0ffh
  1903  FF            	 db 0ffh
  1904                	 ds 15
  1913  FF            	 db 0ffh
  1914  FF            	 db 0ffh
  1915                	 ds 15
  1924  FF            	 db 0ffh
  1925  FF            	 db 0ffh
  1926                	 ds 15
  1935  FF            	 db 0ffh
  1936  FF            	 db 0ffh
  1937                	 ds 15
  1946  FF            	 db 0ffh
  1947  FF            	 db 0ffh
  1948                	 ds 15
  1957  FF            	 db 0ffh
  1958  FF            	 db 0ffh
                      	 
  1959                	 ds 15
  1968  FF            	 db 0ffh
  1969                	graph_wall:
  1969  010101010101  	 db 1,1,1,1,1,1
  196F  3F0000000000  	 db 3fh,0,0,0,0,0
                      	
                      	
                      	
  1975                	grp_set:;HL_data,DE_(y,x),B_databit
  1975  0606          	 ld B,6
                      	;
                      	
  1977  7A            	 ld A,D
  1978  E6C0          	 and 11000000b
  197A  281F          	 jr z,grp_set_0
  197C  FE80          	 cp 80h
  197E  3814          	 jr c,grp_set_1
  1980  2809          	 jr z,grp_set_2
                      	;left
  1982  3E12          	 ld A,18
  1984  85            	 add A,L
  1985  6F            	 ld L,A
  1986  3013          	 jr nc,grp_set_0
  1988  24            	 inc H
  1989  1810          	 jr grp_set_0
                      	;dowm
  198B                	grp_set_2:
  198B  3E0C          	 ld A,12
  198D  85            	 add A,L
  198E  6F            	 ld L,A
  198F  300A          	 jr nc,grp_set_0
  1991  24            	 inc H
  1992  1807          	 jr grp_set_0
                      	;right
  1994                	grp_set_1:
  1994  3E06          	 ld A,6
  1996  85            	 add A,L
  1997  6F            	 ld L,A
  1998  3001          	 jr nc,grp_set_0
  199A  24            	 inc H
                      	
                      	;up,non direction
  199B                	grp_set_0:
  199B  7B            	 ld A,E
  199C  32C219        	 ld (grp_set_or1+1),A
  199F  7A            	 ld A,D
  19A0  E63F          	 and 3fh
  19A2  1600          	 ld D,0
  19A4                	grp_set_set1:
  19A4  14            	 inc D
  19A5  D608          	 sub 8
  19A7  30FB          	 jr nc,grp_set_set1
  19A9  15            	 dec D
  19AA  C608          	 add A,8
  19AC                	grp_set_set2:
  19AC  32CB19        	 ld (grp_set_shiftd_bit+1),A
  19AF  4F            	 ld C,A
  19B0  3E08          	 ld A,8
  19B2  91            	 sub C
  19B3  32F119        	 ld (grp_set_shiftu_bit+1),A
                      	
  19B6                	grp_set_shiftd:
  19B6  7A            	 ld A,D			;line number
  19B7  E5            	 push HL					;HL
  19B8  21021B        	 ld HL,grapu_area
  19BB  119000        	 ld DE,144
  19BE  CD8714        	 call xsan		;y+
  19C1                	grp_set_or1:
  19C1  1E00          	 ld E,overwrite
  19C3  1600          	 ld D,0
  19C5  19            	 add HL,DE		;x+
  19C6  EB            	 ex DE,HL
  19C7  E1            	 pop HL			;data
  19C8  E5            	 push HL					;HL
  19C9  C5            	 push BC						;BC
  19CA                	grp_set_shiftd_bit:
  19CA  0E00          	 ld C,overwrite		;shift bit count
  19CC  7E            	 ld A,(HL)
  19CD  08            	 ex AF,AF'
  19CE  79            	 ld A,C
  19CF  B7            	 or A
  19D0  2807          	 jr z,grp_set_shiftd_bit_2
  19D2  08            	 ex AF,AF'
  19D3                	grp_set_shiftd_bit_l:
  19D3  CB27          	 sla A
  19D5  0D            	 dec C
  19D6  20FB          	 jr nz,grp_set_shiftd_bit_l
  19D8  08            	 ex AF,AF'
  19D9                	grp_set_shiftd_bit_2:
  19D9  08            	 ex AF,AF'
  19DA  4F            	 ld C,A
  19DB  1A            	 ld A,(DE)
  19DC                	grp_set_change1:
  19DC  B1            	 or C
  19DD  12            	 ld (DE),A
  19DE                	grp_set_shiftd_l:
  19DE  23            	 inc HL
  19DF  13            	 inc DE
  19E0  10E8          	 djnz grp_set_shiftd_bit
                      	
                      	; dec DE
                      	
  19E2  EB            	 ex DE,HL
  19E3  119000        	 ld DE,144
  19E6  19            	 add HL,DE
                      	
                      	
  19E7  C1            	 pop BC						;HL
  19E8  7D            	 ld A,L
  19E9  90            	 sub B
  19EA  3001          	 jr nc,grp_set_shiftu_bit_b
  19EC  25            	 dec H
  19ED                	grp_set_shiftu_bit_b:
  19ED  6F            	 ld L,A
  19EE  EB            	 ex DE,HL
                      	
  19EF  E1            	 pop HL			;data2
  19F0                	grp_set_shiftu_bit:
  19F0  0E00          	 ld C,overwrite		;shift bit count
  19F2  7E            	 ld A,(HL)
  19F3                	grp_set_shiftu_bit_l
  19F3  CB3F          	 srl A
  19F5  0D            	 dec C
  19F6  20FB          	 jr nz,grp_set_shiftu_bit_l
  19F8  4F            	 ld C,A
  19F9  1A            	 ld A,(DE)
  19FA                	grp_set_change2:
  19FA  B1            	 or C
  19FB  12            	 ld (DE),A
  19FC                	grp_set_shiftu_l:
  19FC  23            	 inc HL
  19FD  13            	 inc DE
  19FE  10F0          	 djnz grp_set_shiftu_bit
                      	
                      	; call grp_o;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
  1A00  C9            	 ret
                      	
                      	
                      	
                      	
                      	
                      	
                      	
                      	
                      	
  1A01                	grp_del:;HL_data,DE_(y,x),B_databit
  1A01  216C1A        	 ld HL,del_graph
  1A04  0606          	 ld B,6
  1A06  7B            	 ld A,E
  1A07  322D1A        	 ld (grp_set_or1d+1),A
  1A0A  7A            	 ld A,D
  1A0B  E63F          	 and 3fh
  1A0D  1600          	 ld D,0
  1A0F                	grp_set_set1d:
  1A0F  14            	 inc D
  1A10  D608          	 sub 8
  1A12  30FB          	 jr nc,grp_set_set1d
  1A14  15            	 dec D
  1A15  C608          	 add A,8
  1A17                	grp_set_set2d:
  1A17  32361A        	 ld (grp_set_shiftd_bitd+1),A
  1A1A  4F            	 ld C,A
  1A1B  3E08          	 ld A,8
  1A1D  91            	 sub C
  1A1E  325C1A        	 ld (grp_set_shiftu_bitd+1),A
                      	
  1A21                	grp_set_shiftdd:
  1A21  7A            	 ld A,D			;line number
  1A22  E5            	 push HL					;HL
  1A23  21021B        	 ld HL,grapu_area
  1A26  119000        	 ld DE,144
  1A29  CD8714        	 call xsan		;y+
  1A2C                	grp_set_or1d:
  1A2C  1E00          	 ld E,overwrite
  1A2E  1600          	 ld D,0
  1A30  19            	 add HL,DE		;x+
  1A31  EB            	 ex DE,HL
  1A32  E1            	 pop HL			;data
  1A33  E5            	 push HL					;HL
  1A34  C5            	 push BC						;BC
  1A35                	grp_set_shiftd_bitd:
  1A35  0E00          	 ld C,overwrite		;shift bit count
  1A37  7E            	 ld A,(HL)
  1A38  08            	 ex AF,AF'
  1A39  79            	 ld A,C
  1A3A  B7            	 or A
  1A3B  2807          	 jr z,grp_set_shiftd_bit_2d
  1A3D  08            	 ex AF,AF'
  1A3E                	grp_set_shiftd_bit_ld:
  1A3E  37            	 scf
  1A3F  17            	 rla
  1A40  0D            	 dec C
  1A41  20FB          	 jr nz,grp_set_shiftd_bit_ld
  1A43  08            	 ex AF,AF'
  1A44                	grp_set_shiftd_bit_2d:
  1A44  08            	 ex AF,AF'
  1A45  4F            	 ld C,A
  1A46  1A            	 ld A,(DE)
  1A47                	grp_set_change1d:
  1A47  A1            	 and C
  1A48  12            	 ld (DE),A
  1A49                	grp_set_shiftd_ld:
  1A49  23            	 inc HL
  1A4A  13            	 inc DE
  1A4B  10E8          	 djnz grp_set_shiftd_bitd
                      	
                      	; dec DE
                      	
  1A4D  EB            	 ex DE,HL
  1A4E  119000        	 ld DE,144
  1A51  19            	 add HL,DE
                      	
                      	
  1A52  C1            	 pop BC						;HL
  1A53  7D            	 ld A,L
  1A54  90            	 sub B
  1A55  3001          	 jr nc,grp_set_shiftu_bit_bd
  1A57  25            	 dec H
  1A58                	grp_set_shiftu_bit_bd:
  1A58  6F            	 ld L,A
  1A59  EB            	 ex DE,HL
                      	
  1A5A  E1            	 pop HL			;data2
  1A5B                	grp_set_shiftu_bitd:
  1A5B  0E00          	 ld C,overwrite		;shift bit count
  1A5D  7E            	 ld A,(HL)
  1A5E                	grp_set_shiftu_bit_ld
  1A5E  37            	 scf
  1A5F  1F            	 rra
  1A60  0D            	 dec C
  1A61  20FB          	 jr nz,grp_set_shiftu_bit_ld
  1A63  4F            	 ld C,A
  1A64  1A            	 ld A,(DE)
  1A65                	grp_set_change2d:
  1A65  A1            	 and C
  1A66  12            	 ld (DE),A
  1A67                	grp_set_shiftu_ld:
  1A67  23            	 inc HL
  1A68  13            	 inc DE
  1A69  10F0          	 djnz grp_set_shiftu_bitd
  1A6B  C9            	 ret
                      	
  1A6C                	del_graph:
  1A6C  C0C0C0C0C0C0  	 db 0c0h,0c0h,0c0h,0c0h,0c0h,0c0h
                      	
                      	
                      	; ds 144
                      	; ds 144
                      	
  1A72                	 ds 144
  1B02                	grapu_area:
  1B02                	 ds 144*6
  1E62                	 ds 144
                      	 
                      	; ds 144
                      	; ds 144
                      	;********************************Graphics**********************************
  1EF2                	graph_title:
  1EF2  00000000000000	 db 00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,80h,60h,80h,00,00,0C0h,30h,0Ch,08h,30h,0C0h,0C0h,30h,08h,10h,0E0h,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00
  1F24  00000000000000	 db 00,00,00,00,00,00,00,00,00,80h,0C0h,00,00,80h,60h,10h,18h,06h,01h,00h,01h,0Eh,03h,00,00,00,00,00,00,01,00,00,00,03,0Ch,30h,40h,080h,00,80h,0E0h,00,00,00,00,00,00,00,00,00
  1F56  000000000000C0	 db 00,00,00,00,00,00,0C0h,30h,0Eh,01h,4Fh,66h,0F1h,0E0h,0F0h,58h,58h,40h,20h,80h,0E0h,0F8h,80h,0F0h,0C0h,0E0h,0F0h,0D8h,68h,0A9h,0C3h,42h,82h,86h,84h,0Ch,18h,79h,0F6h,0E1h,0C1h,86h,38h,0C0h,00,00,00,00,00,00
  1F88  00804020180601	 db 00,80h,40h,20h,18h,06h,01h,00,00,00,00,0Fh,3Fh,7Fh,0FEh,0F8h,0F8h,0F0h,0FEh,0FFh,0FFh,0FFh,0FFh,0FFh,0FFh,0FFh,0FFh,0FFh,0FFh,0FFh,0FFh,0FFh,0FFh,7Eh,7Eh,7Dh,7Dh,78h,7Dh,3Fh,1Fh,0Fh,00,00,03h,0Ch,70h,80h,00,00
  1FBA  00FF0000000000	 db 00,0FFh,00,00,00,00,00,00,00,0F8h,08,08,0F0h,00,0FCh,02Eh,06Fh,0D7h,07,7Fh,80h,00,0F8h,00,0F0h,50h,4Ch,4Eh,0FFh,07,0F7h,0Fh,4Eh,4Ch,0D4h,00,0F0h,50h,48h,48h,0F8h,00,00,00,00,00,00,0Fh,30h,0C0h
  1FEC  78474040404044	 db 78h,47h,40h,40h,40h,40h,44h,44h,44h,45h,45h,45h,44h,44h,45h,44h,44h,45h,44h,44h,45h,45h,45h,44h,45h,44h,44h,44h,45h,44h,44h,45h,45h,45h,45h,44h,45h,44h,44h,44h,45h,44h,44h,44h,40h,40h,40h,40h,40h,7Fh
                      	
                      	;***********************gil graph***************************
                      	
  201E                	graph_gil_ulf:
  201E  000C3F1F0C00  	 db 00,0Ch,3Fh,1Fh,0Ch,00
  2024                	graph_gil_rlf:
  2024  00003F3F0C00  	 db 00,00,3Fh,3Fh,0Ch,00
  202A                	graph_gil_dlf:
  202A  000C1F370C00  	 db 00,0Ch,1Fh,37h,0Ch,00
  2030                	graph_gil_llf:
  2030  000C3F3F0000  	 db 00,0Ch,3Fh,3Fh,00,00
                      	
  2036                	graph_gil_urf:
  2036  000C1F3F0C00  	 db 00,0Ch,1Fh,3Fh,0Ch,00
  203C                	graph_gil_rrf:
  203C  00201F1F2C00  	 db 00,20h,1Fh,1Fh,2Ch,00
  2042                	graph_gil_drf:
  2042  000C3F170C00  	 db 00,0Ch,3Fh,17h,0Ch,00
  2048                	graph_gil_lrf:
  2048  002C1F1F2000  	 db 00,2Ch,1Fh,1Fh,20h,00
                      	
  204E                	graph_gilsw_ulf:
  204E  000C3F1F0C08  	 db 00,0Ch,3Fh,1Fh,0Ch,08
  2054  080C3F3F0C00  	 db 08h,0Ch,3Fh,3Fh,0Ch,00
  205A  080C1F370C00  	 db 08,0Ch,1Fh,37h,0Ch,00
  2060  000C3F3F0C08  	 db 00,0Ch,3Fh,3Fh,0Ch,08
                      	;graph_gilsw_urf:
  2066  000C1F3F0C08  	 db 00,0Ch,1Fh,3Fh,0Ch,08
  206C  082C1F1F2C00  	 db 08,2Ch,1Fh,1Fh,2Ch,00
  2072  080C3F170C00  	 db 08,0Ch,3Fh,17h,0Ch,00
  2078  002C1F1F2C08  	 db 00,2Ch,1Fh,1Fh,2Ch,08
                      	
  207E                	graph_gilsword_ulf:
  207E  1E0C3F1F0407  	 db 1Eh,0Ch,3Fh,1Fh,04h,07h
  2084  000E3F3F0808  	 db 00,0Eh,3Fh,3Fh,08,08
  208A  38041F3F0C1E  	 db 38h,04h,1Fh,3Fh,0Ch,1Eh
  2090  08083F3F0E00  	 db 08,08,3Fh,3Fh,0Eh,00
                      	;graph_gilsword_ulf:
  2096  1E0C1F3F0407  	 db 1Eh,0Ch,1Fh,3Fh,04,07
  209C  002E1F1F2808  	 db 00,2Eh,1Fh,1Fh,28h,08
  20A2  38043F1F0C1E  	 db 38h,04h,3Fh,1Fh,0Ch,1Eh
  20A8  08281F1F2E00  	 db 08,28h,1Fh,1Fh,2Eh,00
                      	
                      	;********************enemy graph*************************
                      	
  20AE                	graph_sraimd:
  20AE  00181C1C1800  	 db 00,18h,1Ch,1Ch,18h,00
  20B4                	graph_sraimu:
  20B4  00181C1C1800  	 db 00,18h,1Ch,1Ch,18h,00
  20BA                	graph_sraimd1:
  20BA  000C1A1E0C00  	 db 00,0Ch,1Ah,1Eh,0Ch,00
  20C0                	graph_sraimu2:
  20C0  000C1A1E0C00  	 db 00,0Ch,1Ah,1Eh,0Ch,00
                      	
  20C6                	magic:
  20C6  032E3F3F2E03  	 db 03,2Eh,3Fh,3Fh,2Eh,03
  20CC                	magicr:
  20CC  00203F3F2E18  	 db 00,20h,3Fh,3Fh,2Eh,18h
  20D2                	magic3:
  20D2  182E3F3F2E18  	 db 18h,2Eh,3Fh,3Fh,2Eh,18h
  20D8                	magic4:
  20D8  182E3F3F2000  	 db 18h,2Eh,3Fh,3Fh,20h,00
                      	 
  20DE                	graph_goast:
  20DE  030E1F1F0E03  	 db 03,0Eh,1Fh,1Fh,0Eh,03
  20E4  10181E1F0F1A  	 db 10h,18h,1Eh,1Fh,0Fh,1Ah
  20EA  180E1F1F0E18  	 db 18h,0Eh,1Fh,1Fh,0Eh,18h
  20F0  1A0F1F1E1810  	 db 1Ah,0Fh,1Fh,1Eh,18h,10h
                      	 
  20F6                	graph_spell:
  20F6  000018180000  	 db 00,00,18h,18h,00,00
  20FC  000018180000  	 db 00,00,18h,18h,00,00
  2102  000018180000  	 db 00,00,18h,18h,00,00
  2108  000018180000  	 db 00,00,18h,18h,00,00
                      	 
                      	
  210E                	graph_n_knightu:;r foot
  210E  000C1F3F0407  	 db 00,0Ch,1Fh,3Fh,04,07
  2114                	graph_n_knightr:
  2114  00201F1F2808  	 db 00,20h,1Fh,1Fh,28h,08
  211A                	graph_n_knightd:
  211A  38043F1F0C00  	 db 38h,04h,3Fh,1Fh,0Ch,00
  2120                	graph_n_knightl:
  2120  08281F1F2000  	 db 08,28h,1Fh,1Fh,20h,00
                      	 
                      	;graph_n_knightu:;l foot
  2126  000C3F1F0407  	 db 00,0Ch,3Fh,1Fh,04h,07h
                      	;graph_n_knightr:
  212C  00003F3F0808  	 db 00,00,3Fh,3Fh,08h,08
                      	;graph_n_knightd:
  2132  38041F3F0C00  	 db 38h,04h,1Fh,3Fh,0Ch,00
                      	;graph_n_knightl:
  2138  08083F3F0000  	 db 08,08,3Fh,3Fh,00,00
                      	
  213E                	graph_quox_ulf:
  213E  063E3F1F1E06  	 db 06,3Eh,3Fh,1Fh,1Eh,06
  2144  0E3D3C3C3A0E  	 db 0Eh,3Dh,3Ch,3Ch,3Ah,0Eh
  214A  061E1B373E06  	 db 06,1Eh,1Bh,37h,3Eh,06
  2150  0E3A3C3C3D0E  	 db 0Eh,3Ah,3Ch,3Ch,3Dh,0Eh
                      	 
  2156  061E1F3F3E06  	 db 06,1Eh,1Fh,3Fh,3Eh,06
  215C  2E3D1C1C3A2E  	 db 2Eh,3Dh,1Ch,1Ch,3Ah,2Eh
  2162  063E3B171E06  	 db 06,3Eh,3Bh,17h,1Eh,06h
  2168  2E3A1C1C3D2E  	 db 2Eh,3Ah,1Ch,1Ch,3Dh,2Eh
                      	
  216E                	graph_druaga_ulf:
  216E  082D1E1E0D08  	 db 08,2Dh,1Eh,1Eh,0Dh,08
  2174  241C1E1B1C2C  	 db 24h,1Ch,1Eh,1Bh,1Ch,2Ch
  217A  080D1A162D08  	 db 08,0Dh,1Ah,16h,2Dh,08
  2180  2C1C1B1E1C24  	 db 2Ch,1Ch,1Bh,1Eh,1Ch,24h
                      	 
  2186  080D1E1E2D08  	 db 08,0Dh,1Eh,1Eh,2Dh,08
  218C  043C1E1B3C0C  	 db 04,3Ch,1Eh,1Bh,3Ch,0Ch
  2192  082D1A160D08  	 db 08,2Dh,1Ah,16h,0Dh,08h
  2198  0C3C1B1E3C04  	 db 0Ch,3Ch,1Bh,1Eh,3Ch,04
                      	
                      	;******************item graph*******************************
                      	
  219E                	graph_key:
  219E  20283A0D0200  	 db 20h,28h,3Ah,0Dh,02,00
  21A4                	graph_door:
  21A4  3E29293D293E  	 db 3Eh,29h,29h,3Dh,29h,3Eh
  21AA  3E3F3F3F3F3E  	 db 3Eh,3Fh,3Fh,3Fh,3Fh,3Eh
  21B0                	graph_box:
  21B0  1C161A161E0E  	 db 1Ch,16h,1Ah,16h,1Eh,0Eh
  21B6                	graph_matk:
  21B6  3D0E070B1121  	 db 3Dh,0Eh,07h,0Bh,11h,21h
  21BC                	graph_boot:
  21BC  20303E3E140A  	 db 20h,30h,3Eh,3Eh,14h,0Ah
  21C2                	graph_po:
  21C2  302827272830  	 db 30h,28h,27h,27h,28h,30h
  21C8                	graph_rod
  21C8  030304081020  	 db 03h,03h,04h,08h,10h,20h
  21CE                	graph_brns:
  21CE  30281C322A3C  	 db 30h,28h,1Ch,32h,2Ah,3Ch
  21D4                	graph_kndl:
  21D4  0020203A2020  	 db 00,20h,20h,3Ah,20h,20h
  21DA                	graph_armor:
  21DA  010F3A2E3A0F  	 db 01,0Fh,3Ah,2Eh,3Ah,0Fh
  21E0                	graph_sword:
  21E0  03072E3C182C  	 db 03,07h,2Eh,3Ch,18h,2Ch
  21E6                	graph_shield:
  21E6  1F33272D391F  	 db 1Fh,33h,27h,2Dh,39h,1Fh
  21EC                	graph__meis:
  21EC  1E1F0F1F3B30  	 db 1Eh,1Fh,0Fh,1Fh,3Bh,30h
  21F2                	graph_gnt:
  21F2  0506070E1A3C  	 db 05,06,07,0Eh,1Ah,3Ch
  21F8                	graph_hlmt:
  21F8  1D263232261D  	 db 1Dh,26h,32h,32h,26h,1Dh
  21FE                	graph_nec:
  21FE  0C3231110B04  	 db 0Ch,32h,31h,11h,0Bh,04h
  2204                	graph_meis:
  2204  0D0A0D1F3830  	 db 0Dh,0Ah,0Dh,1Fh,38h,30h
                      	
                      	
                      	
                      	
  220A                	dammy:
                      	;1:sraim count
                      	;2:spell count
  220A  000000000000  	 db 0,0,0,0,0,0
  2210  000000000000  	 db 0,0,0,0,0,0
  2216  000000000000  	 db 0,0,0,0,0,0
  221C  000000000000  	 db 0,0,0,0,0,0
                      	;************************************Data**************************************
  2222                	obj_1:
                      	;1
  2222  01010101010101	 db 1,1,1,1,1,1,1,1,83h,84h,85h,8fh,0
  222F  01010101010102	 db 1,1,1,1,1,1,2,2,83h,84h,85h,8fh,0
  223C  21210101010183	 db 21h,21h,1,1,1,1,83h,84h,85h,8fh,0
  2247  02020202020211	 db 2,2,2,2,2,2,11h,83h,84h,85h,8fh,0
  2253  01010101111111	 db 1,1,1,1,11h,11h,11h,11h,11h,83h,84h,85h,8fh,0
  2261  01010101010101	 db 1,1,1,1,1,1,1,1,83h,84h,85h,8fh,0
  226E  01010101010101	 db 1,1,1,1,1,1,1,1,83h,84h,85h,8fh,0
  227B  01010101010101	 db 1,1,1,1,1,1,1,1,83h,84h,85h,8fh,0
  2288  01010101010101	 db 1,1,1,1,1,1,1,1,83h,84h,85h,8fh,0
  2295  03030303030383	 db 3,3,3,3,3,3,83h,84h,85h,8fh,0
                      	;11
  22A0  01010101010101	 db 1,1,1,1,1,1,1,1,83h,84h,85h,8fh,0
  22AD  02021313458384	 db 2,2,13h,13h,45h,83h,84h,85h,8fh,0
  22B7  11110404040404	 db 11h,11h,4,4,4,4,4,83h,84h,85h,8fh,0
  22C3  02020202020211	 db 2,2,2,2,2,2,11h,83h,84h,85h,8fh,0
  22CF  21222204048384	 db 21h,22h,22h,4,4,83h,84h,85h,8fh,0
  22D9  01010101010101	 db 1,1,1,1,1,1,1,1,83h,84h,85h,8fh,0
  22E6  01010101010101	 db 1,1,1,1,1,1,1,1,83h,84h,85h,8fh,0
  22F3  01010101010101	 db 1,1,1,1,1,1,1,1,83h,84h,85h,8fh,0
  2300  01010101010101	 db 1,1,1,1,1,1,1,1,83h,84h,85h,8fh,0
  230D  13131346222222	 db 13h,13h,13h,46h,22h,22h,22h,22h,83h,84h,85h,8fh,0
                      	;21
  231A  01010101010101	 db 1,1,1,1,1,1,1,1,83h,84h,85h,8fh,0
  2327  02021313458384	 db 2,2,13h,13h,45h,83h,84h,85h,8fh,0
  2331  11110404040404	 db 11h,11h,4,4,4,4,4,83h,84h,85h,8fh,0
  233D  02020202020211	 db 2,2,2,2,2,2,11h,83h,84h,85h,8fh,0
  2349  21222204048384	 db 21h,22h,22h,4,4,83h,84h,85h,8fh,0
  2353  13131313248384	 db 13h,13h,13h,13h,24h,83h,84h,85h,8fh,0
  235D  01010101010101	 db 1,1,1,1,1,1,1,1,83h,84h,85h,8fh,0
  236A  01010101010101	 db 1,1,1,1,1,1,1,1,83h,84h,85h,8fh,0
  2377  01010101010101	 db 1,1,1,1,1,1,1,1,83h,84h,85h,8fh,0
  2384  03030303030303	 db 3,3,3,3,3,3,3,83h,84h,85h,8fh,0
                      	
                      	
  2390                	Map_data:;96+105=201byte
                      	 
                      	 
  2390  00008080800000	 db f,f,t,t,t,f,f,f,f,f,f,t,f,t,f,f
  23A0  00000080008000	 db f,f,f,t,f,t,f,t,f,t,t,f,t,t,f,t
  23B0  80008080000080	 db t,f,t,t,f,f,t,f,f,f,f,f,t,f,f,t
  23C0  00008080808000	 db f,f,t,t,t,t,f,t,f,t,f,f,f,t,f,f
  23D0  00008080808000	 db f,f,t,t,t,t,f,t,t,f,f,t,f,t,f,t
  23E0  80008000008000	 db t,f,t,f,f,t,f,f,t,t,f,t,t,t,f,t
                      	
  23F0  80000000000080	 db t,f,f,f,f,f,t,f,t,t,f,f,f,f,t
  23FF  00800000808000	 db f,t,f,f,t,t,f,t,f,f,f,t,f,t,f
  240E  80800080800000	 db t,t,f,t,t,f,f,t,t,t,t,f,t,t,f
  241D  80800000008080	 db t,t,f,f,f,t,t,t,f,f,t,t,f,t,f
  242C  80000000800080	 db t,f,f,f,t,f,t,f,t,t,t,t,t,f,t
  243B  00008000000000	 db f,f,t,f,f,f,f,f,f,t,f,f,t,f,f
  244A  00800080008080	 db f,t,f,t,f,t,t,f,f,f,f,f,t,f,f
                      	 
  2459  00000000000000	 db f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f;d
  2469  00000000000000	 db f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f
  2479  00000000000000	 db f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f
  2489  00000000000000	 db f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f
  2499  00000000000000	 db f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f
  24A9  00000000000000	 db f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f
                      	
  24B9  00000000000000	 db f,f,f,f,f,f,f,f,f,f,f,f,f,f,f
  24C8  00000000000000	 db f,f,f,f,f,f,f,f,f,f,f,f,f,f,f
  24D7  00000000000000	 db f,f,f,f,f,f,f,f,f,f,f,f,f,f,f
  24E6  00000000000000	 db f,f,f,f,f,f,f,f,f,f,f,f,f,f,f
  24F5  00000000000000	 db f,f,f,f,f,f,f,f,f,f,f,f,f,f,f
  2504  00000000000000	 db f,f,f,f,f,f,f,f,f,f,f,f,f,f,f
  2513  00000000000000	 db f,f,f,f,f,f,f,f,f,f,f,f,f,f,f
  2522                	 ds 201*59
                      	 
  5375                	hp_table1:
  5375  01010101010101	 db 1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1
  5385                	hp_table2:
  5385  01010101181818	 db 1,1,1,1,24,24,24,1,1
  538E                	hp_table3:
  538E  18303060609060	 db 24,48,48,96,96,144,96
  5395                	hp_table4:
  5395  30507001080808	 db 48,80,112,1,8,8,8,96
  539D                	hp_table5:
  539D  01010101010101	 db 1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,10110000b
                      	 
                      	;**********************************Variable**************************************
  53AD  00            	floor:db 0
  53AE  0000          	pdoor_xy:dw 0		;83h
  53B0  0000          	pkey_xy:dw 0		;85h
  53B2  0000          	pgil_xy:dw 0		;84h,8fh
  53B4                	obj:ds 48
  53E4                	obj_hp:ds 48
  5414                	obj_wp:ds 48
  5444                	obj_st:ds 48
  5474                	obj_xy:ds 96;(x,y&d)
  54D4                	obj_st2:ds 48
  5504                	obj_st3:ds 48
                      	
  5534  00            	gil_button:db 0
  5535  00            	gil_hp:db 0
  5536  00            	gil_wp:db 0
  5537  00            	gil_st1:db 0	;00 or ffh:right foot or left foot
  5538  00            	gil_st2:db 0	;bit 0-6:counter,bit 7:sword set,if bit 7 enable and bit 0-6 > 0 dec (st2)
                      			;
  5539  00            	gil_matk:db 0	;1:c,2:s,3:g,0:none
  553A  00            	gil_matk_count:db 0	;matk use count.it is deced when use a matk.
  553B  00            	gil_bt:db 0	;0ffh is dash enable.
  553C  00            	gil_sword:db 0	;1:dragon,2:ex
  553D  00            	gil_armor:db 0	;1 is hyper.
  553E  00            	gil_gunt:db 0	;1 is hyper.
  553F  00            	gil_shield:db 0	;1 is hyper.
  5540  00            	gil_neck:db 0	;1:g,2:r,3:b.
                      	
  5541                	gil_xy:ds 2
  5543                	gil_dblock:ds 2
                      	
  5545                	Item:
  5545                	matk:
  5545  00            	 db 0
  5546                	boot:
  5546  00            	 db 0
  5547                	sword:
  5547  00            	 db 0:
  5548                	armor:
  5548  00            	 db 0:
  5549                	gnt:
  5549  00            	 db 0:
  554A                	shield:
  554A  00            	 db 0
  554B                	hlmt:
  554B  00            	 db 0
  554C                	rod:
  554C  00            	 db 0
  554D                	book:
  554D  00            	 db 0
  554E                	kndl:
  554E  00            	 db 0
  554F                	brns:
  554F  00            	 db 0
  5550                	posion:
  5550  00            	 db 0
  5551                	key:
  5551  00            	 db 0
  5552                	nec:
  5552  00            	 db 0
  5553                	meis
  5553  00            	 db 0
                      	
  5554                	end
