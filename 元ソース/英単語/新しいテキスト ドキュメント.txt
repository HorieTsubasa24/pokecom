
;［  範囲乱数公式  ］
;最小値 + (int)( rand() * (最大値 - 最小値 + 1.0) / (1.0 + RAND_MAX) )


randomeA:;HL=最大の数	brakeALL not IX,IY
 ld L,A
 ld H,0
randomeHL:;最大の数以下の乱数
 push HL
 call rand16
 pop DE	;HL=rand DE=最大数
 inc DE
 ld BC,661h
randomelp:
 exx
 call rand
 exx
 cp 80h
 jr c,randome2
ranrome1:
 push DE
 ld DE,1
 add HL,DE
 pop DE
 jp randomelp2
randome2:
 push DE
 ld DE,1
 or A
 sbc HL,DE
 pop DE
 jr nc,randomelp3
 push DE
 pop HL
 dec HL
randomelp2:
 call cpHLDE
 jr c,randomelp3
 ld HL,0
randomelp3:
 push HL
 push DE
 push BC
 pop HL
 ld DE,1
 or A
 sbc HL,DE
 push HL
 pop BC
 pop DE
 pop HL
 jr nz,randomelp
 ret
 